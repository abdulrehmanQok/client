/*!
 * jQuery JavaScript Library v1.11.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-05-01T17:42Z
 */
!function(global,factory){"object"==typeof module&&"object"==typeof module.exports?module.exports=global.document?factory(global,!0):function(w){if(!w.document)throw new Error("jQuery requires a window with a document");return factory(w)}:factory(global)}("undefined"!=typeof window?window:this,(function(window,noGlobal){var deletedIds=[],slice=deletedIds.slice,concat=deletedIds.concat,push=deletedIds.push,indexOf=deletedIds.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,support={},jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);return"function"!==type&&!jQuery.isWindow(obj)&&(!(1!==obj.nodeType||!length)||("array"===type||0===length||"number"==typeof length&&length>0&&length-1 in obj))}jQuery.fn=jQuery.prototype={jquery:"1.11.1",constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return null!=num?num<0?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback,args){return jQuery.each(this,callback,args)},map:function(callback){return this.pushStack(jQuery.map(this,(function(elem,i){return callback.call(elem,i,elem)})))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor(null)},push,sort:deletedIds.sort,splice:deletedIds.splice},jQuery.extend=jQuery.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"==typeof target||jQuery.isFunction(target)||(target={}),i===length&&(target=this,i--);i<length;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],target!==(copy=options[name])&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target},jQuery.extend({expando:"jQuery"+("1.11.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return null!=obj&&obj==obj.window},isNumeric:function(obj){return!jQuery.isArray(obj)&&obj-parseFloat(obj)>=0},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},isPlainObject:function(obj){var key;if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(support.ownLast)for(key in obj)return hasOwn.call(obj,key);for(key in obj);return void 0===key||hasOwn.call(obj,key)},type:function(obj){return null==obj?obj+"":"object"==typeof obj||"function"==typeof obj?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(data){data&&jQuery.trim(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray)for(;i<length&&!1!==callback.apply(obj[i],args);i++);else for(i in obj)if(!1===callback.apply(obj[i],args))break}else if(isArray)for(;i<length&&!1!==callback.call(obj[i],i,obj[i]);i++);else for(i in obj)if(!1===callback.call(obj[i],i,obj[i]))break;return obj},trim:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArraylike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):push.call(ret,arr)),ret},inArray:function(elem,arr,i){var len;if(arr){if(indexOf)return indexOf.call(arr,elem,i);for(len=arr.length,i=i?i<0?Math.max(0,len+i):i:0;i<len;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){for(var len=+second.length,j=0,i=first.length;j<len;)first[i++]=second[j++];if(len!=len)for(;void 0!==second[j];)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,invert){for(var matches=[],i=0,length=elems.length,callbackExpect=!invert;i<length;i++)!callback(elems[i],i)!==callbackExpect&&matches.push(elems[i]);return matches},map:function(elems,callback,arg){var value,i=0,length=elems.length,ret=[];if(isArraylike(elems))for(;i<length;i++)null!=(value=callback(elems[i],i,arg))&&ret.push(value);else for(i in elems)null!=(value=callback(elems[i],i,arg))&&ret.push(value);return concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,proxy,tmp;if("string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn))return args=slice.call(arguments,2),proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))},proxy.guid=fn.guid=fn.guid||jQuery.guid++,proxy},now:function(){return+new Date},support}),jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}));var Sizzle=
/*!
 * Sizzle CSS Selector Engine v1.10.19
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-04-18
 */
function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+-new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},strundefined="undefined",hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){for(var i=0,len=this.length;i<len;i++)if(this[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\[[\\x20\\t\\r\\n\\f]*("+characterEncoding+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rtrim=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),rcomma=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),rcombinators=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),rattributeQuotes=new RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!=high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),results=results||[],!selector||"string"!=typeof selector)return results;if(1!==(nodeType=(context=context||document).nodeType)&&9!==nodeType)return[];if(documentIsHTML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m))||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=9===nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&testContext(context.parentNode)||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];return function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return!1}finally{div.parentNode&&div.parentNode.removeChild(div),div=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=attrs.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){return"input"===elem.nodeName.toLowerCase()&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction((function(argument){return argument=+argument,markFunction((function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))}))}))}function testContext(context){return context&&typeof context.getElementsByTagName!==strundefined&&context}for(i in support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},setDocument=Sizzle.setDocument=function(node){var hasCompare,doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;return doc!==document&&9===doc.nodeType&&doc.documentElement?(document=doc,docElem=doc.documentElement,documentIsHTML=!isXML(doc),parent&&parent!==parent.top&&(parent.addEventListener?parent.addEventListener("unload",(function(){setDocument()}),!1):parent.attachEvent&&parent.attachEvent("onunload",(function(){setDocument()}))),support.attributes=assert((function(div){return div.className="i",!div.getAttribute("className")})),support.getElementsByTagName=assert((function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length})),support.getElementsByClassName=rnative.test(doc.getElementsByClassName)&&assert((function(div){return div.innerHTML="<div class='a'></div><div class='a i'></div>",div.firstChild.className="i",2===div.getElementsByClassName("i").length})),support.getById=assert((function(div){return docElem.appendChild(div).id=expando,!doc.getElementsByName||!doc.getElementsByName(expando).length})),support.getById?(Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!==strundefined)return context.getElementsByTagName(tag)}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!==strundefined&&documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(doc.querySelectorAll))&&(assert((function(div){div.innerHTML="<select msallowclip=''><option selected=''></option></select>",div.querySelectorAll("[msallowclip^='']").length&&rbuggyQSA.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+booleans+")"),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked")})),assert((function(div){var input=doc.createElement("input");input.setAttribute("type","hidden"),div.appendChild(input).setAttribute("name","D"),div.querySelectorAll("[name=d]").length&&rbuggyQSA.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")}))),(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert((function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)})),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare||(1&(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)?-1:b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+className+"("+whitespace+"|$)"))&&classCache(className,(function(elem){return pattern.test("string"==typeof elem.className&&elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")}))},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result+" ").indexOf(check)>-1:"|="===operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(nodeIndex=(cache=(outerCache=parent[expando]||(parent[expando]={}))[type]||[])[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return(diff-=last)===first||diff%first==0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction((function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)seed[idx=indexOf.call(seed,matched[i])]=!(matches[idx]=matched[i])})):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction((function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction((function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))})):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),!results.pop()}})),has:markFunction((function(selector){return function(elem){return Sizzle(selector,elem).length>0}})),contains:markFunction((function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}})),lang:markFunction((function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return(elemLang=elemLang.toLowerCase())===lang||0===elemLang.indexOf(lang+"-")}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}})),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return!1===elem.disabled},disabled:function(elem){return!0===elem.disabled},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,!0===elem.selected},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo((function(){return[0]})),last:createPositionalPseudo((function(matchIndexes,length){return[length-1]})),eq:createPositionalPseudo((function(matchIndexes,length,argument){return[argument<0?argument+length:argument]})),even:createPositionalPseudo((function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes})),odd:createPositionalPseudo((function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes})),lt:createPositionalPseudo((function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes})),gt:createPositionalPseudo((function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes}))}},Expr.pseudos.nth=Expr.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements){if((oldCache=(outerCache=elem[expando]||(elem[expando]={}))[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if(outerCache[dir]=newCache,newCache[2]=matcher(elem,context,xml))return!0}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++)(elem=unmatched[i])&&(filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i)));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction((function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||function(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)}))}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator((function(elem){return elem===checkContext}),implicitRelative,!0),matchAnyContext=addCombinator((function(elem){return indexOf.call(checkContext,elem)>-1}),implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if((matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches))[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}return setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){for(type in matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length)),Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(match||(match=tokenize(selector)),i=match.length;i--;)(cached=matcherFromTokens(match[i]))[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,function(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context!==document&&context);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}(elementMatchers,setMatchers)),cached.selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if((tokens=match[0]=match[0].slice(0)).length>2&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(!(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0]))return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),!(selector=seed.length&&toSelector(tokens)))return push.apply(results,seed),results;break}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=assert((function(div1){return 1&div1.compareDocumentPosition(document.createElement("div"))})),assert((function(div){return div.innerHTML="<a href='#'></a>","#"===div.firstChild.getAttribute("href")}))||addHandle("type|href|height|width",(function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,"type"===name.toLowerCase()?1:2)})),support.attributes&&assert((function(div){return div.innerHTML="<input/>",div.firstChild.setAttribute("value",""),""===div.firstChild.getAttribute("value")}))||addHandle("value",(function(elem,name,isXML){if(!isXML&&"input"===elem.nodeName.toLowerCase())return elem.defaultValue})),assert((function(div){return null==div.getAttribute("disabled")}))||addHandle(booleans,(function(elem,name,isXML){var val;if(!isXML)return!0===elem[name]?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null})),Sizzle}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,(function(elem,i){return!!qualifier.call(elem,i,elem)!==not}));if(qualifier.nodeType)return jQuery.grep(elements,(function(elem){return elem===qualifier!==not}));if("string"==typeof qualifier){if(risSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,(function(elem){return jQuery.inArray(elem,qualifier)>=0!==not}))}jQuery.filter=function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,(function(elem){return 1===elem.nodeType})))},jQuery.fn.extend({find:function(selector){var i,ret=[],self=this,len=self.length;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter((function(){for(i=0;i<len;i++)if(jQuery.contains(self[i],this))return!0})));for(i=0;i<len;i++)jQuery.find(selector,self[i],ret);return(ret=this.pushStack(len>1?jQuery.unique(ret):ret)).selector=this.selector?this.selector+" "+selector:selector,ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length}});var rootjQuery,document=window.document,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(jQuery.fn.init=function(selector,context){var match,elem;if(!selector)return this;if("string"==typeof selector){if(!(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3?[null,selector,null]:rquickExpr.exec(selector))||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}if((elem=document.getElementById(match[2]))&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this}return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?void 0!==rootjQuery.ready?rootjQuery.ready(selector):selector(jQuery):(void 0!==selector.selector&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))}).prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};function sibling(cur,dir){do{cur=cur[dir]}while(cur&&1!==cur.nodeType);return cur}jQuery.extend({dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(void 0===until||1!==cur.nodeType||!jQuery(cur).is(until));)1===cur.nodeType&&matched.push(cur),cur=cur[dir];return matched},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&r.push(n);return r}}),jQuery.fn.extend({has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter((function(){for(i=0;i<len;i++)if(jQuery.contains(this,targets[i]))return!0}))},closest:function(selectors,context){for(var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;i<l;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(pos?pos.index(cur)>-1:1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)},index:function(elem){return elem?"string"==typeof elem?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},(function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);return"Until"!==name.slice(-5)&&(selector=until),selector&&"string"==typeof selector&&(ret=jQuery.filter(selector,ret)),this.length>1&&(guaranteedUnique[name]||(ret=jQuery.unique(ret)),rparentsprev.test(name)&&(ret=ret.reverse())),this.pushStack(ret)}}));var readyList,rnotwhite=/\S+/g,optionsCache={};function detach(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1)):(document.detachEvent("onreadystatechange",completed),window.detachEvent("onload",completed))}function completed(){(document.addEventListener||"load"===event.type||"complete"===document.readyState)&&(detach(),jQuery.ready())}jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||function(options){var object=optionsCache[options]={};return jQuery.each(options.match(rnotwhite)||[],(function(_,flag){object[flag]=!0})),object}(options):jQuery.extend({},options);var firing,memory,fired,firingLength,firingIndex,firingStart,list=[],stack=!options.once&&[],fire=function(data){for(memory=options.memory&&data,fired=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length,firing=!0;list&&firingIndex<firingLength;firingIndex++)if(!1===list[firingIndex].apply(data[0],data[1])&&options.stopOnFalse){memory=!1;break}firing=!1,list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function(){if(list){var start=list.length;!function add(args){jQuery.each(args,(function(_,arg){var type=jQuery.type(arg);"function"===type?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==type&&add(arg)}))}(arguments),firing?firingLength=list.length:memory&&(firingStart=start,fire(memory))}return this},remove:function(){return list&&jQuery.each(arguments,(function(_,arg){for(var index;(index=jQuery.inArray(arg,list,index))>-1;)list.splice(index,1),firing&&(index<=firingLength&&firingLength--,index<=firingIndex&&firingIndex--)})),this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!(!list||!list.length)},empty:function(){return list=[],firingLength=0,this},disable:function(){return list=stack=memory=void 0,this},disabled:function(){return!list},lock:function(){return stack=void 0,memory||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return!list||fired&&!stack||(args=[context,(args=args||[]).slice?args.slice():args],firing?stack.push(args):fire(args)),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred((function(newDefer){jQuery.each(tuples,(function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]]((function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)}))})),fns=null})).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return promise.pipe=promise.then,jQuery.each(tuples,(function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add,stateString&&list.add((function(){state=stateString}),tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith})),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(subordinate){var progressValues,progressContexts,resolveContexts,i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this,values[i]=arguments.length>1?slice.call(arguments):value,values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)}};if(length>1)for(progressValues=new Array(length),progressContexts=new Array(length),resolveContexts=new Array(length);i<length;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}}),jQuery.fn.ready=function(fn){return jQuery.ready.promise().done(fn),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){if(!(!0===wait?--jQuery.readyWait:jQuery.isReady)){if(!document.body)return setTimeout(jQuery.ready);jQuery.isReady=!0,!0!==wait&&--jQuery.readyWait>0||(readyList.resolveWith(document,[jQuery]),jQuery.fn.triggerHandler&&(jQuery(document).triggerHandler("ready"),jQuery(document).off("ready")))}}}),jQuery.ready.promise=function(obj){if(!readyList)if(readyList=jQuery.Deferred(),"complete"===document.readyState)setTimeout(jQuery.ready);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1);else{document.attachEvent("onreadystatechange",completed),window.attachEvent("onload",completed);var top=!1;try{top=null==window.frameElement&&document.documentElement}catch(e){}top&&top.doScroll&&function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}detach(),jQuery.ready()}}()}return readyList.promise(obj)};var i;for(i in jQuery(support))break;support.ownLast="0"!==i,support.inlineBlockNeedsLayout=!1,jQuery((function(){var val,div,body,container;(body=document.getElementsByTagName("body")[0])&&body.style&&(div=document.createElement("div"),(container=document.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),void 0!==div.style.zoom&&(div.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",support.inlineBlockNeedsLayout=val=3===div.offsetWidth,val&&(body.style.zoom=1)),body.removeChild(container))})),function(){var div=document.createElement("div");if(null==support.deleteExpando){support.deleteExpando=!0;try{delete div.test}catch(e){support.deleteExpando=!1}}div=null}(),jQuery.acceptData=function(elem){var noData=jQuery.noData[(elem.nodeName+" ").toLowerCase()],nodeType=+elem.nodeType||1;return(1===nodeType||9===nodeType)&&(!noData||!0!==noData&&elem.getAttribute("classid")===noData)};var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;function dataAttr(elem,key,data){if(void 0===data&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if("string"==typeof(data=elem.getAttribute(name))){try{data="true"===data||"false"!==data&&("null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data)}catch(e){}jQuery.data(elem,key,data)}else data=void 0}return data}function isEmptyDataObject(obj){var name;for(name in obj)if(("data"!==name||!jQuery.isEmptyObject(obj[name]))&&"toJSON"!==name)return!1;return!0}function internalData(elem,name,data,pvt){if(jQuery.acceptData(elem)){var ret,thisCache,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if(id&&cache[id]&&(pvt||cache[id].data)||void 0!==data||"string"!=typeof name)return id||(id=isNode?elem[internalKey]=deletedIds.pop()||jQuery.guid++:internalKey),cache[id]||(cache[id]=isNode?{}:{toJSON:jQuery.noop}),"object"!=typeof name&&"function"!=typeof name||(pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name)),thisCache=cache[id],pvt||(thisCache.data||(thisCache.data={}),thisCache=thisCache.data),void 0!==data&&(thisCache[jQuery.camelCase(name)]=data),"string"==typeof name?null==(ret=thisCache[name])&&(ret=thisCache[jQuery.camelCase(name)]):ret=thisCache,ret}}function internalRemoveData(elem,name,pvt){if(jQuery.acceptData(elem)){var thisCache,i,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(cache[id]){if(name&&(thisCache=pvt?cache[id]:cache[id].data)){i=(name=jQuery.isArray(name)?name.concat(jQuery.map(name,jQuery.camelCase)):name in thisCache||(name=jQuery.camelCase(name))in thisCache?[name]:name.split(" ")).length;for(;i--;)delete thisCache[name[i]];if(pvt?!isEmptyDataObject(thisCache):!jQuery.isEmptyObject(thisCache))return}(pvt||(delete cache[id].data,isEmptyDataObject(cache[id])))&&(isNode?jQuery.cleanData([elem],!0):support.deleteExpando||cache!=cache.window?delete cache[id]:cache[id]=null)}}}jQuery.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(elem){return!!(elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando])&&!isEmptyDataObject(elem)},data:function(elem,name,data){return internalData(elem,name,data)},removeData:function(elem,name){return internalRemoveData(elem,name)},_data:function(elem,name,data){return internalData(elem,name,data,!0)},_removeData:function(elem,name){return internalRemoveData(elem,name,!0)}}),jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(void 0===key){if(this.length&&(data=jQuery.data(elem),1===elem.nodeType&&!jQuery._data(elem,"parsedAttrs"))){for(i=attrs.length;i--;)attrs[i]&&0===(name=attrs[i].name).indexOf("data-")&&dataAttr(elem,name=jQuery.camelCase(name.slice(5)),data[name]);jQuery._data(elem,"parsedAttrs",!0)}return data}return"object"==typeof key?this.each((function(){jQuery.data(this,key)})):arguments.length>1?this.each((function(){jQuery.data(this,key,value)})):elem?dataAttr(elem,key,jQuery.data(elem,key)):void 0},removeData:function(key){return this.each((function(){jQuery.removeData(this,key)}))}}),jQuery.extend({queue:function(elem,type,data){var queue;if(elem)return type=(type||"fx")+"queue",queue=jQuery._data(elem,type),data&&(!queue||jQuery.isArray(data)?queue=jQuery._data(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type);"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,(function(){jQuery.dequeue(elem,type)}),hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add((function(){jQuery._removeData(elem,type+"queue"),jQuery._removeData(elem,key)}))})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):void 0===data?this:this.each((function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)}))},dequeue:function(type){return this.each((function(){jQuery.dequeue(this,type)}))},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};for("string"!=typeof type&&(obj=type,type=void 0),type=type||"fx";i--;)(tmp=jQuery._data(elements[i],type+"queueHooks"))&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cssExpand=["Top","Right","Bottom","Left"],isHidden=function(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)},access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=null==key;if("object"===jQuery.type(key))for(i in chainable=!0,key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw);else if(void 0!==value&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(raw?(fn.call(elems,value),fn=null):(bulk=fn,fn=function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;i<length;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},rcheckableType=/^(?:checkbox|radio)$/i;!function(){var input=document.createElement("input"),div=document.createElement("div"),fragment=document.createDocumentFragment();if(div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",support.leadingWhitespace=3===div.firstChild.nodeType,support.tbody=!div.getElementsByTagName("tbody").length,support.htmlSerialize=!!div.getElementsByTagName("link").length,support.html5Clone="<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,input.type="checkbox",input.checked=!0,fragment.appendChild(input),support.appendChecked=input.checked,div.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!div.cloneNode(!0).lastChild.defaultValue,fragment.appendChild(div),div.innerHTML="<input type='radio' checked='checked' name='t'/>",support.checkClone=div.cloneNode(!0).cloneNode(!0).lastChild.checked,support.noCloneEvent=!0,div.attachEvent&&(div.attachEvent("onclick",(function(){support.noCloneEvent=!1})),div.cloneNode(!0).click()),null==support.deleteExpando){support.deleteExpando=!0;try{delete div.test}catch(e){support.deleteExpando=!1}}}(),function(){var i,eventName,div=document.createElement("div");for(i in{submit:!0,change:!0,focusin:!0})eventName="on"+i,(support[i+"Bubbles"]=eventName in window)||(div.setAttribute(eventName,"t"),support[i+"Bubbles"]=!1===div.attributes[eventName].expando);div=null}();var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop());return safeFrag}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var tmp,events,t,handleObjIn,special,eventHandle,handleObj,handlers,type,namespaces,origType,elemData=jQuery._data(elem);if(elemData){for(handler.handler&&(handler=(handleObjIn=handler).handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||(eventHandle=elemData.handle=function(e){return void 0===jQuery||e&&jQuery.event.triggered===e.type?void 0:jQuery.event.dispatch.apply(eventHandle.elem,arguments)},eventHandle.elem=elem),t=(types=(types||"").match(rnotwhite)||[""]).length;t--;)type=origType=(tmp=rtypenamespace.exec(types[t])||[])[1],namespaces=(tmp[2]||"").split(".").sort(),type&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type,origType,data,handler,guid:handler.guid,selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||((handlers=events[type]=[]).delegateCount=0,special.setup&&!1!==special.setup.call(elem,data,namespaces,eventHandle)||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0);elem=null}},remove:function(elem,types,handler,selector,mappedTypes){var j,handleObj,tmp,origCount,t,events,special,handlers,type,namespaces,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(elemData&&(events=elemData.events)){for(t=(types=(types||"").match(rnotwhite)||[""]).length;t--;)if(type=origType=(tmp=rtypenamespace.exec(types[t])||[])[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},handlers=events[type=(selector?special.delegateType:special.bindType)||type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&!1!==special.teardown.call(elem,namespaces,elemData.handle)||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,jQuery._removeData(elem,"events"))}},trigger:function(event,data,elem,onlyHandlers){var handle,ontype,cur,bubbleType,special,tmp,i,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(type.indexOf(".")>=0&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,(event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event)).isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=void 0,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||!1!==special.trigger.apply(elem,data))){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=i>1?bubbleType:special.bindType||type,(handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"))&&handle.apply(cur,data),(handle=ontype&&cur[ontype])&&handle.apply&&jQuery.acceptData(cur)&&(event.result=handle.apply(cur,data),!1===event.result&&event.preventDefault());if(event.type=type,!onlyHandlers&&!event.isDefaultPrevented()&&(!special._default||!1===special._default.apply(eventPath.pop(),data))&&jQuery.acceptData(elem)&&ontype&&elem[type]&&!jQuery.isWindow(elem)){(tmp=elem[ontype])&&(elem[ontype]=null),jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=void 0,tmp&&(elem[ontype]=tmp)}return event.result}},dispatch:function(event){event=jQuery.event.fix(event);var i,ret,handleObj,matched,j,handlerQueue,args=slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if(args[0]=event,event.delegateTarget=this,!special.preDispatch||!1!==special.preDispatch.call(this,event)){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)event.namespace_re&&!event.namespace_re.test(handleObj.namespace)||(event.handleObj=handleObj,event.data=handleObj.data,void 0!==(ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args))&&!1===(event.result=ret)&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var sel,handleObj,matches,i,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!=this;cur=cur.parentNode||this)if(1===cur.nodeType&&(!0!==cur.disabled||"click"!==event.type)){for(matches=[],i=0;i<delegateCount;i++)void 0===matches[sel=(handleObj=handlers[i]).selector+" "]&&(matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<handlers.length&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)}),handlerQueue},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];for(fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}),copy=fixHook.props?this.props.concat(fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)event[prop=copy[i]]=originalEvent[prop];return event.target||(event.target=originalEvent.srcElement||document),3===event.target.nodeType&&(event.target=event.target.parentNode),event.metaKey=!!event.metaKey,fixHook.filter?fixHook.filter(event,originalEvent):event},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var body,eventDoc,doc,button=original.button,fromElement=original.fromElement;return null==event.pageX&&null!=original.clientX&&(doc=(eventDoc=event.target.ownerDocument||document).documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement),event.which||void 0===button||(event.which=1&button?1:2&button?3:4&button?2:0),event}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(jQuery.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){void 0!==event.result&&event.originalEvent&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){var name="on"+type;elem.detachEvent&&(void 0===elem[name]&&(elem[name]=null),elem.detachEvent(name,handle))},jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||void 0===src.defaultPrevented&&!1===src.returnValue?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,related=event.relatedTarget,handleObj=event.handleObj;return related&&(related===this||jQuery.contains(this,related))||(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}})),support.submitBubbles||(jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.add(this,"click._submit keypress._submit",(function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:void 0;form&&!jQuery._data(form,"submitBubbles")&&(jQuery.event.add(form,"submit._submit",(function(event){event._submit_bubble=!0})),jQuery._data(form,"submitBubbles",!0))}))},postDispatch:function(event){event._submit_bubble&&(delete event._submit_bubble,this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event,!0))},teardown:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.remove(this,"._submit")}}),support.changeBubbles||(jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(jQuery.event.add(this,"propertychange._change",(function(event){"checked"===event.originalEvent.propertyName&&(this._just_changed=!0)})),jQuery.event.add(this,"click._change",(function(event){this._just_changed&&!event.isTrigger&&(this._just_changed=!1),jQuery.event.simulate("change",this,event,!0)}))),!1;jQuery.event.add(this,"beforeactivate._change",(function(e){var elem=e.target;rformElems.test(elem.nodeName)&&!jQuery._data(elem,"changeBubbles")&&(jQuery.event.add(elem,"change._change",(function(event){!this.parentNode||event.isSimulated||event.isTrigger||jQuery.event.simulate("change",this.parentNode,event,!0)})),jQuery._data(elem,"changeBubbles",!0))}))},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type)return event.handleObj.handler.apply(this,arguments)},teardown:function(){return jQuery.event.remove(this,"._change"),!rformElems.test(this.nodeName)}}),support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},(function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix);attaches||doc.addEventListener(orig,handler,!0),jQuery._data(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix)-1;attaches?jQuery._data(doc,fix,attaches):(doc.removeEventListener(orig,handler,!0),jQuery._removeData(doc,fix))}}})),jQuery.fn.extend({on:function(types,selector,data,fn,one){var type,origFn;if("object"==typeof types){for(type in"string"!=typeof selector&&(data=data||selector,selector=void 0),types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=void 0):null==fn&&("string"==typeof selector?(fn=data,data=void 0):(fn=data,data=selector,selector=void 0)),!1===fn)fn=returnFalse;else if(!fn)return this;return 1===one&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each((function(){jQuery.event.add(this,types,fn,data,selector)}))},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"==typeof types){for(type in types)this.off(type,selector,types[type]);return this}return!1!==selector&&"function"!=typeof selector||(fn=selector,selector=void 0),!1===fn&&(fn=returnFalse),this.each((function(){jQuery.event.remove(this,types,fn,selector)}))},trigger:function(type,data){return this.each((function(){jQuery.event.trigger(type,data,this)}))},triggerHandler:function(type,data){var elem=this[0];if(elem)return jQuery.event.trigger(type,data,elem,!0)}});var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},fragmentDiv=createSafeFragment(document).appendChild(document.createElement("div"));function getAll(context,tag){var elems,elem,i=0,found=void 0!==context.getElementsByTagName?context.getElementsByTagName(tag||"*"):void 0!==context.querySelectorAll?context.querySelectorAll(tag||"*"):void 0;if(!found)for(found=[],elems=context.childNodes||context;null!=(elem=elems[i]);i++)!tag||jQuery.nodeName(elem,tag)?found.push(elem):jQuery.merge(found,getAll(elem,tag));return void 0===tag||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found}function fixDefaultChecked(elem){rcheckableType.test(elem.type)&&(elem.defaultChecked=elem.checked)}function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(11!==content.nodeType?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){return elem.type=(null!==jQuery.find.attr(elem,"type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function setGlobalEval(elems,refElements){for(var elem,i=0;null!=(elem=elems[i]);i++)jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){if(1===dest.nodeType&&jQuery.hasData(src)){var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events)for(type in delete curData.handle,curData.events={},events)for(i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i]);curData.data&&(curData.data=jQuery.extend({},curData.data))}}function fixCloneNodeIssues(src,dest){var nodeName,e,data;if(1===dest.nodeType){if(nodeName=dest.nodeName.toLowerCase(),!support.noCloneEvent&&dest[jQuery.expando]){for(e in(data=jQuery._data(dest)).events)jQuery.removeEvent(dest,e,data.handle);dest.removeAttribute(jQuery.expando)}"script"===nodeName&&dest.text!==src.text?(disableScript(dest).text=src.text,restoreScript(dest)):"object"===nodeName?(dest.parentNode&&(dest.outerHTML=src.outerHTML),support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML)&&(dest.innerHTML=src.innerHTML)):"input"===nodeName&&rcheckableType.test(src.type)?(dest.defaultChecked=dest.checked=src.checked,dest.value!==src.value&&(dest.value=src.value)):"option"===nodeName?dest.defaultSelected=dest.selected=src.defaultSelected:"input"!==nodeName&&"textarea"!==nodeName||(dest.defaultValue=src.defaultValue)}}wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?clone=elem.cloneNode(!0):(fragmentDiv.innerHTML=elem.outerHTML,fragmentDiv.removeChild(clone=fragmentDiv.firstChild)),!(support.noCloneEvent&&support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0;null!=(node=srcElements[i]);++i)destElements[i]&&fixCloneNodeIssues(node,destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0;null!=(node=srcElements[i]);i++)cloneCopyEvent(node,destElements[i]);else cloneCopyEvent(elem,clone);return(destElements=getAll(clone,"script")).length>0&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),destElements=srcElements=node=null,clone},buildFragment:function(elems,context,scripts,selection){for(var j,elem,contains,tmp,tag,tbody,wrap,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;i<l;i++)if((elem=elems[i])||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||safe.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;if(!support.leadingWhitespace&&rleadingWhitespace.test(elem)&&nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0])),!support.tbody)for(j=(elem="table"!==tag||rtbody.test(elem)?"<table>"!==wrap[1]||rtbody.test(elem)?0:tmp:tmp.firstChild)&&elem.childNodes.length;j--;)jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length&&elem.removeChild(tbody);for(jQuery.merge(nodes,tmp.childNodes),tmp.textContent="";tmp.firstChild;)tmp.removeChild(tmp.firstChild);tmp=safe.lastChild}else nodes.push(context.createTextNode(elem));for(tmp&&safe.removeChild(tmp),support.appendChecked||jQuery.grep(getAll(nodes,"input"),fixDefaultChecked),i=0;elem=nodes[i++];)if((!selection||-1===jQuery.inArray(elem,selection))&&(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(safe.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts))for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return tmp=null,safe},cleanData:function(elems,acceptData){for(var elem,type,id,data,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=support.deleteExpando,special=jQuery.event.special;null!=(elem=elems[i]);i++)if((acceptData||jQuery.acceptData(elem))&&(data=(id=elem[internalKey])&&cache[id])){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);cache[id]&&(delete cache[id],deleteExpando?delete elem[internalKey]:void 0!==elem.removeAttribute?elem.removeAttribute(internalKey):elem[internalKey]=null,deletedIds.push(id))}}}),jQuery.fn.extend({text:function(value){return access(this,(function(value){return void 0===value?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))}),null,value,arguments.length)},append:function(){return this.domManip(arguments,(function(elem){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||manipulationTarget(this,elem).appendChild(elem)}))},prepend:function(){return this.domManip(arguments,(function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}}))},before:function(){return this.domManip(arguments,(function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)}))},after:function(){return this.domManip(arguments,(function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)}))},remove:function(selector,keepData){for(var elem,elems=selector?jQuery.filter(selector,this):this,i=0;null!=(elem=elems[i]);i++)keepData||1!==elem.nodeType||jQuery.cleanData(getAll(elem)),elem.parentNode&&(keepData&&jQuery.contains(elem.ownerDocument,elem)&&setGlobalEval(getAll(elem,"script")),elem.parentNode.removeChild(elem));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++){for(1===elem.nodeType&&jQuery.cleanData(getAll(elem,!1));elem.firstChild;)elem.removeChild(elem.firstChild);elem.options&&jQuery.nodeName(elem,"select")&&(elem.options.length=0)}return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null!=dataAndEvents&&dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map((function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)}))},html:function(value){return access(this,(function(value){var elem=this[0]||{},i=0,l=this.length;if(void 0===value)return 1===elem.nodeType?elem.innerHTML.replace(rinlinejQuery,""):void 0;if("string"==typeof value&&!rnoInnerhtml.test(value)&&(support.htmlSerialize||!rnoshimcache.test(value))&&(support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++)1===(elem=this[i]||{}).nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)}),null,value,arguments.length)},replaceWith:function(){var arg=arguments[0];return this.domManip(arguments,(function(elem){arg=this.parentNode,jQuery.cleanData(getAll(this)),arg&&arg.replaceChild(elem,this)})),arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,callback){args=concat.apply([],args);var first,node,hasScripts,scripts,doc,fragment,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&"string"==typeof value&&!support.checkClone&&rchecked.test(value))return this.each((function(index){var self=set.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),self.domManip(args,callback)}));if(l&&(first=(fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,this)).firstChild,1===fragment.childNodes.length&&(fragment=first),first)){for(hasScripts=(scripts=jQuery.map(getAll(fragment,"script"),disableScript)).length;i<l;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(this[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;i<hasScripts;i++)node=scripts[i],rscriptType.test(node.type||"")&&!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl&&jQuery._evalUrl(node.src):jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,"")));fragment=first=null}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(name,original){jQuery.fn[name]=function(selector){for(var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-1;i<=last;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),push.apply(ret,elems.get());return this.pushStack(ret)}}));var iframe,shrinkWrapBlocksVal,elemdisplay={};function actualDisplay(name,doc){var style,elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle&&(style=window.getDefaultComputedStyle(elem[0]))?style.display:jQuery.css(elem[0],"display");return elem.detach(),display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||("none"!==(display=actualDisplay(nodeName,doc))&&display||((doc=((iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement))[0].contentWindow||iframe[0].contentDocument).document).write(),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}support.shrinkWrapBlocks=function(){return null!=shrinkWrapBlocksVal?shrinkWrapBlocksVal:(shrinkWrapBlocksVal=!1,(body=document.getElementsByTagName("body")[0])&&body.style?(div=document.createElement("div"),(container=document.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),void 0!==div.style.zoom&&(div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",div.appendChild(document.createElement("div")).style.width="5px",shrinkWrapBlocksVal=3!==div.offsetWidth),body.removeChild(container),shrinkWrapBlocksVal):void 0);var div,body,container};var getStyles,curCSS,rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),rposition=/^(top|right|bottom|left)$/;function addGetHookIf(conditionFn,hookFn){return{get:function(){var condition=conditionFn();if(null!=condition){if(!condition)return(this.get=hookFn).apply(this,arguments);delete this.get}}}}window.getComputedStyle?(getStyles=function(elem){return elem.ownerDocument.defaultView.getComputedStyle(elem,null)},curCSS=function(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;return ret=(computed=computed||getStyles(elem))?computed.getPropertyValue(name)||computed[name]:void 0,computed&&(""!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),void 0===ret?ret:ret+""}):document.documentElement.currentStyle&&(getStyles=function(elem){return elem.currentStyle},curCSS=function(elem,name,computed){var left,rs,rsLeft,ret,style=elem.style;return null==(ret=(computed=computed||getStyles(elem))?computed[name]:void 0)&&style&&style[name]&&(ret=style[name]),rnumnonpx.test(ret)&&!rposition.test(name)&&(left=style.left,(rsLeft=(rs=elem.runtimeStyle)&&rs.left)&&(rs.left=elem.currentStyle.left),style.left="fontSize"===name?"1em":ret,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(rs.left=rsLeft)),void 0===ret?ret:ret+""||"auto"}),function(){var div,style,a,pixelPositionVal,boxSizingReliableVal,reliableHiddenOffsetsVal,reliableMarginRightVal;function computeStyleTests(){var div,body,container,contents;(body=document.getElementsByTagName("body")[0])&&body.style&&(div=document.createElement("div"),(container=document.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",pixelPositionVal=boxSizingReliableVal=!1,reliableMarginRightVal=!0,window.getComputedStyle&&(pixelPositionVal="1%"!==(window.getComputedStyle(div,null)||{}).top,boxSizingReliableVal="4px"===(window.getComputedStyle(div,null)||{width:"4px"}).width,(contents=div.appendChild(document.createElement("div"))).style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",contents.style.marginRight=contents.style.width="0",div.style.width="1px",reliableMarginRightVal=!parseFloat((window.getComputedStyle(contents,null)||{}).marginRight)),div.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(contents=div.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(reliableHiddenOffsetsVal=0===contents[0].offsetHeight)&&(contents[0].style.display="",contents[1].style.display="none",reliableHiddenOffsetsVal=0===contents[0].offsetHeight),body.removeChild(container))}(div=document.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(style=(a=div.getElementsByTagName("a")[0])&&a.style)&&(style.cssText="float:left;opacity:.5",support.opacity="0.5"===style.opacity,support.cssFloat=!!style.cssFloat,div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,support.boxSizing=""===style.boxSizing||""===style.MozBoxSizing||""===style.WebkitBoxSizing,jQuery.extend(support,{reliableHiddenOffsets:function(){return null==reliableHiddenOffsetsVal&&computeStyleTests(),reliableHiddenOffsetsVal},boxSizingReliable:function(){return null==boxSizingReliableVal&&computeStyleTests(),boxSizingReliableVal},pixelPosition:function(){return null==pixelPositionVal&&computeStyleTests(),pixelPositionVal},reliableMarginRight:function(){return null==reliableMarginRightVal&&computeStyleTests(),reliableMarginRightVal}}))}(),jQuery.swap=function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];for(name in ret=callback.apply(elem,args||[]),options)elem.style[name]=old[name];return ret};var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];function vendorPropName(style,name){if(name in style)return name;for(var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;)if((name=cssPrefixes[i]+capName)in style)return name;return origName}function showHide(elements,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;index<length;index++)(elem=elements[index]).style&&(values[index]=jQuery._data(elem,"olddisplay"),display=elem.style.display,show?(values[index]||"none"!==display||(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName)))):(hidden=isHidden(elem),(display&&"none"!==display||!hidden)&&jQuery._data(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))));for(index=0;index<length;index++)(elem=elements[index]).style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;i<4;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(val<=0||null==val){if(((val=curCSS(elem,name,styles))<0||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],void 0===value)return hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,!1,extra))?ret:style[name];if(!("string"===(type=typeof value)&&(ret=rrelNum.exec(value))&&(value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),null==value||value!=value||("number"!==type||jQuery.cssNumber[origName]||(value+="px"),support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),hooks&&"set"in hooks&&void 0===(value=hooks.set(elem,value,extra)))))try{style[name]=value}catch(e){}}},css:function(elem,name,extra,styles){var num,val,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),(hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName])&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),void 0===val&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),!0===extra||jQuery.isNumeric(num)?num||0:val):val}}),jQuery.each(["height","width"],(function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)return rdisplayswap.test(jQuery.css(elem,"display"))&&0===elem.offsetWidth?jQuery.swap(elem,cssShow,(function(){return getWidthOrHeight(elem,name,extra)})):getWidthOrHeight(elem,name,extra)},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(0,value,extra?augmentWidthOrHeight(elem,name,extra,support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}})),support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1,(value>=1||""===value)&&""===jQuery.trim(filter.replace(ralpha,""))&&style.removeAttribute&&(style.removeAttribute("filter"),""===value||currentStyle&&!currentStyle.filter)||(style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity)}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,(function(elem,computed){if(computed)return jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])})),jQuery.each({margin:"",padding:"",border:"Width"},(function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)})),jQuery.fn.extend({css:function(name,value){return access(this,(function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;i<len;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return void 0!==value?jQuery.style(elem,name,value):jQuery.css(elem,name)}),name,value,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){return"boolean"==typeof state?state?this.show():this.hide():this.each((function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()}))}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.options.duration?this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):this.pos=eased=percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(tween){var result;return null==tween.elem[tween.prop]||tween.elem.style&&null!=tween.elem.style[tween.prop]?(result=jQuery.css(tween.elem,tween.prop,""))&&"auto"!==result?result:0:tween.elem[tween.prop]},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,input,div,select,a,opt,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[function(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=jQuery._data(elem,"fxshow");opts.queue||(null==(hooks=jQuery._queueHooks(elem,"fx")).unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always((function(){anim.always((function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()}))})));1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],"inline"===("none"===(display=jQuery.css(elem,"display"))?jQuery._data(elem,"olddisplay")||defaultDisplay(elem.nodeName):display)&&"none"===jQuery.css(elem,"float")&&(support.inlineBlockNeedsLayout&&"inline"!==defaultDisplay(elem.nodeName)?style.zoom=1:style.display="inline-block"));opts.overflow&&(style.overflow="hidden",support.shrinkWrapBlocks()||anim.always((function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]})));for(prop in props)if(value=props[prop],rfxtypes.exec(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show")){if("show"!==value||!dataShow||void 0===dataShow[prop])continue;hidden=!0}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else display=void 0;if(jQuery.isEmptyObject(orig))"inline"===("none"===display?defaultDisplay(elem.nodeName):display)&&(style.display=display);else for(prop in dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=jQuery._data(elem,"fxshow",{}),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done((function(){jQuery(elem).hide()})),anim.done((function(){var prop;for(prop in jQuery._removeData(elem,"fxshow"),orig)jQuery.style(elem,prop,orig[prop])})),orig)tween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0))}],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||"px"!==unit&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3],parts=parts||[],start=+target||1;do{start/=scale=scale||".5",jQuery.style(tween.elem,prop,start+unit)}while(scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations)}return parts&&(start=tween.start=+start||+target||0,tween.unit=unit,tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]),tween}]};function createFxNow(){return setTimeout((function(){fxNow=void 0})),fxNow=jQuery.now()}function genFx(type,includeWidth){var which,attrs={height:type},i=0;for(includeWidth=includeWidth?1:0;i<4;i+=2-includeWidth)attrs["margin"+(which=cssExpand[i])]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function createTween(value,prop,animation){for(var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;index<length;index++)if(tween=collection[index].call(animation,prop,value))return tween}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always((function(){delete tick.elem})),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),percent=1-(remaining/animation.duration||0),index=0,length=animation.tweens.length;index<length;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),percent<1&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;index<length;index++)animation.tweens[index].run(1);return gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(!function(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(easing=specialEasing[name=jQuery.camelCase(index)],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),(hooks=jQuery.cssHooks[name])&&"expand"in hooks)for(index in value=hooks.expand(value),delete props[name],value)index in props||(props[index]=value[index],specialEasing[index]=easing);else specialEasing[name]=easing}(props,animation.opts.specialEasing);index<length;index++)if(result=animationPrefilters[index].call(animation,elem,props,animation.opts))return result;return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){jQuery.isFunction(props)?(callback=props,props=["*"]):props=props.split(" ");for(var prop,index=0,length=props.length;index<length;index++)prop=props[index],tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function(callback,prepend){prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,null!=opt.queue&&!0!==opt.queue||(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||jQuery._data(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||!1===optall.queue?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=void 0),clearQueue&&!1!==type&&this.queue(type||"fx",[]),this.each((function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));!dequeue&&gotoEnd||jQuery.dequeue(this,type)}))},finish:function(type){return!1!==type&&(type=type||"fx"),this.each((function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;index<length;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish}))}}),jQuery.each(["toggle","show","hide"],(function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}})),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}})),jQuery.timers=[],jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;for(fxNow=jQuery.now();i<timers.length;i++)(timer=timers[i])()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=void 0},jQuery.fx.timer=function(timer){jQuery.timers.push(timer),timer()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(time,type){return time=jQuery.fx&&jQuery.fx.speeds[time]||time,type=type||"fx",this.queue(type,(function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}}))},(div=document.createElement("div")).setAttribute("className","t"),div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=div.getElementsByTagName("a")[0],opt=(select=document.createElement("select")).appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],a.style.cssText="top:1px",support.getSetAttribute="t"!==div.className,support.style=/top/.test(a.getAttribute("style")),support.hrefNormalized="/a"===a.getAttribute("href"),support.checkOn=!!input.value,support.optSelected=opt.selected,support.enctype=!!document.createElement("form").enctype,select.disabled=!0,support.optDisabled=!opt.disabled,(input=document.createElement("input")).setAttribute("value",""),support.input=""===input.getAttribute("value"),input.value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value;var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];return arguments.length?(isFunction=jQuery.isFunction(value),this.each((function(i){var val;1===this.nodeType&&(null==(val=isFunction?value.call(this,i,jQuery(this).val()):value)?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,(function(value){return null==value?"":value+""}))),(hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()])&&"set"in hooks&&void 0!==hooks.set(this,val,"value")||(this.value=val))}))):elem?(hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()])&&"get"in hooks&&void 0!==(ret=hooks.get(elem,"value"))?ret:"string"==typeof(ret=elem.value)?ret.replace(rreturn,""):null==ret?"":ret:void 0}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return null!=val?val:jQuery.trim(jQuery.text(elem))}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;i<max;i++)if(((option=options[i]).selected||i===index)&&(support.optDisabled?!option.disabled:null===option.getAttribute("disabled"))&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;)if(option=options[i],jQuery.inArray(jQuery.valHooks.option.get(option),values)>=0)try{option.selected=optionSet=!0}catch(_){option.scrollHeight}else option.selected=!1;return optionSet||(elem.selectedIndex=-1),options}}}}),jQuery.each(["radio","checkbox"],(function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value))return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}},support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})}));var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=support.getSetAttribute,getSetInput=support.input;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each((function(){jQuery.removeAttr(this,name)}))}}),jQuery.extend({attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return void 0===elem.getAttribute?jQuery.prop(elem,name,value):(1===nType&&jQuery.isXMLDoc(elem)||(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)),void 0===value?hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:null==(ret=jQuery.find.attr(elem,name))?void 0:ret:null!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:(elem.setAttribute(name,value+""),value):void jQuery.removeAttr(elem,name))},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,jQuery.expr.match.bool.test(name)?getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem[propName]=!1:elem[jQuery.camelCase("default-"+name)]=elem[propName]=!1:jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName)},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}}}),boolHook={set:function(elem,value,name){return!1===value?jQuery.removeAttr(elem,name):getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem.setAttribute(!getSetAttribute&&jQuery.propFix[name]||name,name):elem[jQuery.camelCase("default-"+name)]=elem[name]=!0,name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),(function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=getSetInput&&getSetAttribute||!ruseDefault.test(name)?function(elem,name,isXML){var ret,handle;return isXML||(handle=attrHandle[name],attrHandle[name]=ret,ret=null!=getter(elem,name,isXML)?name.toLowerCase():null,attrHandle[name]=handle),ret}:function(elem,name,isXML){if(!isXML)return elem[jQuery.camelCase("default-"+name)]?name.toLowerCase():null}})),getSetInput&&getSetAttribute||(jQuery.attrHooks.value={set:function(elem,value,name){if(!jQuery.nodeName(elem,"input"))return nodeHook&&nodeHook.set(elem,value,name);elem.defaultValue=value}}),getSetAttribute||(nodeHook={set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(ret||elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name)),ret.value=value+="","value"===name||value===elem.getAttribute(name))return value}},attrHandle.id=attrHandle.name=attrHandle.coords=function(elem,name,isXML){var ret;if(!isXML)return(ret=elem.getAttributeNode(name))&&""!==ret.value?ret.value:null},jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);if(ret&&ret.specified)return ret.value},set:nodeHook.set},jQuery.attrHooks.contenteditable={set:function(elem,value,name){nodeHook.set(elem,""!==value&&value,name)}},jQuery.each(["width","height"],(function(i,name){jQuery.attrHooks[name]={set:function(elem,value){if(""===value)return elem.setAttribute(name,"auto"),value}}}))),support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||void 0},set:function(elem,value){return elem.style.cssText=value+""}});var rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each((function(){try{this[name]=void 0,delete this[name]}catch(e){}}))}}),jQuery.extend({propFix:{for:"htmlFor",class:"className"},prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return(1!==nType||!jQuery.isXMLDoc(elem))&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),void 0!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}}}),support.hrefNormalized||jQuery.each(["href","src"],(function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}})),support.optSelected||(jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;return parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex),null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){jQuery.propFix[this.toLowerCase()]=this})),support.enctype||(jQuery.propFix.enctype="encoding");var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(value){var classes,elem,cur,clazz,j,finalValue,i=0,len=this.length,proceed="string"==typeof value&&value;if(jQuery.isFunction(value))return this.each((function(j){jQuery(this).addClass(value.call(this,j,this.className))}));if(proceed)for(classes=(value||"").match(rnotwhite)||[];i<len;i++)if(cur=1===(elem=this[i]).nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ")){for(j=0;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");finalValue=jQuery.trim(cur),elem.className!==finalValue&&(elem.className=finalValue)}return this},removeClass:function(value){var classes,elem,cur,clazz,j,finalValue,i=0,len=this.length,proceed=0===arguments.length||"string"==typeof value&&value;if(jQuery.isFunction(value))return this.each((function(j){jQuery(this).removeClass(value.call(this,j,this.className))}));if(proceed)for(classes=(value||"").match(rnotwhite)||[];i<len;i++)if(cur=1===(elem=this[i]).nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"")){for(j=0;clazz=classes[j++];)for(;cur.indexOf(" "+clazz+" ")>=0;)cur=cur.replace(" "+clazz+" "," ");finalValue=value?jQuery.trim(cur):"",elem.className!==finalValue&&(elem.className=finalValue)}return this},toggleClass:function(value,stateVal){var type=typeof value;return"boolean"==typeof stateVal&&"string"===type?stateVal?this.addClass(value):this.removeClass(value):jQuery.isFunction(value)?this.each((function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)})):this.each((function(){if("string"===type)for(var className,i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];className=classNames[i++];)self.hasClass(className)?self.removeClass(className):self.addClass(className);else"undefined"!==type&&"boolean"!==type||(this.className&&jQuery._data(this,"__className__",this.className),this.className=this.className||!1===value?"":jQuery._data(this,"__className__")||"")}))},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;i<l;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0)return!0;return!1}}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}})),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var nonce=jQuery.now(),rquery=/\?/,rvalidtokens=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;jQuery.parseJSON=function(data){if(window.JSON&&window.JSON.parse)return window.JSON.parse(data+"");var requireNonComma,depth=null,str=jQuery.trim(data+"");return str&&!jQuery.trim(str.replace(rvalidtokens,(function(token,comma,open,close){return requireNonComma&&comma&&(depth=0),0===depth?token:(requireNonComma=open||comma,depth+=!close-!open,"")})))?Function("return "+str)():jQuery.error("Invalid JSON: "+data)},jQuery.parseXML=function(data){var xml;if(!data||"string"!=typeof data)return null;try{window.DOMParser?xml=(new DOMParser).parseFromString(data,"text/xml"):((xml=new ActiveXObject("Microsoft.XMLDOM")).async="false",xml.loadXML(data))}catch(e){xml=void 0}return xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml};var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){(ajaxLocation=document.createElement("a")).href="",ajaxLocation=ajaxLocation.href}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType.charAt(0)?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],(function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)})),selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var deep,key,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)void 0!==src[key]&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){"object"==typeof url&&(options=url,url=void 0),options=options||{};var parts,i,cacheURL,responseHeadersString,timeoutTimer,fireGlobals,transport,responseHeaders,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return state||(s.mimeType=type),this},statusCode:function(map){var code;if(map)if(state<2)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""],null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?"80":"443"))===(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?"80":"443")))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return jqXHR;for(i in(fireGlobals=s.global)&&0==jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),!1===s.cache&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++)),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&!1!==s.contentType||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]),s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(!1===s.beforeSend.call(callbackContext,jqXHR,s)||2===state))return jqXHR.abort();for(i in strAbort="abort",{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&s.timeout>0&&(timeoutTimer=setTimeout((function(){jqXHR.abort("timeout")}),s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(state<2))throw e;done(-1,e)}}else done(-1,"No Transport");function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;2!==state&&(state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=void 0,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0,isSuccess=status>=200&&status<300||304===status,responses&&(response=function(s,jqXHR,responses){for(var firstDataType,ct,finalDataType,type,contents=s.contents,dataTypes=s.dataTypes;"*"===dataTypes[0];)dataTypes.shift(),void 0===ct&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}if(finalDataType)return finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]}(s,jqXHR,responses)),response=function(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(current=dataTypes.shift();current;)if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift())if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(!(conv=converters[prev+" "+current]||converters["* "+current]))for(conv2 in converters)if((tmp=conv2.split(" "))[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){!0===conv?conv=converters[conv2]:!0!==converters[conv2]&&(current=tmp[0],dataTypes.unshift(tmp[1]));break}if(!0!==conv)if(conv&&s.throws)response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}return{state:"success",data:response}}(s,response,jqXHR,isSuccess),isSuccess?(s.ifModified&&((modified=jqXHR.getResponseHeader("Last-Modified"))&&(jQuery.lastModified[cacheURL]=modified),(modified=jqXHR.getResponseHeader("etag"))&&(jQuery.etag[cacheURL]=modified)),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,isSuccess=!(error=response.error))):(error=statusText,!status&&statusText||(statusText="error",status<0&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=void 0,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,void 0,callback,"script")}}),jQuery.each(["get","post"],(function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=void 0),jQuery.ajax({url,type:method,dataType:type,data,success:callback})}})),jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}})),jQuery._evalUrl=function(url){return jQuery.ajax({url,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},jQuery.fn.extend({wrapAll:function(html){if(jQuery.isFunction(html))return this.each((function(i){jQuery(this).wrapAll(html.call(this,i))}));if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map((function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem})).append(this)}return this},wrapInner:function(html){return jQuery.isFunction(html)?this.each((function(i){jQuery(this).wrapInner(html.call(this,i))})):this.each((function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)}))},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each((function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)}))},unwrap:function(){return this.parent().each((function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)})).end()}}),jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0||!support.reliableHiddenOffsets()&&"none"===(elem.style&&elem.style.display||jQuery.css(elem,"display"))},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,(function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add)}));else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(void 0===traditional&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,(function(){add(this.name,this.value)}));else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this})).filter((function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))})).map((function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,(function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}})):{name:elem.name,value:val.replace(rCRLF,"\r\n")}})).get()}}),jQuery.ajaxSettings.xhr=void 0!==window.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&createStandardXHR()||function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:createStandardXHR;var xhrId=0,xhrCallbacks={},xhrSupported=jQuery.ajaxSettings.xhr();function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}window.ActiveXObject&&jQuery(window).on("unload",(function(){for(var key in xhrCallbacks)xhrCallbacks[key](void 0,!0)})),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,(xhrSupported=support.ajax=!!xhrSupported)&&jQuery.ajaxTransport((function(options){var callback;if(!options.crossDomain||support.cors)return{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;if(xhr.open(options.type,options.url,options.async,options.username,options.password),options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];for(i in options.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(options.mimeType),options.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest"),headers)void 0!==headers[i]&&xhr.setRequestHeader(i,headers[i]+"");xhr.send(options.hasContent&&options.data||null),callback=function(_,isAbort){var status,statusText,responses;if(callback&&(isAbort||4===xhr.readyState))if(delete xhrCallbacks[id],callback=void 0,xhr.onreadystatechange=jQuery.noop,isAbort)4!==xhr.readyState&&xhr.abort();else{responses={},status=xhr.status,"string"==typeof xhr.responseText&&(responses.text=xhr.responseText);try{statusText=xhr.statusText}catch(e){statusText=""}status||!options.isLocal||options.crossDomain?1223===status&&(status=204):status=responses.text?200:404}responses&&complete(status,statusText,responses,xhr.getAllResponseHeaders())},options.async?4===xhr.readyState?setTimeout(callback):xhr.onreadystatechange=xhrCallbacks[id]=callback:callback()},abort:function(){callback&&callback(void 0,!0)}}})),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",(function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)})),jQuery.ajaxTransport("script",(function(s){if(s.crossDomain){var script,head=document.head||jQuery("head")[0]||document.documentElement;return{send:function(_,callback){(script=document.createElement("script")).async=!0,s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,script.parentNode&&script.parentNode.removeChild(script),script=null,isAbort||callback(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(void 0,!0)}}}}));var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",(function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=!1!==s.jsonp&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||"jsonp"===s.dataTypes[0])return callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):!1!==s.jsonp&&(s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always((function(){window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=void 0})),"script"})),jQuery.parseHTML=function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=jQuery.buildFragment([data],context,scripts),scripts&&scripts.length&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,response,type,self=this,off=url.indexOf(" ");return off>=0&&(selector=jQuery.trim(url.slice(off,url.length)),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=void 0):params&&"object"==typeof params&&(type="POST"),self.length>0&&jQuery.ajax({url,type,dataType:"html",data:params}).done((function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)})).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}),this},jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,(function(fn){return elem===fn.elem})).length};var docElem=window.document.documentElement;function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType&&(elem.defaultView||elem.parentWindow)}jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};"static"===position&&(elem.style.position="relative"),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),("absolute"===position||"fixed"===position)&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1?(curTop=(curPosition=curElem.position()).top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({offset:function(options){if(arguments.length)return void 0===options?this:this.each((function(i){jQuery.offset.setOffset(this,options,i)}));var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;return doc?(docElem=doc.documentElement,jQuery.contains(docElem,elem)?(void 0!==elem.getBoundingClientRect&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}):box):void 0},position:function(){if(this[0]){var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var offsetParent=this.offsetParent||docElem;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElem}))}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return access(this,(function(elem,method,val){var win=getWindow(elem);if(void 0===val)return win?prop in win?win[prop]:win.document.documentElement[method]:elem[method];win?win.scrollTo(top?jQuery(win).scrollLeft():val,top?val:jQuery(win).scrollTop()):elem[method]=val}),method,val,arguments.length,null)}})),jQuery.each(["top","left"],(function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,(function(elem,computed){if(computed)return computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}))})),jQuery.each({Height:"height",Width:"width"},(function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},(function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(!0===margin||!0===value?"margin":"border");return access(this,(function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):void 0===value?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)}),type,chainable?margin:void 0,chainable,null)}}))})),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],(function(){return jQuery}));var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},void 0===noGlobal&&(window.jQuery=window.$=jQuery),jQuery})),function($){"use strict";$((function(){var transitionEnd;$.support.transition=(transitionEnd=function(){var name,el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(name in transEndEventNames)if(void 0!==el.style[name])return transEndEventNames[name]}())&&{end:transitionEnd}}))}(window.jQuery),function($){"use strict";var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.prototype.close=function(e){var $parent,$this=$(this),selector=$this.attr("data-target");function removeElement(){$parent.trigger("closed").remove()}selector||(selector=(selector=$this.attr("href"))&&selector.replace(/.*(?=#[^\s]*$)/,"")),$parent=$(selector),e&&e.preventDefault(),$parent.length||($parent=$this.hasClass("alert")?$this:$this.parent()),$parent.trigger(e=$.Event("close")),e.isDefaultPrevented()||($parent.removeClass("in"),$.support.transition&&$parent.hasClass("fade")?$parent.on($.support.transition.end,removeElement):removeElement())};var old=$.fn.alert;$.fn.alert=function(option){return this.each((function(){var $this=$(this),data=$this.data("alert");data||$this.data("alert",data=new Alert(this)),"string"==typeof option&&data[option].call($this)}))},$.fn.alert.Constructor=Alert,$.fn.alert.noConflict=function(){return $.fn.alert=old,this},$(document).on("click.alert.data-api",dismiss,Alert.prototype.close)}(window.jQuery),function($){"use strict";var Button=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.button.defaults,options)};Button.prototype.setState=function(state){var d="disabled",$el=this.$element,data=$el.data(),val=$el.is("input")?"val":"html";state+="Text",data.resetText||$el.data("resetText",$el[val]()),$el[val](data[state]||this.options[state]),setTimeout((function(){"loadingText"==state?$el.addClass(d).attr(d,d):$el.removeClass(d).removeAttr(d)}),0)},Button.prototype.toggle=function(){var $parent=this.$element.closest('[data-toggle="buttons-radio"]');$parent&&$parent.find(".active").removeClass("active"),this.$element.toggleClass("active")};var old=$.fn.button;$.fn.button=function(option){return this.each((function(){var $this=$(this),data=$this.data("button"),options="object"==typeof option&&option;data||$this.data("button",data=new Button(this,options)),"toggle"==option?data.toggle():option&&data.setState(option)}))},$.fn.button.defaults={loadingText:"loading..."},$.fn.button.Constructor=Button,$.fn.button.noConflict=function(){return $.fn.button=old,this},$(document).on("click.button.data-api","[data-toggle^=button]",(function(e){var $btn=$(e.target);$btn.hasClass("btn")||($btn=$btn.closest(".btn")),$btn.button("toggle")}))}(window.jQuery),function($){"use strict";var Carousel=function(element,options){this.$element=$(element),this.$indicators=this.$element.find(".carousel-indicators"),this.options=options,"hover"==this.options.pause&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))};Carousel.prototype={cycle:function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(pos){var activeIndex=this.getActiveIndex(),that=this;if(!(pos>this.$items.length-1||pos<0))return this.sliding?this.$element.one("slid",(function(){that.to(pos)})):activeIndex==pos?this.pause().cycle():this.slide(pos>activeIndex?"next":"prev",$(this.$items[pos]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&$.support.transition.end&&(this.$element.trigger($.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(type,next){var e,$active=this.$element.find(".item.active"),$next=next||$active[type](),isCycling=this.interval,direction="next"==type?"left":"right",fallback="next"==type?"first":"last",that=this;if(this.sliding=!0,isCycling&&this.pause(),$next=$next.length?$next:this.$element.find(".item")[fallback](),e=$.Event("slide",{relatedTarget:$next[0],direction}),!$next.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",(function(){var $nextIndicator=$(that.$indicators.children()[that.getActiveIndex()]);$nextIndicator&&$nextIndicator.addClass("active")}))),$.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(e),e.isDefaultPrevented())return;$next.addClass(type),$next[0].offsetWidth,$active.addClass(direction),$next.addClass(direction),this.$element.one($.support.transition.end,(function(){$next.removeClass([type,direction].join(" ")).addClass("active"),$active.removeClass(["active",direction].join(" ")),that.sliding=!1,setTimeout((function(){that.$element.trigger("slid")}),0)}))}else{if(this.$element.trigger(e),e.isDefaultPrevented())return;$active.removeClass("active"),$next.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return isCycling&&this.cycle(),this}}};var old=$.fn.carousel;$.fn.carousel=function(option){return this.each((function(){var $this=$(this),data=$this.data("carousel"),options=$.extend({},$.fn.carousel.defaults,"object"==typeof option&&option),action="string"==typeof option?option:options.slide;data||$this.data("carousel",data=new Carousel(this,options)),"number"==typeof option?data.to(option):action?data[action]():options.interval&&data.pause().cycle()}))},$.fn.carousel.defaults={interval:5e3,pause:"hover"},$.fn.carousel.Constructor=Carousel,$.fn.carousel.noConflict=function(){return $.fn.carousel=old,this},$(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",(function(e){var href,slideIndex,$this=$(this),$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")),options=$.extend({},$target.data(),$this.data());$target.carousel(options),(slideIndex=$this.attr("data-slide-to"))&&$target.data("carousel").pause().to(slideIndex).cycle(),e.preventDefault()}))}(window.jQuery),function($){"use strict";var Collapse=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.collapse.defaults,options),this.options.parent&&(this.$parent=$(this.options.parent)),this.options.toggle&&this.toggle()};Collapse.prototype={constructor:Collapse,dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){var dimension,scroll,actives,hasData;if(!this.transitioning&&!this.$element.hasClass("in")){if(dimension=this.dimension(),scroll=$.camelCase(["scroll",dimension].join("-")),(actives=this.$parent&&this.$parent.find("> .accordion-group > .in"))&&actives.length){if((hasData=actives.data("collapse"))&&hasData.transitioning)return;actives.collapse("hide"),hasData||actives.data("collapse",null)}this.$element[dimension](0),this.transition("addClass",$.Event("show"),"shown"),$.support.transition&&this.$element[dimension](this.$element[0][scroll])}},hide:function(){var dimension;!this.transitioning&&this.$element.hasClass("in")&&(dimension=this.dimension(),this.reset(this.$element[dimension]()),this.transition("removeClass",$.Event("hide"),"hidden"),this.$element[dimension](0))},reset:function(size){var dimension=this.dimension();return this.$element.removeClass("collapse")[dimension](size||"auto")[0].offsetWidth,this.$element[null!==size?"addClass":"removeClass"]("collapse"),this},transition:function(method,startEvent,completeEvent){var that=this,complete=function(){"show"==startEvent.type&&that.reset(),that.transitioning=0,that.$element.trigger(completeEvent)};this.$element.trigger(startEvent),startEvent.isDefaultPrevented()||(this.transitioning=1,this.$element[method]("in"),$.support.transition&&this.$element.hasClass("collapse")?this.$element.one($.support.transition.end,complete):complete())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var old=$.fn.collapse;$.fn.collapse=function(option){return this.each((function(){var $this=$(this),data=$this.data("collapse"),options=$.extend({},$.fn.collapse.defaults,$this.data(),"object"==typeof option&&option);data||$this.data("collapse",data=new Collapse(this,options)),"string"==typeof option&&data[option]()}))},$.fn.collapse.defaults={toggle:!0},$.fn.collapse.Constructor=Collapse,$.fn.collapse.noConflict=function(){return $.fn.collapse=old,this},$(document).on("click.collapse.data-api","[data-toggle=collapse]",(function(e){var href,$this=$(this),target=$this.attr("data-target")||e.preventDefault()||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""),option=$(target).data("collapse")?"toggle":$this.data();$this[$(target).hasClass("in")?"addClass":"removeClass"]("collapsed"),$(target).collapse(option)}))}(window.jQuery),function($){"use strict";var toggle="[data-toggle=dropdown]",Dropdown=function(element){var $el=$(element).on("click.dropdown.data-api",this.toggle);$("html").on("click.dropdown.data-api",(function(){$el.parent().removeClass("open")}))};function clearMenus(){$(toggle).each((function(){getParent($(this)).removeClass("open")}))}function getParent($this){var $parent,selector=$this.attr("data-target");return selector||(selector=(selector=$this.attr("href"))&&/#/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,"")),($parent=selector&&$(selector))&&$parent.length||($parent=$this.parent()),$parent}Dropdown.prototype={constructor:Dropdown,toggle:function(e){var $parent,isActive,$this=$(this);if(!$this.is(".disabled, :disabled"))return isActive=($parent=getParent($this)).hasClass("open"),clearMenus(),isActive||$parent.toggleClass("open"),$this.focus(),!1},keydown:function(e){var $this,$items,$parent,isActive,index;if(/(38|40|27)/.test(e.keyCode)&&($this=$(this),e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled"))){if(!(isActive=($parent=getParent($this)).hasClass("open"))||isActive&&27==e.keyCode)return 27==e.which&&$parent.find(toggle).focus(),$this.click();($items=$("[role=menu] li:not(.divider):visible a",$parent)).length&&(index=$items.index($items.filter(":focus")),38==e.keyCode&&index>0&&index--,40==e.keyCode&&index<$items.length-1&&index++,~index||(index=0),$items.eq(index).focus())}}};var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each((function(){var $this=$(this),data=$this.data("dropdown");data||$this.data("dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)}))},$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(document).on("click.dropdown.data-api",clearMenus).on("click.dropdown.data-api",".dropdown form",(function(e){e.stopPropagation()})).on("click.dropdown-menu",(function(e){e.stopPropagation()})).on("click.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.dropdown.data-api",toggle+", [role=menu]",Dropdown.prototype.keydown)}(window.jQuery),function($){"use strict";var Modal=function(element,options){this.options=options,this.$element=$(element).delegate('[data-dismiss="modal"]',"click.dismiss.modal",$.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};Modal.prototype={constructor:Modal,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var that=this,e=$.Event("show");this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop((function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(document.body),that.$element.show(),transition&&that.$element[0].offsetWidth,that.$element.addClass("in").attr("aria-hidden",!1),that.enforceFocus(),transition?that.$element.one($.support.transition.end,(function(){that.$element.focus().trigger("shown")})):that.$element.focus().trigger("shown")})))},hide:function(e){e&&e.preventDefault();e=$.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),$(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),$.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var that=this;$(document).on("focusin.modal",(function(e){that.$element[0]===e.target||that.$element.has(e.target).length||that.$element.focus()}))},escape:function(){var that=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",(function(e){27==e.which&&that.hide()})):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var that=this,timeout=setTimeout((function(){that.$element.off($.support.transition.end),that.hideModal()}),500);this.$element.one($.support.transition.end,(function(){clearTimeout(timeout),that.hideModal()}))},hideModal:function(){var that=this;this.$element.hide(),this.backdrop((function(){that.removeBackdrop(),that.$element.trigger("hidden")}))},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(callback){var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;if(this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?$.proxy(this.$element[0].focus,this.$element[0]):$.proxy(this.hide,this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!callback)return;doAnimate?this.$backdrop.one($.support.transition.end,callback):callback()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,callback):callback()):callback&&callback()}};var old=$.fn.modal;$.fn.modal=function(option){return this.each((function(){var $this=$(this),data=$this.data("modal"),options=$.extend({},$.fn.modal.defaults,$this.data(),"object"==typeof option&&option);data||$this.data("modal",data=new Modal(this,options)),"string"==typeof option?data[option]():options.show&&data.show()}))},$.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.modal.data-api",'[data-toggle="modal"]',(function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());e.preventDefault(),$target.modal(option).one("hide",(function(){$this.focus()}))}))}(window.jQuery),function($){"use strict";var Tooltip=function(element,options){this.init("tooltip",element,options)};Tooltip.prototype={constructor:Tooltip,init:function(type,element,options){var eventIn,eventOut,triggers,trigger,i;for(this.type=type,this.$element=$(element),this.options=this.getOptions(options),this.enabled=!0,i=(triggers=this.options.trigger.split(" ")).length;i--;)"click"==(trigger=triggers[i])?this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this)):"manual"!=trigger&&(eventIn="hover"==trigger?"mouseenter":"focus",eventOut="hover"==trigger?"mouseleave":"blur",this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this)));this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(options){return(options=$.extend({},$.fn[this.type].defaults,this.$element.data(),options)).delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},enter:function(e){var self,defaults=$.fn[this.type].defaults,options={};if(this._options&&$.each(this._options,(function(key,value){defaults[key]!=value&&(options[key]=value)}),this),!(self=$(e.currentTarget)[this.type](options).data(this.type)).options.delay||!self.options.delay.show)return self.show();clearTimeout(this.timeout),self.hoverState="in",this.timeout=setTimeout((function(){"in"==self.hoverState&&self.show()}),self.options.delay.show)},leave:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!self.options.delay||!self.options.delay.hide)return self.hide();self.hoverState="out",this.timeout=setTimeout((function(){"out"==self.hoverState&&self.hide()}),self.options.delay.hide)},show:function(){var $tip,pos,actualWidth,actualHeight,placement,tp,e=$.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;switch($tip=this.tip(),this.setContent(),this.options.animation&&$tip.addClass("fade"),placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,$tip.detach().css({top:0,left:0,display:"block"}),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element),pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight,placement){case"bottom":tp={top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2};break;case"top":tp={top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2};break;case"left":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth};break;case"right":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}}this.applyPlacement(tp,placement),this.$element.trigger("shown")}},applyPlacement:function(offset,placement){var actualWidth,actualHeight,delta,replace,$tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight;$tip.offset(offset).addClass(placement).addClass("in"),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight,"top"==placement&&actualHeight!=height&&(offset.top=offset.top+height-actualHeight,replace=!0),"bottom"==placement||"top"==placement?(delta=0,offset.left<0&&(delta=-2*offset.left,offset.left=0,$tip.offset(offset),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight),this.replaceArrow(delta-width+actualWidth,actualWidth,"left")):this.replaceArrow(actualHeight-height,actualHeight,"top"),replace&&$tip.offset(offset)},replaceArrow:function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},setContent:function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},hide:function(){var timeout,$tip=this.tip(),e=$.Event("hide");if(this.$element.trigger(e),!e.isDefaultPrevented())return $tip.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?(timeout=setTimeout((function(){$tip.off($.support.transition.end).detach()}),500),$tip.one($.support.transition.end,(function(){clearTimeout(timeout),$tip.detach()}))):$tip.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var el=this.$element[0];return $.extend({},"function"==typeof el.getBoundingClientRect?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())},getTitle:function(){var $e=this.$element,o=this.options;return $e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},tip:function(){return this.$tip=this.$tip||$(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var self=e?$(e.currentTarget)[this.type](this._options).data(this.type):this;self.tip().hasClass("in")?self.hide():self.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each((function(){var $this=$(this),data=$this.data("tooltip"),options="object"==typeof option&&option;data||$this.data("tooltip",data=new Tooltip(this,options)),"string"==typeof option&&data[option]()}))},$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},$.fn.tooltip.noConflict=function(){return $.fn.tooltip=old,this}}(window.jQuery),function($){"use strict";var Popover=function(element,options){this.init("popover",element,options)};Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype,{constructor:Popover,setContent:function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title),$tip.find(".popover-content")[this.options.html?"html":"text"](content),$tip.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var $e=this.$element,o=this.options;return("function"==typeof o.content?o.content.call($e[0]):o.content)||$e.attr("data-content")},tip:function(){return this.$tip||(this.$tip=$(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var old=$.fn.popover;$.fn.popover=function(option){return this.each((function(){var $this=$(this),data=$this.data("popover"),options="object"==typeof option&&option;data||$this.data("popover",data=new Popover(this,options)),"string"==typeof option&&data[option]()}))},$.fn.popover.Constructor=Popover,$.fn.popover.defaults=$.extend({},$.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),$.fn.popover.noConflict=function(){return $.fn.popover=old,this}}(window.jQuery),function($){"use strict";function ScrollSpy(element,options){var href,process=$.proxy(this.process,this),$element=$(element).is("body")?$(window):$(element);this.options=$.extend({},$.fn.scrollspy.defaults,options),this.$scrollElement=$element.on("scroll.scroll-spy.data-api",process),this.selector=(this.options.target||(href=$(element).attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=$("body"),this.refresh(),this.process()}ScrollSpy.prototype={constructor:ScrollSpy,refresh:function(){var self=this;this.offsets=$([]),this.targets=$([]),this.$body.find(this.selector).map((function(){var $el=$(this),href=$el.data("target")||$el.attr("href"),$href=/^#\w/.test(href)&&$(href);return $href&&$href.length&&[[$href.position().top+(!$.isWindow(self.$scrollElement.get(0))&&self.$scrollElement.scrollTop()),href]]||null})).sort((function(a,b){return a[0]-b[0]})).each((function(){self.offsets.push(this[0]),self.targets.push(this[1])}))},process:function(){var i,scrollTop=this.$scrollElement.scrollTop()+this.options.offset,maxScroll=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget;if(scrollTop>=maxScroll)return activeTarget!=(i=targets.last()[0])&&this.activate(i);for(i=offsets.length;i--;)activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i])},activate:function(target){var active,selector;this.activeTarget=target,$(this.selector).parent(".active").removeClass("active"),selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]',(active=$(selector).parent("li").addClass("active")).parent(".dropdown-menu").length&&(active=active.closest("li.dropdown").addClass("active")),active.trigger("activate")}};var old=$.fn.scrollspy;$.fn.scrollspy=function(option){return this.each((function(){var $this=$(this),data=$this.data("scrollspy"),options="object"==typeof option&&option;data||$this.data("scrollspy",data=new ScrollSpy(this,options)),"string"==typeof option&&data[option]()}))},$.fn.scrollspy.Constructor=ScrollSpy,$.fn.scrollspy.defaults={offset:10},$.fn.scrollspy.noConflict=function(){return $.fn.scrollspy=old,this},$(window).on("load",(function(){$('[data-spy="scroll"]').each((function(){var $spy=$(this);$spy.scrollspy($spy.data())}))}))}(window.jQuery),function($){"use strict";var Tab=function(element){this.element=$(element)};Tab.prototype={constructor:Tab,show:function(){var previous,$target,e,$this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.attr("data-target");selector||(selector=(selector=$this.attr("href"))&&selector.replace(/.*(?=#[^\s]*$)/,"")),$this.parent("li").hasClass("active")||(previous=$ul.find(".active:last a")[0],e=$.Event("show",{relatedTarget:previous}),$this.trigger(e),e.isDefaultPrevented()||($target=$(selector),this.activate($this.parent("li"),$ul),this.activate($target,$target.parent(),(function(){$this.trigger({type:"shown",relatedTarget:previous})}))))},activate:function(element,container,callback){var $active=container.find("> .active"),transition=callback&&$.support.transition&&$active.hasClass("fade");function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),element.addClass("active"),transition?(element[0].offsetWidth,element.addClass("in")):element.removeClass("fade"),element.parent(".dropdown-menu")&&element.closest("li.dropdown").addClass("active"),callback&&callback()}transition?$active.one($.support.transition.end,next):next(),$active.removeClass("in")}};var old=$.fn.tab;$.fn.tab=function(option){return this.each((function(){var $this=$(this),data=$this.data("tab");data||$this.data("tab",data=new Tab(this)),"string"==typeof option&&data[option]()}))},$.fn.tab.Constructor=Tab,$.fn.tab.noConflict=function(){return $.fn.tab=old,this},$(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',(function(e){e.preventDefault(),$(this).tab("show")}))}(window.jQuery),function($){"use strict";var Typeahead=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.typeahead.defaults,options),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=$(this.options.menu),this.shown=!1,this.listen()};Typeahead.prototype={constructor:Typeahead,select:function(){var val=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(val)).change(),this.hide()},updater:function(item){return item},show:function(){var pos=$.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:pos.top+pos.height,left:pos.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(event){var items;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(items=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source)?this.process(items):this},process:function(items){var that=this;return items=$.grep(items,(function(item){return that.matcher(item)})),(items=this.sorter(items)).length?this.render(items.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(item){return~item.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(items){for(var item,beginswith=[],caseSensitive=[],caseInsensitive=[];item=items.shift();)item.toLowerCase().indexOf(this.query.toLowerCase())?~item.indexOf(this.query)?caseSensitive.push(item):caseInsensitive.push(item):beginswith.push(item);return beginswith.concat(caseSensitive,caseInsensitive)},highlighter:function(item){var query=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return item.replace(new RegExp("("+query+")","ig"),(function($1,match){return"<strong>"+match+"</strong>"}))},render:function(items){var that=this;return(items=$(items).map((function(i,item){return(i=$(that.options.item).attr("data-value",item)).find("a").html(that.highlighter(item)),i[0]}))).first().addClass("active"),this.$menu.html(items),this},next:function(event){var next=this.$menu.find(".active").removeClass("active").next();next.length||(next=$(this.$menu.find("li")[0])),next.addClass("active")},prev:function(event){var prev=this.$menu.find(".active").removeClass("active").prev();prev.length||(prev=this.$menu.find("li").last()),prev.addClass("active")},listen:function(){this.$element.on("focus",$.proxy(this.focus,this)).on("blur",$.proxy(this.blur,this)).on("keypress",$.proxy(this.keypress,this)).on("keyup",$.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",$.proxy(this.keydown,this)),this.$menu.on("click",$.proxy(this.click,this)).on("mouseenter","li",$.proxy(this.mouseenter,this)).on("mouseleave","li",$.proxy(this.mouseleave,this))},eventSupported:function(eventName){var isSupported=eventName in this.$element;return isSupported||(this.$element.setAttribute(eventName,"return;"),isSupported="function"==typeof this.$element[eventName]),isSupported},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~$.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),$(e.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var old=$.fn.typeahead;$.fn.typeahead=function(option){return this.each((function(){var $this=$(this),data=$this.data("typeahead"),options="object"==typeof option&&option;data||$this.data("typeahead",data=new Typeahead(this,options)),"string"==typeof option&&data[option]()}))},$.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},$.fn.typeahead.Constructor=Typeahead,$.fn.typeahead.noConflict=function(){return $.fn.typeahead=old,this},$(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',(function(e){var $this=$(this);$this.data("typeahead")||$this.typeahead($this.data())}))}(window.jQuery),function($){"use strict";var Affix=function(element,options){this.options=$.extend({},$.fn.affix.defaults,options),this.$window=$(window).on("scroll.affix.data-api",$.proxy(this.checkPosition,this)).on("click.affix.data-api",$.proxy((function(){setTimeout($.proxy(this.checkPosition,this),1)}),this)),this.$element=$(element),this.checkPosition()};Affix.prototype.checkPosition=function(){if(this.$element.is(":visible")){var affix,scrollHeight=$(document).height(),scrollTop=this.$window.scrollTop(),position=this.$element.offset(),offset=this.options.offset,offsetBottom=offset.bottom,offsetTop=offset.top;"object"!=typeof offset&&(offsetBottom=offsetTop=offset),"function"==typeof offsetTop&&(offsetTop=offset.top()),"function"==typeof offsetBottom&&(offsetBottom=offset.bottom()),affix=!(null!=this.unpin&&scrollTop+this.unpin<=position.top)&&(null!=offsetBottom&&position.top+this.$element.height()>=scrollHeight-offsetBottom?"bottom":null!=offsetTop&&scrollTop<=offsetTop&&"top"),this.affixed!==affix&&(this.affixed=affix,this.unpin="bottom"==affix?position.top-scrollTop:null,this.$element.removeClass("affix affix-top affix-bottom").addClass("affix"+(affix?"-"+affix:"")))}};var old=$.fn.affix;$.fn.affix=function(option){return this.each((function(){var $this=$(this),data=$this.data("affix"),options="object"==typeof option&&option;data||$this.data("affix",data=new Affix(this,options)),"string"==typeof option&&data[option]()}))},$.fn.affix.Constructor=Affix,$.fn.affix.defaults={offset:0},$.fn.affix.noConflict=function(){return $.fn.affix=old,this},$(window).on("load",(function(){$('[data-spy="affix"]').each((function(){var $spy=$(this),data=$spy.data();data.offset=data.offset||{},data.offsetBottom&&(data.offset.bottom=data.offsetBottom),data.offsetTop&&(data.offset.top=data.offsetTop),$spy.affix(data)}))}))}(window.jQuery),
/*!
 * Bootstrap-select v1.6.0 (http://silviomoreto.github.io/bootstrap-select/)
 *
 * Copyright 2013-2014 bootstrap-select
 * Licensed under MIT (https://github.com/silviomoreto/bootstrap-select/blob/master/LICENSE)
 */
function($){"use strict";$.expr[":"].icontains=function(obj,index,meta){return $(obj).text().toUpperCase().indexOf(meta[3].toUpperCase())>=0};var Selectpicker=function(element,options,e){e&&(e.stopPropagation(),e.preventDefault()),this.$element=$(element),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=options,null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=Selectpicker.prototype.val,this.render=Selectpicker.prototype.render,this.refresh=Selectpicker.prototype.refresh,this.setStyle=Selectpicker.prototype.setStyle,this.selectAll=Selectpicker.prototype.selectAll,this.deselectAll=Selectpicker.prototype.deselectAll,this.destroy=Selectpicker.prototype.destroy,this.remove=Selectpicker.prototype.destroy,this.show=Selectpicker.prototype.show,this.hide=Selectpicker.prototype.hide,this.init()};Selectpicker.VERSION="1.6.0",Selectpicker.DEFAULTS={style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:"{0} of {1} selected",maxOptionsText:["Limit reached ({n} {var} max)","Group limit reached ({n} {var} max)",["items","item"]],width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,actionsBox:!1,multipleSeparator:", ",iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1,mobile:!1},Selectpicker.prototype={constructor:Selectpicker,init:function(){var that=this,id=this.$element.attr("id");this.$element.hide(),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$menu=this.$newElement.find("> .dropdown-menu"),this.$button=this.$newElement.find("> button"),this.$searchbox=this.$newElement.find("input"),void 0!==id&&(this.$button.attr("data-id",id),$('label[for="'+id+'"]').click((function(e){e.preventDefault(),that.$button.focus()}))),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.liHeight(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile()},createDropdown:function(){var multiple=this.multiple?" show-tick":"",inputGroup=this.$element.parent().hasClass("input-group")?" input-group-btn":"",autofocus=this.autofocus?" autofocus":"",header=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",searchbox=this.options.liveSearch?'<div class="bootstrap-select-searchbox"><input type="text" class="input-block-level form-control" autocomplete="off" /></div>':"",actionsbox=this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-block"><button class="actions-btn bs-select-all btn btn-sm btn-default">Select All</button><button class="actions-btn bs-deselect-all btn btn-sm btn-default">Deselect All</button></div></div>':"";return $('<div class="btn-group bootstrap-select'+multiple+inputGroup+'"><button type="button" class="btn dropdown-toggle selectpicker" data-toggle="dropdown"'+autofocus+'><span class="filter-option pull-left"></span>&nbsp;<span class="caret"></span></button><div class="dropdown-menu open">'+header+searchbox+actionsbox+'<ul class="dropdown-menu inner selectpicker" role="menu"></ul></div></div>')},createView:function(){var $drop=this.createDropdown(),$li=this.createLi();return $drop.find("ul").append($li),$drop},reloadLi:function(){this.destroyLi();var $li=this.createLi();this.$menu.find("ul").append($li)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var that=this,_liA=[],_liHtml="",optID=0;return this.$element.find("option").each((function(){var $this=$(this),optionClass=$this.attr("class")||"",inline=$this.attr("style")||"",text=$this.data("content")?$this.data("content"):$this.html(),subtext=void 0!==$this.data("subtext")?'<small class="muted text-muted">'+$this.data("subtext")+"</small>":"",icon=void 0!==$this.data("icon")?'<i class="'+that.options.iconBase+" "+$this.data("icon")+'"></i> ':"";if(""!==icon&&($this.is(":disabled")||$this.parent().is(":disabled"))&&(icon="<span>"+icon+"</span>"),$this.data("content")||(text=icon+'<span class="text">'+text+subtext+"</span>"),that.options.hideDisabled&&($this.is(":disabled")||$this.parent().is(":disabled")))_liA.push('<a style="min-height: 0; padding: 0"></a>');else if($this.parent().is("optgroup")&&!0!==$this.data("divider"))if(0===$this.index()){var label=$this.parent().attr("label"),labelSubtext=void 0!==$this.parent().data("subtext")?'<small class="muted text-muted">'+$this.parent().data("subtext")+"</small>":"";label=($this.parent().data("icon")?'<i class="'+that.options.iconBase+" "+$this.parent().data("icon")+'"></i> ':"")+'<span class="text">'+label+labelSubtext+"</span>",optID+=1,0!==$this[0].index?_liA.push('<div class="div-contain"><div class="divider"></div></div><dt>'+label+"</dt>"+that.createA(text,"opt "+optionClass,inline,optID)):_liA.push("<dt>"+label+"</dt>"+that.createA(text,"opt "+optionClass,inline,optID))}else _liA.push(that.createA(text,"opt "+optionClass,inline,optID));else!0===$this.data("divider")?_liA.push('<div class="div-contain"><div class="divider"></div></div>'):!0===$(this).data("hidden")?_liA.push("<a></a>"):_liA.push(that.createA(text,optionClass,inline))})),$.each(_liA,(function(i,item){_liHtml+='<li rel="'+i+'"'+("<a></a>"===item?'class="hide is-hidden"':"")+">"+item+"</li>"})),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),$(_liHtml)},createA:function(text,classes,inline,optgroup){return'<a tabindex="0" class="'+classes+'" style="'+inline+'"'+(void 0!==optgroup?'data-optgroup="'+optgroup+'"':"")+">"+text+'<i class="'+this.options.iconBase+" "+this.options.tickIcon+' icon-ok check-mark"></i></a>'},render:function(updateLi){var that=this;!1!==updateLi&&this.$element.find("option").each((function(index){that.setDisabled(index,$(this).is(":disabled")||$(this).parent().is(":disabled")),that.setSelected(index,$(this).is(":selected"))})),this.tabIndex();var selectedItems=this.$element.find("option:selected").map((function(){var subtext,$this=$(this),icon=$this.data("icon")&&that.options.showIcon?'<i class="'+that.options.iconBase+" "+$this.data("icon")+'"></i> ':"";return subtext=that.options.showSubtext&&$this.attr("data-subtext")&&!that.multiple?' <small class="muted text-muted">'+$this.data("subtext")+"</small>":"",$this.data("content")&&that.options.showContent?$this.data("content"):void 0!==$this.attr("title")?$this.attr("title"):icon+$this.html()+subtext})).toArray(),title=this.multiple?selectedItems.join(this.options.multipleSeparator):selectedItems[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var max=this.options.selectedTextFormat.split(">"),notDisabled=this.options.hideDisabled?":not([disabled])":"";(max.length>1&&selectedItems.length>max[1]||1==max.length&&selectedItems.length>=2)&&(title=this.options.countSelectedText.replace("{0}",selectedItems.length).replace("{1}",this.$element.find('option:not([data-divider="true"], [data-hidden="true"])'+notDisabled).length))}this.options.title=this.$element.attr("title"),"static"==this.options.selectedTextFormat&&(title=this.options.title),title||(title=void 0!==this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",$.trim($("<div/>").html(title).text()).replace(/\s\s+/g," ")),this.$newElement.find(".filter-option").html(title)},setStyle:function(style,status){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|validate\[.*\]/gi,""));var buttonClass=style||this.options.style;"add"==status?this.$button.addClass(buttonClass):"remove"==status?this.$button.removeClass(buttonClass):(this.$button.removeClass(this.options.style),this.$button.addClass(buttonClass))},liHeight:function(){if(!1!==this.options.size){var $selectClone=this.$menu.parent().clone().find("> .dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),$menuClone=$selectClone.addClass("open").find("> .dropdown-menu"),liHeight=$menuClone.find("li > a").outerHeight(),headerHeight=this.options.header?$menuClone.find(".popover-title").outerHeight():0,searchHeight=this.options.liveSearch?$menuClone.find(".bootstrap-select-searchbox").outerHeight():0,actionsHeight=this.options.actionsBox?$menuClone.find(".bs-actionsbox").outerHeight():0;$selectClone.remove(),this.$newElement.data("liHeight",liHeight).data("headerHeight",headerHeight).data("searchHeight",searchHeight).data("actionsHeight",actionsHeight)}},setSize:function(){var menuHeight,selectOffsetTop,selectOffsetBot,that=this,menu=this.$menu,menuInner=menu.find(".inner"),selectHeight=this.$newElement.outerHeight(),liHeight=this.$newElement.data("liHeight"),headerHeight=this.$newElement.data("headerHeight"),searchHeight=this.$newElement.data("searchHeight"),actionsHeight=this.$newElement.data("actionsHeight"),divHeight=menu.find("li .divider").outerHeight(!0),menuPadding=parseInt(menu.css("padding-top"))+parseInt(menu.css("padding-bottom"))+parseInt(menu.css("border-top-width"))+parseInt(menu.css("border-bottom-width")),notDisabled=this.options.hideDisabled?":not(.disabled)":"",$window=$(window),menuExtras=menuPadding+parseInt(menu.css("margin-top"))+parseInt(menu.css("margin-bottom"))+2,posVert=function(){selectOffsetTop=that.$newElement.offset().top-$window.scrollTop(),selectOffsetBot=$window.height()-selectOffsetTop-selectHeight};if(posVert(),this.options.header&&menu.css("padding-top",0),"auto"==this.options.size){var getSize=function(){var minHeight,lisVis=that.$lis.not(".hide");posVert(),menuHeight=selectOffsetBot-menuExtras,that.options.dropupAuto&&that.$newElement.toggleClass("dropup",selectOffsetTop>selectOffsetBot&&menuHeight-menuExtras<menu.height()),that.$newElement.hasClass("dropup")&&(menuHeight=selectOffsetTop-menuExtras),minHeight=lisVis.length+lisVis.find("dt").length>3?3*liHeight+menuExtras-2:0,menu.css({"max-height":menuHeight+"px",overflow:"hidden","min-height":minHeight+headerHeight+searchHeight+actionsHeight+"px"}),menuInner.css({"max-height":menuHeight-headerHeight-searchHeight-actionsHeight-menuPadding+"px","overflow-y":"auto","min-height":Math.max(minHeight-menuPadding,0)+"px"})};getSize(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",getSize),$(window).off("resize.getSize").on("resize.getSize",getSize),$(window).off("scroll.getSize").on("scroll.getSize",getSize)}else if(this.options.size&&"auto"!=this.options.size&&menu.find("li"+notDisabled).length>this.options.size){var optIndex=menu.find("li"+notDisabled+" > *").not(".div-contain").slice(0,this.options.size).last().parent().index(),divLength=menu.find("li").slice(0,optIndex+1).find(".div-contain").length;menuHeight=liHeight*this.options.size+divLength*divHeight+menuPadding,that.options.dropupAuto&&this.$newElement.toggleClass("dropup",selectOffsetTop>selectOffsetBot&&menuHeight<menu.height()),menu.css({"max-height":menuHeight+headerHeight+searchHeight+actionsHeight+"px",overflow:"hidden"}),menuInner.css({"max-height":menuHeight-menuPadding+"px","overflow-y":"auto"})}},setWidth:function(){if("auto"==this.options.width){this.$menu.css("min-width","0");var selectClone=this.$newElement.clone().appendTo("body"),ulWidth=selectClone.find("> .dropdown-menu").css("width"),btnWidth=selectClone.css("width","auto").find("> button").css("width");selectClone.remove(),this.$newElement.css("width",Math.max(parseInt(ulWidth),parseInt(btnWidth))+"px")}else"fit"==this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var pos,actualHeight,that=this,$drop=$("<div />"),getPlacement=function($element){$drop.addClass($element.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",$element.hasClass("dropup")),pos=$element.offset(),actualHeight=$element.hasClass("dropup")?0:$element[0].offsetHeight,$drop.css({top:pos.top+actualHeight,left:pos.left,width:$element[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",(function(){that.isDisabled()||(getPlacement($(this)),$drop.appendTo(that.options.container),$drop.toggleClass("open",!$(this).hasClass("open")),$drop.append(that.$menu))})),$(window).resize((function(){getPlacement(that.$newElement)})),$(window).on("scroll",(function(){getPlacement(that.$newElement)})),$("html").on("click",(function(e){$(e.target).closest(that.$newElement).length<1&&$drop.removeClass("open")}))},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.reloadLi(),this.render(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},update:function(){this.reloadLi(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},setSelected:function(index,selected){null==this.$lis&&(this.$lis=this.$menu.find("li")),$(this.$lis[index]).toggleClass("selected",selected)},setDisabled:function(index,disabled){null==this.$lis&&(this.$lis=this.$menu.find("li")),disabled?$(this.$lis[index]).addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):$(this.$lis[index]).removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var that=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),-1==this.$button.attr("tabindex")&&(this.$element.data("tabindex")||this.$button.removeAttr("tabindex"))),this.$button.click((function(){return!that.isDisabled()}))},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var that=this;this.$newElement.on("touchstart.dropdown",".dropdown-menu",(function(e){e.stopPropagation()})),this.$newElement.on("click",(function(){that.setSize(),that.options.liveSearch||that.multiple||setTimeout((function(){that.$menu.find(".selected a").focus()}),10)})),this.$menu.on("click","li a",(function(e){var clickedIndex=$(this).parent().index(),prevValue=that.$element.val(),prevIndex=that.$element.prop("selectedIndex");if(that.multiple&&e.stopPropagation(),e.preventDefault(),!that.isDisabled()&&!$(this).parent().hasClass("disabled")){var $options=that.$element.find("option"),$option=$options.eq(clickedIndex),state=$option.prop("selected"),$optgroup=$option.parent("optgroup"),maxOptions=that.options.maxOptions,maxOptionsGrp=$optgroup.data("maxOptions")||!1;if(that.multiple){if($option.prop("selected",!state),that.setSelected(clickedIndex,!state),$(this).blur(),!1!==maxOptions||!1!==maxOptionsGrp){var maxReached=maxOptions<$options.filter(":selected").length,maxReachedGrp=maxOptionsGrp<$optgroup.find("option:selected").length,maxOptionsArr=that.options.maxOptionsText,maxTxt=maxOptionsArr[0].replace("{n}",maxOptions),maxTxtGrp=maxOptionsArr[1].replace("{n}",maxOptionsGrp),$notify=$('<div class="notify"></div>');if(maxOptions&&maxReached||maxOptionsGrp&&maxReachedGrp)if(maxOptions&&1==maxOptions)$options.prop("selected",!1),$option.prop("selected",!0),that.$menu.find(".selected").removeClass("selected"),that.setSelected(clickedIndex,!0);else if(maxOptionsGrp&&1==maxOptionsGrp){$optgroup.find("option:selected").prop("selected",!1),$option.prop("selected",!0);var optgroupID=$(this).data("optgroup");that.$menu.find(".selected").has('a[data-optgroup="'+optgroupID+'"]').removeClass("selected"),that.setSelected(clickedIndex,!0)}else maxOptionsArr[2]&&(maxTxt=maxTxt.replace("{var}",maxOptionsArr[2][maxOptions>1?0:1]),maxTxtGrp=maxTxtGrp.replace("{var}",maxOptionsArr[2][maxOptionsGrp>1?0:1])),$option.prop("selected",!1),that.$menu.append($notify),maxOptions&&maxReached&&($notify.append($("<div>"+maxTxt+"</div>")),that.$element.trigger("maxReached.bs.select")),maxOptionsGrp&&maxReachedGrp&&($notify.append($("<div>"+maxTxtGrp+"</div>")),that.$element.trigger("maxReachedGrp.bs.select")),setTimeout((function(){that.setSelected(clickedIndex,!1)}),10),$notify.delay(750).fadeOut(300,(function(){$(this).remove()}))}}else $options.prop("selected",!1),$option.prop("selected",!0),that.$menu.find(".selected").removeClass("selected"),that.setSelected(clickedIndex,!0);that.multiple?that.options.liveSearch&&that.$searchbox.focus():that.$button.focus(),(prevValue!=that.$element.val()&&that.multiple||prevIndex!=that.$element.prop("selectedIndex")&&!that.multiple)&&that.$element.change()}})),this.$menu.on("click","li.disabled a, li dt, li .div-contain, .popover-title, .popover-title :not(.close)",(function(e){e.target==this&&(e.preventDefault(),e.stopPropagation(),that.options.liveSearch?that.$searchbox.focus():that.$button.focus())})),this.$menu.on("click",".popover-title .close",(function(){that.$button.focus()})),this.$searchbox.on("click",(function(e){e.stopPropagation()})),this.$menu.on("click",".actions-btn",(function(e){that.options.liveSearch?that.$searchbox.focus():that.$button.focus(),e.preventDefault(),e.stopPropagation(),$(this).is(".bs-select-all")?that.selectAll():that.deselectAll(),that.$element.change()})),this.$element.change((function(){that.render(!1)}))},liveSearchListener:function(){var that=this,no_results=$('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api",(function(){that.$menu.find(".active").removeClass("active"),that.$searchbox.val()&&(that.$searchbox.val(""),that.$lis.not(".is-hidden").removeClass("hide"),no_results.parent().length&&no_results.remove()),that.multiple||that.$menu.find(".selected").addClass("active"),setTimeout((function(){that.$searchbox.focus()}),10)})),this.$searchbox.on("input propertychange",(function(){that.$searchbox.val()?(that.$lis.not(".is-hidden").removeClass("hide").find("a").not(":icontains("+that.$searchbox.val()+")").parent().addClass("hide"),that.$menu.find("li").filter(":visible:not(.no-results)").length?no_results.parent().length&&no_results.remove():(no_results.parent().length&&no_results.remove(),no_results.html(that.options.noneResultsText+' "'+that.$searchbox.val()+'"').show(),that.$menu.find("li").last().after(no_results))):(that.$lis.not(".is-hidden").removeClass("hide"),no_results.parent().length&&no_results.remove()),that.$menu.find("li.active").removeClass("active"),that.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus(),$(this).focus()})),this.$menu.on("mouseenter","a",(function(e){that.$menu.find(".active").removeClass("active"),$(e.currentTarget).parent().not(".disabled").addClass("active")})),this.$menu.on("mouseleave","a",(function(){that.$menu.find(".active").removeClass("active")}))},val:function(value){return void 0!==value?(this.$element.val(value),this.$element.change(),this.render(),this.$element):this.$element.val()},selectAll:function(){null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$element.find("option:enabled").prop("selected",!0),$(this.$lis).not(".disabled").addClass("selected"),this.render(!1)},deselectAll:function(){null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$element.find("option:enabled").prop("selected",!1),$(this.$lis).not(".disabled").removeClass("selected"),this.render(!1)},keydown:function(e){var $this,$items,$parent,index,next,first,last,prev,nextPrev,that,prevIndex,isActive,keyCodeMap={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if($parent=($this=$(this)).parent(),$this.is("input")&&($parent=$this.parent().parent()),(that=$parent.data("this")).options.liveSearch&&($parent=$this.parent().parent()),that.options.container&&($parent=that.$menu),$items=$("[role=menu] li:not(.divider) a",$parent),!(isActive=that.$menu.parent().hasClass("open"))&&/([0-9]|[A-z])/.test(String.fromCharCode(e.keyCode))&&(that.options.container?that.$newElement.trigger("click"):(that.setSize(),that.$menu.parent().addClass("open"),isActive=!0),that.$searchbox.focus()),that.options.liveSearch&&(/(^9$|27)/.test(e.keyCode.toString(10))&&isActive&&0===that.$menu.find(".active").length&&(e.preventDefault(),that.$menu.parent().removeClass("open"),that.$button.focus()),$items=$("[role=menu] li:not(.divider):visible",$parent),$this.val()||/(38|40)/.test(e.keyCode.toString(10))||0===$items.filter(".active").length&&($items=that.$newElement.find("li").filter(":icontains("+keyCodeMap[e.keyCode]+")"))),$items.length){if(/(38|40)/.test(e.keyCode.toString(10)))index=$items.index($items.filter(":focus")),first=$items.parent(":not(.disabled):visible").first().index(),last=$items.parent(":not(.disabled):visible").last().index(),next=$items.eq(index).parent().nextAll(":not(.disabled):visible").eq(0).index(),prev=$items.eq(index).parent().prevAll(":not(.disabled):visible").eq(0).index(),nextPrev=$items.eq(next).parent().prevAll(":not(.disabled):visible").eq(0).index(),that.options.liveSearch&&($items.each((function(i){$(this).is(":not(.disabled)")&&$(this).data("index",i)})),index=$items.index($items.filter(".active")),first=$items.filter(":not(.disabled):visible").first().data("index"),last=$items.filter(":not(.disabled):visible").last().data("index"),next=$items.eq(index).nextAll(":not(.disabled):visible").eq(0).data("index"),prev=$items.eq(index).prevAll(":not(.disabled):visible").eq(0).data("index"),nextPrev=$items.eq(next).prevAll(":not(.disabled):visible").eq(0).data("index")),prevIndex=$this.data("prevIndex"),38==e.keyCode&&(that.options.liveSearch&&(index-=1),index!=nextPrev&&index>prev&&(index=prev),index<first&&(index=first),index==prevIndex&&(index=last)),40==e.keyCode&&(that.options.liveSearch&&(index+=1),-1==index&&(index=0),index!=nextPrev&&index<next&&(index=next),index>last&&(index=last),index==prevIndex&&(index=first)),$this.data("prevIndex",index),that.options.liveSearch?(e.preventDefault(),$this.is(".dropdown-toggle")||($items.removeClass("active"),$items.eq(index).addClass("active").find("a").focus(),$this.focus())):$items.eq(index).focus();else if(!$this.is("input")){var count,keyIndex=[];$items.each((function(){$(this).parent().is(":not(.disabled)")&&$.trim($(this).text().toLowerCase()).substring(0,1)==keyCodeMap[e.keyCode]&&keyIndex.push($(this).parent().index())})),count=$(document).data("keycount"),count++,$(document).data("keycount",count),$.trim($(":focus").text().toLowerCase()).substring(0,1)!=keyCodeMap[e.keyCode]?(count=1,$(document).data("keycount",count)):count>=keyIndex.length&&($(document).data("keycount",0),count>keyIndex.length&&(count=1)),$items.eq(keyIndex[count-1]).focus()}/(13|32)/.test(e.keyCode.toString(10))&&isActive&&(/(32)/.test(e.keyCode.toString(10))||e.preventDefault(),that.options.liveSearch?/(32)/.test(e.keyCode.toString(10))||(that.$menu.find(".active a").click(),$this.focus()):$(":focus").click(),$(document).data("keycount",0)),(/(^9$|27)/.test(e.keyCode.toString(10))&&isActive&&(that.multiple||that.options.liveSearch)||/(27)/.test(e.keyCode.toString(10))&&!isActive)&&(that.$menu.parent().removeClass("open"),that.$button.focus())}},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},destroy:function(){this.$newElement.remove(),this.$element.remove()}},$.fn.selectpicker=function(option,event){var value,args=arguments,chain=this.each((function(){if($(this).is("select")){var $this=$(this),data=$this.data("selectpicker"),options="object"==typeof option&&option;if(data){if(options)for(var i in options)options.hasOwnProperty(i)&&(data.options[i]=options[i])}else $this.data("selectpicker",data=new Selectpicker(this,$.extend({},Selectpicker.DEFAULTS,$.fn.selectpicker.defaults||{},$this.data(),options),event));if("string"==typeof option){var property=option;data[property]instanceof Function?([].shift.apply(args),value=data[property].apply(data,args)):value=data.options[property]}}}));return void 0!==value?value:chain},$.fn.selectpicker.Constructor=Selectpicker,$(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input",Selectpicker.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input",(function(e){e.stopPropagation()}))}(jQuery),function($){"use strict";var ContextMenu=function(elements,options){this.$elements=$(elements),this.options=options,this.before=this.options.before||this.before,this.onItem=this.options.onItem||this.onItem,this.options.target&&this.$elements.attr("data-target",this.options.target),this.listen()};ContextMenu.prototype={constructor:ContextMenu,show:function(e){var $menu,evt;if(!$(this).is(".disabled, :disabled")&&(evt=$.Event("context"),this.before.call(this,e,$(e.currentTarget)))){this.$elements.trigger(evt),$menu=this.getMenu();var tp=this.getPosition(e,$menu);return $menu.attr("style","").css(tp).data("_context_this_ref",this).addClass("open"),!1}},closemenu:function(e){this.getMenu().removeClass("open")},before:function(e){return!0},onItem:function(e,context){return!0},listen:function(){var _this=this;this.$elements.on("contextmenu.context.data-api",$.proxy(this.show,this)),$("html").on("click.context.data-api",$.proxy(this.closemenu,this));var $target=$(this.$elements.attr("data-target"));$target.on("click.context.data-api",(function(e){$(this).data("_context_this_ref")==_this&&_this.onItem.call(this,e,$(e.target))})),$("html").on("click.context.data-api",(function(e){e.ctrlKey||$target.removeClass("open")}))},destroy:function(){this.$elements.off(".context.data-api").removeData("context"),$("html").off(".context.data-api"),$(this.$elements.attr("data-target")).off(".context.data-api")},getMenu:function(){var selector=this.$elements.attr("data-target");return selector||(selector=(selector=this.$elements.attr("href"))&&selector.replace(/.*(?=#[^\s]*$)/,"")),$(selector)},getPosition:function(e,$menu){var Y,X,mouseX=e.clientX+$(window).scrollLeft(),mouseY=e.clientY,boundsX=$(window).width(),boundsY=$(window).height(),menuWidth=$menu.find(".dropdown-menu").outerWidth(),menuHeight=$menu.find(".dropdown-menu").outerHeight();return Y=mouseY+menuHeight>boundsY?{top:mouseY-menuHeight+$(window).scrollTop()}:{top:mouseY+$(window).scrollTop()},X=mouseX+menuWidth>boundsX&&mouseX-menuWidth>0?{left:mouseX-menuWidth}:{left:mouseX},$.extend({position:"absolute"},Y,X)},clearMenus:function(e){e.ctrlKey||$("[data-toggle=context]").each((function(){this.getMenu().removeClass("open")}))}},$.fn.contextmenu=function(option,e){var data,options,$this=this;return data=$this.data("context"),options="object"==typeof option&&option,data||$this.data("context",data=new ContextMenu($this,options)),void("string"==typeof option&&data[option].call(data,e))},$.fn.contextmenu.Constructor=ContextMenu,$(document).on("contextmenu.context.data-api","[data-toggle=context]",(function(e){$(this).contextmenu("show",e),e.preventDefault()}))}(window.jQuery),
/*!
 * ZeroClipboard
 * The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie and a JavaScript interface.
 * Copyright (c) 2014 Jon Rohan, James M. Greene
 * Licensed MIT
 * http://zeroclipboard.org/
 * v2.0.2
 */
function(window,undefined){"use strict";var _currentElement,_extractAllDomains,matcherRegex,replacerFn,_window=window,_document=_window.document,_navigator=_window.navigator,_setTimeout=_window.setTimeout,_parseInt=_window.Number.parseInt||_window.parseInt,_parseFloat=_window.Number.parseFloat||_window.parseFloat,_isNaN=_window.Number.isNaN||_window.isNaN,_encodeURIComponent=_window.encodeURIComponent,_Math=_window.Math,_Date=_window.Date,_ActiveXObject=_window.ActiveXObject,_slice=_window.Array.prototype.slice,_keys=_window.Object.keys,_hasOwn=_window.Object.prototype.hasOwnProperty,_defineProperty=function(){if("function"==typeof _window.Object.defineProperty&&function(){try{var x={};return _window.Object.defineProperty(x,"y",{value:"z"}),"z"===x.y}catch(e){return!1}}())return _window.Object.defineProperty}(),_args=function(argumentsObj){return _slice.call(argumentsObj,0)},_inArray=function(item,array,fromIndex){if("function"==typeof array.indexOf)return array.indexOf(item,fromIndex);var i,len=array.length;for(void 0===fromIndex?fromIndex=0:fromIndex<0&&(fromIndex=len+fromIndex),i=fromIndex;i<len;i++)if(_hasOwn.call(array,i)&&array[i]===item)return i;return-1},_extend=function(){var i,len,arg,prop,copy,args=_args(arguments),target=args[0]||{};for(i=1,len=args.length;i<len;i++)if(null!=(arg=args[i]))for(prop in arg)if(_hasOwn.call(arg,prop)){if(target[prop],target===(copy=arg[prop]))continue;undefined!==copy&&(target[prop]=copy)}return target},_deepCopy=function(source){var copy,i,len,prop;if("object"!=typeof source||null==source)copy=source;else if("number"==typeof source.length)for(copy=[],i=0,len=source.length;i<len;i++)_hasOwn.call(source,i)&&(copy[i]=_deepCopy(source[i]));else for(prop in copy={},source)_hasOwn.call(source,prop)&&(copy[prop]=_deepCopy(source[prop]));return copy},_pick=function(obj,keys){for(var newObj={},i=0,len=keys.length;i<len;i++)keys[i]in obj&&(newObj[keys[i]]=obj[keys[i]]);return newObj},_omit=function(obj,keys){var newObj={};for(var prop in obj)-1===_inArray(prop,keys)&&(newObj[prop]=obj[prop]);return newObj},_objectKeys=function(obj){if(null==obj)return[];if(_keys)return _keys(obj);var keys=[];for(var prop in obj)_hasOwn.call(obj,prop)&&keys.push(prop);return keys},_now=function(Date){return function(){return Date.now?Date.now():(new Date).getTime()}}(_Date),_containedBy=function(el,ancestorEl){if(el&&1===el.nodeType&&ancestorEl&&(1===ancestorEl.nodeType||9===ancestorEl.nodeType))do{if(el===ancestorEl)return!0;el=el.parentNode}while(el);return!1},_flashState={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,unavailable:null,deactivated:null,overdue:null,ready:null},_handlers={},_clipData={},_clipDataFormatMap=null,_eventMessages={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate","flash-overdue":"Flash communication was established but NOT within the acceptable time limit"}},_globalConfig={swfPath:function(){var i,jsDir,tmpJsPath,jsPath,swfPath="ZeroClipboard.swf";if(!_document.currentScript||!(jsPath=_document.currentScript.src)){var scripts=_document.getElementsByTagName("script");if("readyState"in scripts[0])for(i=scripts.length;i--&&("interactive"!==scripts[i].readyState||!(jsPath=scripts[i].src)););else if("loading"===_document.readyState)jsPath=scripts[scripts.length-1].src;else{for(i=scripts.length;i--;){if(!(tmpJsPath=scripts[i].src)){jsDir=null;break}if(tmpJsPath=(tmpJsPath=tmpJsPath.split("#")[0].split("?")[0]).slice(0,tmpJsPath.lastIndexOf("/")+1),null==jsDir)jsDir=tmpJsPath;else if(jsDir!==tmpJsPath){jsDir=null;break}}null!==jsDir&&(jsPath=jsDir)}}return jsPath&&(swfPath=(jsPath=jsPath.split("#")[0].split("?")[0]).slice(0,jsPath.lastIndexOf("/")+1)+swfPath),swfPath}(),trustedDomains:window.location.host?[window.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},_config=function(options){if("object"==typeof options&&null!==options)for(var prop in options)if(_hasOwn.call(options,prop))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(prop))_globalConfig[prop]=options[prop];else if(null==_flashState.bridge)if("containerId"===prop||"swfObjectId"===prop){if(!_isValidHtml4Id(options[prop]))throw new Error("The specified `"+prop+"` value is not valid as an HTML4 Element ID");_globalConfig[prop]=options[prop]}else _globalConfig[prop]=options[prop];return"string"==typeof options&&options?_hasOwn.call(_globalConfig,options)?_globalConfig[options]:void 0:_deepCopy(_globalConfig)},_state=function(){return{browser:_pick(_navigator,["userAgent","platform","appName"]),flash:_omit(_flashState,["bridge"]),zeroclipboard:{version:ZeroClipboard.version,config:ZeroClipboard.config()}}},_isFlashUnusable=function(){return!!(_flashState.disabled||_flashState.outdated||_flashState.unavailable||_flashState.deactivated)},_on=function(eventType,listener){var i,len,events,added={};if("string"==typeof eventType&&eventType)events=eventType.toLowerCase().split(/\s+/);else if("object"==typeof eventType&&eventType&&void 0===listener)for(i in eventType)_hasOwn.call(eventType,i)&&"string"==typeof i&&i&&"function"==typeof eventType[i]&&ZeroClipboard.on(i,eventType[i]);if(events&&events.length){for(i=0,len=events.length;i<len;i++)added[eventType=events[i].replace(/^on/,"")]=!0,_handlers[eventType]||(_handlers[eventType]=[]),_handlers[eventType].push(listener);if(added.ready&&_flashState.ready&&ZeroClipboard.emit({type:"ready"}),added.error){var errorTypes=["disabled","outdated","unavailable","deactivated","overdue"];for(i=0,len=errorTypes.length;i<len;i++)if(!0===_flashState[errorTypes[i]]){ZeroClipboard.emit({type:"error",name:"flash-"+errorTypes[i]});break}}}return ZeroClipboard},_off=function(eventType,listener){var i,len,foundIndex,events,perEventHandlers;if(0===arguments.length)events=_objectKeys(_handlers);else if("string"==typeof eventType&&eventType)events=eventType.split(/\s+/);else if("object"==typeof eventType&&eventType&&void 0===listener)for(i in eventType)_hasOwn.call(eventType,i)&&"string"==typeof i&&i&&"function"==typeof eventType[i]&&ZeroClipboard.off(i,eventType[i]);if(events&&events.length)for(i=0,len=events.length;i<len;i++)if(eventType=events[i].toLowerCase().replace(/^on/,""),(perEventHandlers=_handlers[eventType])&&perEventHandlers.length)if(listener)for(foundIndex=_inArray(listener,perEventHandlers);-1!==foundIndex;)perEventHandlers.splice(foundIndex,1),foundIndex=_inArray(listener,perEventHandlers,foundIndex);else perEventHandlers.length=0;return ZeroClipboard},_listeners=function(eventType){return"string"==typeof eventType&&eventType?_deepCopy(_handlers[eventType])||null:_deepCopy(_handlers)},_emit=function(event){var eventCopy,returnVal,tmp;if((event=_createEvent(event))&&!_preprocessEvent(event))return"ready"===event.type&&!0===_flashState.overdue?ZeroClipboard.emit({type:"error",name:"flash-overdue"}):(eventCopy=_extend({},event),_dispatchCallbacks.call(this,eventCopy),"copy"===event.type&&(returnVal=(tmp=_mapClipDataToFlash(_clipData)).data,_clipDataFormatMap=tmp.formatMap),returnVal)},_create=function(){if("boolean"!=typeof _flashState.ready&&(_flashState.ready=!1),!ZeroClipboard.isFlashUnusable()&&null===_flashState.bridge){var maxWait=_globalConfig.flashLoadTimeout;"number"==typeof maxWait&&maxWait>=0&&_setTimeout((function(){"boolean"!=typeof _flashState.deactivated&&(_flashState.deactivated=!0),!0===_flashState.deactivated&&ZeroClipboard.emit({type:"error",name:"flash-deactivated"})}),maxWait),_flashState.overdue=!1,_embedSwf()}},_destroy=function(){ZeroClipboard.clearData(),ZeroClipboard.deactivate(),ZeroClipboard.emit("destroy"),_unembedSwf(),ZeroClipboard.off()},_setData=function(format,data){var dataObj;if("object"==typeof format&&format&&void 0===data)dataObj=format,ZeroClipboard.clearData();else{if("string"!=typeof format||!format)return;(dataObj={})[format]=data}for(var dataFormat in dataObj)"string"==typeof dataFormat&&dataFormat&&_hasOwn.call(dataObj,dataFormat)&&"string"==typeof dataObj[dataFormat]&&dataObj[dataFormat]&&(_clipData[dataFormat]=dataObj[dataFormat])},_clearData=function(format){void 0===format?(!function(obj){if(obj)for(var prop in obj)_hasOwn.call(obj,prop)&&delete obj[prop]}(_clipData),_clipDataFormatMap=null):"string"==typeof format&&_hasOwn.call(_clipData,format)&&delete _clipData[format]},_activate=function(element){if(element&&1===element.nodeType){_currentElement&&(_removeClass(_currentElement,_globalConfig.activeClass),_currentElement!==element&&_removeClass(_currentElement,_globalConfig.hoverClass)),_currentElement=element,_addClass(element,_globalConfig.hoverClass);var newTitle=element.getAttribute("title")||_globalConfig.title;if("string"==typeof newTitle&&newTitle){var htmlBridge=_getHtmlBridge(_flashState.bridge);htmlBridge&&htmlBridge.setAttribute("title",newTitle)}var useHandCursor=!0===_globalConfig.forceHandCursor||"pointer"===_getStyle(element,"cursor");_setHandCursor(useHandCursor),_reposition()}},_deactivate=function(){var htmlBridge=_getHtmlBridge(_flashState.bridge);htmlBridge&&(htmlBridge.removeAttribute("title"),htmlBridge.style.left="0px",htmlBridge.style.top="-9999px",htmlBridge.style.width="1px",htmlBridge.style.top="1px"),_currentElement&&(_removeClass(_currentElement,_globalConfig.hoverClass),_removeClass(_currentElement,_globalConfig.activeClass),_currentElement=null)},_isValidHtml4Id=function(id){return"string"==typeof id&&id&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(id)},_createEvent=function(event){var eventType;if("string"==typeof event&&event?(eventType=event,event={}):"object"==typeof event&&event&&"string"==typeof event.type&&event.type&&(eventType=event.type),eventType){_extend(event,{type:eventType.toLowerCase(),target:event.target||_currentElement||null,relatedTarget:event.relatedTarget||null,currentTarget:_flashState&&_flashState.bridge||null,timeStamp:event.timeStamp||_now()||null});var msg=_eventMessages[event.type];return"error"===event.type&&event.name&&msg&&(msg=msg[event.name]),msg&&(event.message=msg),"ready"===event.type&&_extend(event,{target:null,version:_flashState.version}),"error"===event.type&&(/^flash-(disabled|outdated|unavailable|deactivated|overdue)$/.test(event.name)&&_extend(event,{target:null,minimumVersion:"11.0.0"}),/^flash-(outdated|unavailable|deactivated|overdue)$/.test(event.name)&&_extend(event,{version:_flashState.version})),"copy"===event.type&&(event.clipboardData={setData:ZeroClipboard.setData,clearData:ZeroClipboard.clearData}),"aftercopy"===event.type&&(event=_mapClipResultsFromFlash(event,_clipDataFormatMap)),event.target&&!event.relatedTarget&&(event.relatedTarget=_getRelatedTarget(event.target)),event=_addMouseData(event)}},_getRelatedTarget=function(targetEl){var relatedTargetId=targetEl&&targetEl.getAttribute&&targetEl.getAttribute("data-clipboard-target");return relatedTargetId?_document.getElementById(relatedTargetId):null},_addMouseData=function(event){if(event&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(event.type)){var srcElement=event.target,fromElement="_mouseover"===event.type&&event.relatedTarget?event.relatedTarget:undefined,toElement="_mouseout"===event.type&&event.relatedTarget?event.relatedTarget:undefined,pos=_getDOMObjectPosition(srcElement),screenLeft=_window.screenLeft||_window.screenX||0,screenTop=_window.screenTop||_window.screenY||0,scrollLeft=_document.body.scrollLeft+_document.documentElement.scrollLeft,scrollTop=_document.body.scrollTop+_document.documentElement.scrollTop,pageX=pos.left+("number"==typeof event._stageX?event._stageX:0),pageY=pos.top+("number"==typeof event._stageY?event._stageY:0),clientX=pageX-scrollLeft,clientY=pageY-scrollTop,screenX=screenLeft+clientX,screenY=screenTop+clientY,moveX="number"==typeof event.movementX?event.movementX:0,moveY="number"==typeof event.movementY?event.movementY:0;delete event._stageX,delete event._stageY,_extend(event,{srcElement,fromElement,toElement,screenX,screenY,pageX,pageY,clientX,clientY,x:clientX,y:clientY,movementX:moveX,movementY:moveY,offsetX:0,offsetY:0,layerX:0,layerY:0})}return event},_shouldPerformAsync=function(event){var eventType=event&&"string"==typeof event.type&&event.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(eventType)},_dispatchCallback=function(func,context,args,async){async?_setTimeout((function(){func.apply(context,args)}),0):func.apply(context,args)},_dispatchCallbacks=function(event){if("object"==typeof event&&event&&event.type){var async=_shouldPerformAsync(event),wildcardTypeHandlers=_handlers["*"]||[],specificTypeHandlers=_handlers[event.type]||[],handlers=wildcardTypeHandlers.concat(specificTypeHandlers);if(handlers&&handlers.length){var i,len,func,context,eventCopy;for(i=0,len=handlers.length;i<len;i++)context=this,"string"==typeof(func=handlers[i])&&"function"==typeof _window[func]&&(func=_window[func]),"object"==typeof func&&func&&"function"==typeof func.handleEvent&&(context=func,func=func.handleEvent),"function"==typeof func&&(eventCopy=_extend({},event),_dispatchCallback(func,context,[eventCopy],async))}return this}},_preprocessEvent=function(event){var element=event.target||_currentElement||null,sourceIsSwf="swf"===event._source;switch(delete event._source,event.type){case"error":_inArray(event.name,["flash-disabled","flash-outdated","flash-deactivated","flash-overdue"])&&_extend(_flashState,{disabled:"flash-disabled"===event.name,outdated:"flash-outdated"===event.name,unavailable:"flash-unavailable"===event.name,deactivated:"flash-deactivated"===event.name,overdue:"flash-overdue"===event.name,ready:!1});break;case"ready":var wasDeactivated=!0===_flashState.deactivated;_extend(_flashState,{disabled:!1,outdated:!1,unavailable:!1,deactivated:!1,overdue:wasDeactivated,ready:!wasDeactivated});break;case"copy":var textContent,htmlContent,targetEl=event.relatedTarget;!_clipData["text/html"]&&!_clipData["text/plain"]&&targetEl&&(htmlContent=targetEl.value||targetEl.outerHTML||targetEl.innerHTML)&&(textContent=targetEl.value||targetEl.textContent||targetEl.innerText)?(event.clipboardData.clearData(),event.clipboardData.setData("text/plain",textContent),htmlContent!==textContent&&event.clipboardData.setData("text/html",htmlContent)):!_clipData["text/plain"]&&event.target&&(textContent=event.target.getAttribute("data-clipboard-text"))&&(event.clipboardData.clearData(),event.clipboardData.setData("text/plain",textContent));break;case"aftercopy":ZeroClipboard.clearData(),element&&element!==_safeActiveElement()&&element.focus&&element.focus();break;case"_mouseover":ZeroClipboard.activate(element),!0===_globalConfig.bubbleEvents&&sourceIsSwf&&(element&&element!==event.relatedTarget&&!_containedBy(event.relatedTarget,element)&&_fireMouseEvent(_extend({},event,{type:"mouseenter",bubbles:!1,cancelable:!1})),_fireMouseEvent(_extend({},event,{type:"mouseover"})));break;case"_mouseout":ZeroClipboard.deactivate(),!0===_globalConfig.bubbleEvents&&sourceIsSwf&&(element&&element!==event.relatedTarget&&!_containedBy(event.relatedTarget,element)&&_fireMouseEvent(_extend({},event,{type:"mouseleave",bubbles:!1,cancelable:!1})),_fireMouseEvent(_extend({},event,{type:"mouseout"})));break;case"_mousedown":_addClass(element,_globalConfig.activeClass),!0===_globalConfig.bubbleEvents&&sourceIsSwf&&_fireMouseEvent(_extend({},event,{type:event.type.slice(1)}));break;case"_mouseup":_removeClass(element,_globalConfig.activeClass),!0===_globalConfig.bubbleEvents&&sourceIsSwf&&_fireMouseEvent(_extend({},event,{type:event.type.slice(1)}));break;case"_click":case"_mousemove":!0===_globalConfig.bubbleEvents&&sourceIsSwf&&_fireMouseEvent(_extend({},event,{type:event.type.slice(1)}))}if(/^_(?:click|mouse(?:over|out|down|up|move))$/.test(event.type))return!0},_fireMouseEvent=function(event){if(event&&"string"==typeof event.type&&event){var e,target=event.target||event.srcElement||null,doc=target&&target.ownerDocument||_document,defaults={view:doc.defaultView||_window,canBubble:!0,cancelable:!0,detail:"click"===event.type?1:0,button:"number"==typeof event.which?event.which-1:"number"==typeof event.button?event.button:doc.createEvent?0:1},args=_extend(defaults,event);target&&(doc.createEvent&&target.dispatchEvent?(args=[args.type,args.canBubble,args.cancelable,args.view,args.detail,args.screenX,args.screenY,args.clientX,args.clientY,args.ctrlKey,args.altKey,args.shiftKey,args.metaKey,args.button,args.relatedTarget],(e=doc.createEvent("MouseEvents")).initMouseEvent&&(e.initMouseEvent.apply(e,args),target.dispatchEvent(e))):doc.createEventObject&&target.fireEvent&&(e=doc.createEventObject(args),target.fireEvent("on"+args.type,e)))}},_getHtmlBridge=function(flashBridge){for(var htmlBridge=flashBridge&&flashBridge.parentNode;htmlBridge&&"OBJECT"===htmlBridge.nodeName&&htmlBridge.parentNode;)htmlBridge=htmlBridge.parentNode;return htmlBridge||null},_embedSwf=function(){var len,flashBridge=_flashState.bridge,container=_getHtmlBridge(flashBridge);if(!flashBridge){var allowScriptAccess=_determineScriptAccess(_window.location.host,_globalConfig),allowNetworking="never"===allowScriptAccess?"none":"all",flashvars=_vars(_globalConfig),swfUrl=_globalConfig.swfPath+_cacheBust(_globalConfig.swfPath,_globalConfig);container=function(){var container=_document.createElement("div");return container.id=_globalConfig.containerId,container.className=_globalConfig.containerClass,container.style.position="absolute",container.style.left="0px",container.style.top="-9999px",container.style.width="1px",container.style.height="1px",container.style.zIndex=""+_getSafeZIndex(_globalConfig.zIndex),container}();var divToBeReplaced=_document.createElement("div");container.appendChild(divToBeReplaced),_document.body.appendChild(container);var tmpDiv=_document.createElement("div"),oldIE="activex"===_flashState.pluginType;tmpDiv.innerHTML='<object id="'+_globalConfig.swfObjectId+'" name="'+_globalConfig.swfObjectId+'" width="100%" height="100%" '+(oldIE?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+swfUrl+'"')+">"+(oldIE?'<param name="movie" value="'+swfUrl+'"/>':"")+'<param name="allowScriptAccess" value="'+allowScriptAccess+'"/><param name="allowNetworking" value="'+allowNetworking+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+flashvars+'"/></object>',flashBridge=tmpDiv.firstChild,tmpDiv=null,flashBridge.ZeroClipboard=ZeroClipboard,container.replaceChild(flashBridge,divToBeReplaced)}return flashBridge||((flashBridge=_document[_globalConfig.swfObjectId])&&(len=flashBridge.length)&&(flashBridge=flashBridge[len-1]),!flashBridge&&container&&(flashBridge=container.firstChild)),_flashState.bridge=flashBridge||null,flashBridge},_unembedSwf=function(){var flashBridge=_flashState.bridge;if(flashBridge){var htmlBridge=_getHtmlBridge(flashBridge);htmlBridge&&("activex"===_flashState.pluginType&&"readyState"in flashBridge?(flashBridge.style.display="none",function removeSwfFromIE(){if(4===flashBridge.readyState){for(var prop in flashBridge)"function"==typeof flashBridge[prop]&&(flashBridge[prop]=null);flashBridge.parentNode&&flashBridge.parentNode.removeChild(flashBridge),htmlBridge.parentNode&&htmlBridge.parentNode.removeChild(htmlBridge)}else _setTimeout(removeSwfFromIE,10)}()):(flashBridge.parentNode&&flashBridge.parentNode.removeChild(flashBridge),htmlBridge.parentNode&&htmlBridge.parentNode.removeChild(htmlBridge))),_flashState.ready=null,_flashState.bridge=null,_flashState.deactivated=null}},_mapClipDataToFlash=function(clipData){var newClipData={},formatMap={};if("object"==typeof clipData&&clipData){for(var dataFormat in clipData)if(dataFormat&&_hasOwn.call(clipData,dataFormat)&&"string"==typeof clipData[dataFormat]&&clipData[dataFormat])switch(dataFormat.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":newClipData.text=clipData[dataFormat],formatMap.text=dataFormat;break;case"text/html":case"html":case"air:html":case"flash:html":newClipData.html=clipData[dataFormat],formatMap.html=dataFormat;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":newClipData.rtf=clipData[dataFormat],formatMap.rtf=dataFormat}return{data:newClipData,formatMap}}},_mapClipResultsFromFlash=function(clipResults,formatMap){if("object"!=typeof clipResults||!clipResults||"object"!=typeof formatMap||!formatMap)return clipResults;var newResults={};for(var prop in clipResults)if(_hasOwn.call(clipResults,prop)){if("success"!==prop&&"data"!==prop){newResults[prop]=clipResults[prop];continue}newResults[prop]={};var tmpHash=clipResults[prop];for(var dataFormat in tmpHash)dataFormat&&_hasOwn.call(tmpHash,dataFormat)&&_hasOwn.call(formatMap,dataFormat)&&(newResults[prop][formatMap[dataFormat]]=tmpHash[dataFormat])}return newResults},_cacheBust=function(path,options){return null==options||options&&!0===options.cacheBust?(-1===path.indexOf("?")?"?":"&")+"noCache="+_now():""},_vars=function(options){var i,len,domain,domains,str="",trustedOriginsExpanded=[];if(options.trustedDomains&&("string"==typeof options.trustedDomains?domains=[options.trustedDomains]:"object"==typeof options.trustedDomains&&"length"in options.trustedDomains&&(domains=options.trustedDomains)),domains&&domains.length)for(i=0,len=domains.length;i<len;i++)if(_hasOwn.call(domains,i)&&domains[i]&&"string"==typeof domains[i]){if(!(domain=_extractDomain(domains[i])))continue;if("*"===domain){trustedOriginsExpanded=[domain];break}trustedOriginsExpanded.push.apply(trustedOriginsExpanded,[domain,"//"+domain,_window.location.protocol+"//"+domain])}return trustedOriginsExpanded.length&&(str+="trustedOrigins="+_encodeURIComponent(trustedOriginsExpanded.join(","))),!0===options.forceEnhancedClipboard&&(str+=(str?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof options.swfObjectId&&options.swfObjectId&&(str+=(str?"&":"")+"swfObjectId="+_encodeURIComponent(options.swfObjectId)),str},_extractDomain=function(originOrUrl){if(null==originOrUrl||""===originOrUrl)return null;if(""===(originOrUrl=originOrUrl.replace(/^\s+|\s+$/g,"")))return null;var protocolIndex=originOrUrl.indexOf("//"),pathIndex=(originOrUrl=-1===protocolIndex?originOrUrl:originOrUrl.slice(protocolIndex+2)).indexOf("/");return(originOrUrl=-1===pathIndex?originOrUrl:-1===protocolIndex||0===pathIndex?null:originOrUrl.slice(0,pathIndex))&&".swf"===originOrUrl.slice(-4).toLowerCase()?null:originOrUrl||null},_determineScriptAccess=(_extractAllDomains=function(origins,resultsArray){var i,len,tmp;if(null!=origins&&"*"!==resultsArray[0]&&("string"==typeof origins&&(origins=[origins]),"object"==typeof origins&&"number"==typeof origins.length))for(i=0,len=origins.length;i<len;i++)if(_hasOwn.call(origins,i)&&(tmp=_extractDomain(origins[i]))){if("*"===tmp){resultsArray.length=0,resultsArray.push("*");break}-1===_inArray(tmp,resultsArray)&&resultsArray.push(tmp)}},function(currentDomain,configOptions){var swfDomain=_extractDomain(configOptions.swfPath);null===swfDomain&&(swfDomain=currentDomain);var trustedDomains=[];_extractAllDomains(configOptions.trustedOrigins,trustedDomains),_extractAllDomains(configOptions.trustedDomains,trustedDomains);var len=trustedDomains.length;if(len>0){if(1===len&&"*"===trustedDomains[0])return"always";if(-1!==_inArray(currentDomain,trustedDomains))return 1===len&&currentDomain===swfDomain?"sameDomain":"always"}return"never"}),_safeActiveElement=function(){try{return _document.activeElement}catch(err){return null}},_addClass=function(element,value){if(!element||1!==element.nodeType)return element;if(element.classList)return element.classList.contains(value)||element.classList.add(value),element;if(value&&"string"==typeof value){var classNames=(value||"").split(/\s+/);if(1===element.nodeType)if(element.className){for(var className=" "+element.className+" ",setClass=element.className,c=0,cl=classNames.length;c<cl;c++)className.indexOf(" "+classNames[c]+" ")<0&&(setClass+=" "+classNames[c]);element.className=setClass.replace(/^\s+|\s+$/g,"")}else element.className=value}return element},_removeClass=function(element,value){if(!element||1!==element.nodeType)return element;if(element.classList)return element.classList.contains(value)&&element.classList.remove(value),element;if("string"==typeof value&&value){var classNames=value.split(/\s+/);if(1===element.nodeType&&element.className){for(var className=(" "+element.className+" ").replace(/[\n\t]/g," "),c=0,cl=classNames.length;c<cl;c++)className=className.replace(" "+classNames[c]+" "," ");element.className=className.replace(/^\s+|\s+$/g,"")}}return element},_camelizeCssPropName=(matcherRegex=/\-([a-z])/g,replacerFn=function(match,group){return group.toUpperCase()},function(prop){return prop.replace(matcherRegex,replacerFn)}),_getStyle=function(el,prop){var value,camelProp;return _window.getComputedStyle?value=_window.getComputedStyle(el,null).getPropertyValue(prop):(camelProp=_camelizeCssPropName(prop),value=el.currentStyle?el.currentStyle[camelProp]:el.style[camelProp]),"cursor"!==prop||value&&"auto"!==value||"a"!==el.tagName.toLowerCase()?value:"pointer"},_getDOMObjectPosition=function(obj){var info={left:0,top:0,width:0,height:0};if(obj.getBoundingClientRect){var pageXOffset,pageYOffset,zoomFactor,rect=obj.getBoundingClientRect();"pageXOffset"in _window&&"pageYOffset"in _window?(pageXOffset=_window.pageXOffset,pageYOffset=_window.pageYOffset):(zoomFactor=function(){var rect,physicalWidth,logicalWidth,zoomFactor=1;return"function"==typeof _document.body.getBoundingClientRect&&(physicalWidth=(rect=_document.body.getBoundingClientRect()).right-rect.left,logicalWidth=_document.body.offsetWidth,zoomFactor=_Math.round(physicalWidth/logicalWidth*100)/100),zoomFactor}(),pageXOffset=_Math.round(_document.documentElement.scrollLeft/zoomFactor),pageYOffset=_Math.round(_document.documentElement.scrollTop/zoomFactor));var leftBorderWidth=_document.documentElement.clientLeft||0,topBorderWidth=_document.documentElement.clientTop||0;info.left=rect.left+pageXOffset-leftBorderWidth,info.top=rect.top+pageYOffset-topBorderWidth,info.width="width"in rect?rect.width:rect.right-rect.left,info.height="height"in rect?rect.height:rect.bottom-rect.top}return info},_reposition=function(){var htmlBridge;if(_currentElement&&(htmlBridge=_getHtmlBridge(_flashState.bridge))){var pos=_getDOMObjectPosition(_currentElement);_extend(htmlBridge.style,{width:pos.width+"px",height:pos.height+"px",top:pos.top+"px",left:pos.left+"px",zIndex:""+_getSafeZIndex(_globalConfig.zIndex)})}},_setHandCursor=function(enabled){!0===_flashState.ready&&(_flashState.bridge&&"function"==typeof _flashState.bridge.setHandCursor?_flashState.bridge.setHandCursor(enabled):_flashState.ready=!1)},_getSafeZIndex=function(val){return/^(?:auto|inherit)$/.test(val)?val:("number"!=typeof val||_isNaN(val)?"string"==typeof val&&(zIndex=_getSafeZIndex(_parseInt(val,10))):zIndex=val,"number"==typeof zIndex?zIndex:"auto");var zIndex};!function(ActiveXObject){var ax,mimeType,hasFlash=!1,isActiveX=!1,isPPAPI=!1,flashVersion="";function parseFlashVersion(desc){var matches=desc.match(/[\d]+/g);return matches.length=3,matches.join(".")}function inspectPlugin(plugin){var flashPlayerFileName;plugin&&(hasFlash=!0,plugin.version&&(flashVersion=parseFlashVersion(plugin.version)),!flashVersion&&plugin.description&&(flashVersion=parseFlashVersion(plugin.description)),plugin.filename&&(flashPlayerFileName=plugin.filename,isPPAPI=!!flashPlayerFileName&&(flashPlayerFileName=flashPlayerFileName.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(flashPlayerFileName)||"chrome.plugin"===flashPlayerFileName.slice(-13))))}if(_navigator.plugins&&_navigator.plugins.length)inspectPlugin(_navigator.plugins["Shockwave Flash"]),_navigator.plugins["Shockwave Flash 2.0"]&&(hasFlash=!0,flashVersion="2.0.0.11");else if(_navigator.mimeTypes&&_navigator.mimeTypes.length)inspectPlugin((mimeType=_navigator.mimeTypes["application/x-shockwave-flash"])&&mimeType.enabledPlugin);else if(void 0!==ActiveXObject){isActiveX=!0;try{ax=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),hasFlash=!0,flashVersion=parseFlashVersion(ax.GetVariable("$version"))}catch(e1){try{ax=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),hasFlash=!0,flashVersion="6.0.21"}catch(e2){try{ax=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),hasFlash=!0,flashVersion=parseFlashVersion(ax.GetVariable("$version"))}catch(e3){isActiveX=!1}}}}_flashState.disabled=!0!==hasFlash,_flashState.outdated=flashVersion&&_parseFloat(flashVersion)<_parseFloat("11.0.0"),_flashState.version=flashVersion||"0.0.0",_flashState.pluginType=isPPAPI?"pepper":isActiveX?"activex":hasFlash?"netscape":"unknown"}(_ActiveXObject);var obj,prop,ZeroClipboard=function(){if(!(this instanceof ZeroClipboard))return new ZeroClipboard;"function"==typeof ZeroClipboard._createClient&&ZeroClipboard._createClient.apply(this,_args(arguments))};ZeroClipboard.version="2.0.2",(prop="version")in(obj=ZeroClipboard)&&"function"==typeof _defineProperty&&_defineProperty(obj,prop,{value:obj[prop],writable:!1,configurable:!0,enumerable:!0}),ZeroClipboard.config=function(){return _config.apply(this,_args(arguments))},ZeroClipboard.state=function(){return _state.apply(this,_args(arguments))},ZeroClipboard.isFlashUnusable=function(){return _isFlashUnusable.apply(this,_args(arguments))},ZeroClipboard.on=function(){return _on.apply(this,_args(arguments))},ZeroClipboard.off=function(){return _off.apply(this,_args(arguments))},ZeroClipboard.handlers=function(){return _listeners.apply(this,_args(arguments))},ZeroClipboard.emit=function(){return _emit.apply(this,_args(arguments))},ZeroClipboard.create=function(){return _create.apply(this,_args(arguments))},ZeroClipboard.destroy=function(){return _destroy.apply(this,_args(arguments))},ZeroClipboard.setData=function(){return _setData.apply(this,_args(arguments))},ZeroClipboard.clearData=function(){return _clearData.apply(this,_args(arguments))},ZeroClipboard.activate=function(){return _activate.apply(this,_args(arguments))},ZeroClipboard.deactivate=function(){return _deactivate.apply(this,_args(arguments))};var _clientIdCounter=0,_clientMeta={},_elementIdCounter=0,_elementMeta={},_mouseHandlers={};_extend(_globalConfig,{autoActivate:!0});var _clientConstructor=function(elements){var client=this;client.id=""+_clientIdCounter++,_clientMeta[client.id]={instance:client,elements:[],handlers:{}},elements&&client.clip(elements),ZeroClipboard.on("*",(function(event){return client.emit(event)})),ZeroClipboard.on("destroy",(function(){client.destroy()})),ZeroClipboard.create()},_clientOn=function(eventType,listener){var i,len,events,added={},handlers=_clientMeta[this.id]&&_clientMeta[this.id].handlers;if("string"==typeof eventType&&eventType)events=eventType.toLowerCase().split(/\s+/);else if("object"==typeof eventType&&eventType&&void 0===listener)for(i in eventType)_hasOwn.call(eventType,i)&&"string"==typeof i&&i&&"function"==typeof eventType[i]&&this.on(i,eventType[i]);if(events&&events.length){for(i=0,len=events.length;i<len;i++)added[eventType=events[i].replace(/^on/,"")]=!0,handlers[eventType]||(handlers[eventType]=[]),handlers[eventType].push(listener);if(added.ready&&_flashState.ready&&this.emit({type:"ready",client:this}),added.error){var errorTypes=["disabled","outdated","unavailable","deactivated","overdue"];for(i=0,len=errorTypes.length;i<len;i++)if(_flashState[errorTypes[i]]){this.emit({type:"error",name:"flash-"+errorTypes[i],client:this});break}}}return this},_clientOff=function(eventType,listener){var i,len,foundIndex,events,perEventHandlers,handlers=_clientMeta[this.id]&&_clientMeta[this.id].handlers;if(0===arguments.length)events=_objectKeys(handlers);else if("string"==typeof eventType&&eventType)events=eventType.split(/\s+/);else if("object"==typeof eventType&&eventType&&void 0===listener)for(i in eventType)_hasOwn.call(eventType,i)&&"string"==typeof i&&i&&"function"==typeof eventType[i]&&this.off(i,eventType[i]);if(events&&events.length)for(i=0,len=events.length;i<len;i++)if((perEventHandlers=handlers[eventType=events[i].toLowerCase().replace(/^on/,"")])&&perEventHandlers.length)if(listener)for(foundIndex=_inArray(listener,perEventHandlers);-1!==foundIndex;)perEventHandlers.splice(foundIndex,1),foundIndex=_inArray(listener,perEventHandlers,foundIndex);else perEventHandlers.length=0;return this},_clientListeners=function(eventType){var copy=null,handlers=_clientMeta[this.id]&&_clientMeta[this.id].handlers;return handlers&&(copy="string"==typeof eventType&&eventType?handlers[eventType]?handlers[eventType].slice(0):[]:_deepCopy(handlers)),copy},_clientEmit=function(event){if(_clientShouldEmit.call(this,event)){"object"==typeof event&&event&&"string"==typeof event.type&&event.type&&(event=_extend({},event));var eventCopy=_extend({},_createEvent(event),{client:this});_clientDispatchCallbacks.call(this,eventCopy)}return this},_clientClip=function(elements){elements=_prepClip(elements);for(var i=0;i<elements.length;i++)if(_hasOwn.call(elements,i)&&elements[i]&&1===elements[i].nodeType){elements[i].zcClippingId?-1===_inArray(this.id,_elementMeta[elements[i].zcClippingId])&&_elementMeta[elements[i].zcClippingId].push(this.id):(elements[i].zcClippingId="zcClippingId_"+_elementIdCounter++,_elementMeta[elements[i].zcClippingId]=[this.id],!0===_globalConfig.autoActivate&&_addMouseHandlers(elements[i]));var clippedElements=_clientMeta[this.id]&&_clientMeta[this.id].elements;-1===_inArray(elements[i],clippedElements)&&clippedElements.push(elements[i])}return this},_clientUnclip=function(elements){var meta=_clientMeta[this.id];if(!meta)return this;for(var arrayIndex,clippedElements=meta.elements,i=(elements=void 0===elements?clippedElements.slice(0):_prepClip(elements)).length;i--;)if(_hasOwn.call(elements,i)&&elements[i]&&1===elements[i].nodeType){for(arrayIndex=0;-1!==(arrayIndex=_inArray(elements[i],clippedElements,arrayIndex));)clippedElements.splice(arrayIndex,1);var clientIds=_elementMeta[elements[i].zcClippingId];if(clientIds){for(arrayIndex=0;-1!==(arrayIndex=_inArray(this.id,clientIds,arrayIndex));)clientIds.splice(arrayIndex,1);0===clientIds.length&&(!0===_globalConfig.autoActivate&&_removeMouseHandlers(elements[i]),delete elements[i].zcClippingId)}}return this},_clientElements=function(){var meta=_clientMeta[this.id];return meta&&meta.elements?meta.elements.slice(0):[]},_clientDestroy=function(){this.unclip(),this.off(),delete _clientMeta[this.id]},_clientShouldEmit=function(event){if(!event||!event.type)return!1;if(event.client&&event.client!==this)return!1;var clippedEls=_clientMeta[this.id]&&_clientMeta[this.id].elements,hasClippedEls=!!clippedEls&&clippedEls.length>0,goodTarget=!event.target||hasClippedEls&&-1!==_inArray(event.target,clippedEls),goodRelTarget=event.relatedTarget&&hasClippedEls&&-1!==_inArray(event.relatedTarget,clippedEls),goodClient=event.client&&event.client===this;return!!(goodTarget||goodRelTarget||goodClient)},_clientDispatchCallbacks=function(event){if("object"==typeof event&&event&&event.type){var async=_shouldPerformAsync(event),wildcardTypeHandlers=_clientMeta[this.id]&&_clientMeta[this.id].handlers["*"]||[],specificTypeHandlers=_clientMeta[this.id]&&_clientMeta[this.id].handlers[event.type]||[],handlers=wildcardTypeHandlers.concat(specificTypeHandlers);if(handlers&&handlers.length){var i,len,func,context,eventCopy;for(i=0,len=handlers.length;i<len;i++)context=this,"string"==typeof(func=handlers[i])&&"function"==typeof _window[func]&&(func=_window[func]),"object"==typeof func&&func&&"function"==typeof func.handleEvent&&(context=func,func=func.handleEvent),"function"==typeof func&&(eventCopy=_extend({},event),_dispatchCallback(func,context,[eventCopy],async))}return this}},_prepClip=function(elements){return"string"==typeof elements&&(elements=[]),"number"!=typeof elements.length?[elements]:elements},_addMouseHandlers=function(element){if(element&&1===element.nodeType){var _elementMouseOver=function(event){(event||_window.event)&&ZeroClipboard.activate(element)};!function(element,method,func){element&&1===element.nodeType&&(element.addEventListener?element.addEventListener(method,func,!1):element.attachEvent&&element.attachEvent("on"+method,func))}(element,"mouseover",_elementMouseOver),_mouseHandlers[element.zcClippingId]={mouseover:_elementMouseOver}}},_removeMouseHandlers=function(element){if(element&&1===element.nodeType){var mouseHandlers=_mouseHandlers[element.zcClippingId];"object"==typeof mouseHandlers&&mouseHandlers&&("function"==typeof mouseHandlers.mouseover&&function(element,method,func){element&&1===element.nodeType&&(element.removeEventListener?element.removeEventListener(method,func,!1):element.detachEvent&&element.detachEvent("on"+method,func))}(element,"mouseover",mouseHandlers.mouseover),delete _mouseHandlers[element.zcClippingId])}};ZeroClipboard._createClient=function(){_clientConstructor.apply(this,_args(arguments))},ZeroClipboard.prototype.on=function(){return _clientOn.apply(this,_args(arguments))},ZeroClipboard.prototype.off=function(){return _clientOff.apply(this,_args(arguments))},ZeroClipboard.prototype.handlers=function(){return _clientListeners.apply(this,_args(arguments))},ZeroClipboard.prototype.emit=function(){return _clientEmit.apply(this,_args(arguments))},ZeroClipboard.prototype.clip=function(){return _clientClip.apply(this,_args(arguments))},ZeroClipboard.prototype.unclip=function(){return _clientUnclip.apply(this,_args(arguments))},ZeroClipboard.prototype.elements=function(){return _clientElements.apply(this,_args(arguments))},ZeroClipboard.prototype.destroy=function(){return _clientDestroy.apply(this,_args(arguments))},ZeroClipboard.prototype.setText=function(text){return ZeroClipboard.setData("text/plain",text),this},ZeroClipboard.prototype.setHtml=function(html){return ZeroClipboard.setData("text/html",html),this},ZeroClipboard.prototype.setRichText=function(richText){return ZeroClipboard.setData("application/rtf",richText),this},ZeroClipboard.prototype.setData=function(){return ZeroClipboard.setData.apply(this,_args(arguments)),this},ZeroClipboard.prototype.clearData=function(){return ZeroClipboard.clearData.apply(this,_args(arguments)),this},"function"==typeof define&&define.amd?define((function(){return ZeroClipboard})):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=ZeroClipboard:window.ZeroClipboard=ZeroClipboard}(window),function(window,$,undefined){var colorInput,defaultOpts={beforeShow:noop,move:noop,change:noop,show:noop,hide:noop,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!1,showInitial:!1,showPalette:!1,showPaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",clearText:"Clear Color Selection",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,extraReplacerAttr:{}},spectrums=[],IE=!!/msie/i.exec(window.navigator.userAgent),rgbaSupport=function(){function contains(str,substr){return!!~(""+str).indexOf(substr)}var style=document.createElement("div").style;return style.cssText="background-color:rgba(0,0,0,.5)",contains(style.backgroundColor,"rgba")||contains(style.backgroundColor,"hsla")}(),inputTypeColorSupport="color"===(colorInput=$("<input type='color' value='!' />")[0]).type&&"!"!==colorInput.value,replaceInput=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),markup=function(){var gradientFix="";if(IE)for(var i=1;i<=6;i++)gradientFix+="<div class='sp-"+i+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",gradientFix,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function paletteTemplate(p,color,className,tooltipFormat){for(var html=[],i=0;i<p.length;i++){var current=p[i];if(current){var tiny=tinycolor(current),c=tiny.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";c+=tinycolor.equals(color,current)?" sp-thumb-active":"";var formattedString=tiny.toString(tooltipFormat||"rgb"),swatchStyle=rgbaSupport?"background-color:"+tiny.toRgbString():"filter:"+tiny.toFilter();html.push('<span title="'+formattedString+'" data-color="'+tiny.toRgbString()+'" class="'+c+'"><span class="sp-thumb-inner" style="'+swatchStyle+';" /></span>')}else{html.push('<span title="No Color Selected" data-color="" style="background-color:transparent;" class="sp-clear-display"></span>')}}return"<div class='sp-cf "+className+"'>"+html.join("")+"</div>"}function spectrum(element,o){var func,wait,debounce,timeout,opts=function(o,callbackContext){var opts=$.extend({},defaultOpts,o);return opts.callbacks={move:bind(opts.move,callbackContext),change:bind(opts.change,callbackContext),show:bind(opts.show,callbackContext),hide:bind(opts.hide,callbackContext),beforeShow:bind(opts.beforeShow,callbackContext)},opts}(o,element),flat=opts.flat,showSelectionPalette=opts.showSelectionPalette,localStorageKey=opts.localStorageKey,theme=opts.theme,callbacks=opts.callbacks,resize=(func=reflow,wait=10,function(){var context=this,args=arguments,throttler=function(){timeout=null,func.apply(context,args)};debounce&&clearTimeout(timeout),!debounce&&timeout||(timeout=setTimeout(throttler,wait))}),visible=!1,dragWidth=0,dragHeight=0,dragHelperHeight=0,slideHeight=0,alphaWidth=0,alphaSlideHelperWidth=0,slideHelperHeight=0,currentHue=0,currentSaturation=0,currentValue=0,currentAlpha=1,palette=[],paletteArray=[],paletteLookup={},selectionPalette=opts.selectionPalette.slice(0),maxSelectionSize=opts.maxSelectionSize,draggingClass="sp-dragging",shiftMovementDirection=null,doc=element.ownerDocument,boundElement=(doc.body,$(element)),disabled=!1,container=$(markup,doc).addClass(theme),dragger=container.find(".sp-color"),dragHelper=container.find(".sp-dragger"),slider=container.find(".sp-hue"),slideHelper=container.find(".sp-slider"),alphaSliderInner=container.find(".sp-alpha-inner"),alphaSlider=container.find(".sp-alpha"),alphaSlideHelper=container.find(".sp-alpha-handle"),textInput=container.find(".sp-input"),paletteContainer=container.find(".sp-palette"),initialColorContainer=container.find(".sp-initial"),cancelButton=container.find(".sp-cancel"),clearButton=container.find(".sp-clear"),chooseButton=container.find(".sp-choose"),isInput=boundElement.is("input"),isInputTypeColor=isInput&&inputTypeColorSupport&&"color"===boundElement.attr("type"),shouldReplace=isInput&&!flat,replacer=shouldReplace?$(replaceInput).addClass(theme).addClass(opts.className).addClass(opts.replacerClassName).attr(opts.extraReplacerAttr):$([]),offsetElement=shouldReplace?replacer:boundElement,previewElement=replacer.find(".sp-preview-inner"),initialColor=opts.color||isInput&&boundElement.val(),colorOnShow=!1,preferredFormat=opts.preferredFormat,currentPreferredFormat=preferredFormat,clickoutFiresChange=!opts.showButtons||opts.clickoutFiresChange,isEmpty=!initialColor,allowEmpty=opts.allowEmpty&&!isInputTypeColor;function applyOptions(){if(opts.showPaletteOnly&&(opts.showPalette=!0),opts.palette){palette=opts.palette.slice(0),paletteArray=$.isArray(palette[0])?palette:[palette],paletteLookup={};for(var i=0;i<paletteArray.length;i++)for(var j=0;j<paletteArray[i].length;j++){var rgb=tinycolor(paletteArray[i][j]).toRgbString();paletteLookup[rgb]=!0}}container.toggleClass("sp-flat",flat),container.toggleClass("sp-input-disabled",!opts.showInput),container.toggleClass("sp-alpha-enabled",opts.showAlpha),container.toggleClass("sp-clear-enabled",allowEmpty),container.toggleClass("sp-buttons-disabled",!opts.showButtons),container.toggleClass("sp-palette-disabled",!opts.showPalette),container.toggleClass("sp-palette-only",opts.showPaletteOnly),container.toggleClass("sp-initial-disabled",!opts.showInitial),container.addClass(opts.className).addClass(opts.containerClassName),reflow()}function updateSelectionPaletteFromStorage(){if(localStorageKey&&window.localStorage){try{var oldPalette=window.localStorage[localStorageKey].split(",#");oldPalette.length>1&&(delete window.localStorage[localStorageKey],$.each(oldPalette,(function(i,c){addColorToSelectionPalette(c)})))}catch(e){}try{selectionPalette=window.localStorage[localStorageKey].split(";")}catch(e){}}}function addColorToSelectionPalette(color){if(showSelectionPalette){var rgb=tinycolor(color).toRgbString();if(!paletteLookup[rgb]&&-1===$.inArray(rgb,selectionPalette))for(selectionPalette.push(rgb);selectionPalette.length>maxSelectionSize;)selectionPalette.shift();if(localStorageKey&&window.localStorage)try{window.localStorage[localStorageKey]=selectionPalette.join(";")}catch(e){}}}function drawPalette(){var currentColor=get(),html=$.map(paletteArray,(function(palette,i){return paletteTemplate(palette,currentColor,"sp-palette-row sp-palette-row-"+i,opts.preferredFormat)}));updateSelectionPaletteFromStorage(),selectionPalette&&html.push(paletteTemplate(function(){var unique=[];if(opts.showPalette)for(var i=0;i<selectionPalette.length;i++){var rgb=tinycolor(selectionPalette[i]).toRgbString();paletteLookup[rgb]||unique.push(selectionPalette[i])}return unique.reverse().slice(0,opts.maxSelectionSize)}(),currentColor,"sp-palette-row sp-palette-row-selection",opts.preferredFormat)),paletteContainer.html(html.join(""))}function drawInitial(){if(opts.showInitial){var initial=colorOnShow,current=get();initialColorContainer.html(paletteTemplate([initial,current],current,"sp-palette-row-initial",opts.preferredFormat))}}function dragStart(){(dragHeight<=0||dragWidth<=0||slideHeight<=0)&&reflow(),container.addClass(draggingClass),shiftMovementDirection=null,boundElement.trigger("dragstart.spectrum",[get()])}function dragStop(){container.removeClass(draggingClass),boundElement.trigger("dragstop.spectrum",[get()])}function setFromTextInput(){var value=textInput.val();if(null!==value&&""!==value||!allowEmpty){var tiny=tinycolor(value);tiny.ok?(set(tiny),updateOriginalInput(!0)):textInput.addClass("sp-validation-error")}else set(null),updateOriginalInput(!0)}function toggle(){visible?hide():show()}function show(){var event=$.Event("beforeShow.spectrum");visible?reflow():(boundElement.trigger(event,[get()]),!1===callbacks.beforeShow(get())||event.isDefaultPrevented()||(!function(){for(var i=0;i<spectrums.length;i++)spectrums[i]&&spectrums[i].hide()}(),visible=!0,$(doc).bind("click.spectrum",hide),$(window).bind("resize.spectrum",resize),replacer.addClass("sp-active"),container.removeClass("sp-hidden"),reflow(),updateUI(),colorOnShow=get(),drawInitial(),callbacks.show(colorOnShow),boundElement.trigger("show.spectrum",[colorOnShow])))}function hide(e){e&&"click"==e.type&&2==e.button||visible&&!flat&&(visible=!1,$(doc).unbind("click.spectrum",hide),$(window).unbind("resize.spectrum",resize),replacer.removeClass("sp-active"),container.addClass("sp-hidden"),!tinycolor.equals(get(),colorOnShow)&&(clickoutFiresChange&&"cancel"!==e?updateOriginalInput(!0):set(colorOnShow,!0)),callbacks.hide(get()),boundElement.trigger("hide.spectrum",[get()]))}function set(color,ignoreFormatChange){var newColor,newHsv;tinycolor.equals(color,get()),!color&&allowEmpty?isEmpty=!0:(isEmpty=!1,newHsv=(newColor=tinycolor(color)).toHsv(),currentHue=newHsv.h%360/360,currentSaturation=newHsv.s,currentValue=newHsv.v,currentAlpha=newHsv.a),updateUI(),newColor&&newColor.ok&&!ignoreFormatChange&&(currentPreferredFormat=preferredFormat||newColor.format)}function get(opts){return opts=opts||{},allowEmpty&&isEmpty?null:tinycolor.fromRatio({h:currentHue,s:currentSaturation,v:currentValue,a:Math.round(100*currentAlpha)/100},{format:opts.format||currentPreferredFormat})}function move(){updateUI(),callbacks.move(get()),boundElement.trigger("move.spectrum",[get()])}function updateUI(){textInput.removeClass("sp-validation-error"),updateHelperLocations();var flatColor=tinycolor.fromRatio({h:currentHue,s:1,v:1});dragger.css("background-color",flatColor.toHexString());var format=currentPreferredFormat;currentAlpha<1&&(0!==currentAlpha||"name"!==format)&&("hex"!==format&&"hex3"!==format&&"hex6"!==format&&"name"!==format||(format="rgb"));var realColor=get({format}),displayColor="";if(previewElement.removeClass("sp-clear-display"),previewElement.css("background-color","transparent"),!realColor&&allowEmpty)previewElement.addClass("sp-clear-display");else{var realHex=realColor.toHexString(),realRgb=realColor.toRgbString();if(rgbaSupport||1===realColor.alpha?previewElement.css("background-color",realRgb):(previewElement.css("background-color","transparent"),previewElement.css("filter",realColor.toFilter())),opts.showAlpha){var rgb=realColor.toRgb();rgb.a=0;var realAlpha=tinycolor(rgb).toRgbString(),gradient="linear-gradient(left, "+realAlpha+", "+realHex+")";IE?alphaSliderInner.css("filter",tinycolor(realAlpha).toFilter({gradientType:1},realHex)):(alphaSliderInner.css("background","-webkit-"+gradient),alphaSliderInner.css("background","-moz-"+gradient),alphaSliderInner.css("background","-ms-"+gradient),alphaSliderInner.css("background","linear-gradient(to right, "+realAlpha+", "+realHex+")"))}displayColor=realColor.toString(format)}opts.showInput&&textInput.val(displayColor),opts.showPalette&&drawPalette(),drawInitial()}function updateHelperLocations(){var s=currentSaturation,v=currentValue;if(allowEmpty&&isEmpty)alphaSlideHelper.hide(),slideHelper.hide(),dragHelper.hide();else{alphaSlideHelper.show(),slideHelper.show(),dragHelper.show();var dragX=s*dragWidth,dragY=dragHeight-v*dragHeight;dragX=Math.max(-dragHelperHeight,Math.min(dragWidth-dragHelperHeight,dragX-dragHelperHeight)),dragY=Math.max(-dragHelperHeight,Math.min(dragHeight-dragHelperHeight,dragY-dragHelperHeight)),dragHelper.css({top:dragY+"px",left:dragX+"px"});var alphaX=currentAlpha*alphaWidth;alphaSlideHelper.css({left:alphaX-alphaSlideHelperWidth/2+"px"});var slideY=currentHue*slideHeight;slideHelper.css({top:slideY-slideHelperHeight+"px"})}}function updateOriginalInput(fireCallback){var color=get(),displayColor="";//!tinycolor.equals(color, colorOnShow);
color&&(displayColor=color.toString(currentPreferredFormat),addColorToSelectionPalette(color)),isInput&&boundElement.val(displayColor),colorOnShow=color,fireCallback&&(callbacks.change(color),boundElement.trigger("change",[color]))}function reflow(){dragWidth=dragger.width(),dragHeight=dragger.height(),dragHelperHeight=dragHelper.height(),slider.width(),slideHeight=slider.height(),slideHelperHeight=slideHelper.height(),alphaWidth=alphaSlider.width(),alphaSlideHelperWidth=alphaSlideHelper.width(),flat||(container.css("position","absolute"),container.offset(function(picker,input){var extraY=0,dpWidth=picker.outerWidth(),dpHeight=picker.outerHeight(),inputHeight=input.outerHeight(),doc=picker[0].ownerDocument,docElem=doc.documentElement,viewWidth=docElem.clientWidth+$(doc).scrollLeft(),viewHeight=docElem.clientHeight+$(doc).scrollTop(),offset=input.offset();return offset.top+=inputHeight,offset.left-=Math.min(offset.left,offset.left+dpWidth>viewWidth&&viewWidth>dpWidth?Math.abs(offset.left+dpWidth-viewWidth):0),offset.top-=Math.min(offset.top,offset.top+dpHeight>viewHeight&&viewHeight>dpHeight?Math.abs(dpHeight+inputHeight-extraY):extraY),offset}(container,offsetElement))),updateHelperLocations(),opts.showPalette&&drawPalette(),boundElement.trigger("reflow.spectrum")}function disable(){hide(),disabled=!0,boundElement.attr("disabled",!0),offsetElement.addClass("sp-disabled")}!function(){if(IE&&container.find("*:not(input)").attr("unselectable","on"),applyOptions(),shouldReplace&&boundElement.after(replacer).hide(),allowEmpty||clearButton.hide(),flat)boundElement.after(container).hide();else{var appendTo="parent"===opts.appendTo?boundElement.parent():$(opts.appendTo);1!==appendTo.length&&(appendTo=$("body")),appendTo.append(container)}function palletElementClick(e){return e.data&&e.data.ignore?(set($(this).data("color")),move()):(set($(this).data("color")),move(),updateOriginalInput(!0),hide()),!1}updateSelectionPaletteFromStorage(),offsetElement.bind("click.spectrum touchstart.spectrum",(function(e){disabled||toggle(),e.stopPropagation(),$(e.target).is("input")||e.preventDefault()})),(boundElement.is(":disabled")||!0===opts.disabled)&&disable(),container.click(stopPropagation),textInput.change(setFromTextInput),textInput.bind("paste",(function(){setTimeout(setFromTextInput,1)})),textInput.keydown((function(e){13==e.keyCode&&setFromTextInput()})),cancelButton.text(opts.cancelText),cancelButton.bind("click.spectrum",(function(e){e.stopPropagation(),e.preventDefault(),hide("cancel")})),clearButton.attr("title",opts.clearText),clearButton.bind("click.spectrum",(function(e){e.stopPropagation(),e.preventDefault(),isEmpty=!0,move(),flat&&updateOriginalInput(!0)})),chooseButton.text(opts.chooseText),chooseButton.bind("click.spectrum",(function(e){e.stopPropagation(),e.preventDefault(),textInput.hasClass("sp-validation-error")||(updateOriginalInput(!0),hide())})),draggable(alphaSlider,(function(dragX,dragY,e){currentAlpha=dragX/alphaWidth,isEmpty=!1,e.shiftKey&&(currentAlpha=Math.round(10*currentAlpha)/10),move()}),dragStart,dragStop),draggable(slider,(function(dragX,dragY){currentHue=parseFloat(dragY/slideHeight),isEmpty=!1,opts.showAlpha||(currentAlpha=1),move()}),dragStart,dragStop),draggable(dragger,(function(dragX,dragY,e){if(e.shiftKey){if(!shiftMovementDirection){var oldDragX=currentSaturation*dragWidth,oldDragY=dragHeight-currentValue*dragHeight,furtherFromX=Math.abs(dragX-oldDragX)>Math.abs(dragY-oldDragY);shiftMovementDirection=furtherFromX?"x":"y"}}else shiftMovementDirection=null;var setValue=!shiftMovementDirection||"y"===shiftMovementDirection;(!shiftMovementDirection||"x"===shiftMovementDirection)&&(currentSaturation=parseFloat(dragX/dragWidth)),setValue&&(currentValue=parseFloat((dragHeight-dragY)/dragHeight)),isEmpty=!1,opts.showAlpha||(currentAlpha=1),move()}),dragStart,dragStop),initialColor?(set(initialColor),updateUI(),currentPreferredFormat=preferredFormat||tinycolor(initialColor).format,addColorToSelectionPalette(initialColor)):updateUI(),flat&&show();var paletteEvent=IE?"mousedown.spectrum":"click.spectrum touchstart.spectrum";paletteContainer.delegate(".sp-thumb-el",paletteEvent,palletElementClick),initialColorContainer.delegate(".sp-thumb-el:nth-child(1)",paletteEvent,{ignore:!0},palletElementClick)}();var spect={show,hide,toggle,reflow,option:function(optionName,optionValue){return undefined===optionName?$.extend({},opts):undefined===optionValue?opts[optionName]:(opts[optionName]=optionValue,void applyOptions())},enable:function(){disabled=!1,boundElement.attr("disabled",!1),offsetElement.removeClass("sp-disabled")},disable,set:function(c){set(c),updateOriginalInput()},get,destroy:function(){boundElement.show(),offsetElement.unbind("click.spectrum touchstart.spectrum"),container.remove(),replacer.remove(),spectrums[spect.id]=null},container};return spect.id=spectrums.push(spect)-1,spect}function noop(){}function stopPropagation(e){e.stopPropagation()}function bind(func,obj){var slice=Array.prototype.slice,args=slice.call(arguments,2);return function(){return func.apply(obj,args.concat(slice.call(arguments)))}}function draggable(element,onmove,onstart,onstop){onmove=onmove||function(){},onstart=onstart||function(){},onstop=onstop||function(){};var doc=element.ownerDocument||document,dragging=!1,offset={},maxHeight=0,maxWidth=0,hasTouch="ontouchstart"in window,duringDragEvents={};function prevent(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function move(e){if(dragging){if(IE&&document.documentMode<9&&!e.button)return stop();var touches=e.originalEvent.touches,pageX=touches?touches[0].pageX:e.pageX,pageY=touches?touches[0].pageY:e.pageY,dragX=Math.max(0,Math.min(pageX-offset.left,maxWidth)),dragY=Math.max(0,Math.min(pageY-offset.top,maxHeight));hasTouch&&prevent(e),onmove.apply(element,[dragX,dragY,e])}}function stop(){dragging&&($(doc).unbind(duringDragEvents),$(doc.body).removeClass("sp-dragging"),onstop.apply(element,arguments)),dragging=!1}duringDragEvents.selectstart=prevent,duringDragEvents.dragstart=prevent,duringDragEvents["touchmove mousemove"]=move,duringDragEvents["touchend mouseup"]=stop,$(element).bind("touchstart mousedown",(function(e){var rightclick=e.which?3==e.which:2==e.button;e.originalEvent.touches,rightclick||dragging||!1!==onstart.apply(element,arguments)&&(dragging=!0,maxHeight=$(element).height(),maxWidth=$(element).width(),offset=$(element).offset(),$(doc).bind(duringDragEvents),$(doc.body).addClass("sp-dragging"),hasTouch||move(e),prevent(e))}))}$.fn.spectrum=function(opts,extra){if("string"==typeof opts){var returnValue=this,args=Array.prototype.slice.call(arguments,1);return this.each((function(){var spect=spectrums[$(this).data("spectrum.id")];if(spect){var method=spect[opts];if(!method)throw new Error("Spectrum: no such method: '"+opts+"'");"get"==opts?returnValue=spect.get():"container"==opts?returnValue=spect.container:"option"==opts?returnValue=spect.option.apply(spect,args):"destroy"==opts?(spect.destroy(),$(this).removeData("spectrum.id")):method.apply(spect,args)}})),returnValue}return this.spectrum("destroy").each((function(){var spect=spectrum(this,$.extend({},opts,$(this).data()));$(this).data("spectrum.id",spect.id)}))},$.fn.spectrum.load=!0,$.fn.spectrum.loadOpts={},$.fn.spectrum.draggable=draggable,$.fn.spectrum.defaults=defaultOpts,$.spectrum={},$.spectrum.localization={},$.spectrum.palettes={},$.fn.spectrum.processNativeColorInputs=function(){inputTypeColorSupport||$("input[type=color]").spectrum({preferredFormat:"hex6"})},function(){var trimLeft=/^[\s,#]+/,trimRight=/\s+$/,tinyCounter=0,math=Math,mathRound=math.round,mathMin=math.min,mathMax=math.max,mathRandom=math.random;function tinycolor(color,opts){if(opts=opts||{},"object"==typeof(color=color||"")&&color.hasOwnProperty("_tc_id"))return color;var rgb=function(color){var rgb={r:0,g:0,b:0},a=1,ok=!1,format=!1;"string"==typeof color&&(color=function(color){color=color.replace(trimLeft,"").replace(trimRight,"").toLowerCase();var match,named=!1;if(names[color])color=names[color],named=!0;else if("transparent"==color)return{r:0,g:0,b:0,a:0,format:"name"};if(match=matchers.rgb.exec(color))return{r:match[1],g:match[2],b:match[3]};if(match=matchers.rgba.exec(color))return{r:match[1],g:match[2],b:match[3],a:match[4]};if(match=matchers.hsl.exec(color))return{h:match[1],s:match[2],l:match[3]};if(match=matchers.hsla.exec(color))return{h:match[1],s:match[2],l:match[3],a:match[4]};if(match=matchers.hsv.exec(color))return{h:match[1],s:match[2],v:match[3]};if(match=matchers.hex8.exec(color))return{a:convertHexToDecimal(match[1]),r:parseIntFromHex(match[2]),g:parseIntFromHex(match[3]),b:parseIntFromHex(match[4]),format:named?"name":"hex8"};if(match=matchers.hex6.exec(color))return{r:parseIntFromHex(match[1]),g:parseIntFromHex(match[2]),b:parseIntFromHex(match[3]),format:named?"name":"hex"};if(match=matchers.hex3.exec(color))return{r:parseIntFromHex(match[1]+""+match[1]),g:parseIntFromHex(match[2]+""+match[2]),b:parseIntFromHex(match[3]+""+match[3]),format:named?"name":"hex"};return!1}(color));"object"==typeof color&&(color.hasOwnProperty("r")&&color.hasOwnProperty("g")&&color.hasOwnProperty("b")?(rgb=function(r,g,b){return{r:255*bound01(r,255),g:255*bound01(g,255),b:255*bound01(b,255)}}(color.r,color.g,color.b),ok=!0,format="%"===String(color.r).substr(-1)?"prgb":"rgb"):color.hasOwnProperty("h")&&color.hasOwnProperty("s")&&color.hasOwnProperty("v")?(color.s=convertToPercentage(color.s),color.v=convertToPercentage(color.v),rgb=function(h,s,v){h=6*bound01(h,360),s=bound01(s,100),v=bound01(v,100);var i=math.floor(h),f=h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),mod=i%6,r=[v,q,p,p,t,v][mod],g=[t,v,v,q,p,p][mod],b=[p,p,t,v,v,q][mod];return{r:255*r,g:255*g,b:255*b}}(color.h,color.s,color.v),ok=!0,format="hsv"):color.hasOwnProperty("h")&&color.hasOwnProperty("s")&&color.hasOwnProperty("l")&&(color.s=convertToPercentage(color.s),color.l=convertToPercentage(color.l),rgb=function(h,s,l){var r,g,b;function hue2rgb(p,q,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+(q-p)*(2/3-t)*6:p}if(h=bound01(h,360),s=bound01(s,100),l=bound01(l,100),0===s)r=g=b=l;else{var q=l<.5?l*(1+s):l+s-l*s,p=2*l-q;r=hue2rgb(p,q,h+1/3),g=hue2rgb(p,q,h),b=hue2rgb(p,q,h-1/3)}return{r:255*r,g:255*g,b:255*b}}(color.h,color.s,color.l),ok=!0,format="hsl"),color.hasOwnProperty("a")&&(a=color.a));return a=boundAlpha(a),{ok,format:color.format||format,r:mathMin(255,mathMax(rgb.r,0)),g:mathMin(255,mathMax(rgb.g,0)),b:mathMin(255,mathMax(rgb.b,0)),a}}(color),r=rgb.r,g=rgb.g,b=rgb.b,a=rgb.a,roundA=mathRound(100*a)/100,format=opts.format||rgb.format;return r<1&&(r=mathRound(r)),g<1&&(g=mathRound(g)),b<1&&(b=mathRound(b)),{ok:rgb.ok,format,_tc_id:tinyCounter++,alpha:a,getAlpha:function(){return a},setAlpha:function(value){a=boundAlpha(value),roundA=mathRound(100*a)/100},toHsv:function(){var hsv=rgbToHsv(r,g,b);return{h:360*hsv.h,s:hsv.s,v:hsv.v,a}},toHsvString:function(){var hsv=rgbToHsv(r,g,b),h=mathRound(360*hsv.h),s=mathRound(100*hsv.s),v=mathRound(100*hsv.v);return 1==a?"hsv("+h+", "+s+"%, "+v+"%)":"hsva("+h+", "+s+"%, "+v+"%, "+roundA+")"},toHsl:function(){var hsl=rgbToHsl(r,g,b);return{h:360*hsl.h,s:hsl.s,l:hsl.l,a}},toHslString:function(){var hsl=rgbToHsl(r,g,b),h=mathRound(360*hsl.h),s=mathRound(100*hsl.s),l=mathRound(100*hsl.l);return 1==a?"hsl("+h+", "+s+"%, "+l+"%)":"hsla("+h+", "+s+"%, "+l+"%, "+roundA+")"},toHex:function(allow3Char){return rgbToHex(r,g,b,allow3Char)},toHexString:function(allow3Char){return"#"+this.toHex(allow3Char)},toHex8:function(){return rgbaToHex(r,g,b,a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:mathRound(r),g:mathRound(g),b:mathRound(b),a}},toRgbString:function(){return 1==a?"rgb("+mathRound(r)+", "+mathRound(g)+", "+mathRound(b)+")":"rgba("+mathRound(r)+", "+mathRound(g)+", "+mathRound(b)+", "+roundA+")"},toPercentageRgb:function(){return{r:mathRound(100*bound01(r,255))+"%",g:mathRound(100*bound01(g,255))+"%",b:mathRound(100*bound01(b,255))+"%",a}},toPercentageRgbString:function(){return 1==a?"rgb("+mathRound(100*bound01(r,255))+"%, "+mathRound(100*bound01(g,255))+"%, "+mathRound(100*bound01(b,255))+"%)":"rgba("+mathRound(100*bound01(r,255))+"%, "+mathRound(100*bound01(g,255))+"%, "+mathRound(100*bound01(b,255))+"%, "+roundA+")"},toName:function(){return 0===a?"transparent":hexNames[rgbToHex(r,g,b,!0)]||!1},toFilter:function(secondColor){var hex8String="#"+rgbaToHex(r,g,b,a),secondHex8String=hex8String,gradientType=opts&&opts.gradientType?"GradientType = 1, ":"";secondColor&&(secondHex8String=tinycolor(secondColor).toHex8String());return"progid:DXImageTransform.Microsoft.gradient("+gradientType+"startColorstr="+hex8String+",endColorstr="+secondHex8String+")"},toString:function(format){var formatSet=!!format;format=format||this.format;var formattedString=!1,formatWithAlpha=!formatSet&&a<1&&a>0&&("hex"===format||"hex6"===format||"hex3"===format||"name"===format);return"rgb"===format&&(formattedString=this.toRgbString()),"prgb"===format&&(formattedString=this.toPercentageRgbString()),"hex"!==format&&"hex6"!==format||(formattedString=this.toHexString()),"hex3"===format&&(formattedString=this.toHexString(!0)),"hex8"===format&&(formattedString=this.toHex8String()),"name"===format&&(formattedString=this.toName()),"hsl"===format&&(formattedString=this.toHslString()),"hsv"===format&&(formattedString=this.toHsvString()),formatWithAlpha?this.toRgbString():formattedString||this.toHexString()}}}function rgbToHsl(r,g,b){r=bound01(r,255),g=bound01(g,255),b=bound01(b,255);var h,s,max=mathMax(r,g,b),min=mathMin(r,g,b),l=(max+min)/2;if(max==min)h=s=0;else{var d=max-min;switch(s=l>.5?d/(2-max-min):d/(max+min),max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h,s,l}}function rgbToHsv(r,g,b){r=bound01(r,255),g=bound01(g,255),b=bound01(b,255);var h,s,max=mathMax(r,g,b),min=mathMin(r,g,b),v=max,d=max-min;if(s=0===max?0:d/max,max==min)h=0;else{switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h,s,v}}function rgbToHex(r,g,b,allow3Char){var hex=[pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];return allow3Char&&hex[0].charAt(0)==hex[0].charAt(1)&&hex[1].charAt(0)==hex[1].charAt(1)&&hex[2].charAt(0)==hex[2].charAt(1)?hex[0].charAt(0)+hex[1].charAt(0)+hex[2].charAt(0):hex.join("")}function rgbaToHex(r,g,b,a){var d;return[pad2((d=a,Math.round(255*parseFloat(d)).toString(16))),pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))].join("")}tinycolor.fromRatio=function(color,opts){if("object"==typeof color){var newColor={};for(var i in color)color.hasOwnProperty(i)&&(newColor[i]="a"===i?color[i]:convertToPercentage(color[i]));color=newColor}return tinycolor(color,opts)},tinycolor.equals=function(color1,color2){return!(!color1||!color2)&&tinycolor(color1).toRgbString()==tinycolor(color2).toRgbString()},tinycolor.random=function(){return tinycolor.fromRatio({r:mathRandom(),g:mathRandom(),b:mathRandom()})},tinycolor.desaturate=function(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.s-=amount/100,hsl.s=clamp01(hsl.s),tinycolor(hsl)},tinycolor.saturate=function(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.s+=amount/100,hsl.s=clamp01(hsl.s),tinycolor(hsl)},tinycolor.greyscale=function(color){return tinycolor.desaturate(color,100)},tinycolor.lighten=function(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.l+=amount/100,hsl.l=clamp01(hsl.l),tinycolor(hsl)},tinycolor.darken=function(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.l-=amount/100,hsl.l=clamp01(hsl.l),tinycolor(hsl)},tinycolor.complement=function(color){var hsl=tinycolor(color).toHsl();return hsl.h=(hsl.h+180)%360,tinycolor(hsl)},tinycolor.triad=function(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+120)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+240)%360,s:hsl.s,l:hsl.l})]},tinycolor.tetrad=function(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+90)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+180)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+270)%360,s:hsl.s,l:hsl.l})]},tinycolor.splitcomplement=function(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+72)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+216)%360,s:hsl.s,l:hsl.l})]},tinycolor.analogous=function(color,results,slices){results=results||6,slices=slices||30;var hsl=tinycolor(color).toHsl(),part=360/slices,ret=[tinycolor(color)];for(hsl.h=(hsl.h-(part*results>>1)+720)%360;--results;)hsl.h=(hsl.h+part)%360,ret.push(tinycolor(hsl));return ret},tinycolor.monochromatic=function(color,results){results=results||6;for(var hsv=tinycolor(color).toHsv(),h=hsv.h,s=hsv.s,v=hsv.v,ret=[],modification=1/results;results--;)ret.push(tinycolor({h,s,v})),v=(v+modification)%1;return ret},tinycolor.readability=function(color1,color2){var a=tinycolor(color1).toRgb(),b=tinycolor(color2).toRgb(),brightnessA=(299*a.r+587*a.g+114*a.b)/1e3,brightnessB=(299*b.r+587*b.g+114*b.b)/1e3,colorDiff=Math.max(a.r,b.r)-Math.min(a.r,b.r)+Math.max(a.g,b.g)-Math.min(a.g,b.g)+Math.max(a.b,b.b)-Math.min(a.b,b.b);return{brightness:Math.abs(brightnessA-brightnessB),color:colorDiff}},tinycolor.readable=function(color1,color2){var readability=tinycolor.readability(color1,color2);return readability.brightness>125&&readability.color>500},tinycolor.mostReadable=function(baseColor,colorList){for(var bestColor=null,bestScore=0,bestIsReadable=!1,i=0;i<colorList.length;i++){var readability=tinycolor.readability(baseColor,colorList[i]),readable=readability.brightness>125&&readability.color>500,score=readability.brightness/125*3+readability.color/500;(readable&&!bestIsReadable||readable&&bestIsReadable&&score>bestScore||!readable&&!bestIsReadable&&score>bestScore)&&(bestIsReadable=readable,bestScore=score,bestColor=tinycolor(colorList[i]))}return bestColor};var names=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},hexNames=tinycolor.hexNames=function(o){var flipped={};for(var i in o)o.hasOwnProperty(i)&&(flipped[o[i]]=i);return flipped}(names);function boundAlpha(a){return a=parseFloat(a),(isNaN(a)||a<0||a>1)&&(a=1),a}function bound01(n,max){(function(n){return"string"==typeof n&&-1!=n.indexOf(".")&&1===parseFloat(n)})(n)&&(n="100%");var processPercent=function(n){return"string"==typeof n&&-1!=n.indexOf("%")}(n);return n=mathMin(max,mathMax(0,parseFloat(n))),processPercent&&(n=parseInt(n*max,10)/100),math.abs(n-max)<1e-6?1:n%max/parseFloat(max)}function clamp01(val){return mathMin(1,mathMax(0,val))}function parseIntFromHex(val){return parseInt(val,16)}function pad2(c){return 1==c.length?"0"+c:""+c}function convertToPercentage(n){return n<=1&&(n=100*n+"%"),n}function convertHexToDecimal(h){return parseIntFromHex(h)/255}var CSS_UNIT,PERMISSIVE_MATCH3,PERMISSIVE_MATCH4,matchers=(PERMISSIVE_MATCH3="[\\s|\\(]+("+(CSS_UNIT="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",PERMISSIVE_MATCH4="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",{rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=tinycolor}(),$((function(){$.fn.spectrum.load&&$.fn.spectrum.processNativeColorInputs()}))}(window,jQuery),function($,window){var htmlSpecialCharsRegEx=/[<>&\r\n"']/gm,htmlSpecialCharsPlaceHolders={"<":"lt;",">":"gt;","&":"amp;","\r":"#13;","\n":"#10;",'"':"quot;","'":"apos;"};$.extend({fileDownload:function(fileUrl,options){var isIos,isAndroid,isOtherMobileBrowser,settings=$.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:!0},prepareCallback:function(url){},successCallback:function(url){},failCallback:function(responseHtml,url){},httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",popupWindowTitle:"Initiating file download...",encodeHTMLEntities:!0},options),deferred=new $.Deferred,userAgent=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase();/ip(ad|hone|od)/.test(userAgent)?isIos=!0:-1!==userAgent.indexOf("android")?isAndroid=!0:isOtherMobileBrowser=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(userAgent.substr(0,4));var httpMethodUpper=settings.httpMethod.toUpperCase();if(isAndroid&&"GET"!==httpMethodUpper)return $().dialog?$("<div>").html(settings.androidPostUnsupportedMessageHtml).dialog(settings.dialogOptions):alert(settings.androidPostUnsupportedMessageHtml),deferred.reject();var $iframe,downloadWindow,formDoc,$form,$preparingDialog=null,internalCallbacks_onSuccess=function(url){$preparingDialog&&$preparingDialog.dialog("close"),settings.successCallback(url),deferred.resolve(url)},internalCallbacks_onFail=function(responseHtml,url){$preparingDialog&&$preparingDialog.dialog("close"),settings.failMessageHtml&&$("<div>").html(settings.failMessageHtml).dialog(settings.dialogOptions),settings.failCallback(responseHtml,url),deferred.reject(responseHtml,url)};if(function(url){settings.preparingMessageHtml?$preparingDialog=$("<div>").html(settings.preparingMessageHtml).dialog(settings.dialogOptions):settings.prepareCallback&&settings.prepareCallback(url)}(fileUrl),null!==settings.data&&"string"!=typeof settings.data&&(settings.data=$.param(settings.data)),"GET"===httpMethodUpper){if(null!==settings.data)-1!==fileUrl.indexOf("?")?"&"!==fileUrl.substring(fileUrl.length-1)&&(fileUrl+="&"):fileUrl+="?",fileUrl+=settings.data;isIos||isAndroid?((downloadWindow=window.open(fileUrl)).document.title=settings.popupWindowTitle,window.focus()):isOtherMobileBrowser?window.location(fileUrl):$iframe=$("<iframe>").hide().prop("src",fileUrl).appendTo("body")}else{var formInnerHtml="";null!==settings.data&&$.each(settings.data.replace(/\+/g," ").split("&"),(function(){var kvp=this.split("="),key=settings.encodeHTMLEntities?htmlSpecialCharsEntityEncode(decodeURIComponent(kvp[0])):decodeURIComponent(kvp[0]);if(key){var value=settings.encodeHTMLEntities?htmlSpecialCharsEntityEncode(decodeURIComponent(kvp[1])):decodeURIComponent(kvp[1]);formInnerHtml+='<input type="hidden" name="'+key+'" value="'+value+'" />'}})),isOtherMobileBrowser?($form=$("<form>").appendTo("body")).hide().prop("method",settings.httpMethod).prop("action",fileUrl).html(formInnerHtml):(isIos?((downloadWindow=window.open("about:blank")).document.title=settings.popupWindowTitle,formDoc=downloadWindow.document,window.focus()):formDoc=getiframeDocument($iframe=$("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body")),formDoc.write("<html><head></head><body><form method='"+settings.httpMethod+"' action='"+fileUrl+"'>"+formInnerHtml+"</form>"+settings.popupWindowTitle+"</body></html>"),$form=$(formDoc).find("form")),$form.submit()}function getiframeDocument($iframe){var iframeDoc=$iframe[0].contentWindow||$iframe[0].contentDocument;return iframeDoc.document&&(iframeDoc=iframeDoc.document),iframeDoc}function cleanUp(isFailure){setTimeout((function(){downloadWindow&&(isAndroid&&downloadWindow.close(),isIos&&(downloadWindow.focus(),isFailure&&downloadWindow.close()))}),0)}function htmlSpecialCharsEntityEncode(str){return str.replace(htmlSpecialCharsRegEx,(function(match){return"&"+htmlSpecialCharsPlaceHolders[match]}))}return setTimeout((function checkFileDownloadComplete(){if(-1!=document.cookie.indexOf(settings.cookieName+"="+settings.cookieValue))return internalCallbacks_onSuccess(fileUrl),document.cookie=settings.cookieName+"=; expires="+new Date(1e3).toUTCString()+"; path="+settings.cookiePath,void cleanUp(!1);if(downloadWindow||$iframe)try{var formDoc=downloadWindow?downloadWindow.document:getiframeDocument($iframe);if(formDoc&&null!=formDoc.body&&formDoc.body.innerHTML.length){var isFailure=!0;if($form&&$form.length){var $contents=$(formDoc.body).contents().first();$contents.length&&$contents[0]===$form[0]&&(isFailure=!1)}if(isFailure)return internalCallbacks_onFail(formDoc.body.innerHTML,fileUrl),void cleanUp(!0)}}catch(err){return internalCallbacks_onFail("",fileUrl),void cleanUp(!0)}setTimeout(checkFileDownloadComplete,settings.checkInterval)}),settings.checkInterval),deferred.promise()}})}(jQuery,this);var docCookies={getItem:function(sKey){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(sKey,sValue,vEnd,sPath,sDomain,bSecure){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey))return!1;var sExpires="";if(vEnd)switch(vEnd.constructor){case Number:sExpires=vEnd===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+vEnd;break;case String:sExpires="; expires="+vEnd;break;case Date:sExpires="; expires="+vEnd.toUTCString()}return document.cookie=encodeURIComponent(sKey)+"="+encodeURIComponent(sValue)+sExpires+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"")+(bSecure?"; secure":""),!0},removeItem:function(sKey,sPath,sDomain){return!(!sKey||!this.hasItem(sKey))&&(document.cookie=encodeURIComponent(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:""),!0)},hasItem:function(sKey){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var aKeys=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),nIdx=0;nIdx<aKeys.length;nIdx++)aKeys[nIdx]=decodeURIComponent(aKeys[nIdx]);return aKeys}},Prism=function(){var self=window,lang=/\blang(?:uage)?-(?!\*)(\w+)\b/i,_=self.Prism={util:{encode:function(tokens){return tokens instanceof Token?new Token(tokens.type,_.util.encode(tokens.content)):"Array"===_.util.type(tokens)?tokens.map(_.util.encode):tokens.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(o){return Object.prototype.toString.call(o).match(/\[object (\w+)\]/)[1]},clone:function(o){switch(_.util.type(o)){case"Object":var clone={};for(var key in o)o.hasOwnProperty(key)&&(clone[key]=_.util.clone(o[key]));return clone;case"Array":return o.slice()}return o}},languages:{extend:function(id,redef){var lang=_.util.clone(_.languages[id]);for(var key in redef)lang[key]=redef[key];return lang},insertBefore:function(inside,before,insert,root){var grammar=(root=root||_.languages)[inside],ret={};for(var token in grammar)if(grammar.hasOwnProperty(token)){if(token==before)for(var newToken in insert)insert.hasOwnProperty(newToken)&&(ret[newToken]=insert[newToken]);ret[token]=grammar[token]}return root[inside]=ret},DFS:function(o,callback){for(var i in o)callback.call(o,i,o[i]),"Object"===_.util.type(o)&&_.languages.DFS(o[i],callback)}},highlightAll:function(async,callback){for(var element,elements=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),i=0;element=elements[i++];)_.highlightElement(element,!0===async,callback)},highlightElement:function(element,async,callback){for(var language,grammar,parent=element;parent&&!lang.test(parent.className);)parent=parent.parentNode;if(parent&&(language=(parent.className.match(lang)||[,""])[1],grammar=_.languages[language]),grammar){element.className=element.className.replace(lang,"").replace(/\s+/g," ")+" language-"+language,parent=element.parentNode,/pre/i.test(parent.nodeName)&&(parent.className=parent.className.replace(lang,"").replace(/\s+/g," ")+" language-"+language);var code=element.textContent;if(code){var env={element,language,grammar,code};if(_.hooks.run("before-highlight",env),async&&self.Worker){var worker=new Worker(_.filename);worker.onmessage=function(evt){env.highlightedCode=Token.stringify(JSON.parse(evt.data),language),_.hooks.run("before-insert",env),env.element.innerHTML=env.highlightedCode,callback&&callback.call(env.element),_.hooks.run("after-highlight",env)},worker.postMessage(JSON.stringify({language:env.language,code:env.code}))}else env.highlightedCode=_.highlight(env.code,env.grammar,env.language),_.hooks.run("before-insert",env),env.element.innerHTML=env.highlightedCode,callback&&callback.call(element),_.hooks.run("after-highlight",env)}}},highlight:function(text,grammar,language){var tokens=_.tokenize(text,grammar);return Token.stringify(_.util.encode(tokens),language)},tokenize:function(text,grammar,language){var Token=_.Token,strarr=[text],rest=grammar.rest;if(rest){for(var token in rest)grammar[token]=rest[token];delete grammar.rest}tokenloop:for(var token in grammar)if(grammar.hasOwnProperty(token)&&grammar[token]){var patterns=grammar[token];patterns="Array"===_.util.type(patterns)?patterns:[patterns];for(var j=0;j<patterns.length;++j){var pattern=patterns[j],inside=pattern.inside,lookbehind=!!pattern.lookbehind,lookbehindLength=0;pattern=pattern.pattern||pattern;for(var i=0;i<strarr.length;i++){var str=strarr[i];if(strarr.length>text.length)break tokenloop;if(!(str instanceof Token))if(pattern.lastIndex=0,match=pattern.exec(str)){lookbehind&&(lookbehindLength=match[1].length);var match,from=match.index-1+lookbehindLength,to=from+(match=match[0].slice(lookbehindLength)).length,before=str.slice(0,from+1),after=str.slice(to+1),args=[i,1];before&&args.push(before);var wrapped=new Token(token,inside?_.tokenize(match,inside):match);args.push(wrapped),after&&args.push(after),Array.prototype.splice.apply(strarr,args)}}}}return strarr},hooks:{all:{},add:function(name,callback){var hooks=_.hooks.all;hooks[name]=hooks[name]||[],hooks[name].push(callback)},run:function(name,env){var callbacks=_.hooks.all[name];if(callbacks&&callbacks.length)for(var callback,i=0;callback=callbacks[i++];)callback(env)}}},Token=_.Token=function(type,content){this.type=type,this.content=content};if(Token.stringify=function(o,language,parent){if("string"==typeof o)return o;if("[object Array]"==Object.prototype.toString.call(o))return o.map((function(element){return Token.stringify(element,language,o)})).join("");var env={type:o.type,content:Token.stringify(o.content,language,parent),tag:"span",classes:["token",o.type],attributes:{},language,parent};"comment"==env.type&&(env.attributes.spellcheck="true"),_.hooks.run("wrap",env);var attributes="";for(var name in env.attributes)attributes+=name+'="'+(env.attributes[name]||"")+'"';return"<"+env.tag+' class="'+env.classes.join(" ")+'" '+attributes+">"+env.content+"</"+env.tag+">"},!self.document)return self.addEventListener?(self.addEventListener("message",(function(evt){var message=JSON.parse(evt.data),lang=message.language,code=message.code;self.postMessage(JSON.stringify(_.tokenize(code,_.languages[lang]))),self.close()}),!1),self.Prism):self.Prism;var script=document.getElementsByTagName("script");return(script=script[script.length-1])&&(_.filename=script.src,document.addEventListener&&!script.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",_.highlightAll)),self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism),Prism.languages.markup={comment:/<!--[\w\W]*?-->/g,prolog:/<\?.+?\?>/,doctype:/<!DOCTYPE.+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|[^\s'">=]+))?\s*)*\/?>/gi,inside:{tag:{pattern:/^<\/?[\w:-]+/i,inside:{punctuation:/^<\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|>|"/g}},punctuation:/\/?>/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/\&#?[\da-z]{1,8};/gi},Prism.hooks.add("wrap",(function(env){"entity"===env.type&&(env.attributes.title=env.content.replace(/&amp;/,"&"))})),Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*{))/gi,inside:{punctuation:/[;:]/g}},url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\};]*(?=\s*\{)/g,property:/(\b|\B)[\w-]+(?=\s*:)/gi,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,punctuation:/[\{\};:]/g,function:/[-a-z0-9]+(?=\()/gi},Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/gi,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}}),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//g,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*?(\r?\n|$)/g,lookbehind:!0}],string:/("|')(\\?.)*?\1/g,"class-name":{pattern:/((?:(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/gi,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/g,boolean:/\b(true|false)\b/g,function:{pattern:/[a-z0-9_]+\(/gi,inside:{punctuation:/\(/}},number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g,operator:/[-+]{1,2}|!|<=?|>=?|={1,3}|&{1,2}|\|?\||\?|\*|\/|\~|\^|\%/g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g},Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|function|get|if|implements|import|in|instanceof|interface|let|new|null|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/g,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?|NaN|-?Infinity)\b/g}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/gi,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}}),Prism.languages.latex={comment:/%.*?(\r?\n|$)$/m,string:/(\$)(\\?.)*?\1/g,punctuation:/[{}]/g,selector:/\\[a-z;,:\.]*/i},Prism.hooks.add("after-highlight",(function(env){var pre=env.element.parentNode;if(pre&&/pre/i.test(pre.nodeName)&&-1!==pre.className.indexOf("line-numbers")){var lineNumbersWrapper,linesNum=1+env.code.split("\n").length,lines=new Array(linesNum);lines=lines.join("<span></span>"),(lineNumbersWrapper=document.createElement("span")).className="line-numbers-rows",lineNumbersWrapper.innerHTML=lines,pre.hasAttribute("data-start")&&(pre.style.counterReset="linenumber "+(parseInt(pre.getAttribute("data-start"),10)-1)),env.element.appendChild(lineNumbersWrapper)}})),Prism.languages.TeX={comment:/(?:^|[^\\])%[^%]*?$/m,builtin:{pattern:/\\[\w]+([{\[].*?[}\]](?=\s|$))*/gi,inside:{constant:/[\w,|\s-]+(?=[\]}])/gi,selector:/\\[\w]+/,punctuation:/[{}[\]]/gi}},regex:/(&amp;)/gi},Prism.languages.plain={},Prism.languages.markdown={property:/([\*_]{1,2})(\w|\w[\s\w]*\w)\1/i},Prism.languages.mediawiki={important:/(\n\|-)|(^\{\|)|(\|\}$)/g,comment:/\n(?:((?:\||!)[^|]+)(?=[^\n]\|))|(?:\||!)\s/g},function($){"use strict";if(!$.observable){$.observable=function(el){var callbacks={},slice=[].slice;return el.on=function(events,fn){if("function"==typeof fn){const callbackStorage=callbacks;events.replace(/[^\s]+/g,((name,pos)=>{(callbackStorage[name]||(callbackStorage[name]=[])).push(fn),fn.typed=pos>0}))}return el},el.off=function(events){return events.replace(/[^\s]+/g,(function(name){callbacks[name]=[]})),"*"==events&&(callbacks={}),el},el.one=function(name,fn){return fn&&(fn.one=!0),el.on(name,fn)},el.trigger=function(name){for(var fn,args=slice.call(arguments,1),fns=callbacks[name]||[],i=0;fn=fns[i];++i)fn.one&&fn.done||fn.busy||(fn.busy=!0,fn.apply(el,fn.typed?[name].concat(args):args),fn.done=!0,fn.busy=!1);return el},el};var presenters={};$.present=function(name,callback){presenters[name]=callback},$.fn.present=function(name,options){var ret=presenters[name](this,options);return ret&&this.data(name,ret),this}}}("undefined"!=typeof exports?exports:window.$||(window.$={})),function($){"use strict";$.present("SimpleMenu",(function(el,options){options=$.extend(!0,{menu_item_selector:"li",menu_item_id_attr:"id"},options);var self={},items=$(options.menu_item_selector,el);return $.observable(self),items.mousedown((function(event){if(1==event.which){var menu_item=$(this);self.trigger(menu_item.attr(options.menu_item_id_attr),menu_item),self.trigger("any_item_clicked",menu_item)}})),self}))}($),function($){"use strict";$.present("SimpleDraggable",(function(el,opt){opt=$.extend(!0,{horizontal_enabled:!0,vertical_enabled:!1,bounds:null},opt);var self={},bounds=opt.bounds,start_pos=null,start_cursor_pos=null,start_z_index=0,start_positioning="static",is_first_move=!0,pos={top:0,left:0,delta_x:0};function dragMove(ev){is_first_move&&1==ev.which?(is_first_move=!1,el.css({position:"absolute","z-index":1e3,top:start_pos.top,left:start_pos.left}),self.trigger("drag_start",ev,start_pos)):1==ev.which&&(pos.top=start_pos.top,pos.left=start_pos.left,opt.horizontal_enabled&&(pos.delta_x=ev.pageX-start_cursor_pos.left,pos.left+=ev.pageX-start_cursor_pos.left,bounds&&(pos.left=Math.max(bounds.left,Math.min(bounds.right,pos.left)))),opt.vertical_enabled&&(pos.top=ev.pageY-start_cursor_pos.top,bounds&&(pos.top=Math.max(bounds.top,Math.min(bounds.bottom,pos.top)))),el.offset(pos),self.trigger("drag_move",ev,pos)),ev.preventDefault(),ev.stopPropagation()}function dragEnd(ev){$(document).off("mousemove"),$(document).off("mouseup");var end_x=ev.pageX;bounds&&(end_x=Math.max(bounds.left,Math.min(bounds.right,end_x))),end_x-=start_cursor_pos.left;var style={"z-index":start_z_index};"relative"!=start_positioning&&(style.position=start_positioning),el.css(style),self.trigger("drag_end",ev,end_x)}return el.on("mousedown",(function(ev){1==ev.which&&self.can_start_drag()&&(start_pos=el.offset(),start_z_index=el.css("z-index"),start_positioning=el.css("position"),start_cursor_pos={top:ev.pageY,left:ev.pageX},is_first_move=!0,$(document).on("mousemove",dragMove).on("mouseup",dragEnd),ev.preventDefault())})),$.observable(self),self.can_start_drag=function(){return!0},self.setBounds=function(new_bounds){bounds=new_bounds},self}))}($),function($){var ErrorMsgs={formatInvalidInputErrorMsg:function(input){return"Invalid input value '"+input+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},Slider=function(element,options){var el=this.element=$(element).hide(),origWidth=$(element)[0].style.width,updateSlider=!1,parent=this.element.parent();!0===parent.hasClass("slider")?(updateSlider=!0,this.picker=parent):this.picker=$('<div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle"></div><div class="slider-handle"></div></div><div id="tooltip" class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div><div id="tooltip_min" class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div><div id="tooltip_max" class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div></div>').insertBefore(this.element).append(this.element),this.id=this.element.data("slider-id")||options.id,this.id&&(this.picker[0].id=this.id),("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)&&(this.touchCapable=!0);var tooltip=this.element.data("slider-tooltip")||options.tooltip;if(this.tooltip=this.picker.find("#tooltip"),this.tooltipInner=this.tooltip.find("div.tooltip-inner"),this.tooltip_min=this.picker.find("#tooltip_min"),this.tooltipInner_min=this.tooltip_min.find("div.tooltip-inner"),this.tooltip_max=this.picker.find("#tooltip_max"),this.tooltipInner_max=this.tooltip_max.find("div.tooltip-inner"),!0===updateSlider&&(this.picker.removeClass("slider-horizontal"),this.picker.removeClass("slider-vertical"),this.tooltip.removeClass("hide"),this.tooltip_min.removeClass("hide"),this.tooltip_max.removeClass("hide")),this.orientation=this.element.data("slider-orientation")||options.orientation,"vertical"===this.orientation)this.picker.addClass("slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight",this.tooltip.addClass("right")[0].style.left="100%",this.tooltip_min.addClass("right")[0].style.left="100%",this.tooltip_max.addClass("right")[0].style.left="100%";else this.picker.addClass("slider-horizontal").css("width",origWidth),this.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth",this.tooltip.addClass("top")[0].style.top=-this.tooltip.outerHeight()-24+"px",this.tooltip_min.addClass("top")[0].style.top=-this.tooltip_min.outerHeight()-14+"px",this.tooltip_max.addClass("top")[0].style.top=-this.tooltip_max.outerHeight()-14+"px";var self=this;switch($.each(["min","max","step","precision","value","reversed","handle"],(function(i,attr){void 0!==el.data("slider-"+attr)?self[attr]=el.data("slider-"+attr):void 0!==options[attr]?self[attr]=options[attr]:void 0!==el.prop(attr)?self[attr]=el.prop(attr):self[attr]=0})),this.value instanceof Array?updateSlider&&!this.range?this.value=this.value[0]:this.range=!0:this.range&&(this.value=[this.value,this.max]),this.selection=this.element.data("slider-selection")||options.selection,this.selectionEl=this.picker.find(".slider-selection"),"none"===this.selection&&this.selectionEl.addClass("hide"),this.selectionElStyle=this.selectionEl[0].style,this.handle1=this.picker.find(".slider-handle:first"),this.handle1Stype=this.handle1[0].style,this.handle2=this.picker.find(".slider-handle:last"),this.handle2Stype=this.handle2[0].style,!0===updateSlider&&(this.handle1.removeClass("round triangle"),this.handle2.removeClass("round triangle hide")),this.handle){case"round":this.handle1.addClass("round"),this.handle2.addClass("round");break;case"triangle":this.handle1.addClass("triangle"),this.handle2.addClass("triangle")}this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos],this.formater=options.formater,this.tooltip_separator=options.tooltip_separator,this.tooltip_split=options.tooltip_split,this.setValue(this.value),this.handle1.on({keydown:$.proxy(this.keydown,this,0)}),this.handle2.on({keydown:$.proxy(this.keydown,this,1)}),this.touchCapable&&this.picker.on({touchstart:$.proxy(this.mousedown,this)}),this.picker.on({mousedown:$.proxy(this.mousedown,this)}),"hide"===tooltip?(this.tooltip.addClass("hide"),this.tooltip_min.addClass("hide"),this.tooltip_max.addClass("hide")):"always"===tooltip?(this.showTooltip(),this.alwaysShowTooltip=!0):(this.picker.on({mouseenter:$.proxy(this.showTooltip,this),mouseleave:$.proxy(this.hideTooltip,this)}),this.handle1.on({focus:$.proxy(this.showTooltip,this),blur:$.proxy(this.hideTooltip,this)}),this.handle2.on({focus:$.proxy(this.showTooltip,this),blur:$.proxy(this.hideTooltip,this)})),this.enabled=options.enabled&&(void 0===this.element.data("slider-enabled")||!0===this.element.data("slider-enabled")),this.enabled?this.enable():this.disable(),this.naturalArrowKeys=this.element.data("slider-naturalarrowkeys")||options.naturalarrowkeys};Slider.prototype={constructor:Slider,over:!1,inDrag:!1,showTooltip:function(){!1===this.tooltip_split?this.tooltip.addClass("in"):(this.tooltip_min.addClass("in"),this.tooltip_max.addClass("in")),this.over=!0},hideTooltip:function(){!1===this.inDrag&&!0!==this.alwaysShowTooltip&&(this.tooltip.removeClass("in"),this.tooltip_min.removeClass("in"),this.tooltip_max.removeClass("in")),this.over=!1},layout:function(){var positionPercentages;if(positionPercentages=this.reversed?[100-this.percentage[0],this.percentage[1]]:[this.percentage[0],this.percentage[1]],this.handle1Stype[this.stylePos]=positionPercentages[0]+"%",this.handle2Stype[this.stylePos]=positionPercentages[1]+"%","vertical"===this.orientation)this.selectionElStyle.top=Math.min(positionPercentages[0],positionPercentages[1])+"%",this.selectionElStyle.height=Math.abs(positionPercentages[0]-positionPercentages[1])+"%";else{this.selectionElStyle.left=Math.min(positionPercentages[0],positionPercentages[1])+"%",this.selectionElStyle.width=Math.abs(positionPercentages[0]-positionPercentages[1])+"%";var offset_min=this.tooltip_min[0].getBoundingClientRect(),offset_max=this.tooltip_max[0].getBoundingClientRect();offset_min.right>offset_max.left?(this.tooltip_max.removeClass("top"),this.tooltip_max.addClass("bottom")[0].style.top="18px"):(this.tooltip_max.removeClass("bottom"),this.tooltip_max.addClass("top")[0].style.top="-30px")}this.range?(this.tooltipInner.text(this.formater(this.value[0])+this.tooltip_separator+this.formater(this.value[1])),this.tooltip[0].style[this.stylePos]=this.size*(positionPercentages[0]+(positionPercentages[1]-positionPercentages[0])/2)/100-("vertical"===this.orientation?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px",this.tooltipInner_min.text(this.formater(this.value[0])),this.tooltipInner_max.text(this.formater(this.value[1])),this.tooltip_min[0].style[this.stylePos]=this.size*(positionPercentages[0]/100)-("vertical"===this.orientation?this.tooltip_min.outerHeight()/2:this.tooltip_min.outerWidth()/2)+"px",this.tooltip_max[0].style[this.stylePos]=this.size*(positionPercentages[1]/100)-("vertical"===this.orientation?this.tooltip_max.outerHeight()/2:this.tooltip_max.outerWidth()/2)+"px"):(this.tooltipInner.text(this.formater(this.value[0])),this.tooltip[0].style[this.stylePos]=this.size*positionPercentages[0]/100-("vertical"===this.orientation?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px")},mousedown:function(ev){if(!this.isEnabled())return!1;this.touchCapable&&"touchstart"===ev.type&&(ev=ev.originalEvent),this.triggerFocusOnHandle(),this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos];var percentage=this.getPercentage(ev);if(this.range){var diff1=Math.abs(this.percentage[0]-percentage),diff2=Math.abs(this.percentage[1]-percentage);this.dragged=diff1<diff2?0:1}else this.dragged=0;this.percentage[this.dragged]=this.reversed?100-percentage:percentage,this.layout(),this.touchCapable&&$(document).on({touchmove:$.proxy(this.mousemove,this),touchend:$.proxy(this.mouseup,this)}),$(document).on({mousemove:$.proxy(this.mousemove,this),mouseup:$.proxy(this.mouseup,this)}),this.inDrag=!0;var val=this.calculateValue();return this.element.trigger({type:"slideStart",value:val}).data("value",val).prop("value",val),this.setValue(val),!0},triggerFocusOnHandle:function(handleIdx){0===handleIdx&&this.handle1.focus(),1===handleIdx&&this.handle2.focus()},keydown:function(handleIdx,ev){if(!this.isEnabled())return!1;var dir;switch(ev.which){case 37:case 40:dir=-1;break;case 39:case 38:dir=1}if(dir){this.naturalArrowKeys&&("vertical"===this.orientation&&!this.reversed||"horizontal"===this.orientation&&this.reversed)&&(dir*=-1);var oneStepValuePercentageChange=dir*this.percentage[2],percentage=this.percentage[handleIdx]+oneStepValuePercentageChange;percentage>100?percentage=100:percentage<0&&(percentage=0),this.dragged=handleIdx,this.adjustPercentageForRangeSliders(percentage),this.percentage[this.dragged]=percentage,this.layout();var val=this.calculateValue();return this.element.trigger({type:"slideStart",value:val}).data("value",val).prop("value",val),this.slide(val),this.element.trigger({type:"slideStop",value:val}).data("value",val).prop("value",val),!1}},mousemove:function(ev){if(!this.isEnabled())return!1;this.touchCapable&&"touchmove"===ev.type&&(ev=ev.originalEvent);var percentage=this.getPercentage(ev);this.adjustPercentageForRangeSliders(percentage),this.percentage[this.dragged]=this.reversed?100-percentage:percentage,this.layout();var val=this.calculateValue();return this.slide(val),!1},slide:function(val){this.setValue(val);var slideEventValue=this.range?this.value:this.value[0];this.element.trigger({type:"slide",value:slideEventValue}).data("value",this.value).prop("value",this.value)},adjustPercentageForRangeSliders:function(percentage){this.range&&(0===this.dragged&&this.percentage[1]<percentage?(this.percentage[0]=this.percentage[1],this.dragged=1):1===this.dragged&&this.percentage[0]>percentage&&(this.percentage[1]=this.percentage[0],this.dragged=0))},mouseup:function(){if(!this.isEnabled())return!1;this.touchCapable&&$(document).off({touchmove:this.mousemove,touchend:this.mouseup}),$(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),this.inDrag=!1,!1===this.over&&this.hideTooltip();var val=this.calculateValue();return this.layout(),this.element.data("value",val).prop("value",val).trigger({type:"slideStop",value:val}),!1},calculateValue:function(){var val;return this.range?(val=[this.min,this.max],0!==this.percentage[0]&&(val[0]=Math.max(this.min,this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step),val[0]=this.applyPrecision(val[0])),100!==this.percentage[1]&&(val[1]=Math.min(this.max,this.min+Math.round(this.diff*this.percentage[1]/100/this.step)*this.step),val[1]=this.applyPrecision(val[1])),this.value=val):((val=this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step)<this.min?val=this.min:val>this.max&&(val=this.max),val=parseFloat(val),val=this.applyPrecision(val),this.value=[val,this.value[1]]),val},applyPrecision:function(val){var precision=this.precision||this.getNumDigitsAfterDecimalPlace(this.step);return this.applyToFixedAndParseFloat(val,precision)},getNumDigitsAfterDecimalPlace:function(num){var match=(""+num).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return match?Math.max(0,(match[1]?match[1].length:0)-(match[2]?+match[2]:0)):0},applyToFixedAndParseFloat:function(num,toFixedInput){var truncatedNum=num.toFixed(toFixedInput);return parseFloat(truncatedNum)},getPercentage:function(ev){!this.touchCapable||"touchstart"!==ev.type&&"touchmove"!==ev.type||(ev=ev.touches[0]);var percentage=100*(ev[this.mousePos]-this.offset[this.stylePos])/this.size;return percentage=Math.round(percentage/this.percentage[2])*this.percentage[2],Math.max(0,Math.min(100,percentage))},getValue:function(){return this.range?this.value:this.value[0]},setValue:function(val){val||(val=0),this.value=this.validateInputValue(val),this.range?(this.value[0]=this.applyPrecision(this.value[0]),this.value[1]=this.applyPrecision(this.value[1]),this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=this.applyPrecision(this.value),this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),"after"===this.selection?this.value[1]=this.max:this.value[1]=this.min),this.diff=this.max-this.min,this.diff>0?this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff]:this.percentage=[0,0,100],this.layout()},validateInputValue:function(val){if("number"==typeof val)return val;if(val instanceof Array)return $.each(val,(function(i,input){if("number"!=typeof input)throw new Error(ErrorMsgs.formatInvalidInputErrorMsg(input))})),val;throw new Error(ErrorMsgs.formatInvalidInputErrorMsg(val))},destroy:function(){this.handle1.off(),this.handle2.off(),this.element.off().show().insertBefore(this.picker),this.picker.off().remove(),$(this.element).removeData("slider")},disable:function(){this.enabled=!1,this.handle1.removeAttr("tabindex"),this.handle2.removeAttr("tabindex"),this.picker.addClass("slider-disabled"),this.element.trigger("slideDisabled")},enable:function(){this.enabled=!0,this.handle1.attr("tabindex",0),this.handle2.attr("tabindex",0),this.picker.removeClass("slider-disabled"),this.element.trigger("slideEnabled")},toggle:function(){this.enabled?this.disable():this.enable()},isEnabled:function(){return this.enabled},setAttribute:function(attribute,value){this[attribute]=value},getAttribute:function(attribute){return this[attribute]}};var publicMethods={getValue:Slider.prototype.getValue,setValue:Slider.prototype.setValue,setAttribute:Slider.prototype.setAttribute,getAttribute:Slider.prototype.getAttribute,destroy:Slider.prototype.destroy,disable:Slider.prototype.disable,enable:Slider.prototype.enable,toggle:Slider.prototype.toggle,isEnabled:Slider.prototype.isEnabled};function invokePublicMethod(methodName,args){if(publicMethods[methodName]){var sliderObject=function(element){var sliderObject=$(element).data("slider");if(sliderObject&&sliderObject instanceof Slider)return sliderObject;throw new Error(ErrorMsgs.callingContextNotSliderInstance)}(this),result=publicMethods[methodName].apply(sliderObject,args);return void 0===result?$(this):result}throw new Error("method '"+methodName+"()' does not exist for slider.")}function createNewSliderInstance(opts){var $this=$(this);return $this.each((function(){var $this=$(this),slider=$this.data("slider"),options="object"==typeof opts&&opts;slider&&!options&&(options={},$.each($.fn.slider.defaults,(function(key){options[key]=slider[key]}))),$this.data("slider",new Slider(this,$.extend({},$.fn.slider.defaults,options)))})),$this}$.fn.slider=function(option){if("string"==typeof option&&"refresh"!==option){var args=Array.prototype.slice.call(arguments,1);return invokePublicMethod.call(this,option,args)}return createNewSliderInstance.call(this,option)},$.fn.slider.defaults={min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_separator:":",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formater:function(value){return value}},$.fn.slider.Constructor=Slider}(window.jQuery),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Popper=t()}(this,(function(){"use strict";function e(e){return e&&"[object Function]"==={}.toString.call(e)}function t(e,t){if(1!==e.nodeType)return[];var o=getComputedStyle(e,null);return t?o[t]:o}function o(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function n(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var i=t(e),r=i.overflow,p=i.overflowX,s=i.overflowY;return/(auto|scroll|overlay)/.test(r+s+p)?e:n(o(e))}function r(e){return 11===e?re:10===e?pe:re||pe}function p(e){if(!e)return document.documentElement;for(var o=r(10)?document.body:null,n=e.offsetParent;n===o&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TD","TABLE"].indexOf(n.nodeName)&&"static"===t(n,"position")?p(n):n:e?e.ownerDocument.documentElement:document.documentElement}function d(e){return null===e.parentNode?e:d(e.parentNode)}function a(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var o=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,n=o?e:t,i=o?t:e,r=document.createRange();r.setStart(n,0),r.setEnd(i,0);var l=r.commonAncestorContainer;if(e!==l&&t!==l||n.contains(i))return function(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||p(e.firstElementChild)===e)}(l)?l:p(l);var f=d(e);return f.host?a(f.host,t):a(e,d(t).host)}function l(e){var o="top"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var i=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||i)[o]}return e[o]}function f(e,t){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=l(t,"top"),i=l(t,"left"),r=o?-1:1;return e.top+=n*r,e.bottom+=n*r,e.left+=i*r,e.right+=i*r,e}function m(e,t){var o="x"===t?"Left":"Top",n="Left"==o?"Right":"Bottom";return parseFloat(e["border"+o+"Width"],10)+parseFloat(e["border"+n+"Width"],10)}function h(e,t,o,n){return $(t["offset"+e],t["scroll"+e],o["client"+e],o["offset"+e],o["scroll"+e],r(10)?o["offset"+e]+n["margin"+("Height"===e?"Top":"Left")]+n["margin"+("Height"===e?"Bottom":"Right")]:0)}function c(){var e=document.body,t=document.documentElement,o=r(10)&&getComputedStyle(t);return{height:h("Height",e,t,o),width:h("Width",e,t,o)}}function g(e){return le({},e,{right:e.left+e.width,bottom:e.top+e.height})}function u(e){var o={};try{if(r(10)){o=e.getBoundingClientRect();var n=l(e,"top"),i=l(e,"left");o.top+=n,o.left+=i,o.bottom+=n,o.right+=i}else o=e.getBoundingClientRect()}catch(t){}var p={left:o.left,top:o.top,width:o.right-o.left,height:o.bottom-o.top},s="HTML"===e.nodeName?c():{},d=s.width||e.clientWidth||p.right-p.left,a=s.height||e.clientHeight||p.bottom-p.top,f=e.offsetWidth-d,h=e.offsetHeight-a;if(f||h){var u=t(e);f-=m(u,"x"),h-=m(u,"y"),p.width-=f,p.height-=h}return g(p)}function b(e,o){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],p=r(10),s="HTML"===o.nodeName,d=u(e),a=u(o),l=n(e),m=t(o),h=parseFloat(m.borderTopWidth,10),c=parseFloat(m.borderLeftWidth,10);i&&"HTML"===o.nodeName&&(a.top=$(a.top,0),a.left=$(a.left,0));var b=g({top:d.top-a.top-h,left:d.left-a.left-c,width:d.width,height:d.height});if(b.marginTop=0,b.marginLeft=0,!p&&s){var y=parseFloat(m.marginTop,10),w=parseFloat(m.marginLeft,10);b.top-=h-y,b.bottom-=h-y,b.left-=c-w,b.right-=c-w,b.marginTop=y,b.marginLeft=w}return(p&&!i?o.contains(l):o===l&&"BODY"!==l.nodeName)&&(b=f(b,o)),b}function y(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=e.ownerDocument.documentElement,n=b(e,o),i=$(o.clientWidth,window.innerWidth||0),r=$(o.clientHeight,window.innerHeight||0),p=t?0:l(o),s=t?0:l(o,"left");return g({top:p-n.top+n.marginTop,left:s-n.left+n.marginLeft,width:i,height:r})}function w(e){var n=e.nodeName;return"BODY"!==n&&"HTML"!==n&&("fixed"===t(e,"position")||w(o(e)))}function E(e){if(!e||!e.parentElement||r())return document.documentElement;for(var o=e.parentElement;o&&"none"===t(o,"transform");)o=o.parentElement;return o||document.documentElement}function v(e,t,i,r){var p=4<arguments.length&&void 0!==arguments[4]&&arguments[4],s={top:0,left:0},d=p?E(e):a(e,t);if("viewport"===r)s=y(d,p);else{var l;"scrollParent"===r?"BODY"===(l=n(o(t))).nodeName&&(l=e.ownerDocument.documentElement):l="window"===r?e.ownerDocument.documentElement:r;var f=b(l,d,p);if("HTML"!==l.nodeName||w(d))s=f;else{var m=c(),h=m.height,g=m.width;s.top+=f.top-f.marginTop,s.bottom=h+f.top,s.left+=f.left-f.marginLeft,s.right=g+f.left}}return s.left+=i,s.top+=i,s.right-=i,s.bottom-=i,s}function x(e){return e.width*e.height}function O(e,t,o,n,i){var r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var p=v(o,n,r,i),s={top:{width:p.width,height:t.top-p.top},right:{width:p.right-t.right,height:p.height},bottom:{width:p.width,height:p.bottom-t.bottom},left:{width:t.left-p.left,height:p.height}},d=Object.keys(s).map((function(e){return le({key:e},s[e],{area:x(s[e])})})).sort((function(e,t){return t.area-e.area})),a=d.filter((function(e){var t=e.width,n=e.height;return t>=o.clientWidth&&n>=o.clientHeight})),l=0<a.length?a[0].key:d[0].key,f=e.split("-")[1];return l+(f?"-"+f:"")}function L(e,t,o){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return b(o,n?E(t):a(t,o),n)}function S(e){var t=getComputedStyle(e),o=parseFloat(t.marginTop)+parseFloat(t.marginBottom),n=parseFloat(t.marginLeft)+parseFloat(t.marginRight);return{width:e.offsetWidth+n,height:e.offsetHeight+o}}function T(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return t[e]}))}function C(e,t,o){o=o.split("-")[0];var n=S(e),i={width:n.width,height:n.height},r=-1!==["right","left"].indexOf(o),p=r?"top":"left",s=r?"left":"top",d=r?"height":"width",a=r?"width":"height";return i[p]=t[p]+t[d]/2-n[d]/2,i[s]=o===s?t[s]-n[a]:t[T(s)],i}function D(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function P(t,o,n){var i=void 0===n?t:t.slice(0,function(e,t,o){if(Array.prototype.findIndex)return e.findIndex((function(e){return e[t]===o}));var n=D(e,(function(e){return e[t]===o}));return e.indexOf(n)}(t,"name",n));return i.forEach((function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=t.function||t.fn;t.enabled&&e(n)&&(o.offsets.popper=g(o.offsets.popper),o.offsets.reference=g(o.offsets.reference),o=n(o,t))})),o}function k(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=L(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=O(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=C(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=P(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function W(e,t){return e.some((function(e){var o=e.name;return e.enabled&&o===t}))}function B(e){for(var t=[!1,"ms","Webkit","Moz","O"],o=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<t.length;n++){var i=t[n],r=i?""+i+o:e;if(void 0!==document.body.style[r])return r}return null}function H(){return this.state.isDestroyed=!0,W(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[B("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function A(e){var t=e.ownerDocument;return t?t.defaultView:window}function M(e,t,o,i){var r="BODY"===e.nodeName,p=r?e.ownerDocument.defaultView:e;p.addEventListener(t,o,{passive:!0}),r||M(n(p.parentNode),t,o,i),i.push(p)}function I(e,t,o,i){o.updateBound=i,A(e).addEventListener("resize",o.updateBound,{passive:!0});var r=n(e);return M(r,"scroll",o.updateBound,o.scrollParents),o.scrollElement=r,o.eventsEnabled=!0,o}function F(){this.state.eventsEnabled||(this.state=I(this.reference,this.options,this.state,this.scheduleUpdate))}function U(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function(e,t){return A(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach((function(e){e.removeEventListener("scroll",t.updateBound)})),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}(this.reference,this.state))}function Y(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function j(e,t){Object.keys(t).forEach((function(o){var n="";-1!==["width","height","top","right","bottom","left"].indexOf(o)&&Y(t[o])&&(n="px"),e.style[o]=t[o]+n}))}function q(e,t,o){var n=D(e,(function(e){return e.name===t})),i=!!n&&e.some((function(e){return e.name===o&&e.enabled&&e.order<n.order}));if(!i){var r="`"+t+"`";console.warn("`"+o+"` modifier is required by "+r+" modifier in order to work, be sure to include it before "+r+"!")}return i}function z(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=me.indexOf(e),n=me.slice(o+1).concat(me.slice(0,o));return t?n.reverse():n}function _(e,t,o,n){var i=[0,0],r=-1!==["right","left"].indexOf(n),p=e.split(/(\+|\-)/).map((function(e){return e.trim()})),s=p.indexOf(D(p,(function(e){return-1!==e.search(/,|\s/)})));p[s]&&-1===p[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var d=/\s*,\s*|\s+/,a=-1===s?[p]:[p.slice(0,s).concat([p[s].split(d)[0]]),[p[s].split(d)[1]].concat(p.slice(s+1))];return a=a.map((function(e,n){var i=(1===n?!r:r)?"height":"width",p=!1;return e.reduce((function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,p=!0,e):p?(e[e.length-1]+=t,p=!1,e):e.concat(t)}),[]).map((function(e){return function(e,t,o,n){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+i[1],p=i[2];if(!r)return e;if(0===p.indexOf("%")){return g("%p"===p?o:n)[t]/100*r}return"vh"===p||"vw"===p?("vh"===p?$(document.documentElement.clientHeight,window.innerHeight||0):$(document.documentElement.clientWidth,window.innerWidth||0))/100*r:r}(e,i,t,o)}))})),a.forEach((function(e,t){e.forEach((function(o,n){Y(o)&&(i[t]+=o*("-"===e[n-1]?-1:1))}))})),i}for(var J=Math.min,Q=Math.round,Z=Math.floor,$=Math.max,ee="undefined"!=typeof window&&"undefined"!=typeof document,te=["Edge","Trident","Firefox"],oe=0,ne=0;ne<te.length;ne+=1)if(ee&&0<=navigator.userAgent.indexOf(te[ne])){oe=1;break}var ie=ee&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then((function(){t=!1,e()})))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout((function(){t=!1,e()}),oe))}},re=ee&&!(!window.MSInputMethodContext||!document.documentMode),pe=ee&&/MSIE 10/.test(navigator.userAgent),de=function(){function e(e,t){for(var o,n=0;n<t.length;n++)(o=t[n]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),ae=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e},le=Object.assign||function(e){for(var t,o=1;o<arguments.length;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},fe=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],me=fe.slice(3),he_FLIP="flip",he_CLOCKWISE="clockwise",he_COUNTERCLOCKWISE="counterclockwise",ce=function(){function t(o,n){var i=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=ie(this.update.bind(this)),this.options=le({},t.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=o&&o.jquery?o[0]:o,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(le({},t.Defaults.modifiers,r.modifiers)).forEach((function(e){i.options.modifiers[e]=le({},t.Defaults.modifiers[e]||{},r.modifiers?r.modifiers[e]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(e){return le({name:e},i.options.modifiers[e])})).sort((function(e,t){return e.order-t.order})),this.modifiers.forEach((function(t){t.enabled&&e(t.onLoad)&&t.onLoad(i.reference,i.popper,i.options,t,i.state)})),this.update();var p=this.options.eventsEnabled;p&&this.enableEventListeners(),this.state.eventsEnabled=p}return de(t,[{key:"update",value:function(){return k.call(this)}},{key:"destroy",value:function(){return H.call(this)}},{key:"enableEventListeners",value:function(){return F.call(this)}},{key:"disableEventListeners",value:function(){return U.call(this)}}]),t}();return ce.Utils=("undefined"==typeof window?global:window).PopperUtils,ce.placements=fe,ce.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,o=t.split("-")[0],n=t.split("-")[1];if(n){var i=e.offsets,r=i.reference,p=i.popper,s=-1!==["bottom","top"].indexOf(o),d=s?"left":"top",a=s?"width":"height",l={start:ae({},d,r[d]),end:ae({},d,r[d]+r[a]-p[a])};e.offsets.popper=le({},p,l[n])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var o,n=t.offset,i=e.placement,r=e.offsets,p=r.popper,s=r.reference,d=i.split("-")[0];return o=Y(+n)?[+n,0]:_(n,p,s,d),"left"===d?(p.top+=o[0],p.left-=o[1]):"right"===d?(p.top+=o[0],p.left+=o[1]):"top"===d?(p.left+=o[0],p.top-=o[1]):"bottom"===d&&(p.left+=o[0],p.top+=o[1]),e.popper=p,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var o=t.boundariesElement||p(e.instance.popper);e.instance.reference===o&&(o=p(o));var n=B("transform"),i=e.instance.popper.style,r=i.top,s=i.left,d=i[n];i.top="",i.left="",i[n]="";var a=v(e.instance.popper,e.instance.reference,t.padding,o,e.positionFixed);i.top=r,i.left=s,i[n]=d,t.boundaries=a;var l=t.priority,f=e.offsets.popper,m={primary:function(e){var o=f[e];return f[e]<a[e]&&!t.escapeWithReference&&(o=$(f[e],a[e])),ae({},e,o)},secondary:function(e){var o="right"===e?"left":"top",n=f[o];return f[e]>a[e]&&!t.escapeWithReference&&(n=J(f[o],a[e]-("right"===e?f.width:f.height))),ae({},o,n)}};return l.forEach((function(e){var t=-1===["left","top"].indexOf(e)?"secondary":"primary";f=le({},f,m[t](e))})),e.offsets.popper=f,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,o=t.popper,n=t.reference,i=e.placement.split("-")[0],r=Z,p=-1!==["top","bottom"].indexOf(i),s=p?"right":"bottom",d=p?"left":"top",a=p?"width":"height";return o[s]<r(n[d])&&(e.offsets.popper[d]=r(n[d])-o[a]),o[d]>r(n[s])&&(e.offsets.popper[d]=r(n[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,o){var n;if(!q(e.instance.modifiers,"arrow","keepTogether"))return e;var i=o.element;if("string"==typeof i){if(!(i=e.instance.popper.querySelector(i)))return e}else if(!e.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var r=e.placement.split("-")[0],p=e.offsets,s=p.popper,d=p.reference,a=-1!==["left","right"].indexOf(r),l=a?"height":"width",f=a?"Top":"Left",m=f.toLowerCase(),h=a?"left":"top",c=a?"bottom":"right",u=S(i)[l];d[c]-u<s[m]&&(e.offsets.popper[m]-=s[m]-(d[c]-u)),d[m]+u>s[c]&&(e.offsets.popper[m]+=d[m]+u-s[c]),e.offsets.popper=g(e.offsets.popper);var b=d[m]+d[l]/2-u/2,y=t(e.instance.popper),w=parseFloat(y["margin"+f],10),E=parseFloat(y["border"+f+"Width"],10),v=b-e.offsets.popper[m]-w-E;return v=$(J(s[l]-u,v),0),e.arrowElement=i,e.offsets.arrow=(ae(n={},m,Q(v)),ae(n,h,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(W(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var o=v(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),n=e.placement.split("-")[0],i=T(n),r=e.placement.split("-")[1]||"",p=[];switch(t.behavior){case he_FLIP:p=[n,i];break;case he_CLOCKWISE:p=z(n);break;case he_COUNTERCLOCKWISE:p=z(n,!0);break;default:p=t.behavior}return p.forEach((function(s,d){if(n!==s||p.length===d+1)return e;n=e.placement.split("-")[0],i=T(n);var a=e.offsets.popper,l=e.offsets.reference,f=Z,m="left"===n&&f(a.right)>f(l.left)||"right"===n&&f(a.left)<f(l.right)||"top"===n&&f(a.bottom)>f(l.top)||"bottom"===n&&f(a.top)<f(l.bottom),h=f(a.left)<f(o.left),c=f(a.right)>f(o.right),g=f(a.top)<f(o.top),u=f(a.bottom)>f(o.bottom),b="left"===n&&h||"right"===n&&c||"top"===n&&g||"bottom"===n&&u,y=-1!==["top","bottom"].indexOf(n),w=!!t.flipVariations&&(y&&"start"===r&&h||y&&"end"===r&&c||!y&&"start"===r&&g||!y&&"end"===r&&u);(m||b||w)&&(e.flipped=!0,(m||b)&&(n=p[d+1]),w&&(r=function(e){return"end"===e?"start":"start"===e?"end":e}(r)),e.placement=n+(r?"-"+r:""),e.offsets.popper=le({},e.offsets.popper,C(e.instance.popper,e.offsets.reference,e.placement)),e=P(e.instance.modifiers,e,"flip"))})),e},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,o=t.split("-")[0],n=e.offsets,i=n.popper,r=n.reference,p=-1!==["left","right"].indexOf(o),s=-1===["top","left"].indexOf(o);return i[p?"left":"top"]=r[o]-(s?i[p?"width":"height"]:0),e.placement=T(t),e.offsets.popper=g(i),e}},hide:{order:800,enabled:!0,fn:function(e){if(!q(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,o=D(e.instance.modifiers,(function(e){return"preventOverflow"===e.name})).boundaries;if(t.bottom<o.top||t.left>o.right||t.top>o.bottom||t.right<o.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var o=t.x,n=t.y,i=e.offsets.popper,r=D(e.instance.modifiers,(function(e){return"applyStyle"===e.name})).gpuAcceleration;void 0!==r&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s,d,a=void 0===r?t.gpuAcceleration:r,f=u(p(e.instance.popper)),m={position:i.position},h={left:Z(i.left),top:Q(i.top),bottom:Q(i.bottom),right:Z(i.right)},c="bottom"===o?"top":"bottom",g="right"===n?"left":"right",b=B("transform");if(d="bottom"==c?-f.height+h.bottom:h.top,s="right"==g?-f.width+h.right:h.left,a&&b)m[b]="translate3d("+s+"px, "+d+"px, 0)",m[c]=0,m[g]=0,m.willChange="transform";else{var y="bottom"==c?-1:1,w="right"==g?-1:1;m[c]=d*y,m[g]=s*w,m.willChange=c+", "+g}var E={"x-placement":e.placement};return e.attributes=le({},E,e.attributes),e.styles=le({},m,e.styles),e.arrowStyles=le({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){return j(e.instance.popper,e.styles),function(e,t){Object.keys(t).forEach((function(o){!1===t[o]?e.removeAttribute(o):e.setAttribute(o,t[o])}))}(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&j(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,o,n,i){var r=L(i,t,e,o.positionFixed),p=O(o.placement,r,t,e,o.modifiers.flip.boundariesElement,o.modifiers.flip.padding);return t.setAttribute("x-placement",p),j(t,{position:o.positionFixed?"fixed":"absolute"}),o},gpuAcceleration:void 0}}},ce}));var hyperapp=function(){"use strict";var exports={};function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var EMPTY_OBJ={},EMPTY_ARR=[],map=EMPTY_ARR.map,isArray=Array.isArray,defer="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout,createClass=function createClass(obj){var out="";if("string"==typeof obj)return obj;if(isArray(obj)&&obj.length>0)for(var tmp,k=0;k<obj.length;k++)""!==(tmp=createClass(obj[k]))&&(out+=(out&&" ")+tmp);else for(var k in obj)obj[k]&&(out+=(out&&" ")+k);return out},merge=function(a,b){var out={};for(var k in a)out[k]=a[k];for(var k in b)out[k]=b[k];return out},batch=function batch(list){return list.reduce((function(out,item){return out.concat(item&&!0!==item?"function"==typeof item[0]?[item]:batch(item):0)}),EMPTY_ARR)},isSameAction=function(a,b){return isArray(a)&&isArray(b)&&a[0]===b[0]&&"function"==typeof a[0]},shouldRestart=function(a,b){if(a!==b)for(var k in merge(a,b)){if(a[k]!==b[k]&&!isSameAction(a[k],b[k]))return!0;b[k]=a[k]}},patchProperty=function(node,key,oldValue,newValue,listener,isSvg){if("key"===key);else if("style"===key)for(var k in merge(oldValue,newValue))oldValue=null==newValue||null==newValue[k]?"":newValue[k],"-"===k[0]?node[key].setProperty(k,oldValue):node[key][k]=oldValue;else"o"===key[0]&&"n"===key[1]?((node.actions||(node.actions={}))[key=key.slice(2).toLowerCase()]=newValue)?oldValue||node.addEventListener(key,listener):node.removeEventListener(key,listener):!isSvg&&"list"!==key&&key in node?node[key]=null==newValue?"":newValue:null==newValue||!1===newValue||"class"===key&&!(newValue=createClass(newValue))?node.removeAttribute(key):node.setAttribute(key,newValue)},createNode=function createNode(vdom,listener,isSvg){var props=vdom.props,node=3===vdom.type?document.createTextNode(vdom.name):(isSvg=isSvg||"svg"===vdom.name)?document.createElementNS("http://www.w3.org/2000/svg",vdom.name,{is:props.is}):document.createElement(vdom.name,{is:props.is});for(var k in props)patchProperty(node,k,null,props[k],listener,isSvg);for(var i=0,len=vdom.children.length;i<len;i++)node.appendChild(createNode(vdom.children[i]=getVNode(vdom.children[i]),listener,isSvg));return vdom.node=node},getKey=function(vdom){return null==vdom?null:vdom.key},patch=function patch(parent,node,oldVNode,newVNode,listener,isSvg){if(oldVNode===newVNode);else if(null!=oldVNode&&3===oldVNode.type&&3===newVNode.type)oldVNode.name!==newVNode.name&&(node.nodeValue=newVNode.name);else if(null==oldVNode||oldVNode.name!==newVNode.name)node=parent.insertBefore(createNode(newVNode=getVNode(newVNode),listener,isSvg),node),null!=oldVNode&&parent.removeChild(oldVNode.node);else{var tmpVKid,oldVKid,oldKey,newKey,oldVProps=oldVNode.props,newVProps=newVNode.props,oldVKids=oldVNode.children,newVKids=newVNode.children,oldHead=0,newHead=0,oldTail=oldVKids.length-1,newTail=newVKids.length-1;for(var i in isSvg=isSvg||"svg"===newVNode.name,merge(oldVProps,newVProps))("value"===i||"selected"===i||"checked"===i?node[i]:oldVProps[i])!==newVProps[i]&&patchProperty(node,i,oldVProps[i],newVProps[i],listener,isSvg);for(;newHead<=newTail&&oldHead<=oldTail&&null!=(oldKey=getKey(oldVKids[oldHead]))&&oldKey===getKey(newVKids[newHead]);)patch(node,oldVKids[oldHead].node,oldVKids[oldHead],newVKids[newHead]=getVNode(newVKids[newHead++],oldVKids[oldHead++]),listener,isSvg);for(;newHead<=newTail&&oldHead<=oldTail&&null!=(oldKey=getKey(oldVKids[oldTail]))&&oldKey===getKey(newVKids[newTail]);)patch(node,oldVKids[oldTail].node,oldVKids[oldTail],newVKids[newTail]=getVNode(newVKids[newTail--],oldVKids[oldTail--]),listener,isSvg);if(oldHead>oldTail)for(;newHead<=newTail;)node.insertBefore(createNode(newVKids[newHead]=getVNode(newVKids[newHead++]),listener,isSvg),(oldVKid=oldVKids[oldHead])&&oldVKid.node);else if(newHead>newTail)for(;oldHead<=oldTail;)node.removeChild(oldVKids[oldHead++].node);else{i=oldHead;for(var keyed={},newKeyed={};i<=oldTail;i++)null!=(oldKey=oldVKids[i].key)&&(keyed[oldKey]=oldVKids[i]);for(;newHead<=newTail;)oldKey=getKey(oldVKid=oldVKids[oldHead]),newKey=getKey(newVKids[newHead]=getVNode(newVKids[newHead],oldVKid)),newKeyed[oldKey]||null!=newKey&&newKey===getKey(oldVKids[oldHead+1])?(null==oldKey&&node.removeChild(oldVKid.node),oldHead++):null==newKey||1===oldVNode.type?(null==oldKey&&(patch(node,oldVKid&&oldVKid.node,oldVKid,newVKids[newHead],listener,isSvg),newHead++),oldHead++):(oldKey===newKey?(patch(node,oldVKid.node,oldVKid,newVKids[newHead],listener,isSvg),newKeyed[newKey]=!0,oldHead++):null!=(tmpVKid=keyed[newKey])?(patch(node,node.insertBefore(tmpVKid.node,oldVKid&&oldVKid.node),tmpVKid,newVKids[newHead],listener,isSvg),newKeyed[newKey]=!0):patch(node,oldVKid&&oldVKid.node,null,newVKids[newHead],listener,isSvg),newHead++);for(;oldHead<=oldTail;)null==getKey(oldVKid=oldVKids[oldHead++])&&node.removeChild(oldVKid.node);for(var i in keyed)null==newKeyed[i]&&node.removeChild(keyed[i].node)}}return newVNode.node=node},getVNode=function(newVNode,oldVNode){return 2===newVNode.type?((!oldVNode||function(a,b){for(var k in a)if(a[k]!==b[k])return!0;for(var k in b)if(a[k]!==b[k])return!0}(oldVNode.lazy,newVNode.lazy))&&((oldVNode=newVNode.lazy.view(newVNode.lazy)).lazy=newVNode.lazy),oldVNode):newVNode},createVNode=function(name,props,children,node,key,type){return{name,props,children,node,type,key}},createTextVNode=function(value,node){return createVNode(value,EMPTY_OBJ,EMPTY_ARR,node,void 0,3)},recycleNode=function recycleNode(node){return 3===node.nodeType?createTextVNode(node.nodeValue,node):createVNode(node.nodeName.toLowerCase(),EMPTY_OBJ,map.call(node.childNodes,recycleNode),node,void 0,1)};exports.Lazy=function(props){return{lazy:props,type:2}};exports.h=function(name,props){for(var vdom,rest=[],children=[],i=arguments.length;i-- >2;)rest.push(arguments[i]);for(;rest.length>0;)if(isArray(vdom=rest.pop()))for(i=vdom.length;i-- >0;)rest.push(vdom[i]);else!1===vdom||!0===vdom||null==vdom||children.push("object"===_typeof(vdom)?vdom:createTextVNode(vdom));return props=props||EMPTY_OBJ,"function"==typeof name?name(props,children):createVNode(name,props,children,void 0,props.key)};exports.app=function(props){var state={},lock=!1,view=props.view,node=props.node,vdom=node&&recycleNode(node),subscriptions=props.subscriptions,subs=[],listener=function(event){dispatch(this.actions[event.type],event)},setState=function(newState){return state!==newState&&(state=newState,subscriptions&&(subs=function(oldSubs,newSubs,dispatch){for(var oldSub,newSub,i=0,subs=[];i<oldSubs.length||i<newSubs.length;i++)oldSub=oldSubs[i],newSub=newSubs[i],subs.push(newSub?!oldSub||newSub[0]!==oldSub[0]||shouldRestart(newSub[1],oldSub[1])?[newSub[0],newSub[1],newSub[0](dispatch,newSub[1]),oldSub&&oldSub[2]()]:oldSub:oldSub&&oldSub[2]());return subs}(subs,batch([subscriptions(state)]),dispatch)),view&&!lock&&defer(render,lock=!0)),state},dispatch=(props.middleware||function(obj){return obj})((function(action,props){return"function"==typeof action?dispatch(action(state,props)):isArray(action)?"function"==typeof action[0]?dispatch(action[0],"function"==typeof action[1]?action[1](props):action[1]):(batch(action.slice(1)).map((function(fx){fx&&fx[0](dispatch,fx[1])}),setState(action[0])),state):setState(action)})),render=function(){lock=!1,node=patch(node.parentNode,node,vdom,vdom="string"==typeof(vdom=view(state))?createTextVNode(vdom):vdom,listener)};dispatch(props.init)};var rawEvent=function(name,useCapture){return function(fx){return function(action){return[fx,{action}]}}((function(dispatch,props){var listener=function(event){dispatch(props.action,event)};return addEventListener(name,listener,useCapture||!1),function(){removeEventListener(name,listener)}}))},onAnimationFrame=function(fx){return function(action){return[fx,{action}]}}((function(dispatch,props){var id=requestAnimationFrame((function frame(timestamp){id=requestAnimationFrame(frame),dispatch(props.action,timestamp)}));return function(){cancelAnimationFrame(id)}}));exports.onAnimationFrame=onAnimationFrame;var onMouseUp=rawEvent("mouseup");exports.onMouseUp=onMouseUp;var onMouseDown=rawEvent("mousedown");exports.onMouseDown=onMouseDown;var onMouseEnter=rawEvent("mouseenter");exports.onMouseEnter=onMouseEnter;var onMouseLeave=rawEvent("mouseleave");exports.onMouseLeave=onMouseLeave;var onMouseMove=rawEvent("mousemove");exports.onMouseMove=onMouseMove;var onMouseOver=rawEvent("mouseover");exports.onMouseOver=onMouseOver;var onMouseOut=rawEvent("mouseout");exports.onMouseOut=onMouseOut;var onTouchStart=rawEvent("touchstart");exports.onTouchStart=onTouchStart;var onTouchMove=rawEvent("touchmove");exports.onTouchMove=onTouchMove;var onTouchEnd=rawEvent("touchend");exports.onTouchEnd=onTouchEnd;var onKeyDown=rawEvent("keydown");exports.onKeyDown=onKeyDown;var onKeyDownCaptured=rawEvent("keydown",!0);exports.onKeyDownCaptured=onKeyDownCaptured;rawEvent("keydown");exports.onKeyDown=onKeyDown;var onKeyUp=rawEvent("keyup");exports.onKeyUp=onKeyUp;var onFocus=rawEvent("focus");exports.onFocus=onFocus;var onBlur=rawEvent("blur");exports.onBlur=onBlur;var eventOptions=function(fx){return function(props){return[fx,props]}}((function(dispatch,props){props.preventDefault&&props.event.preventDefault(),props.stopPropagation&&props.event.stopPropagation(),null!=props.action&&dispatch(props.action,props.event)}));exports.eventOptions=eventOptions;exports.preventDefault=function(action){return function(state,event){return[state,eventOptions({preventDefault:!0,action,event})]}};exports.stopPropagation=function(action){return function(state,event){return[state,eventOptions({stopPropagation:!0,action,event})]}};exports.eventKey=function(event){return event.key};exports.targetValue=function(event){return event.target.value};exports.targetChecked=function(event){return event.target.checked};var timeFx=function(fx){return function(action,props){return[fx,{action,delay:props.delay}]}},timeout=timeFx((function(dispatch,props){setTimeout((function(){dispatch(props.action)}),props.delay)}));exports.timeout=timeout;var interval=timeFx((function(dispatch,props){var id=setInterval((function(){dispatch(props.action,Date.now())}),props.delay);return function(){clearInterval(id)}}));exports.interval=interval;var a,request=(a=(dispatch,props)=>{var url=props.url,action=props.action,options=props.options||{},expect=props.expect||"text";return fetch(url,options).then((function(response){if(!response.ok)throw response;return response})).then((function(body){return body[expect]()})).then((function(result){dispatch(action,result)})).catch((function(error){dispatch(action,error)}))},function(b){return[a,b]});return exports.request=request,exports}();!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).marked=t()}(this,(function(){"use strict";function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return o[e]}var e,t=(function(t){function e(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,xhtml:!1}}t.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,xhtml:!1},getDefaults:e,changeDefaults:function(e){t.exports.defaults=e}}}(e={exports:{}}),e.exports),r=(t.defaults,t.getDefaults,t.changeDefaults,/[&<>"']/),i=/[&<>"']/g,a=/[<>"']|&(?!#?\w+;)/,l=/[<>"']|&(?!#?\w+;)/g,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function h(e){return e.replace(c,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}var u=/(^|[^\[])\^/g,p=/[^\w:]/g,g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,f={},d=/^[^:]+:\/*[^/]*$/,k=/^([^:]+:)[\s\S]*$/,b=/^([^:]+:\/*[^/]*)[\s\S]*$/;function x(e,t,n){var r=e.length;if(0===r)return"";for(var i=0;i<r;){var s=e.charAt(r-i-1);if(s!==t||n){if(s===t||!n)break;i++}else i++}return e.substr(0,r-i)}var w=function(e,t){if(t){if(r.test(e))return e.replace(i,n)}else if(a.test(e))return e.replace(l,n);return e},v=h,$=function(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},A=x,q=t.defaults,T=A,I=function(e,t){var n=e.replace(/\|/g,(function(e,t,n){for(var r=!1,i=t;0<=--i&&"\\"===n[i];)r=!r;return r?"|":" |"})).split(/ \|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n},C=w,O=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=e.length,r=0,i=0;i<n;i++)if("\\"===e[i])i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&--r<0)return i;return-1};function D(e,t,n){var r=t.href,i=t.title?C(t.title):null;return"!"!==e[0].charAt(0)?{type:"link",raw:n,href:r,title:i,text:e[1]}:{type:"image",raw:n,text:C(e[1]),href:r,title:i}}var E=function(){function e(e){this.options=e||q}var t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return 1<t[0].length?{type:"space",raw:t[0]}:{raw:"\n"}},t.code=function(e,t){var n=this.rules.block.code.exec(e);if(n){var r=t[t.length-1];if(r&&"paragraph"===r.type)return t.pop(),r.text+="\n"+n[0].trimRight(),r.raw+="\n"+n[0],r;var i=n[0].replace(/^ {4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:T(i,"\n")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t)return{type:"code",raw:t[0],lang:t[2]?t[2].trim():t[2],text:t[3]||""}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[1].length,text:t[2]}},t.nptable=function(e){var t=this.rules.block.nptable.exec(e);if(t){var n={type:"table",header:I(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[],raw:t[0]};if(n.header.length===n.align.length){var r,i=n.align.length;for(r=0;r<i;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]="right":/^ *:-+: *$/.test(n.align[r])?n.align[r]="center":/^ *:-+ *$/.test(n.align[r])?n.align[r]="left":n.align[r]=null;for(i=n.cells.length,r=0;r<i;r++)n.cells[r]=I(n.cells[r],n.header.length);return n}}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:n}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){for(var n,r,i,s,a,l,o,c=t[0],h=t[2],u=1<h.length,p={type:"list",raw:c,ordered:u,start:u?+h:"",loose:!1,items:[]},g=t[0].match(this.rules.block.item),f=!1,d=g.length,k=0;k<d;k++)r=(c=n=g[k]).length,~(n=n.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(r-=n.length,n=this.options.pedantic?n.replace(/^ {1,4}/gm,""):n.replace(new RegExp("^ {1,"+r+"}","gm"),"")),k!==d-1&&(i=this.rules.block.bullet.exec(g[k+1])[0],(1<h.length?1===i.length:1<i.length||this.options.smartLists&&i!==h)&&(s=g.slice(k+1).join("\n"),p.raw=p.raw.substring(0,p.raw.length-s.length),k=d-1)),a=f||/\n\n(?!\s*$)/.test(n),k!==d-1&&(f="\n"===n.charAt(n.length-1),a=a||f),a&&(p.loose=!0),o=void 0,(l=/^\[[ xX]\] /.test(n))&&(o=" "!==n[1],n=n.replace(/^\[[ xX]\] +/,"")),p.items.push({raw:c,task:l,checked:o,loose:a,text:n});return p}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):C(t[0]):t[0]}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:"table",header:I(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=t[0];var r,i=n.align.length;for(r=0;r<i;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]="right":/^ *:-+: *$/.test(n.align[r])?n.align[r]="center":/^ *:-+ *$/.test(n.align[r])?n.align[r]="left":n.align[r]=null;for(i=n.cells.length,r=0;r<i;r++)n.cells[r]=I(n.cells[r].replace(/^ *\| *| *\| *$/g,""),n.header.length);return n}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1]}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}},t.text=function(e){var t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0]}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:C(t[1])}},t.tag=function(e,t,n){var r=this.rules.inline.tag.exec(e);if(r)return!t&&/^<a /i.test(r[0])?t=!0:t&&/^<\/a>/i.test(r[0])&&(t=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:t,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):C(r[0]):r[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n=O(t[2],"()");if(-1<n){var r=(0===t[0].indexOf("!")?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,r).trim(),t[3]=""}var i=t[2],s="";if(this.options.pedantic){var a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);s=a?(i=a[1],a[3]):""}else s=t[3]?t[3].slice(1,-1):"";return D(t,{href:(i=i.trim().replace(/^<([\s\S]*)>$/,"$1"))?i.replace(this.rules.inline._escapes,"$1"):i,title:s?s.replace(this.rules.inline._escapes,"$1"):s},t[0])}},t.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var r=(n[2]||n[1]).replace(/\s+/g," ");if((r=t[r.toLowerCase()])&&r.href)return D(n,r,n[0]);var i=n[0].charAt(0);return{type:"text",raw:i,text:i}}},t.strong=function(e){var t=this.rules.inline.strong.exec(e);if(t)return{type:"strong",raw:t[0],text:t[4]||t[3]||t[2]||t[1]}},t.em=function(e){var t=this.rules.inline.em.exec(e);if(t)return{type:"em",raw:t[0],text:t[6]||t[5]||t[4]||t[3]||t[2]||t[1]}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t)return{type:"codespan",raw:t[0],text:C(t[2].trim(),!0)}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[1]}},t.autolink=function(e,t){var n,r,i=this.rules.inline.autolink.exec(e);if(i)return r="@"===i[2]?"mailto:"+(n=C(this.options.mangle?t(i[1]):i[1])):n=C(i[1]),{type:"link",raw:i[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}},t.url=function(e,t){var n;if(n=this.rules.inline.url.exec(e)){var r,i;if("@"===n[2])i="mailto:"+(r=C(this.options.mangle?t(n[0]):n[0]));else{for(var s;s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0],s!==n[0];);r=C(n[0]),i="www."===n[1]?"http://"+r:r}return{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}},t.inlineText=function(e,t,n){var r,i=this.rules.inline.text.exec(e);if(i)return r=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):C(i[0]):i[0]:C(this.options.smartypants?n(i[0]):i[0]),{type:"text",raw:i[0],text:r}},e}(),j={exec:function(){}},L=function(n,e){n=n.source||n,e=e||"";var r={replace:function(e,t){return t=(t=t.source||t).replace(u,"$1"),n=n.replace(e,t),r},getRegex:function(){return new RegExp(n,e)}};return r},P=$,U={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:j,table:j,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};U.def=L(U.def).replace("label",U._label).replace("title",U._title).getRegex(),U.bullet=/(?:[*+-]|\d{1,9}\.)/,U.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,U.item=L(U.item,"gm").replace(/bull/g,U.bullet).getRegex(),U.list=L(U.list).replace(/bull/g,U.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+U.def.source+")").getRegex(),U._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",U._comment=/<!--(?!-?>)[\s\S]*?-->/,U.html=L(U.html,"i").replace("comment",U._comment).replace("tag",U._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),U.paragraph=L(U._paragraph).replace("hr",U.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",U._tag).getRegex(),U.blockquote=L(U.blockquote).replace("paragraph",U.paragraph).getRegex(),U.normal=P({},U),U.gfm=P({},U.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),U.gfm.nptable=L(U.gfm.nptable).replace("hr",U.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",U._tag).getRegex(),U.gfm.table=L(U.gfm.table).replace("hr",U.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",U._tag).getRegex(),U.pedantic=P({},U.normal,{html:L("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",U._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:j,paragraph:L(U.normal._paragraph).replace("hr",U.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",U.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var B={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:j,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^_([^\s_<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s*<\[])\*(?!\*)|^\*([^\s<"][\s\S]*?[^\s\[\*])\*(?![\]`punctuation])|^\*([^\s*"<\[][\s\S]*[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:j,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_punctuation:"!\"#$%&'()*+\\-./:;<=>?@\\[^_{|}~"};B.em=L(B.em).replace(/punctuation/g,B._punctuation).getRegex(),B._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,B._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,B._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,B.autolink=L(B.autolink).replace("scheme",B._scheme).replace("email",B._email).getRegex(),B._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,B.tag=L(B.tag).replace("comment",U._comment).replace("attribute",B._attribute).getRegex(),B._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,B._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,B._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,B.link=L(B.link).replace("label",B._label).replace("href",B._href).replace("title",B._title).getRegex(),B.reflink=L(B.reflink).replace("label",B._label).getRegex(),B.normal=P({},B),B.pedantic=P({},B.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:L(/^!?\[(label)\]\((.*?)\)/).replace("label",B._label).getRegex(),reflink:L(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",B._label).getRegex()}),B.gfm=P({},B.normal,{escape:L(B.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),B.gfm.url=L(B.gfm.url,"i").replace("email",B.gfm._extended_email).getRegex(),B.breaks=P({},B.gfm,{br:L(B.br).replace("{2,}","*").getRegex(),text:L(B.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var F={block:U,inline:B},N=t.defaults,X=F.block,G=F.inline;function M(e){return e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function V(e){var t,n,r="",i=e.length;for(t=0;t<i;t++)n=e.charCodeAt(t),.5<Math.random()&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}var H=function(){function n(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||N,this.options.tokenizer=this.options.tokenizer||new E,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var t={block:X.normal,inline:G.normal};this.options.pedantic?(t.block=X.pedantic,t.inline=G.pedantic):this.options.gfm&&(t.block=X.gfm,this.options.breaks?t.inline=G.breaks:t.inline=G.gfm),this.tokenizer.rules=t}n.lex=function(e,t){return new n(t).lex(e)};var e,r,i=n.prototype;return i.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},i.blockTokens=function(e,t,n){var r,i,s;for(void 0===t&&(t=[]),void 0===n&&(n=!0),e=e.replace(/^ +$/gm,"");e;)if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),r.type&&t.push(r);else if(r=this.tokenizer.code(e,t))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.nptable(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],n),t.push(r);else if(r=this.tokenizer.list(e)){for(e=e.substring(r.raw.length),s=r.items.length,i=0;i<s;i++)r.items[i].tokens=this.blockTokens(r.items[i].text,[],!1);t.push(r)}else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.def(e)))e=e.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.paragraph(e)))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.text(e))e=e.substring(r.raw.length),t.push(r);else if(e){var a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}return t},i.inline=function(e){var t,n,r,i,s,a,l=e.length;for(t=0;t<l;t++)switch((a=e[t]).type){case"paragraph":case"text":case"heading":a.tokens=[],this.inlineTokens(a.text,a.tokens);break;case"table":for(a.tokens={header:[],cells:[]},i=a.header.length,n=0;n<i;n++)a.tokens.header[n]=[],this.inlineTokens(a.header[n],a.tokens.header[n]);for(i=a.cells.length,n=0;n<i;n++)for(s=a.cells[n],a.tokens.cells[n]=[],r=0;r<s.length;r++)a.tokens.cells[n][r]=[],this.inlineTokens(s[r],a.tokens.cells[n][r]);break;case"blockquote":this.inline(a.tokens);break;case"list":for(i=a.items.length,n=0;n<i;n++)this.inline(a.items[n].tokens)}return e},i.inlineTokens=function(e,t,n,r){var i;for(void 0===t&&(t=[]),void 0===n&&(n=!1),void 0===r&&(r=!1);e;)if(i=this.tokenizer.escape(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.tag(e,n,r))e=e.substring(i.raw.length),n=i.inLink,r=i.inRawBlock,t.push(i);else if(i=this.tokenizer.link(e))e=e.substring(i.raw.length),"link"===i.type&&(i.tokens=this.inlineTokens(i.text,[],!0,r)),t.push(i);else if(i=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(i.raw.length),"link"===i.type&&(i.tokens=this.inlineTokens(i.text,[],!0,r)),t.push(i);else if(i=this.tokenizer.strong(e))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),t.push(i);else if(i=this.tokenizer.em(e))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),t.push(i);else if(i=this.tokenizer.codespan(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.br(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.del(e))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),t.push(i);else if(i=this.tokenizer.autolink(e,V))e=e.substring(i.raw.length),t.push(i);else if(n||!(i=this.tokenizer.url(e,V))){if(i=this.tokenizer.inlineText(e,r,M))e=e.substring(i.raw.length),t.push(i);else if(e){var s="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(s);break}throw new Error(s)}}else e=e.substring(i.raw.length),t.push(i);return t},e=n,r=[{key:"rules",get:function(){return{block:X,inline:G}}}],null&&s(e.prototype,null),r&&s(e,r),n}(),J=t.defaults,K=function(e,t,n){if(e){var r;try{r=decodeURIComponent(h(n)).replace(p,"").toLowerCase()}catch(e){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!g.test(n)&&(n=function(e,t){f[" "+e]||(d.test(e)?f[" "+e]=e+"/":f[" "+e]=x(e,"/",!0));var n=-1===(e=f[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(k,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(b,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n},Q=w,W=function(){function e(e){this.options=e||J}var t=e.prototype;return t.code=function(e,t,n){var r=(t||"").match(/\S*/)[0];if(this.options.highlight){var i=this.options.highlight(e,r);null!=i&&i!==e&&(n=!0,e=i)}return r?'<pre><code class="'+this.options.langPrefix+Q(r,!0)+'">'+(n?e:Q(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:Q(e,!0))+"</code></pre>"},t.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},t.html=function(e){return e},t.heading=function(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},t.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},t.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},t.listitem=function(e){return"<li>"+e+"</li>\n"},t.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(e){return"<p>"+e+"</p>\n"},t.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n"+(t=t&&"<tbody>"+t+"</tbody>")+"</table>\n"},t.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},t.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},t.strong=function(e){return"<strong>"+e+"</strong>"},t.em=function(e){return"<em>"+e+"</em>"},t.codespan=function(e){return"<code>"+e+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(e){return"<del>"+e+"</del>"},t.link=function(e,t,n){if(null===(e=K(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<a href="'+Q(e)+'"';return t&&(r+=' title="'+t+'"'),r+">"+n+"</a>"},t.image=function(e,t,n){if(null===(e=K(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+(this.options.xhtml?"/>":">")},t.text=function(e){return e},e}(),Y=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,n){return""+n},t.image=function(e,t,n){return""+n},t.br=function(){return""},e}(),ee=function(){function e(){this.seen={}}return e.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t))for(var n=t;this.seen[n]++,t=n+"-"+this.seen[n],this.seen.hasOwnProperty(t););return this.seen[t]=0,t},e}(),te=t.defaults,ne=v,re=function(){function n(e){this.options=e||te,this.options.renderer=this.options.renderer||new W,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Y,this.slugger=new ee}n.parse=function(e,t){return new n(t).parse(e)};var e=n.prototype;return e.parse=function(e,t){void 0===t&&(t=!0);var n,r,i,s,a,l,o,c,h,u,p,g,f,d,k,b,m,x,w="",v=e.length;for(n=0;n<v;n++)switch((u=e[n]).type){case"space":continue;case"hr":w+=this.renderer.hr();continue;case"heading":w+=this.renderer.heading(this.parseInline(u.tokens),u.depth,ne(this.parseInline(u.tokens,this.textRenderer)),this.slugger);continue;case"code":w+=this.renderer.code(u.text,u.lang,u.escaped);continue;case"table":for(o=c="",s=u.header.length,r=0;r<s;r++)o+=this.renderer.tablecell(this.parseInline(u.tokens.header[r]),{header:!0,align:u.align[r]});for(c+=this.renderer.tablerow(o),h="",s=u.cells.length,r=0;r<s;r++){for(o="",a=(l=u.tokens.cells[r]).length,i=0;i<a;i++)o+=this.renderer.tablecell(this.parseInline(l[i]),{header:!1,align:u.align[i]});h+=this.renderer.tablerow(o)}w+=this.renderer.table(c,h);continue;case"blockquote":h=this.parse(u.tokens),w+=this.renderer.blockquote(h);continue;case"list":for(p=u.ordered,g=u.start,f=u.loose,s=u.items.length,h="",r=0;r<s;r++)b=(k=u.items[r]).checked,m=k.task,d="",k.task&&(x=this.renderer.checkbox(b),f?"text"===k.tokens[0].type?(k.tokens[0].text=x+" "+k.tokens[0].text,k.tokens[0].tokens&&0<k.tokens[0].tokens.length&&"text"===k.tokens[0].tokens[0].type&&(k.tokens[0].tokens[0].text=x+" "+k.tokens[0].tokens[0].text)):k.tokens.unshift({type:"text",text:x}):d+=x),d+=this.parse(k.tokens,f),h+=this.renderer.listitem(d,m,b);w+=this.renderer.list(h,p,g);continue;case"html":w+=this.renderer.html(u.text);continue;case"paragraph":w+=this.renderer.paragraph(this.parseInline(u.tokens));continue;case"text":for(h=u.tokens?this.parseInline(u.tokens):u.text;n+1<v&&"text"===e[n+1].type;)h+="\n"+((u=e[++n]).tokens?this.parseInline(u.tokens):u.text);w+=t?this.renderer.paragraph(h):h;continue;default:var _='Token with "'+u.type+'" type was not found.';if(this.options.silent)return void console.error(_);throw new Error(_)}return w},e.parseInline=function(e,t){t=t||this.renderer;var n,r,i="",s=e.length;for(n=0;n<s;n++)switch((r=e[n]).type){case"escape":case"text":i+=t.text(r.text);break;case"html":i+=t.html(r.text);break;case"link":i+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":i+=t.image(r.href,r.title,r.text);break;case"strong":i+=t.strong(this.parseInline(r.tokens,t));break;case"em":i+=t.em(this.parseInline(r.tokens,t));break;case"codespan":i+=t.codespan(r.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(r.tokens,t));break;default:var a='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(a);throw new Error(a)}return i},n}(),ie=$,se=function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},ae=w,le=t.getDefaults,oe=t.changeDefaults,ce=t.defaults;function he(t,a,l){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(l||"function"==typeof a){var e=function(){l||(l=a,a=null),a=ie({},he.defaults,a||{}),se(a);var n,r,i=a.highlight,e=0;try{n=H.lex(t,a)}catch(e){return{v:l(e)}}function s(t){if(t)return a.highlight=i,l(t);var e;try{e=re.parse(n,a)}catch(e){t=e}return a.highlight=i,t?l(t):l(null,e)}if(r=n.length,!i||i.length<3)return{v:s()};if(delete a.highlight,!r)return{v:s()};for(;e<n.length;e++)!function(n){"code"!==n.type?--r||s():i(n.text,n.lang,(function(e,t){return e?s(e):null==t||t===n.text?--r||s():(n.text=t,n.escaped=!0,void(--r||s()))}))}(n[e]);return{v:void 0}}();if("object"==typeof e)return e.v}try{return a=ie({},he.defaults,a||{}),se(a),re.parse(H.lex(t,a),a)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(a||he.defaults).silent)return"<p>An error occurred:</p><pre>"+ae(e.message+"",!0)+"</pre>";throw e}}return he.options=he.setOptions=function(e){return ie(he.defaults,e),oe(he.defaults),he},he.getDefaults=le,he.defaults=ce,he.use=function(l){var n=ie({},l);l.renderer&&function(){function e(i){var s=a[i];a[i]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=l.renderer[i].apply(a,t);return!1===r&&(r=s.apply(a,t)),r}}var a=he.defaults.renderer||new W;for(var t in l.renderer)e(t);n.renderer=a}(),l.tokenizer&&function(){function e(i){var s=a[i];a[i]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=l.tokenizer[i].apply(a,t);return!1===r&&(r=s.apply(a,t)),r}}var a=he.defaults.tokenizer||new E;for(var t in l.tokenizer)e(t);n.tokenizer=a}(),he.setOptions(n)},he.Parser=re,he.parser=re.parse,he.Renderer=W,he.TextRenderer=Y,he.Lexer=H,he.lexer=H.lex,he.Tokenizer=E,he.Slugger=ee,he.parse=he}));const ParseTable=function(){const fail={toString:function(){return"match failed"}},objectThatDelegatesTo=function(x,props){let f=function(){};f.prototype=x;let r=new f;for(let p in props)props.hasOwnProperty(p)&&(r[p]=props[p]);return r};function OMInputStream(hd,tl){this.memo={},this.lst=tl.lst,this.idx=tl.idx,this.hd=hd,this.tl=tl}function OMInputStreamEnd(lst,idx){this.memo={},this.lst=lst,this.idx=idx}function ListOMInputStream(lst,idx){this.memo={},this.lst=lst,this.idx=idx,this.hd=lst.at(idx)}function makeListOMInputStream(lst,idx){return new(idx<lst.length?ListOMInputStream:OMInputStreamEnd)(lst,idx)}function makeOMInputStreamProxy(target){return objectThatDelegatesTo(target,{memo:{},target,tl:void 0,tail:function(){return this.tl||(this.tl=makeOMInputStreamProxy(target.tail()))}})}function Failer(){}OMInputStream.prototype.head=function(){return this.hd},OMInputStream.prototype.tail=function(){return this.tl},OMInputStream.prototype.type=function(){return this.lst.constructor},OMInputStream.prototype.upTo=function(that){for(var r=[],curr=this;curr!=that;)r.push(curr.head()),curr=curr.tail();return this.type()==String?r.join(""):r},OMInputStreamEnd.prototype=objectThatDelegatesTo(OMInputStream.prototype),OMInputStreamEnd.prototype.head=function(){throw fail},OMInputStreamEnd.prototype.tail=function(){throw fail},Array.prototype.at=function(idx){return this[idx]},String.prototype.at=String.prototype.charAt,ListOMInputStream.prototype=objectThatDelegatesTo(OMInputStream.prototype),ListOMInputStream.prototype.head=function(){return this.hd},ListOMInputStream.prototype.tail=function(){return this.tl||(this.tl=makeListOMInputStream(this.lst,this.idx+1))},Array.prototype.toOMInputStream=function(){return makeListOMInputStream(this,0)},String.prototype.toOMInputStream=function(){return makeListOMInputStream(this,0)},Failer.prototype.used=!1;const OMeta={_a:function(rule){var memoRec=this.input.memo[rule];if(null==memoRec){var origInput=this.input,failer=new Failer;if(void 0===this[rule])throw'tried to apply undefined rule "'+rule+'"';if(this.input.memo[rule]=failer,this.input.memo[rule]=memoRec={ans:this[rule].call(this),nextInput:this.input},failer.used)for(var sentinel=this.input;;)try{this.input=origInput;var ans=this[rule].call(this);if(this.input==sentinel)throw fail;memoRec.ans=ans,memoRec.nextInput=this.input}catch(f){if(f!=fail)throw f;break}}else if(memoRec instanceof Failer)throw memoRec.used=!0,fail;return this.input=memoRec.nextInput,memoRec.ans},_awa:function(rule){for(var ruleFn=this[rule],ruleFnArity=ruleFn.length,idx=arguments.length-1;idx>=ruleFnArity+1;idx--)this._prependInput(arguments[idx]);return 0==ruleFnArity?ruleFn.call(this):ruleFn.apply(this,Array.prototype.slice.call(arguments,1,ruleFnArity+1))},_superApplyWithArgs:function(recv,rule){for(var ruleFn=this[rule],ruleFnArity=ruleFn.length,idx=arguments.length-1;idx>=ruleFnArity+2;idx--)recv._prependInput(arguments[idx]);return 0==ruleFnArity?ruleFn.call(recv):ruleFn.apply(recv,Array.prototype.slice.call(arguments,2,ruleFnArity+2))},_prependInput:function(v){this.input=new OMInputStream(v,this.input)},memoizeParameterizedRules:function(){this._prependInput=function(v){var newInput;isImmutable(v)?(newInput=this.input[getTag(v)])||(newInput=new OMInputStream(v,this.input),this.input[getTag(v)]=newInput):newInput=new OMInputStream(v,this.input),this.input=newInput},this._awa=function(rule){for(var ruleFnArity=this[rule].length,idx=arguments.length-1;idx>=ruleFnArity+1;idx--)this._prependInput(arguments[idx]);return 0==ruleFnArity?this._a(rule):this[rule].apply(this,Array.prototype.slice.call(arguments,1,ruleFnArity+1))}},_pred:function(b){if(b)return!0;throw fail},_not:function(x){var origInput=this.input;try{x.call(this)}catch(f){if(f!=fail)throw f;return this.input=origInput,!0}throw fail},_lookahead:function(x){var origInput=this.input,r=x.call(this);return this.input=origInput,r},_or:function(){for(var origInput=this.input,idx=0;idx<arguments.length;idx++)try{return this.input=origInput,arguments[idx].call(this)}catch(f){if(f!=fail)throw f}throw fail},_xor:function(ruleName){for(var newInput,ans,origInput=this.input,idx=1;idx<arguments.length;){try{if(this.input=origInput,ans=arguments[idx].call(this),newInput)throw'more than one choice matched by "exclusive-OR" in '+ruleName;newInput=this.input}catch(f){if(f!=fail)throw f}idx++}if(newInput)return this.input=newInput,ans;throw fail},disableXORs:function(){this._xor=this._or},_opt:function(x){var ans,origInput=this.input;try{ans=x.call(this)}catch(f){if(f!=fail)throw f;this.input=origInput}return ans},_many:function(x){for(var ans=null!=arguments[1]?[arguments[1]]:[];;){var origInput=this.input;try{ans.push(x.call(this))}catch(f){if(f!=fail)throw f;this.input=origInput;break}}return ans},_many1:function(x){return this._many(x,x.call(this))},_form:function(x){var v=this._a("any");if(!function(x){return"string"==typeof x||x.constructor===Array}(v))throw fail;var origInput=this.input;this.input=v.toOMInputStream();x.call(this);return this._a("end"),this.input=origInput,v},_consumedBy:function(x){var origInput=this.input;return x.call(this),origInput.upTo(this.input)},_idxConsumedBy:function(x){var origInput=this.input;return x.call(this),{fromIdx:origInput.idx,toIdx:this.input.idx}},_interleave:function(mode1,part1,mode2,part2){for(var currInput=this.input,ans=[],idx=0;idx<arguments.length;idx+=2)ans[idx/2]="*"==arguments[idx]||"+"==arguments[idx]?[]:void 0;for(;;){idx=0;for(var allDone=!0;idx<arguments.length;){if("0"!=arguments[idx])try{switch(this.input=currInput,arguments[idx]){case"*":ans[idx/2].push(arguments[idx+1].call(this));break;case"+":ans[idx/2].push(arguments[idx+1].call(this)),arguments[idx]="*";break;case"?":case"1":ans[idx/2]=arguments[idx+1].call(this),arguments[idx]="0";break;default:throw"invalid mode '"+arguments[idx]+"' in OMeta._interleave"}currInput=this.input;break}catch(f){if(f!=fail)throw f;allDone=allDone&&("*"==arguments[idx]||"?"==arguments[idx])}idx+=2}if(idx==arguments.length){if(allDone)return ans;throw fail}}},_currIdx:function(){return this.input.idx},any:function(){var r=this.input.head();return this.input=this.input.tail(),r},begin:function(){if(0==this.input.idx)return!0;throw fail},end:function(){return this._not((function(){return this._a("any")}))},pos:function(){return this.input.idx},empty:function(){return!0},apply:function(r){return this._a(r)},foreign:function(g,r){var gi=objectThatDelegatesTo(g,{input:makeOMInputStreamProxy(this.input)}),ans=gi._a(r);return this.input=gi.input.target,ans},exact:function(wanted){if(wanted===this._a("any"))return wanted;throw fail},true:function(){var r=this._a("any");return this._pred(!0===r),r},false:function(){var r=this._a("any");return this._pred(!1===r),r},undefined:function(){var r=this._a("any");return this._pred(void 0===r),r},number:function(){var r=this._a("any");return this._pred("number"==typeof r),r},string:function(){var r=this._a("any");return this._pred("string"==typeof r),r},char:function(){var r=this._a("any");return this._pred("string"==typeof r&&1==r.length),r},space:function(){var r=this._a("char");return this._pred(r.charCodeAt(0)<=32),r},spaces:function(){return this._many((function(){return this._a("space")}))},ws:function(){var r=this._a("char");return this._pred(-1!=" \t\f".indexOf(r)),r},digit:function(){var r=this._a("char");return this._pred(r>="0"&&r<="9"),r},lower:function(){var r=this._a("char");return this._pred(r>="a"&&r<="z"),r},upper:function(){var r=this._a("char");return this._pred(r>="A"&&r<="Z"),r},letter:function(){return this._or((function(){return this._a("lower")}),(function(){return this._a("upper")}))},letterOrDigit:function(){return this._or((function(){return this._a("letter")}),(function(){return this._a("digit")}))},firstAndRest:function(first,rest){return this._many((function(){return this._a(rest)}),this._a(first))},seq:function(xs){for(var idx=0;idx<xs.length;idx++)this._awa("exact",xs.at(idx));return xs},notLast:function(rule){var r=this._a(rule);return this._lookahead((function(){return this._a(rule)})),r},listOf:function(rule,delim){return this._or((function(){var r=this._a(rule);return this._many((function(){return this._awa("token",delim),this._a(rule)}),r)}),(function(){return[]}))},token:function(cs){return this._a("spaces"),this._awa("seq",cs)},fromTo:function(x,y){return this._consumedBy((function(){this._awa("seq",x),this._many((function(){this._not((function(){this._awa("seq",y)})),this._a("char")})),this._awa("seq",y)}))},initialize:function(){},_genericMatch:function(input,rule,args,matchFailed){null==args&&(args=[]);for(var realArgs=[rule],idx=0;idx<args.length;idx++)realArgs.push(args[idx]);var m=objectThatDelegatesTo(this,{input});m.initialize();try{return 1==realArgs.length?m._a.call(m,realArgs[0]):m._awa.apply(m,realArgs)}catch(f){if(f==fail&&null!=matchFailed){if(null!=(input=m.input).idx){for(;null!=input.tl&&null!=input.tl.idx;)input=input.tl;input.idx--}return matchFailed(m,input.idx)}throw f}},match:function(obj,rule,args,matchFailed){return this._genericMatch([obj].toOMInputStream(),rule,args,matchFailed)},matchAll:function(listyObj,rule,args,matchFailed){return this._genericMatch(listyObj.toOMInputStream(),rule,args,matchFailed)},createInstance:function(){var m=objectThatDelegatesTo(this);return m.initialize(),m.matchAll=function(listyObj,aRule){return this.input=listyObj.toOMInputStream(),this._a(aRule)},m}},Parsers={markdown:objectThatDelegatesTo(OMeta,{nl:function(){this.input.idx;return function(){switch(this._a("any")){case"\r\n":return"\r\n";case"\r":return"\r";case"\n":return"\n";default:throw fail}}.call(this)},escPipe:function(){this.input.idx;return function(){return this._awa("exact","\\"),this._awa("exact","|")}.call(this)},cell:function(){this.input.idx;return this._or((function(){return function(){return this._consumedBy((function(){return this._many1((function(){return function(){return this._not((function(){return this._a("nl")})),this._not((function(){return this._awa("exact","|")})),this._or((function(){return this._a("escPipe")}),(function(){return this._a("any")}))}.call(this)}))}))}.call(this)}),(function(){return function(){return this._lookahead((function(){return this._awa("exact","|")})),""}.call(this)}))},row:function(){var c,cs;this.input.idx;return function(){return this._opt((function(){return this._awa("exact","|")})),c=this._a("cell"),cs=this._many1((function(){return function(){return this._awa("exact","|"),this._a("cell")}.call(this)})),this._opt((function(){return this._awa("exact","|")})),[c].concat(cs)}.call(this)},inside:function(){this.input.idx;return this._or((function(){return function(){if(":"===this._a("any"))return function(){return this._many((function(){return this._awa("exact","-")})),this._awa("exact",":"),"center"}.call(this);throw fail}.call(this)}),(function(){return function(){return this._many1((function(){return this._awa("exact","-")})),this._awa("exact",":"),"right"}.call(this)}),(function(){return function(){return this._opt((function(){return this._awa("exact",":")})),this._many1((function(){return this._awa("exact","-")})),"left"}.call(this)}))},acell:function(){var cs;this.input.idx;return function(){return this._many((function(){return this._a("ws")})),cs=this._a("inside"),this._many((function(){return this._a("ws")})),cs}.call(this)},alignRow:function(){var c,cs;this.input.idx;return function(){return this._opt((function(){return this._awa("exact","|")})),c=this._a("acell"),cs=this._many1((function(){return function(){return this._awa("exact","|"),this._a("acell")}.call(this)})),this._opt((function(){return this._awa("exact","|")})),{align:[c].concat(cs)}}.call(this)},rows:function(){var r,a,rs;this.input.idx;return this._or((function(){return function(){return r=this._a("row"),a=function(){return this._a("nl"),this._a("alignRow")}.call(this),rs=this._many1((function(){return function(){return this._a("nl"),this._a("row")}.call(this)})),[r,a].concat(rs)}.call(this)}),(function(){return function(){return r=this._a("row"),rs=this._many1((function(){return function(){return this._a("nl"),this._a("row")}.call(this)})),[r].concat(rs)}.call(this)}))},table:function(){var r;this.input.idx;return function(){return r=this._a("rows"),this._a("end"),r}.call(this)}}),wiki:objectThatDelegatesTo(OMeta,{nl:function(){this.input.idx;return function(){switch(this._a("any")){case"\r\n":return"\r\n";case"\r":return"\r";case"\n":return"\n";default:throw fail}}.call(this)},stop:function(){this.input.idx;return this._awa("token","|}")},line:function(){var l;this.input.idx;return function(){return l=this._consumedBy((function(){return this._many((function(){return function(){return this._not((function(){return this._a("nl")})),this._a("any")}.call(this)}))})),this._opt((function(){return this._a("nl")})),l}.call(this)},caption:function(){this.input.idx;return function(){return this._awa("token","|+"),this._a("line")}.call(this)},attrVal:function(){var v;this.input.idx;return this._or((function(){return function(){switch(this._a("any")){case"'":return function(){return v=this._consumedBy((function(){return this._many1((function(){return function(){return this._not((function(){return this._awa("exact","'")})),this._a("any")}.call(this)}))})),this._awa("exact","'"),v}.call(this);case'"':return function(){return v=this._consumedBy((function(){return this._many1((function(){return function(){return this._not((function(){return this._awa("exact",'"')})),this._a("any")}.call(this)}))})),this._awa("exact",'"'),v}.call(this);default:throw fail}}.call(this)}),(function(){return function(){return v=this._consumedBy((function(){return this._many1((function(){return function(){return this._not((function(){return this._or((function(){return function(){if("|"===this._a("any"))return"|";throw fail}.call(this)}),(function(){return this._a("ws")}),(function(){return this._a("nl")}))})),this._a("any")}.call(this)}))}))}.call(this)}))},attrName:function(){var n;this.input.idx;return function(){return n=this._consumedBy((function(){return this._many1((function(){return this._or((function(){return this._a("letter")}),(function(){return function(){if("-"===this._a("any"))return"-";throw fail}.call(this)}))}))})),this._awa("exact","="),n}.call(this)},attr:function(){var n,v;this.input.idx;return function(){return this._many((function(){return this._a("ws")})),n=this._a("attrName"),v=this._a("attrVal"),this._many((function(){return this._a("ws")})),[n,v]}.call(this)},cellStyle:function(){var s;this.input.idx;return function(){return s=this._many1((function(){return this._a("attr")})),this._awa("exact","|"),this._many((function(){return this._a("ws")})),s}.call(this)},rowSep:function(){var as;this.input.idx;return this._xor("WikiTableParser.rowSep",(function(){return function(){return this._awa("token","|-"),as=this._many((function(){return this._a("attr")})),this._a("nl"),as}.call(this)}),(function(){return this._form((function(){}))}))},nlPiped:function(){this.input.idx;return function(){return this._a("nl"),function(){switch(this._a("any")){case"|":return"|";case"!":return"!";default:throw fail}}.call(this)}.call(this)},cellStart:function(){this.input.idx;return function(){return"!"==function(){switch(this._a("any")){case"|":return"|";case"!":return"!";default:throw fail}}.call(this)}.call(this)},cell:function(){var t,s,c;this.input.idx;return function(){return this._not((function(){return this._or((function(){return this._a("stop")}),(function(){return this._a("rowSep")}))})),t=this._a("cellStart"),this._many((function(){return this._a("ws")})),s=this._opt((function(){return this._a("cellStyle")})),c=this._consumedBy((function(){return this._many((function(){return function(){return this._not((function(){return this._or((function(){return this._a("nlPiped")}),(function(){return this._awa("token","||")}),(function(){return this._awa("token","!!")}))})),this._a("any")}.call(this)}))})),this._many((function(){return this._a("ws")})),{is_header:t,val:c,attr:s||[]}}.call(this)},row:function(){var s,c,cs;this.input.idx;return function(){return s=this._opt((function(){return this._a("rowSep")})),c=this._a("cell"),cs=this._many((function(){return function(){return this._or((function(){return this._a("nl")}),(function(){return function(){switch(this._a("any")){case"|":return"|";case"!":return"!";default:throw fail}}.call(this)})),this._a("cell")}.call(this)})),{attr:s||[],cells:[c].concat(cs)}}.call(this)},tail:function(){this.input.idx;return function(){return this._a("stop"),this._a("end")}.call(this)},head:function(){var as;this.input.idx;return function(){return this._awa("token","{|"),as=this._many((function(){return this._a("attr")})),this._a("nl"),as}.call(this)},table:function(){var as,c,rs;this.input.idx;return function(){return this._many((function(){return this._a("ws")})),as=this._a("head"),c=this._opt((function(){return this._a("caption")})),rs=this._many1((function(){return this._a("row")})),this._opt((function(){return this._a("rowSep")})),this._a("tail"),{tableAttr:as,caption:c||"",rows:rs}}.call(this)}})};return function(src,format){return Parsers[format].matchAll(src.trim(),"table",void 0,(function(m,index){}))||null}}();!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ohm={})}(this,(function(t){"use strict";function e(t){const e=t||"";return function(){throw new Error("this method "+e+" is abstract! (it has no implementation in class "+this.constructor.name+")")}}function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e,r){let n;Object.defineProperty(t,e,{get(){return n||(n=r.call(this)),n}})}function i(t,e){const r=[];for(;e-- >0;)r.push(t());return r}function s(t,e){return new Array(e+1).join(t)}function o(t,e){return i((()=>t),e)}function a(t){const e=[];for(let r=0;r<t.length;r++){const n=t[r];t.lastIndexOf(n)!==r&&e.indexOf(n)<0&&e.push(n)}return e}function u(t){const e=[];return t.forEach((t=>{e.indexOf(t)<0&&e.push(t)})),e}function c(t){const e=t[0];return e===e.toUpperCase()}function l(t){return!c(t)}function p(t,e,r){const n=r||" ";return t.length<e?s(n,e-t.length)+t:t}function h(){this.strings=[]}h.prototype.append=function(t){this.strings.push(t)},h.prototype.contents=function(){return this.strings.join("")};const m=t=>String.fromCodePoint(parseInt(t,16));function d(t){if("\\"!==t.charAt(0))return t;switch(t.charAt(1)){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"v":return"\v";case"x":return m(t.slice(2,4));case"u":return"{"===t.charAt(2)?m(t.slice(3,-1)):m(t.slice(2,6));default:return t.charAt(1)}}function f(t){if(null==t)return String(t);const e=Object.prototype.toString.call(t);try{let r;return r=t.constructor&&t.constructor.name?t.constructor.name:0===e.indexOf("[object ")?e.slice(8,-1):typeof t,r+": "+JSON.stringify(String(t))}catch(t){return e}}var g=Object.freeze({__proto__:null,abstract:e,assert:r,defineLazyProperty:n,clone:function(t){return t?Object.assign({},t):t},repeatFn:i,repeatStr:s,repeat:o,getDuplicates:a,copyWithoutDuplicates:u,isSyntactic:c,isLexical:l,padLeft:p,StringBuffer:h,unescapeCodePoint:d,unexpectedObjToString:f});const v={Lu:/\p{Lu}/u,Ll:/\p{Ll}/u,Lt:/\p{Lt}/u,Lm:/\p{Lm}/u,Lo:/\p{Lo}/u,Nl:/\p{Nl}/u,Nd:/\p{Nd}/u,Mn:/\p{Mn}/u,Mc:/\p{Mc}/u,Pc:/\p{Pc}/u,Zs:/\p{Zs}/u,L:/\p{Letter}/u,Ltmo:/\p{Lt}|\p{Lm}|\p{Lo}/u};class I{constructor(){if(this.constructor===I)throw new Error("PExpr cannot be instantiated -- it's abstract")}withSource(t){return t&&(this.source=t.trimmed()),this}}const y=Object.create(I.prototype),x=Object.create(I.prototype);class S extends I{constructor(t){super(),this.obj=t}}class b extends I{constructor(t,e){super(),this.from=t,this.to=e,this.matchCodePoint=t.length>1||e.length>1}}class _ extends I{constructor(t){super(),this.index=t}}class w extends I{constructor(t){super(),this.terms=t}}class A extends w{constructor(t,e,r){super([r,t.rules[e].body]),this.superGrammar=t,this.name=e,this.body=r}}class N extends w{constructor(t,e,r,n){const i=t.rules[e].body;super([...r,i,...n]),this.superGrammar=t,this.ruleName=e,this.expansionPos=r.length}}class O extends I{constructor(t){super(),this.factors=t}}class L extends I{constructor(t){super(),this.expr=t}}class R extends L{}class F extends L{}class P extends L{}R.prototype.operator="*",F.prototype.operator="+",P.prototype.operator="?",R.prototype.minNumMatches=0,F.prototype.minNumMatches=1,P.prototype.minNumMatches=0,R.prototype.maxNumMatches=Number.POSITIVE_INFINITY,F.prototype.maxNumMatches=Number.POSITIVE_INFINITY,P.prototype.maxNumMatches=1;class E extends I{constructor(t){super(),this.expr=t}}class C extends I{constructor(t){super(),this.expr=t}}class T extends I{constructor(t){super(),this.expr=t}}class k extends I{constructor(t,e=[]){super(),this.ruleName=t,this.args=e}isSyntactic(){return c(this.ruleName)}toMemoKey(){return this._memoKey||Object.defineProperty(this,"_memoKey",{value:this.toString()}),this._memoKey}}class D extends I{constructor(t){super(),this.category=t,this.pattern=v[t]}}function j(t,e){let r;return e?(r=new Error(e.getLineAndColumnMessage()+t),r.shortMessage=t,r.interval=e):r=new Error(t),r}function M(){return j("Interval sources don't match")}function G(t,e,r){return j("Rule "+t+" is not declared in grammar "+e,r)}function B(t,e,r,n){let i="Duplicate declaration for rule '"+t+"' in grammar '"+e+"'";return e!==r&&(i+=" (originally declared in '"+r+"')"),j(i,n)}function q(t,e,r,n){return j("Wrong number of parameters for rule "+t+" (expected "+e+", got "+r+")",n)}function U(t,e,r){return j("Duplicate parameter names in rule "+t+": "+e.join(", "),r)}function z(t,e){return j("Incorrect argument type: expected "+t,e.source)}function K(t,e){const r=e.length>0?e[e.length-1].args:[];let n="Nullable expression "+t.expr.substituteParams(r)+" is not allowed inside '"+t.operator+"' (possible infinite loop)";return e.length>0&&(n+="\nApplication stack (most recent application last):\n"+e.map((t=>new k(t.ruleName,t.args))).join("\n")),j(n,t.expr.source)}function H(t,e,r,n){return j("Rule "+t+" involves an alternation which has inconsistent arity (expected "+e+", got "+r+")",n.source)}function W(t,e,r){const n=t.length;return(t.slice(0,r)+e+t.slice(r+e.length)).substr(0,n)}function J(...t){const e=this,{offset:n}=e,{repeatStr:i}=g,s=new h;s.append("Line "+e.lineNum+", col "+e.colNum+":\n");const o=function(t){let e=0;return t.map((t=>{const r=t.toString();return e=Math.max(e,r.length),r})).map((t=>p(t,e)))}([null==e.prevLine?0:e.lineNum-1,e.lineNum,null==e.nextLine?0:e.lineNum+1]),a=(t,e,r)=>{s.append(r+o[t]+" | "+e+"\n")};null!=e.prevLine&&a(0,e.prevLine,"  "),a(1,e.line,"> ");const u=e.line.length;let c=i(" ",u+1);for(let s=0;s<t.length;++s){let o=t[s][0],a=t[s][1];r(o>=0&&o<=a,"range start must be >= 0 and <= end");const l=n-e.colNum+1;o=Math.max(0,o-l),a=Math.min(a-l,u),c=W(c,i("~",a-o),o)}const l=2+o[1].length+3;return s.append(i(" ",l)),c=W(c,"^",e.colNum-1),s.append(c.replace(/ +$/,"")+"\n"),null!=e.nextLine&&a(2,e.nextLine,"  "),s.contents()}let Q=[];function Z(t){Q.push(t)}function Y(t,e){let r=1,n=1,i=0,s=0,o=null,a=null,u=-1;for(;i<e;){const e=t.charAt(i++);"\n"===e?(r++,n=1,u=s,s=i):"\r"!==e&&n++}let c=t.indexOf("\n",s);if(-1===c)c=t.length;else{const e=t.indexOf("\n",c+1);o=-1===e?t.slice(c):t.slice(c,e),o=o.replace(/^\r?\n/,"").replace(/\r$/,"")}return u>=0&&(a=t.slice(u,s).replace(/\r?\n$/,"")),{offset:e,lineNum:r,colNum:n,line:t.slice(s,c).replace(/\r$/,""),prevLine:a,nextLine:o,toString:J}}function X(t,e,...r){return Y(t,e).toString(...r)}const tt=(()=>{let t=0;return e=>""+e+t++})();class et{constructor(t,e,r){this.sourceString=t,this.startIdx=e,this.endIdx=r}get contents(){return void 0===this._contents&&(this._contents=this.sourceString.slice(this.startIdx,this.endIdx)),this._contents}get length(){return this.endIdx-this.startIdx}coverageWith(...t){return et.coverage(...t,this)}collapsedLeft(){return new et(this.sourceString,this.startIdx,this.startIdx)}collapsedRight(){return new et(this.sourceString,this.endIdx,this.endIdx)}getLineAndColumn(){return Y(this.sourceString,this.startIdx)}getLineAndColumnMessage(){const t=[this.startIdx,this.endIdx];return X(this.sourceString,this.startIdx,t)}minus(t){if(this.sourceString!==t.sourceString)throw M();return this.startIdx===t.startIdx&&this.endIdx===t.endIdx?[]:this.startIdx<t.startIdx&&t.endIdx<this.endIdx?[new et(this.sourceString,this.startIdx,t.startIdx),new et(this.sourceString,t.endIdx,this.endIdx)]:this.startIdx<t.endIdx&&t.endIdx<this.endIdx?[new et(this.sourceString,t.endIdx,this.endIdx)]:this.startIdx<t.startIdx&&t.startIdx<this.endIdx?[new et(this.sourceString,this.startIdx,t.startIdx)]:[this]}relativeTo(t){if(this.sourceString!==t.sourceString)throw M();return r(this.startIdx>=t.startIdx&&this.endIdx<=t.endIdx,"other interval does not cover this one"),new et(this.sourceString,this.startIdx-t.startIdx,this.endIdx-t.startIdx)}trimmed(){const{contents:t}=this,e=this.startIdx+t.match(/^\s*/)[0].length,r=this.endIdx-t.match(/\s*$/)[0].length;return new et(this.sourceString,e,r)}subInterval(t,e){const r=this.startIdx+t;return new et(this.sourceString,r,r+e)}}et.coverage=function(t,...e){let{startIdx:r,endIdx:n}=t;for(const i of e){if(i.sourceString!==t.sourceString)throw M();r=Math.min(r,i.startIdx),n=Math.max(n,i.endIdx)}return new et(t.sourceString,r,n)};class rt{constructor(t){this.source=t,this.pos=0,this.examinedLength=0}atEnd(){const t=this.pos>=this.source.length;return this.examinedLength=Math.max(this.examinedLength,this.pos+1),t}next(){const t=this.source[this.pos++];return this.examinedLength=Math.max(this.examinedLength,this.pos),t}nextCharCode(){const t=this.next();return t&&t.charCodeAt(0)}nextCodePoint(){const t=this.source.slice(this.pos++).codePointAt(0);return t>65535&&(this.pos+=1),this.examinedLength=Math.max(this.examinedLength,this.pos),t}matchString(t,e){let r;if(e){for(r=0;r<t.length;r++){const e=this.next(),n=t[r];if(null==e||e.toUpperCase()!==n.toUpperCase())return!1}return!0}for(r=0;r<t.length;r++)if(this.next()!==t[r])return!1;return!0}sourceSlice(t,e){return this.source.slice(t,e)}interval(t,e){return new et(this.source,t,e||this.pos)}}class nt{constructor(t,e,r,i,s,o,a){this.matcher=t,this.input=e,this.startExpr=r,this._cst=i,this._cstOffset=s,this._rightmostFailurePosition=o,this._rightmostFailures=a,this.failed()&&(n(this,"message",(function(){const t="Expected "+this.getExpectedText();return X(this.input,this.getRightmostFailurePosition())+t})),n(this,"shortMessage",(function(){const t="expected "+this.getExpectedText(),e=Y(this.input,this.getRightmostFailurePosition());return"Line "+e.lineNum+", col "+e.colNum+": "+t})))}succeeded(){return!!this._cst}failed(){return!this.succeeded()}getRightmostFailurePosition(){return this._rightmostFailurePosition}getRightmostFailures(){if(!this._rightmostFailures){this.matcher.setInput(this.input);const t=this.matcher._match(this.startExpr,{tracing:!1,positionToRecordFailures:this.getRightmostFailurePosition()});this._rightmostFailures=t.getRightmostFailures()}return this._rightmostFailures}toString(){return this.succeeded()?"[match succeeded]":"[match failed at position "+this.getRightmostFailurePosition()+"]"}getExpectedText(){if(this.succeeded())throw new Error("cannot get expected text of a successful MatchResult");const t=new h;let e=this.getRightmostFailures();e=e.filter((t=>!t.isFluffy()));for(let r=0;r<e.length;r++)r>0&&(r===e.length-1?t.append(e.length>2?", or ":" or "):t.append(", ")),t.append(e[r].toString());return t.contents()}getInterval(){const t=this.getRightmostFailurePosition();return new et(this.input,t,t)}}class it{constructor(){this.applicationMemoKeyStack=[],this.memo={},this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,this.currentLeftRecursion=void 0}isActive(t){return this.applicationMemoKeyStack.indexOf(t.toMemoKey())>=0}enter(t){this.applicationMemoKeyStack.push(t.toMemoKey())}exit(){this.applicationMemoKeyStack.pop()}startLeftRecursion(t,e){e.isLeftRecursion=!0,e.headApplication=t,e.nextLeftRecursion=this.currentLeftRecursion,this.currentLeftRecursion=e;const{applicationMemoKeyStack:r}=this,n=r.indexOf(t.toMemoKey())+1,i=r.slice(n);e.isInvolved=function(t){return i.indexOf(t)>=0},e.updateInvolvedApplicationMemoKeys=function(){for(let t=n;t<r.length;t++){const e=r[t];this.isInvolved(e)||i.push(e)}}}endLeftRecursion(){this.currentLeftRecursion=this.currentLeftRecursion.nextLeftRecursion}shouldUseMemoizedResult(t){if(!t.isLeftRecursion)return!0;const{applicationMemoKeyStack:e}=this;for(let r=0;r<e.length;r++){const n=e[r];if(t.isInvolved(n))return!1}return!0}memoize(t,e){return this.memo[t]=e,this.maxExaminedLength=Math.max(this.maxExaminedLength,e.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,e.rightmostFailureOffset),e}clearObsoleteEntries(t,e){if(t+this.maxExaminedLength<=e)return;const{memo:r}=this;this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,Object.keys(r).forEach((n=>{const i=r[n];t+i.examinedLength>e?delete r[n]:(this.maxExaminedLength=Math.max(this.maxExaminedLength,i.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,i.rightmostFailureOffset))}))}}const ct={succeeded:1,isRootNode:2,isImplicitSpaces:4,isMemoized:8,isHeadOfLeftRecursion:16,terminatesLR:32};function lt(t){return"string"==typeof t?t.replace(/ /g,"").replace(/\t/g,"").replace(/\n/g,"").replace(/\r/g,""):String(t)}class pt{constructor(t,e,r,n,i,s,o){this.input=t,this.pos=this.pos1=e,this.pos2=r,this.source=new et(t,e,r),this.expr=n,this.bindings=s,this.children=o||[],this.terminatingLREntry=null,this._flags=i?ct.succeeded:0}get displayString(){return this.expr.toDisplayString()}clone(){return this.cloneWithExpr(this.expr)}cloneWithExpr(t){const e=new pt(this.input,this.pos,this.pos2,t,this.succeeded,this.bindings,this.children);return e.isHeadOfLeftRecursion=this.isHeadOfLeftRecursion,e.isImplicitSpaces=this.isImplicitSpaces,e.isMemoized=this.isMemoized,e.isRootNode=this.isRootNode,e.terminatesLR=this.terminatesLR,e.terminatingLREntry=this.terminatingLREntry,e}recordLRTermination(t,e){this.terminatingLREntry=new pt(this.input,this.pos,this.pos2,this.expr,!1,[e],[t]),this.terminatingLREntry.terminatesLR=!0}walk(t,e){let r=t;function n(t,i,s){let o=!0;r.enter&&r.enter.call(e,t,i,s)===pt.prototype.SKIP&&(o=!1),o&&(t.children.forEach((e=>{n(e,t,s+1)})),r.exit&&r.exit.call(e,t,i,s))}"function"==typeof r&&(r={enter:r}),this.isRootNode?this.children.forEach((t=>{n(t,null,0)})):n(this,null,0)}toString(){const t=new h;return this.walk(((e,r,n)=>{if(!e)return this.SKIP;if("Alt"!==e.expr.constructor.name){if(t.append(function(t,e,r){const n=lt(t.slice(e,e+10));return n.length<10?n+o(" ",10-n.length).join(""):n}(e.input,e.pos)+o(" ",2*n+1).join("")),t.append((e.succeeded?"":"")+" "+e.displayString),e.isHeadOfLeftRecursion&&t.append(" (LR)"),e.succeeded){const r=lt(e.source.contents);t.append("   "),t.append("string"==typeof r?'"'+r+'"':r)}t.append("\n")}})),t.contents()}}let ht,mt;pt.prototype.SKIP={},Object.keys(ct).forEach((t=>{const e=ct[t];Object.defineProperty(pt.prototype,t,{get(){return!!(this._flags&e)},set(t){t?this._flags|=e:this._flags&=~e}})})),I.prototype.allowsSkippingPrecedingSpace=e("allowsSkippingPrecedingSpace"),y.allowsSkippingPrecedingSpace=x.allowsSkippingPrecedingSpace=k.prototype.allowsSkippingPrecedingSpace=S.prototype.allowsSkippingPrecedingSpace=b.prototype.allowsSkippingPrecedingSpace=D.prototype.allowsSkippingPrecedingSpace=function(){return!0},w.prototype.allowsSkippingPrecedingSpace=L.prototype.allowsSkippingPrecedingSpace=T.prototype.allowsSkippingPrecedingSpace=C.prototype.allowsSkippingPrecedingSpace=E.prototype.allowsSkippingPrecedingSpace=_.prototype.allowsSkippingPrecedingSpace=O.prototype.allowsSkippingPrecedingSpace=function(){return!1},Z((t=>{ht=t})),I.prototype.assertAllApplicationsAreValid=function(t,e){mt=0,this._assertAllApplicationsAreValid(t,e)},I.prototype._assertAllApplicationsAreValid=e("_assertAllApplicationsAreValid"),y._assertAllApplicationsAreValid=x._assertAllApplicationsAreValid=S.prototype._assertAllApplicationsAreValid=b.prototype._assertAllApplicationsAreValid=_.prototype._assertAllApplicationsAreValid=D.prototype._assertAllApplicationsAreValid=function(t,e){},T.prototype._assertAllApplicationsAreValid=function(t,e){mt++,this.expr._assertAllApplicationsAreValid(t,e),mt--},w.prototype._assertAllApplicationsAreValid=function(t,e){for(let r=0;r<this.terms.length;r++)this.terms[r]._assertAllApplicationsAreValid(t,e)},O.prototype._assertAllApplicationsAreValid=function(t,e){for(let r=0;r<this.factors.length;r++)this.factors[r]._assertAllApplicationsAreValid(t,e)},L.prototype._assertAllApplicationsAreValid=E.prototype._assertAllApplicationsAreValid=C.prototype._assertAllApplicationsAreValid=function(t,e){this.expr._assertAllApplicationsAreValid(t,e)},k.prototype._assertAllApplicationsAreValid=function(t,e,r=!1){const n=e.rules[this.ruleName],i=c(t)&&0===mt;if(!n)throw G(this.ruleName,e.name,this.source);if(!r&&c(this.ruleName)&&!i)throw function(t,e){return j("Cannot apply syntactic rule "+t+" from here (inside a lexical context)",e.source)}(this.ruleName,this);const s=this.args.length,o=n.formals.length;if(s!==o)throw function(t,e,r,n){return j("Wrong number of arguments for rule "+t+" (expected "+e+", got "+r+")",n)}(this.ruleName,o,s,this.source);const a=ht&&n===ht.rules.applySyntactic;if(ht&&n===ht.rules.caseInsensitive&&!(this.args[0]instanceof S))throw z('a Terminal (e.g. "abc")',this.args[0]);if(a){const t=this.args[0];if(!(t instanceof k))throw z("a syntactic rule application",t);if(!c(t.ruleName))throw function(t){const{ruleName:e}=t;return j(`applySyntactic is for syntactic rules, but '${e}' is a lexical rule. NOTE: A _syntactic rule_ is a rule whose name begins with a capital letter. See https://ohmjs.org/d/svl for more details.`,t.source)}(t);if(i)throw j("applySyntactic is not required here (in a syntactic context)",this.source)}this.args.forEach((r=>{if(r._assertAllApplicationsAreValid(t,e,a),1!==r.getArity())throw function(t,e){return j("Invalid parameter to rule "+t+": "+e+" has arity "+e.getArity()+", but parameter expressions must have arity 1",e.source)}(this.ruleName,r)}))},I.prototype.assertChoicesHaveUniformArity=e("assertChoicesHaveUniformArity"),y.assertChoicesHaveUniformArity=x.assertChoicesHaveUniformArity=S.prototype.assertChoicesHaveUniformArity=b.prototype.assertChoicesHaveUniformArity=_.prototype.assertChoicesHaveUniformArity=T.prototype.assertChoicesHaveUniformArity=D.prototype.assertChoicesHaveUniformArity=function(t){},w.prototype.assertChoicesHaveUniformArity=function(t){if(0===this.terms.length)return;const e=this.terms[0].getArity();for(let r=0;r<this.terms.length;r++){const n=this.terms[r];n.assertChoicesHaveUniformArity();const i=n.getArity();if(e!==i)throw H(t,e,i,n)}},A.prototype.assertChoicesHaveUniformArity=function(t){const e=this.terms[0].getArity(),r=this.terms[1].getArity();if(e!==r)throw H(t,r,e,this.terms[0])},O.prototype.assertChoicesHaveUniformArity=function(t){for(let e=0;e<this.factors.length;e++)this.factors[e].assertChoicesHaveUniformArity(t)},L.prototype.assertChoicesHaveUniformArity=function(t){this.expr.assertChoicesHaveUniformArity(t)},E.prototype.assertChoicesHaveUniformArity=function(t){},C.prototype.assertChoicesHaveUniformArity=function(t){this.expr.assertChoicesHaveUniformArity(t)},k.prototype.assertChoicesHaveUniformArity=function(t){},I.prototype.assertIteratedExprsAreNotNullable=e("assertIteratedExprsAreNotNullable"),y.assertIteratedExprsAreNotNullable=x.assertIteratedExprsAreNotNullable=S.prototype.assertIteratedExprsAreNotNullable=b.prototype.assertIteratedExprsAreNotNullable=_.prototype.assertIteratedExprsAreNotNullable=D.prototype.assertIteratedExprsAreNotNullable=function(t){},w.prototype.assertIteratedExprsAreNotNullable=function(t){for(let e=0;e<this.terms.length;e++)this.terms[e].assertIteratedExprsAreNotNullable(t)},O.prototype.assertIteratedExprsAreNotNullable=function(t){for(let e=0;e<this.factors.length;e++)this.factors[e].assertIteratedExprsAreNotNullable(t)},L.prototype.assertIteratedExprsAreNotNullable=function(t){if(this.expr.assertIteratedExprsAreNotNullable(t),this.expr.isNullable(t))throw K(this,[])},P.prototype.assertIteratedExprsAreNotNullable=E.prototype.assertIteratedExprsAreNotNullable=C.prototype.assertIteratedExprsAreNotNullable=T.prototype.assertIteratedExprsAreNotNullable=function(t){this.expr.assertIteratedExprsAreNotNullable(t)},k.prototype.assertIteratedExprsAreNotNullable=function(t){this.args.forEach((e=>{e.assertIteratedExprsAreNotNullable(t)}))};class dt{constructor(t){this.matchLength=t}get ctorName(){throw new Error("subclass responsibility")}numChildren(){return this.children?this.children.length:0}childAt(t){if(this.children)return this.children[t]}indexOfChild(t){return this.children.indexOf(t)}hasChildren(){return this.numChildren()>0}hasNoChildren(){return!this.hasChildren()}onlyChild(){if(1!==this.numChildren())throw new Error("cannot get only child of a node of type "+this.ctorName+" (it has "+this.numChildren()+" children)");return this.firstChild()}firstChild(){if(this.hasNoChildren())throw new Error("cannot get first child of a "+this.ctorName+" node, which has no children");return this.childAt(0)}lastChild(){if(this.hasNoChildren())throw new Error("cannot get last child of a "+this.ctorName+" node, which has no children");return this.childAt(this.numChildren()-1)}childBefore(t){const e=this.indexOfChild(t);if(e<0)throw new Error("Node.childBefore() called w/ an argument that is not a child");if(0===e)throw new Error("cannot get child before first child");return this.childAt(e-1)}childAfter(t){const e=this.indexOfChild(t);if(e<0)throw new Error("Node.childAfter() called w/ an argument that is not a child");if(e===this.numChildren()-1)throw new Error("cannot get child after last child");return this.childAt(e+1)}isTerminal(){return!1}isNonterminal(){return!1}isIteration(){return!1}isOptional(){return!1}}class ft extends dt{get ctorName(){return"_terminal"}isTerminal(){return!0}get primitiveValue(){throw new Error("The `primitiveValue` property was removed in Ohm v17.")}}class gt extends dt{constructor(t,e,r,n){super(n),this.ruleName=t,this.children=e,this.childOffsets=r}get ctorName(){return this.ruleName}isNonterminal(){return!0}isLexical(){return l(this.ctorName)}isSyntactic(){return c(this.ctorName)}}class vt extends dt{constructor(t,e,r,n){super(r),this.children=t,this.childOffsets=e,this.optional=n}get ctorName(){return"_iter"}isIteration(){return!0}isOptional(){return this.optional}}function It(t,e){const r={};if(t.source&&e){const n=t.source.relativeTo(e);r.sourceInterval=[n.startIdx,n.endIdx]}return r}function yt(t){return/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)}function xt(t){const e=Object.create(null);t.forEach((t=>{e[t]=(e[t]||0)+1})),Object.keys(e).forEach((r=>{if(e[r]<=1)return;let n=1;t.forEach(((e,i)=>{e===r&&(t[i]=e+"_"+n++)}))}))}I.prototype.eval=e("eval"),y.eval=function(t){const{inputStream:e}=t,r=e.pos,n=e.nextCodePoint();return void 0!==n?(t.pushBinding(new ft(String.fromCodePoint(n).length),r),!0):(t.processFailure(r,this),!1)},x.eval=function(t){const{inputStream:e}=t,r=e.pos;return e.atEnd()?(t.pushBinding(new ft(0),r),!0):(t.processFailure(r,this),!1)},S.prototype.eval=function(t){const{inputStream:e}=t,r=e.pos;return e.matchString(this.obj)?(t.pushBinding(new ft(this.obj.length),r),!0):(t.processFailure(r,this),!1)},b.prototype.eval=function(t){const{inputStream:e}=t,r=e.pos,n=this.matchCodePoint?e.nextCodePoint():e.nextCharCode();return void 0!==n&&this.from.codePointAt(0)<=n&&n<=this.to.codePointAt(0)?(t.pushBinding(new ft(String.fromCodePoint(n).length),r),!0):(t.processFailure(r,this),!1)},_.prototype.eval=function(t){return t.eval(t.currentApplication().args[this.index])},T.prototype.eval=function(t){t.enterLexifiedContext();const e=t.eval(this.expr);return t.exitLexifiedContext(),e},w.prototype.eval=function(t){for(let e=0;e<this.terms.length;e++)if(t.eval(this.terms[e]))return!0;return!1},O.prototype.eval=function(t){for(let e=0;e<this.factors.length;e++){const r=this.factors[e];if(!t.eval(r))return!1}return!0},L.prototype.eval=function(t){const{inputStream:e}=t,r=e.pos,n=this.getArity(),i=[],s=[];for(;i.length<n;)i.push([]),s.push([]);let o,a=0,u=r;for(;a<this.maxNumMatches&&t.eval(this.expr);){if(e.pos===u)throw K(this,t._applicationStack);u=e.pos,a++;const r=t._bindings.splice(t._bindings.length-n,n),c=t._bindingOffsets.splice(t._bindingOffsets.length-n,n);for(o=0;o<r.length;o++)i[o].push(r[o]),s[o].push(c[o])}if(a<this.minNumMatches)return!1;let c=t.posToOffset(r),l=0;if(a>0){const t=i[n-1],e=s[n-1],r=e[e.length-1]+t[t.length-1].matchLength;c=s[0][0],l=r-c}const p=this instanceof P;for(o=0;o<i.length;o++)t._bindings.push(new vt(i[o],s[o],l,p)),t._bindingOffsets.push(c);return!0},E.prototype.eval=function(t){const{inputStream:e}=t,r=e.pos;t.pushFailuresInfo();const n=t.eval(this.expr);return t.popFailuresInfo(),n?(t.processFailure(r,this),!1):(e.pos=r,!0)},C.prototype.eval=function(t){const{inputStream:e}=t,r=e.pos;return!!t.eval(this.expr)&&(e.pos=r,!0)},k.prototype.eval=function(t){const e=t.currentApplication(),r=e?e.args:[],n=this.substituteParams(r),i=t.getCurrentPosInfo();if(i.isActive(n))return n.handleCycle(t);const s=n.toMemoKey(),o=i.memo[s];if(o&&i.shouldUseMemoizedResult(o)){if(t.hasNecessaryInfo(o))return t.useMemoizedResult(t.inputStream.pos,o);delete i.memo[s]}return n.reallyEval(t)},k.prototype.handleCycle=function(t){const e=t.getCurrentPosInfo(),{currentLeftRecursion:r}=e,n=this.toMemoKey();let i=e.memo[n];return r&&r.headApplication.toMemoKey()===n?i.updateInvolvedApplicationMemoKeys():i||(i=e.memoize(n,{matchLength:0,examinedLength:0,value:!1,rightmostFailureOffset:-1}),e.startLeftRecursion(this,i)),t.useMemoizedResult(t.inputStream.pos,i)},k.prototype.reallyEval=function(t){const{inputStream:e}=t,n=e.pos,i=t.getCurrentPosInfo(),s=t.grammar.rules[this.ruleName],{body:o}=s,{description:a}=s;t.enterApplication(i,this),a&&t.pushFailuresInfo();const u=e.examinedLength;e.examinedLength=0;let c=this.evalOnce(o,t);const l=i.currentLeftRecursion,p=this.toMemoKey(),h=l&&l.headApplication.toMemoKey()===p;let m;t.doNotMemoize?t.doNotMemoize=!1:h?(c=this.growSeedResult(o,t,n,l,c),i.endLeftRecursion(),m=l,m.examinedLength=e.examinedLength-n,m.rightmostFailureOffset=t._getRightmostFailureOffset(),i.memoize(p,m)):l&&l.isInvolved(p)||(m=i.memoize(p,{matchLength:e.pos-n,examinedLength:e.examinedLength-n,value:c,failuresAtRightmostPosition:t.cloneRecordedFailures(),rightmostFailureOffset:t._getRightmostFailureOffset()}));const d=!!c;if(a&&(t.popFailuresInfo(),d||t.processFailure(n,this),m&&(m.failuresAtRightmostPosition=t.cloneRecordedFailures())),t.isTracing()&&m){const e=t.getTraceEntry(n,this,d,d?[c]:[]);h&&(r(null!=e.terminatingLREntry||!d),e.isHeadOfLeftRecursion=!0),m.traceEntry=e}return e.examinedLength=Math.max(e.examinedLength,u),t.exitApplication(i,c),d},k.prototype.evalOnce=function(t,e){const{inputStream:r}=e,n=r.pos;if(e.eval(t)){const i=t.getArity(),s=e._bindings.splice(e._bindings.length-i,i),o=e._bindingOffsets.splice(e._bindingOffsets.length-i,i),a=r.pos-n;return new gt(this.ruleName,s,o,a)}return!1},k.prototype.growSeedResult=function(t,e,r,n,i){if(!i)return!1;const{inputStream:s}=e;for(;;){if(n.matchLength=s.pos-r,n.value=i,n.failuresAtRightmostPosition=e.cloneRecordedFailures(),e.isTracing()){const t=e.trace[e.trace.length-1];n.traceEntry=new pt(e.input,r,s.pos,this,!0,[i],[t.clone()])}if(s.pos=r,i=this.evalOnce(t,e),s.pos-r<=n.matchLength)break;e.isTracing()&&e.trace.splice(-2,1)}return e.isTracing()&&n.traceEntry.recordLRTermination(e.trace.pop(),i),s.pos=r+n.matchLength,n.value},D.prototype.eval=function(t){const{inputStream:e}=t,r=e.pos,n=e.next();return n&&this.pattern.test(n)?(t.pushBinding(new ft(n.length),r),!0):(t.processFailure(r,this),!1)},I.prototype.getArity=e("getArity"),y.getArity=x.getArity=S.prototype.getArity=b.prototype.getArity=_.prototype.getArity=k.prototype.getArity=D.prototype.getArity=function(){return 1},w.prototype.getArity=function(){return 0===this.terms.length?0:this.terms[0].getArity()},O.prototype.getArity=function(){let t=0;for(let e=0;e<this.factors.length;e++)t+=this.factors[e].getArity();return t},L.prototype.getArity=function(){return this.expr.getArity()},E.prototype.getArity=function(){return 0},C.prototype.getArity=T.prototype.getArity=function(){return this.expr.getArity()},I.prototype.outputRecipe=e("outputRecipe"),y.outputRecipe=function(t,e){return["any",It(this,e)]},x.outputRecipe=function(t,e){return["end",It(this,e)]},S.prototype.outputRecipe=function(t,e){return["terminal",It(this,e),this.obj]},b.prototype.outputRecipe=function(t,e){return["range",It(this,e),this.from,this.to]},_.prototype.outputRecipe=function(t,e){return["param",It(this,e),this.index]},w.prototype.outputRecipe=function(t,e){return["alt",It(this,e)].concat(this.terms.map((r=>r.outputRecipe(t,e))))},A.prototype.outputRecipe=function(t,e){return this.terms[0].outputRecipe(t,e)},N.prototype.outputRecipe=function(t,e){const r=this.terms.slice(0,this.expansionPos),n=this.terms.slice(this.expansionPos+1);return["splice",It(this,e),r.map((r=>r.outputRecipe(t,e))),n.map((r=>r.outputRecipe(t,e)))]},O.prototype.outputRecipe=function(t,e){return["seq",It(this,e)].concat(this.factors.map((r=>r.outputRecipe(t,e))))},R.prototype.outputRecipe=F.prototype.outputRecipe=P.prototype.outputRecipe=E.prototype.outputRecipe=C.prototype.outputRecipe=T.prototype.outputRecipe=function(t,e){return[this.constructor.name.toLowerCase(),It(this,e),this.expr.outputRecipe(t,e)]},k.prototype.outputRecipe=function(t,e){return["app",It(this,e),this.ruleName,this.args.map((r=>r.outputRecipe(t,e)))]},D.prototype.outputRecipe=function(t,e){return["unicodeChar",It(this,e),this.category]},I.prototype.introduceParams=e("introduceParams"),y.introduceParams=x.introduceParams=S.prototype.introduceParams=b.prototype.introduceParams=_.prototype.introduceParams=D.prototype.introduceParams=function(t){return this},w.prototype.introduceParams=function(t){return this.terms.forEach(((e,r,n)=>{n[r]=e.introduceParams(t)})),this},O.prototype.introduceParams=function(t){return this.factors.forEach(((e,r,n)=>{n[r]=e.introduceParams(t)})),this},L.prototype.introduceParams=E.prototype.introduceParams=C.prototype.introduceParams=T.prototype.introduceParams=function(t){return this.expr=this.expr.introduceParams(t),this},k.prototype.introduceParams=function(t){const e=t.indexOf(this.ruleName);if(e>=0){if(this.args.length>0)throw new Error("Parameterized rules cannot be passed as arguments to another rule.");return new _(e).withSource(this.source)}return this.args.forEach(((e,r,n)=>{n[r]=e.introduceParams(t)})),this},I.prototype.isNullable=function(t){return this._isNullable(t,Object.create(null))},I.prototype._isNullable=e("_isNullable"),y._isNullable=b.prototype._isNullable=_.prototype._isNullable=F.prototype._isNullable=D.prototype._isNullable=function(t,e){return!1},x._isNullable=function(t,e){return!0},S.prototype._isNullable=function(t,e){return"string"==typeof this.obj&&""===this.obj},w.prototype._isNullable=function(t,e){return 0===this.terms.length||this.terms.some((r=>r._isNullable(t,e)))},O.prototype._isNullable=function(t,e){return this.factors.every((r=>r._isNullable(t,e)))},R.prototype._isNullable=P.prototype._isNullable=E.prototype._isNullable=C.prototype._isNullable=function(t,e){return!0},T.prototype._isNullable=function(t,e){return this.expr._isNullable(t,e)},k.prototype._isNullable=function(t,e){const r=this.toMemoKey();if(!Object.prototype.hasOwnProperty.call(e,r)){const{body:n}=t.rules[this.ruleName],i=n.substituteParams(this.args);e[r]=!1,e[r]=i._isNullable(t,e)}return e[r]},I.prototype.substituteParams=e("substituteParams"),y.substituteParams=x.substituteParams=S.prototype.substituteParams=b.prototype.substituteParams=D.prototype.substituteParams=function(t){return this},_.prototype.substituteParams=function(t){return t[this.index]},w.prototype.substituteParams=function(t){return new w(this.terms.map((e=>e.substituteParams(t))))},O.prototype.substituteParams=function(t){return new O(this.factors.map((e=>e.substituteParams(t))))},L.prototype.substituteParams=E.prototype.substituteParams=C.prototype.substituteParams=T.prototype.substituteParams=function(t){return new this.constructor(this.expr.substituteParams(t))},k.prototype.substituteParams=function(t){if(0===this.args.length)return this;{const e=this.args.map((e=>e.substituteParams(t)));return new k(this.ruleName,e)}},I.prototype.toArgumentNameList=e("toArgumentNameList"),y.toArgumentNameList=function(t,e){return["any"]},x.toArgumentNameList=function(t,e){return["end"]},S.prototype.toArgumentNameList=function(t,e){return"string"==typeof this.obj&&/^[_a-zA-Z0-9]+$/.test(this.obj)?["_"+this.obj]:["$"+t]},b.prototype.toArgumentNameList=function(t,e){let r=this.from+"_to_"+this.to;return yt(r)||(r="_"+r),yt(r)||(r="$"+t),[r]},w.prototype.toArgumentNameList=function(t,e){const r=this.terms.map((e=>e.toArgumentNameList(t,!0))),n=[],i=r[0].length;for(let t=0;t<i;t++){const e=[];for(let n=0;n<this.terms.length;n++)e.push(r[n][t]);const i=u(e);n.push(i.join("_or_"))}return e||xt(n),n},O.prototype.toArgumentNameList=function(t,e){let r=[];return this.factors.forEach((e=>{const n=e.toArgumentNameList(t,!0);r=r.concat(n),t+=n.length})),e||xt(r),r},L.prototype.toArgumentNameList=function(t,e){const r=this.expr.toArgumentNameList(t,e).map((t=>"s"===t[t.length-1]?t+"es":t+"s"));return e||xt(r),r},P.prototype.toArgumentNameList=function(t,e){return this.expr.toArgumentNameList(t,e).map((t=>"opt"+t[0].toUpperCase()+t.slice(1)))},E.prototype.toArgumentNameList=function(t,e){return[]},C.prototype.toArgumentNameList=T.prototype.toArgumentNameList=function(t,e){return this.expr.toArgumentNameList(t,e)},k.prototype.toArgumentNameList=function(t,e){return[this.ruleName]},D.prototype.toArgumentNameList=function(t,e){return["$"+t]},_.prototype.toArgumentNameList=function(t,e){return["param"+this.index]},I.prototype.toDisplayString=e("toDisplayString"),w.prototype.toDisplayString=O.prototype.toDisplayString=function(){return this.source?this.source.trimmed().contents:"["+this.constructor.name+"]"},y.toDisplayString=x.toDisplayString=L.prototype.toDisplayString=E.prototype.toDisplayString=C.prototype.toDisplayString=T.prototype.toDisplayString=S.prototype.toDisplayString=b.prototype.toDisplayString=_.prototype.toDisplayString=function(){return this.toString()},k.prototype.toDisplayString=function(){if(this.args.length>0){const t=this.args.map((t=>t.toDisplayString()));return this.ruleName+"<"+t.join(",")+">"}return this.ruleName},D.prototype.toDisplayString=function(){return"Unicode ["+this.category+"] character"};class St{constructor(t,e,r){if(!function(t){return"description"===t||"string"===t||"code"===t}(r))throw new Error("invalid Failure type: "+r);this.pexpr=t,this.text=e,this.type=r,this.fluffy=!1}getPExpr(){return this.pexpr}getText(){return this.text}getType(){return this.type}isDescription(){return"description"===this.type}isStringTerminal(){return"string"===this.type}isCode(){return"code"===this.type}isFluffy(){return this.fluffy}makeFluffy(){this.fluffy=!0}clearFluffy(){this.fluffy=!1}subsumes(t){return this.getText()===t.getText()&&this.type===t.type&&(!this.isFluffy()||this.isFluffy()&&t.isFluffy())}toString(){return"string"===this.type?JSON.stringify(this.getText()):this.getText()}clone(){const t=new St(this.pexpr,this.text,this.type);return this.isFluffy()&&t.makeFluffy(),t}toKey(){return this.toString()+"#"+this.type}}I.prototype.toFailure=e("toFailure"),y.toFailure=function(t){return new St(this,"any object","description")},x.toFailure=function(t){return new St(this,"end of input","description")},S.prototype.toFailure=function(t){return new St(this,this.obj,"string")},b.prototype.toFailure=function(t){return new St(this,JSON.stringify(this.from)+".."+JSON.stringify(this.to),"code")},E.prototype.toFailure=function(t){const e=this.expr===y?"nothing":"not "+this.expr.toFailure(t);return new St(this,e,"description")},C.prototype.toFailure=function(t){return this.expr.toFailure(t)},k.prototype.toFailure=function(t){let{description:e}=t.rules[this.ruleName];return e||(e=(/^[aeiouAEIOU]/.test(this.ruleName)?"an":"a")+" "+this.ruleName),new St(this,e,"description")},D.prototype.toFailure=function(t){return new St(this,"a Unicode ["+this.category+"] character","description")},w.prototype.toFailure=function(t){const e="("+this.terms.map((e=>e.toFailure(t))).join(" or ")+")";return new St(this,e,"description")},O.prototype.toFailure=function(t){const e="("+this.factors.map((e=>e.toFailure(t))).join(" ")+")";return new St(this,e,"description")},L.prototype.toFailure=function(t){const e="("+this.expr.toFailure(t)+this.operator+")";return new St(this,e,"description")},I.prototype.toString=e("toString"),y.toString=function(){return"any"},x.toString=function(){return"end"},S.prototype.toString=function(){return JSON.stringify(this.obj)},b.prototype.toString=function(){return JSON.stringify(this.from)+".."+JSON.stringify(this.to)},_.prototype.toString=function(){return"$"+this.index},T.prototype.toString=function(){return"#("+this.expr.toString()+")"},w.prototype.toString=function(){return 1===this.terms.length?this.terms[0].toString():"("+this.terms.map((t=>t.toString())).join(" | ")+")"},O.prototype.toString=function(){return 1===this.factors.length?this.factors[0].toString():"("+this.factors.map((t=>t.toString())).join(" ")+")"},L.prototype.toString=function(){return this.expr+this.operator},E.prototype.toString=function(){return"~"+this.expr},C.prototype.toString=function(){return"&"+this.expr},k.prototype.toString=function(){if(this.args.length>0){const t=this.args.map((t=>t.toString()));return this.ruleName+"<"+t.join(",")+">"}return this.ruleName},D.prototype.toString=function(){return"\\p{"+this.category+"}"};class bt extends I{constructor(t){super(),this.obj=t}_getString(t){const e=t.currentApplication().args[this.obj.index];return r(e instanceof S,"expected a Terminal expression"),e.obj}allowsSkippingPrecedingSpace(){return!0}eval(t){const{inputStream:e}=t,r=e.pos,n=this._getString(t);return e.matchString(n,!0)?(t.pushBinding(new ft(n.length),r),!0):(t.processFailure(r,this),!1)}getArity(){return 1}substituteParams(t){return new bt(this.obj.substituteParams(t))}toDisplayString(){return this.obj.toDisplayString()+" (case-insensitive)"}toFailure(t){return new St(this,this.obj.toFailure(t)+" (case-insensitive)","description")}_isNullable(t,e){return this.obj._isNullable(t,e)}}var _t=Object.freeze({__proto__:null,CaseInsensitiveTerminal:bt,PExpr:I,any:y,end:x,Terminal:S,Range:b,Param:_,Alt:w,Extend:A,Splice:N,Seq:O,Iter:L,Star:R,Plus:F,Opt:P,Not:E,Lookahead:C,Lex:T,Apply:k,UnicodeChar:D});let wt;Z((t=>{wt=t.rules.applySyntactic.body}));const At=new k("spaces");class Nt{constructor(t,e,r){this.matcher=t,this.startExpr=e,this.grammar=t.grammar,this.input=t.getInput(),this.inputStream=new rt(this.input),this.memoTable=t._memoTable,this.userData=void 0,this.doNotMemoize=!1,this._bindings=[],this._bindingOffsets=[],this._applicationStack=[],this._posStack=[0],this.inLexifiedContextStack=[!1],this.rightmostFailurePosition=-1,this._rightmostFailurePositionStack=[],this._recordedFailuresStack=[],void 0!==r&&(this.positionToRecordFailures=r,this.recordedFailures=Object.create(null))}posToOffset(t){return t-this._posStack[this._posStack.length-1]}enterApplication(t,e){this._posStack.push(this.inputStream.pos),this._applicationStack.push(e),this.inLexifiedContextStack.push(!1),t.enter(e),this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this.rightmostFailurePosition=-1}exitApplication(t,e){const r=this._posStack.pop();this._applicationStack.pop(),this.inLexifiedContextStack.pop(),t.exit(),this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,this._rightmostFailurePositionStack.pop()),e&&this.pushBinding(e,r)}enterLexifiedContext(){this.inLexifiedContextStack.push(!0)}exitLexifiedContext(){this.inLexifiedContextStack.pop()}currentApplication(){return this._applicationStack[this._applicationStack.length-1]}inSyntacticContext(){const t=this.currentApplication();return t?t.isSyntactic()&&!this.inLexifiedContext():this.startExpr.factors[0].isSyntactic()}inLexifiedContext(){return this.inLexifiedContextStack[this.inLexifiedContextStack.length-1]}skipSpaces(){return this.pushFailuresInfo(),this.eval(At),this.popBinding(),this.popFailuresInfo(),this.inputStream.pos}skipSpacesIfInSyntacticContext(){return this.inSyntacticContext()?this.skipSpaces():this.inputStream.pos}maybeSkipSpacesBefore(t){return t.allowsSkippingPrecedingSpace()&&t!==At?this.skipSpacesIfInSyntacticContext():this.inputStream.pos}pushBinding(t,e){this._bindings.push(t),this._bindingOffsets.push(this.posToOffset(e))}popBinding(){this._bindings.pop(),this._bindingOffsets.pop()}numBindings(){return this._bindings.length}truncateBindings(t){for(;this._bindings.length>t;)this.popBinding()}getCurrentPosInfo(){return this.getPosInfo(this.inputStream.pos)}getPosInfo(t){let e=this.memoTable[t];return e||(e=this.memoTable[t]=new it),e}processFailure(t,e){if(this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,t),this.recordedFailures&&t===this.positionToRecordFailures){const t=this.currentApplication();t&&(e=e.substituteParams(t.args)),this.recordFailure(e.toFailure(this.grammar),!1)}}recordFailure(t,e){const r=t.toKey();this.recordedFailures[r]?this.recordedFailures[r].isFluffy()&&!t.isFluffy()&&this.recordedFailures[r].clearFluffy():this.recordedFailures[r]=e?t.clone():t}recordFailures(t,e){Object.keys(t).forEach((r=>{this.recordFailure(t[r],e)}))}cloneRecordedFailures(){if(!this.recordedFailures)return;const t=Object.create(null);return Object.keys(this.recordedFailures).forEach((e=>{t[e]=this.recordedFailures[e].clone()})),t}getRightmostFailurePosition(){return this.rightmostFailurePosition}_getRightmostFailureOffset(){return this.rightmostFailurePosition>=0?this.posToOffset(this.rightmostFailurePosition):-1}getMemoizedTraceEntry(t,e){const r=this.memoTable[t];if(r&&e instanceof k){const t=r.memo[e.toMemoKey()];if(t&&t.traceEntry){const r=t.traceEntry.cloneWithExpr(e);return r.isMemoized=!0,r}}return null}getTraceEntry(t,e,r,n){if(e instanceof k){const t=this.currentApplication(),r=t?t.args:[];e=e.substituteParams(r)}return this.getMemoizedTraceEntry(t,e)||new pt(this.input,t,this.inputStream.pos,e,r,n,this.trace)}isTracing(){return!!this.trace}hasNecessaryInfo(t){return!(this.trace&&!t.traceEntry||this.recordedFailures&&this.inputStream.pos+t.rightmostFailureOffset===this.positionToRecordFailures&&!t.failuresAtRightmostPosition)}useMemoizedResult(t,e){this.trace&&this.trace.push(e.traceEntry);const r=this.inputStream.pos+e.rightmostFailureOffset;return this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,r),this.recordedFailures&&this.positionToRecordFailures===r&&e.failuresAtRightmostPosition&&this.recordFailures(e.failuresAtRightmostPosition,!0),this.inputStream.examinedLength=Math.max(this.inputStream.examinedLength,e.examinedLength+t),!!e.value&&(this.inputStream.pos+=e.matchLength,this.pushBinding(e.value,t),!0)}eval(t){const{inputStream:e}=this,r=this._bindings.length,n=this.userData;let i;this.recordedFailures&&(i=this.recordedFailures,this.recordedFailures=Object.create(null));const s=e.pos,o=this.maybeSkipSpacesBefore(t);let a;this.trace&&(a=this.trace,this.trace=[]);const u=t.eval(this);if(this.trace){const e=this._bindings.slice(r),n=this.getTraceEntry(o,t,u,e);n.isImplicitSpaces=t===At,n.isRootNode=t===this.startExpr,a.push(n),this.trace=a}return u?this.recordedFailures&&e.pos===this.positionToRecordFailures&&Object.keys(this.recordedFailures).forEach((t=>{this.recordedFailures[t].makeFluffy()})):(e.pos=s,this.truncateBindings(r),this.userData=n),this.recordedFailures&&this.recordFailures(i,!1),t===wt&&this.skipSpaces(),u}getMatchResult(){let t;this.grammar._setUpMatchState(this),this.eval(this.startExpr),this.recordedFailures&&(t=Object.keys(this.recordedFailures).map((t=>this.recordedFailures[t])));const e=this._bindings[0];return e&&(e.grammar=this.grammar),new nt(this.matcher,this.input,this.startExpr,e,this._bindingOffsets[0],this.rightmostFailurePosition,t)}getTrace(){this.trace=[];const t=this.getMatchResult(),e=this.trace[this.trace.length-1];return e.result=t,e}pushFailuresInfo(){this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this._recordedFailuresStack.push(this.recordedFailures)}popFailuresInfo(){this.rightmostFailurePosition=this._rightmostFailurePositionStack.pop(),this.recordedFailures=this._recordedFailuresStack.pop()}}class Ot{constructor(t){this.grammar=t,this._memoTable=[],this._input="",this._isMemoTableStale=!1}_resetMemoTable(){this._memoTable=[],this._isMemoTableStale=!1}getInput(){return this._input}setInput(t){return this._input!==t&&this.replaceInputRange(0,this._input.length,t),this}replaceInputRange(t,e,r){const n=this._input,i=this._memoTable;if(t<0||t>n.length||e<0||e>n.length||t>e)throw new Error("Invalid indices: "+t+" and "+e);this._input=n.slice(0,t)+r+n.slice(e),this._input!==n&&i.length>0&&(this._isMemoTableStale=!0);const s=i.slice(e);i.length=t;for(let t=0;t<r.length;t++)i.push(void 0);for(const t of s)i.push(t);for(let e=0;e<t;e++){const r=i[e];r&&r.clearObsoleteEntries(e,t)}return this}match(t,e={incremental:!0}){return this._match(this._getStartExpr(t),{incremental:e.incremental,tracing:!1})}trace(t,e={incremental:!0}){return this._match(this._getStartExpr(t),{incremental:e.incremental,tracing:!0})}_match(t,e={}){const r={tracing:!1,incremental:!0,positionToRecordFailures:void 0,...e};if(r.incremental){if(this._isMemoTableStale&&!this.grammar.supportsIncrementalParsing)throw function(t){return j(`Grammar '${t.name}' does not support incremental parsing`)}(this.grammar)}else this._resetMemoTable();const n=new Nt(this,t,r.positionToRecordFailures);return r.tracing?n.getTrace():n.getMatchResult()}_getStartExpr(t){const e=t||this.grammar.defaultStartRule;if(!e)throw new Error("Missing start rule argument -- the grammar has no default start rule.");const r=this.grammar.parseApplication(e);return new O([r,x])}}const Lt=[],Rt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);class Ft{constructor(t,e,n){this._node=t,this.source=e,this._baseInterval=n,t.isNonterminal()&&r(e===n),this._childWrappers=[]}_forgetMemoizedResultFor(t){delete this._node[this._semantics.attributeKeys[t]],this.children.forEach((e=>{e._forgetMemoizedResultFor(t)}))}child(t){if(!(0<=t&&t<this._node.numChildren()))return;let e=this._childWrappers[t];if(!e){const r=this._node.childAt(t),n=this._node.childOffsets[t],i=this._baseInterval.subInterval(n,r.matchLength),s=r.isNonterminal()?i:this._baseInterval;e=this._childWrappers[t]=this._semantics.wrap(r,i,s)}return e}_children(){for(let t=0;t<this._node.numChildren();t++)this.child(t);return this._childWrappers}isIteration(){return this._node.isIteration()}isTerminal(){return this._node.isTerminal()}isNonterminal(){return this._node.isNonterminal()}isSyntactic(){return this.isNonterminal()&&this._node.isSyntactic()}isLexical(){return this.isNonterminal()&&this._node.isLexical()}isOptional(){return this._node.isOptional()}iteration(t){const e=t||[],r=e.map((t=>t._node)),n=new vt(r,[],-1,!1),i=this._semantics.wrap(n,null,null);return i._childWrappers=e,i}get children(){return this._children()}get ctorName(){return this._node.ctorName}get numChildren(){return this._node.numChildren()}get sourceString(){return this.source.contents}}class Pt{constructor(t,e){const r=this;if(this.grammar=t,this.checkedActionDicts=!1,this.Wrapper=class extends(e?e.Wrapper:Ft){constructor(t,e,n){super(t,e,n),r.checkActionDictsIfHaventAlready(),this._semantics=r}toString(){return"[semantics wrapper for "+r.grammar.name+"]"}},this.super=e,e){if(!t.equals(this.super.grammar)&&!t._inheritsFrom(this.super.grammar))throw new Error("Cannot extend a semantics for grammar '"+this.super.grammar.name+"' for use with grammar '"+t.name+"' (not a sub-grammar)");this.operations=Object.create(this.super.operations),this.attributes=Object.create(this.super.attributes),this.attributeKeys=Object.create(null);for(const t in this.attributes)Object.defineProperty(this.attributeKeys,t,{value:tt(t)})}else this.operations=Object.create(null),this.attributes=Object.create(null),this.attributeKeys=Object.create(null)}toString(){return"[semantics for "+this.grammar.name+"]"}checkActionDictsIfHaventAlready(){this.checkedActionDicts||(this.checkActionDicts(),this.checkedActionDicts=!0)}checkActionDicts(){let t;for(t in this.operations)this.operations[t].checkActionDict(this.grammar);for(t in this.attributes)this.attributes[t].checkActionDict(this.grammar)}toRecipe(t){function e(t){return t.super!==Pt.BuiltInSemantics._getSemantics()}let r="(function(g) {\n";if(e(this)){r+="  var semantics = "+this.super.toRecipe(!0)+"(g";const t=this.super.grammar;let e=this.grammar;for(;e!==t;)r+=".superGrammar",e=e.superGrammar;r+=");\n",r+="  return g.extendSemantics(semantics)"}else r+="  return g.createSemantics()";return["Operation","Attribute"].forEach((t=>{const n=this[t.toLowerCase()+"s"];Object.keys(n).forEach((i=>{const{actionDict:s,formals:o,builtInDefault:a}=n[i];let u,c=i;o.length>0&&(c+="("+o.join(", ")+")"),u=e(this)&&this.super[t.toLowerCase()+"s"][i]?"extend"+t:"add"+t,r+="\n    ."+u+"("+JSON.stringify(c)+", {";const l=[];Object.keys(s).forEach((t=>{if(s[t]!==a){let e=s[t].toString().trim();e=e.replace(/^.*\(/,"function("),l.push("\n      "+JSON.stringify(t)+": "+e)}})),r+=l.join(",")+"\n    })"}))})),r+=";\n  })",t||(r="(function() {\n  var grammar = this.fromRecipe("+this.grammar.toRecipe()+");\n  var semantics = "+r+"(grammar);\n  return semantics;\n});\n"),r}addOperationOrAttribute(t,e,r){const n=t+"s",i=Et(e,t),{name:s}=i,{formals:o}=i;this.assertNewName(s,t);const a=function(t,e,r){return function(...n){const i=(this._semantics.operations[e]||this._semantics.attributes[e]).formals.map((t=>this.args[t]));if(this.isIteration()||1!==n.length)throw function(t,e,r,n){let i=n.slice(0,-1).map((t=>{const e="  "+t[0].name+" > "+t[1];return 3===t.length?e+" for '"+t[2]+"'":e})).join("\n");i+="\n  "+e+" > "+t;let s="";"_iter"===t&&(s=["\nNOTE: as of Ohm v16, there is no default action for iteration nodes  see ","  https://ohmjs.org/d/dsa for details."].join("\n"));const o=j([`Missing semantic action for '${t}' in ${r} '${e}'.${s}`,"Action stack (most recent call last):",i].join("\n"));return o.name="missingSemanticAction",o}(this.ctorName,e,t,Lt);return r.apply(n[0],i)}}(t,s,l),u={_default:a};Object.keys(r).forEach((t=>{u[t]=r[t]}));const c="operation"===t?new Ct(s,o,u,a):new Tt(s,u,a);function l(...e){const r=this._semantics[n][s];if(arguments.length!==r.formals.length)throw new Error("Invalid number of arguments passed to "+s+" "+t+" (expected "+r.formals.length+", got "+arguments.length+")");const i=Object.create(null);for(const[t,n]of Object.entries(e))i[r.formals[t]]=n;const o=this.args;this.args=i;const a=r.execute(this._semantics,this);return this.args=o,a}c.checkActionDict(this.grammar),this[n][s]=c,"operation"===t?(this.Wrapper.prototype[s]=l,this.Wrapper.prototype[s].toString=function(){return"["+s+" operation]"}):(Object.defineProperty(this.Wrapper.prototype,s,{get:l,configurable:!0}),Object.defineProperty(this.attributeKeys,s,{value:tt(s)}))}extendOperationOrAttribute(t,e,r){const n=t+"s";if(Et(e,"attribute"),!this.super||!(e in this.super[n]))throw new Error("Cannot extend "+t+" '"+e+"': did not inherit an "+t+" with that name");if(Rt(this[n],e))throw new Error("Cannot extend "+t+" '"+e+"' again");const i=this[n][e].formals,s=this[n][e].actionDict,o=Object.create(s);Object.keys(r).forEach((t=>{o[t]=r[t]})),this[n][e]="operation"===t?new Ct(e,i,o):new Tt(e,o),this[n][e].checkActionDict(this.grammar)}assertNewName(t,e){if(Rt(Ft.prototype,t))throw new Error("Cannot add "+e+" '"+t+"': that's a reserved name");if(t in this.operations)throw new Error("Cannot add "+e+" '"+t+"': an operation with that name already exists");if(t in this.attributes)throw new Error("Cannot add "+e+" '"+t+"': an attribute with that name already exists")}wrap(t,e,r){const n=r||e;return t instanceof this.Wrapper?t:new this.Wrapper(t,e,n)}}function Et(t,e){if(!Pt.prototypeGrammar)return r(-1===t.indexOf("(")),{name:t,formals:[]};const n=Pt.prototypeGrammar.match(t,"operation"===e?"OperationSignature":"AttributeSignature");if(n.failed())throw new Error(n.message);return Pt.prototypeGrammarSemantics(n).parse()}Pt.createSemantics=function(t,e){const r=new Pt(t,void 0!==e?e:Pt.BuiltInSemantics._getSemantics()),n=function(e){if(!(e instanceof nt))throw new TypeError("Semantics expected a MatchResult, but got "+f(e));if(e.failed())throw new TypeError("cannot apply Semantics to "+e.toString());const n=e._cst;if(n.grammar!==t)throw new Error("Cannot use a MatchResult from grammar '"+n.grammar.name+"' with a semantics for '"+t.name+"'");const i=new rt(e.input);return r.wrap(n,i.interval(e._cstOffset,e.input.length))};return n.addOperation=function(t,e){return r.addOperationOrAttribute("operation",t,e),n},n.extendOperation=function(t,e){return r.extendOperationOrAttribute("operation",t,e),n},n.addAttribute=function(t,e){return r.addOperationOrAttribute("attribute",t,e),n},n.extendAttribute=function(t,e){return r.extendOperationOrAttribute("attribute",t,e),n},n._getActionDict=function(e){const n=r.operations[e]||r.attributes[e];if(!n)throw new Error('"'+e+'" is not a valid operation or attribute name in this semantics for "'+t.name+'"');return n.actionDict},n._remove=function(t){let e;return t in r.operations?(e=r.operations[t],delete r.operations[t]):t in r.attributes&&(e=r.attributes[t],delete r.attributes[t]),delete r.Wrapper.prototype[t],e},n.getOperationNames=function(){return Object.keys(r.operations)},n.getAttributeNames=function(){return Object.keys(r.attributes)},n.getGrammar=function(){return r.grammar},n.toRecipe=function(t){return r.toRecipe(t)},n.toString=r.toString.bind(r),n._getSemantics=function(){return r},n};class Ct{constructor(t,e,r,n){this.name=t,this.formals=e,this.actionDict=r,this.builtInDefault=n}checkActionDict(t){t._checkTopDownActionDict(this.typeName,this.name,this.actionDict)}execute(t,e){try{const{ctorName:t}=e._node;let r=this.actionDict[t];return r?(Lt.push([this,t]),r.apply(e,e._children())):e.isNonterminal()&&(r=this.actionDict._nonterminal,r)?(Lt.push([this,"_nonterminal",t]),r.apply(e,e._children())):(Lt.push([this,"default action",t]),this.actionDict._default.apply(e,e._children()))}finally{Lt.pop()}}}Ct.prototype.typeName="operation";class Tt extends Ct{constructor(t,e,r){super(t,[],e,r)}execute(t,e){const r=e._node,n=t.attributeKeys[this.name];return Rt(r,n)||(r[n]=Ct.prototype.execute.call(this,t,e)),r[n]}}Tt.prototype.typeName="attribute";const kt=["_iter","_terminal","_nonterminal","_default"];function Dt(t){return Object.keys(t.rules).sort().map((e=>t.rules[e]))}let jt,Mt;class Gt{constructor(t,e,r,n){if(this.name=t,this.superGrammar=e,this.rules=r,n){if(!(n in r))throw new Error("Invalid start rule: '"+n+"' is not a rule in grammar '"+t+"'");this.defaultStartRule=n}this._matchStateInitializer=void 0,this.supportsIncrementalParsing=!0}matcher(){return new Ot(this)}isBuiltIn(){return this===Gt.ProtoBuiltInRules||this===Gt.BuiltInRules}equals(t){if(this===t)return!0;if(null==t||this.name!==t.name||this.defaultStartRule!==t.defaultStartRule||this.superGrammar!==t.superGrammar&&!this.superGrammar.equals(t.superGrammar))return!1;const e=Dt(this),r=Dt(t);return e.length===r.length&&e.every(((t,e)=>t.description===r[e].description&&t.formals.join(",")===r[e].formals.join(",")&&t.body.toString()===r[e].body.toString()))}match(t,e){const r=this.matcher();return r.replaceInputRange(0,0,t),r.match(e)}trace(t,e){const r=this.matcher();return r.replaceInputRange(0,0,t),r.trace(e)}createSemantics(){return Pt.createSemantics(this)}extendSemantics(t){return Pt.createSemantics(this,t._getSemantics())}_checkTopDownActionDict(t,e,r){const n=[];for(const t in r){const e=r[t];if(!kt.includes(t)&&!(t in this.rules)){n.push(`'${t}' is not a valid semantic action for '${this.name}'`);continue}if("function"!=typeof e){n.push(`'${t}' must be a function in an action dictionary for '${this.name}'`);continue}const i=e.length,s=this._topDownActionArity(t);if(i!==s){let e;e="_iter"===t||"_nonterminal"===t?`it should use a rest parameter, e.g. \`${t}(...children) {}\`. NOTE: this is new in Ohm v16  see https://ohmjs.org/d/ati for details.`:`expected ${s}, got ${i}`,n.push(`Semantic action '${t}' has the wrong arity: ${e}`)}}if(n.length>0){const r=n.map((t=>"- "+t)),i=new Error([`Found errors in the action dictionary of the '${e}' ${t}:`,...r].join("\n"));throw i.problems=n,i}}_topDownActionArity(t){return kt.includes(t)?0:this.rules[t].body.getArity()}_inheritsFrom(t){let e=this.superGrammar;for(;e;){if(e.equals(t,!0))return!0;e=e.superGrammar}return!1}toRecipe(t=void 0){const e={};this.source&&(e.source=this.source.contents);let r=null;this.defaultStartRule&&(r=this.defaultStartRule);const n={};Object.keys(this.rules).forEach((t=>{const e=this.rules[t],{body:r}=e,i=!this.superGrammar||!this.superGrammar.rules[t];let s;s=i?"define":r instanceof A?"extend":"override";const o={};if(e.source&&this.source){const t=e.source.relativeTo(this.source);o.sourceInterval=[t.startIdx,t.endIdx]}const a=i?e.description:null,u=r.outputRecipe(e.formals,this.source);n[t]=[s,o,a,e.formals,u]}));let i="null";t?i=t:this.superGrammar&&!this.superGrammar.isBuiltIn()&&(i=this.superGrammar.toRecipe());return`[${[...["grammar",e,this.name].map(JSON.stringify),i,...[r,n].map(JSON.stringify)].join(",")}]`.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}toOperationActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}toAttributeActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}_toOperationOrAttributeActionDictionaryTemplate(){const t=new h;t.append("{");let e=!0;for(const r in this.rules){const{body:n}=this.rules[r];e?e=!1:t.append(","),t.append("\n"),t.append("  "),this.addSemanticActionTemplate(r,n,t)}return t.append("\n}"),t.contents()}addSemanticActionTemplate(t,e,r){r.append(t),r.append(": function(");const n=this._topDownActionArity(t);r.append(o("_",n).join(", ")),r.append(") {\n"),r.append("  }")}parseApplication(t){let e;if(-1===t.indexOf("<"))e=new k(t);else{const r=jt.match(t,"Base_application");e=Mt(r,{})}if(!(e.ruleName in this.rules))throw G(e.ruleName,this.name);const{formals:r}=this.rules[e.ruleName];if(r.length!==e.args.length){const{source:t}=this.rules[e.ruleName];throw q(e.ruleName,r.length,e.args.length,t)}return e}_setUpMatchState(t){this._matchStateInitializer&&this._matchStateInitializer(t)}}Gt.ProtoBuiltInRules=new Gt("ProtoBuiltInRules",void 0,{any:{body:y,formals:[],description:"any character",primitive:!0},end:{body:x,formals:[],description:"end of input",primitive:!0},caseInsensitive:{body:new bt(new _(0)),formals:["str"],primitive:!0},lower:{body:new D("Ll"),formals:[],description:"a lowercase letter",primitive:!0},upper:{body:new D("Lu"),formals:[],description:"an uppercase letter",primitive:!0},unicodeLtmo:{body:new D("Ltmo"),formals:[],description:"a Unicode character in Lt, Lm, or Lo",primitive:!0},spaces:{body:new R(new k("space")),formals:[]},space:{body:new b("\0"," "),formals:[],description:"a space"}}),Gt.initApplicationParser=function(t,e){jt=t,Mt=e};class Bt{constructor(t){this.name=t}sourceInterval(t,e){return this.source.subInterval(t,e-t)}ensureSuperGrammar(){return this.superGrammar||this.withSuperGrammar("BuiltInRules"===this.name?Gt.ProtoBuiltInRules:Gt.BuiltInRules),this.superGrammar}ensureSuperGrammarRuleForOverriding(t,e){const r=this.ensureSuperGrammar().rules[t];if(!r)throw j("Cannot override rule "+t+" because it is not declared in "+this.superGrammar.name,e);return r}installOverriddenOrExtendedRule(t,e,r,n){const i=a(e);if(i.length>0)throw U(t,i,n);const s=this.ensureSuperGrammar().rules[t],o=s.formals,u=o?o.length:0;if(e.length!==u)throw q(t,u,e.length,n);return this.install(t,e,r,s.description,n)}install(t,e,r,n,i,s=!1){return this.rules[t]={body:r.introduceParams(e),formals:e,description:n,source:i,primitive:s},this}withSuperGrammar(t){if(this.superGrammar)throw new Error("the super grammar of a GrammarDecl cannot be set more than once");return this.superGrammar=t,this.rules=Object.create(t.rules),t.isBuiltIn()||(this.defaultStartRule=t.defaultStartRule),this}withDefaultStartRule(t){return this.defaultStartRule=t,this}withSource(t){return this.source=new rt(t).interval(0,t.length),this}build(){const t=new Gt(this.name,this.ensureSuperGrammar(),this.rules,this.defaultStartRule);t._matchStateInitializer=t.superGrammar._matchStateInitializer,t.supportsIncrementalParsing=t.superGrammar.supportsIncrementalParsing;const e=[];let r=!1;return Object.keys(t.rules).forEach((n=>{const{body:i}=t.rules[n];try{i.assertChoicesHaveUniformArity(n)}catch(t){e.push(t)}try{i.assertAllApplicationsAreValid(n,t)}catch(t){e.push(t),r=!0}})),r||Object.keys(t.rules).forEach((r=>{const{body:n}=t.rules[r];try{n.assertIteratedExprsAreNotNullable(t,[])}catch(t){e.push(t)}})),e.length>0&&function(t){if(1===t.length)throw t[0];if(t.length>1)throw function(t){const e=t.map((t=>t.message));return j(["Errors:"].concat(e).join("\n- "),t[0].interval)}(t)}(e),this.source&&(t.source=this.source),t}define(t,e,r,n,i,s){if(this.ensureSuperGrammar(),this.superGrammar.rules[t])throw B(t,this.name,this.superGrammar.name,i);if(this.rules[t])throw B(t,this.name,this.name,i);const o=a(e);if(o.length>0)throw U(t,o,i);return this.install(t,e,r,n,i,s)}override(t,e,r,n,i){return this.ensureSuperGrammarRuleForOverriding(t,i),this.installOverriddenOrExtendedRule(t,e,r,i),this}extend(t,e,r,n,i){if(!this.ensureSuperGrammar().rules[t])throw j("Cannot extend rule "+t+" because it is not declared in "+this.superGrammar.name,i);const a=new A(this.superGrammar,t,r);return a.source=r.source,this.installOverriddenOrExtendedRule(t,e,a,i),this}}class qt{constructor(){this.currentDecl=null,this.currentRuleName=null}newGrammar(t){return new Bt(t)}grammar(t,e,r,n,i){const s=new Bt(e);return r&&s.withSuperGrammar(r instanceof Gt?r:this.fromRecipe(r)),n&&s.withDefaultStartRule(n),t&&t.source&&s.withSource(t.source),this.currentDecl=s,Object.keys(i).forEach((t=>{this.currentRuleName=t;const e=i[t],r=e[0],n=e[1],o=e[2],a=e[3],u=this.fromRecipe(e[4]);let c;s.source&&n&&n.sourceInterval&&(c=s.source.subInterval(n.sourceInterval[0],n.sourceInterval[1]-n.sourceInterval[0])),s[r](t,a,u,o,c)})),this.currentRuleName=this.currentDecl=null,s.build()}terminal(t){return new S(t)}range(t,e){return new b(t,e)}param(t){return new _(t)}alt(...t){let e=[];for(let r of t)r instanceof I||(r=this.fromRecipe(r)),r instanceof w?e=e.concat(r.terms):e.push(r);return 1===e.length?e[0]:new w(e)}seq(...t){let e=[];for(let r of t)r instanceof I||(r=this.fromRecipe(r)),r instanceof O?e=e.concat(r.factors):e.push(r);return 1===e.length?e[0]:new O(e)}star(t){return t instanceof I||(t=this.fromRecipe(t)),new R(t)}plus(t){return t instanceof I||(t=this.fromRecipe(t)),new F(t)}opt(t){return t instanceof I||(t=this.fromRecipe(t)),new P(t)}not(t){return t instanceof I||(t=this.fromRecipe(t)),new E(t)}lookahead(t){return t instanceof I||(t=this.fromRecipe(t)),new C(t)}lex(t){return t instanceof I||(t=this.fromRecipe(t)),new T(t)}app(t,e){return e&&e.length>0&&(e=e.map((function(t){return t instanceof I?t:this.fromRecipe(t)}),this)),new k(t,e)}splice(t,e){return new N(this.currentDecl.superGrammar,this.currentRuleName,t.map((t=>this.fromRecipe(t))),e.map((t=>this.fromRecipe(t))))}fromRecipe(t){const e="grammar"===t[0]?t.slice(1):t.slice(2),r=this[t[0]](...e),n=t[1];return n&&n.sourceInterval&&this.currentDecl&&r.withSource(this.currentDecl.sourceInterval(...n.sourceInterval)),r}}function Ut(t){return"function"==typeof t?t.call(new qt):("string"==typeof t&&(t=JSON.parse(t)),(new qt).fromRecipe(t))}var $t=Ut(["grammar",{source:'BuiltInRules {\n\n  alnum  (an alpha-numeric character)\n    = letter\n    | digit\n\n  letter  (a letter)\n    = lower\n    | upper\n    | unicodeLtmo\n\n  digit  (a digit)\n    = "0".."9"\n\n  hexDigit  (a hexadecimal digit)\n    = digit\n    | "a".."f"\n    | "A".."F"\n\n  ListOf<elem, sep>\n    = NonemptyListOf<elem, sep>\n    | EmptyListOf<elem, sep>\n\n  NonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  EmptyListOf<elem, sep>\n    = /* nothing */\n\n  listOf<elem, sep>\n    = nonemptyListOf<elem, sep>\n    | emptyListOf<elem, sep>\n\n  nonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  emptyListOf<elem, sep>\n    = /* nothing */\n\n  // Allows a syntactic rule application within a lexical context.\n  applySyntactic<app> = app\n}'},"BuiltInRules",null,null,{alnum:["define",{sourceInterval:[18,78]},"an alpha-numeric character",[],["alt",{sourceInterval:[60,78]},["app",{sourceInterval:[60,66]},"letter",[]],["app",{sourceInterval:[73,78]},"digit",[]]]],letter:["define",{sourceInterval:[82,142]},"a letter",[],["alt",{sourceInterval:[107,142]},["app",{sourceInterval:[107,112]},"lower",[]],["app",{sourceInterval:[119,124]},"upper",[]],["app",{sourceInterval:[131,142]},"unicodeLtmo",[]]]],digit:["define",{sourceInterval:[146,177]},"a digit",[],["range",{sourceInterval:[169,177]},"0","9"]],hexDigit:["define",{sourceInterval:[181,254]},"a hexadecimal digit",[],["alt",{sourceInterval:[219,254]},["app",{sourceInterval:[219,224]},"digit",[]],["range",{sourceInterval:[231,239]},"a","f"],["range",{sourceInterval:[246,254]},"A","F"]]],ListOf:["define",{sourceInterval:[258,336]},null,["elem","sep"],["alt",{sourceInterval:[282,336]},["app",{sourceInterval:[282,307]},"NonemptyListOf",[["param",{sourceInterval:[297,301]},0],["param",{sourceInterval:[303,306]},1]]],["app",{sourceInterval:[314,336]},"EmptyListOf",[["param",{sourceInterval:[326,330]},0],["param",{sourceInterval:[332,335]},1]]]]],NonemptyListOf:["define",{sourceInterval:[340,388]},null,["elem","sep"],["seq",{sourceInterval:[372,388]},["param",{sourceInterval:[372,376]},0],["star",{sourceInterval:[377,388]},["seq",{sourceInterval:[378,386]},["param",{sourceInterval:[378,381]},1],["param",{sourceInterval:[382,386]},0]]]]],EmptyListOf:["define",{sourceInterval:[392,434]},null,["elem","sep"],["seq",{sourceInterval:[438,438]}]],listOf:["define",{sourceInterval:[438,516]},null,["elem","sep"],["alt",{sourceInterval:[462,516]},["app",{sourceInterval:[462,487]},"nonemptyListOf",[["param",{sourceInterval:[477,481]},0],["param",{sourceInterval:[483,486]},1]]],["app",{sourceInterval:[494,516]},"emptyListOf",[["param",{sourceInterval:[506,510]},0],["param",{sourceInterval:[512,515]},1]]]]],nonemptyListOf:["define",{sourceInterval:[520,568]},null,["elem","sep"],["seq",{sourceInterval:[552,568]},["param",{sourceInterval:[552,556]},0],["star",{sourceInterval:[557,568]},["seq",{sourceInterval:[558,566]},["param",{sourceInterval:[558,561]},1],["param",{sourceInterval:[562,566]},0]]]]],emptyListOf:["define",{sourceInterval:[572,682]},null,["elem","sep"],["seq",{sourceInterval:[685,685]}]],applySyntactic:["define",{sourceInterval:[685,710]},null,["app"],["param",{sourceInterval:[707,710]},0]]}]);Gt.BuiltInRules=$t,function(t){Q.forEach((e=>{e(t)})),Q=null}(Gt.BuiltInRules);var zt=Ut(["grammar",{source:'Ohm {\n\n  Grammars\n    = Grammar*\n\n  Grammar\n    = ident SuperGrammar? "{" Rule* "}"\n\n  SuperGrammar\n    = "<:" ident\n\n  Rule\n    = ident Formals? ruleDescr? "="  RuleBody  -- define\n    | ident Formals?            ":=" OverrideRuleBody  -- override\n    | ident Formals?            "+=" RuleBody  -- extend\n\n  RuleBody\n    = "|"? NonemptyListOf<TopLevelTerm, "|">\n\n  TopLevelTerm\n    = Seq caseName  -- inline\n    | Seq\n\n  OverrideRuleBody\n    = "|"? NonemptyListOf<OverrideTopLevelTerm, "|">\n\n  OverrideTopLevelTerm\n    = "..."  -- superSplice\n    | TopLevelTerm\n\n  Formals\n    = "<" ListOf<ident, ","> ">"\n\n  Params\n    = "<" ListOf<Seq, ","> ">"\n\n  Alt\n    = NonemptyListOf<Seq, "|">\n\n  Seq\n    = Iter*\n\n  Iter\n    = Pred "*"  -- star\n    | Pred "+"  -- plus\n    | Pred "?"  -- opt\n    | Pred\n\n  Pred\n    = "~" Lex  -- not\n    | "&" Lex  -- lookahead\n    | Lex\n\n  Lex\n    = "#" Base  -- lex\n    | Base\n\n  Base\n    = ident Params? ~(ruleDescr? "=" | ":=" | "+=")  -- application\n    | oneCharTerminal ".." oneCharTerminal           -- range\n    | terminal                                       -- terminal\n    | "(" Alt ")"                                    -- paren\n\n  ruleDescr  (a rule description)\n    = "(" ruleDescrText ")"\n\n  ruleDescrText\n    = (~")" any)*\n\n  caseName\n    = "--" (~"\\n" space)* name (~"\\n" space)* ("\\n" | &"}")\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = "_"\n    | letter\n\n  nameRest\n    = "_"\n    | alnum\n\n  ident  (an identifier)\n    = name\n\n  terminal\n    = "\\"" terminalChar* "\\""\n\n  oneCharTerminal\n    = "\\"" terminalChar "\\""\n\n  terminalChar\n    = escapeChar\n      | ~"\\\\" ~"\\"" ~"\\n" "\\u{0}".."\\u{10FFFF}"\n\n  escapeChar  (an escape sequence)\n    = "\\\\\\\\"                                     -- backslash\n    | "\\\\\\""                                     -- doubleQuote\n    | "\\\\\\\'"                                     -- singleQuote\n    | "\\\\b"                                      -- backspace\n    | "\\\\n"                                      -- lineFeed\n    | "\\\\r"                                      -- carriageReturn\n    | "\\\\t"                                      -- tab\n    | "\\\\u{" hexDigit hexDigit? hexDigit?\n             hexDigit? hexDigit? hexDigit? "}"   -- unicodeCodePoint\n    | "\\\\u" hexDigit hexDigit hexDigit hexDigit  -- unicodeEscape\n    | "\\\\x" hexDigit hexDigit                    -- hexEscape\n\n  space\n   += comment\n\n  comment\n    = "//" (~"\\n" any)* &("\\n" | end)  -- singleLine\n    | "/*" (~"*/" any)* "*/"  -- multiLine\n\n  tokens = token*\n\n  token = caseName | comment | ident | operator | punctuation | terminal | any\n\n  operator = "<:" | "=" | ":=" | "+=" | "*" | "+" | "?" | "~" | "&"\n\n  punctuation = "<" | ">" | "," | "--"\n}'},"Ohm",null,"Grammars",{Grammars:["define",{sourceInterval:[9,32]},null,[],["star",{sourceInterval:[24,32]},["app",{sourceInterval:[24,31]},"Grammar",[]]]],Grammar:["define",{sourceInterval:[36,83]},null,[],["seq",{sourceInterval:[50,83]},["app",{sourceInterval:[50,55]},"ident",[]],["opt",{sourceInterval:[56,69]},["app",{sourceInterval:[56,68]},"SuperGrammar",[]]],["terminal",{sourceInterval:[70,73]},"{"],["star",{sourceInterval:[74,79]},["app",{sourceInterval:[74,78]},"Rule",[]]],["terminal",{sourceInterval:[80,83]},"}"]]],SuperGrammar:["define",{sourceInterval:[87,116]},null,[],["seq",{sourceInterval:[106,116]},["terminal",{sourceInterval:[106,110]},"<:"],["app",{sourceInterval:[111,116]},"ident",[]]]],Rule_define:["define",{sourceInterval:[131,181]},null,[],["seq",{sourceInterval:[131,170]},["app",{sourceInterval:[131,136]},"ident",[]],["opt",{sourceInterval:[137,145]},["app",{sourceInterval:[137,144]},"Formals",[]]],["opt",{sourceInterval:[146,156]},["app",{sourceInterval:[146,155]},"ruleDescr",[]]],["terminal",{sourceInterval:[157,160]},"="],["app",{sourceInterval:[162,170]},"RuleBody",[]]]],Rule_override:["define",{sourceInterval:[188,248]},null,[],["seq",{sourceInterval:[188,235]},["app",{sourceInterval:[188,193]},"ident",[]],["opt",{sourceInterval:[194,202]},["app",{sourceInterval:[194,201]},"Formals",[]]],["terminal",{sourceInterval:[214,218]},":="],["app",{sourceInterval:[219,235]},"OverrideRuleBody",[]]]],Rule_extend:["define",{sourceInterval:[255,305]},null,[],["seq",{sourceInterval:[255,294]},["app",{sourceInterval:[255,260]},"ident",[]],["opt",{sourceInterval:[261,269]},["app",{sourceInterval:[261,268]},"Formals",[]]],["terminal",{sourceInterval:[281,285]},"+="],["app",{sourceInterval:[286,294]},"RuleBody",[]]]],Rule:["define",{sourceInterval:[120,305]},null,[],["alt",{sourceInterval:[131,305]},["app",{sourceInterval:[131,170]},"Rule_define",[]],["app",{sourceInterval:[188,235]},"Rule_override",[]],["app",{sourceInterval:[255,294]},"Rule_extend",[]]]],RuleBody:["define",{sourceInterval:[309,362]},null,[],["seq",{sourceInterval:[324,362]},["opt",{sourceInterval:[324,328]},["terminal",{sourceInterval:[324,327]},"|"]],["app",{sourceInterval:[329,362]},"NonemptyListOf",[["app",{sourceInterval:[344,356]},"TopLevelTerm",[]],["terminal",{sourceInterval:[358,361]},"|"]]]]],TopLevelTerm_inline:["define",{sourceInterval:[385,408]},null,[],["seq",{sourceInterval:[385,397]},["app",{sourceInterval:[385,388]},"Seq",[]],["app",{sourceInterval:[389,397]},"caseName",[]]]],TopLevelTerm:["define",{sourceInterval:[366,418]},null,[],["alt",{sourceInterval:[385,418]},["app",{sourceInterval:[385,397]},"TopLevelTerm_inline",[]],["app",{sourceInterval:[415,418]},"Seq",[]]]],OverrideRuleBody:["define",{sourceInterval:[422,491]},null,[],["seq",{sourceInterval:[445,491]},["opt",{sourceInterval:[445,449]},["terminal",{sourceInterval:[445,448]},"|"]],["app",{sourceInterval:[450,491]},"NonemptyListOf",[["app",{sourceInterval:[465,485]},"OverrideTopLevelTerm",[]],["terminal",{sourceInterval:[487,490]},"|"]]]]],OverrideTopLevelTerm_superSplice:["define",{sourceInterval:[522,543]},null,[],["terminal",{sourceInterval:[522,527]},"..."]],OverrideTopLevelTerm:["define",{sourceInterval:[495,562]},null,[],["alt",{sourceInterval:[522,562]},["app",{sourceInterval:[522,527]},"OverrideTopLevelTerm_superSplice",[]],["app",{sourceInterval:[550,562]},"TopLevelTerm",[]]]],Formals:["define",{sourceInterval:[566,606]},null,[],["seq",{sourceInterval:[580,606]},["terminal",{sourceInterval:[580,583]},"<"],["app",{sourceInterval:[584,602]},"ListOf",[["app",{sourceInterval:[591,596]},"ident",[]],["terminal",{sourceInterval:[598,601]},","]]],["terminal",{sourceInterval:[603,606]},">"]]],Params:["define",{sourceInterval:[610,647]},null,[],["seq",{sourceInterval:[623,647]},["terminal",{sourceInterval:[623,626]},"<"],["app",{sourceInterval:[627,643]},"ListOf",[["app",{sourceInterval:[634,637]},"Seq",[]],["terminal",{sourceInterval:[639,642]},","]]],["terminal",{sourceInterval:[644,647]},">"]]],Alt:["define",{sourceInterval:[651,685]},null,[],["app",{sourceInterval:[661,685]},"NonemptyListOf",[["app",{sourceInterval:[676,679]},"Seq",[]],["terminal",{sourceInterval:[681,684]},"|"]]]],Seq:["define",{sourceInterval:[689,704]},null,[],["star",{sourceInterval:[699,704]},["app",{sourceInterval:[699,703]},"Iter",[]]]],Iter_star:["define",{sourceInterval:[719,736]},null,[],["seq",{sourceInterval:[719,727]},["app",{sourceInterval:[719,723]},"Pred",[]],["terminal",{sourceInterval:[724,727]},"*"]]],Iter_plus:["define",{sourceInterval:[743,760]},null,[],["seq",{sourceInterval:[743,751]},["app",{sourceInterval:[743,747]},"Pred",[]],["terminal",{sourceInterval:[748,751]},"+"]]],Iter_opt:["define",{sourceInterval:[767,783]},null,[],["seq",{sourceInterval:[767,775]},["app",{sourceInterval:[767,771]},"Pred",[]],["terminal",{sourceInterval:[772,775]},"?"]]],Iter:["define",{sourceInterval:[708,794]},null,[],["alt",{sourceInterval:[719,794]},["app",{sourceInterval:[719,727]},"Iter_star",[]],["app",{sourceInterval:[743,751]},"Iter_plus",[]],["app",{sourceInterval:[767,775]},"Iter_opt",[]],["app",{sourceInterval:[790,794]},"Pred",[]]]],Pred_not:["define",{sourceInterval:[809,824]},null,[],["seq",{sourceInterval:[809,816]},["terminal",{sourceInterval:[809,812]},"~"],["app",{sourceInterval:[813,816]},"Lex",[]]]],Pred_lookahead:["define",{sourceInterval:[831,852]},null,[],["seq",{sourceInterval:[831,838]},["terminal",{sourceInterval:[831,834]},"&"],["app",{sourceInterval:[835,838]},"Lex",[]]]],Pred:["define",{sourceInterval:[798,862]},null,[],["alt",{sourceInterval:[809,862]},["app",{sourceInterval:[809,816]},"Pred_not",[]],["app",{sourceInterval:[831,838]},"Pred_lookahead",[]],["app",{sourceInterval:[859,862]},"Lex",[]]]],Lex_lex:["define",{sourceInterval:[876,892]},null,[],["seq",{sourceInterval:[876,884]},["terminal",{sourceInterval:[876,879]},"#"],["app",{sourceInterval:[880,884]},"Base",[]]]],Lex:["define",{sourceInterval:[866,903]},null,[],["alt",{sourceInterval:[876,903]},["app",{sourceInterval:[876,884]},"Lex_lex",[]],["app",{sourceInterval:[899,903]},"Base",[]]]],Base_application:["define",{sourceInterval:[918,979]},null,[],["seq",{sourceInterval:[918,963]},["app",{sourceInterval:[918,923]},"ident",[]],["opt",{sourceInterval:[924,931]},["app",{sourceInterval:[924,930]},"Params",[]]],["not",{sourceInterval:[932,963]},["alt",{sourceInterval:[934,962]},["seq",{sourceInterval:[934,948]},["opt",{sourceInterval:[934,944]},["app",{sourceInterval:[934,943]},"ruleDescr",[]]],["terminal",{sourceInterval:[945,948]},"="]],["terminal",{sourceInterval:[951,955]},":="],["terminal",{sourceInterval:[958,962]},"+="]]]]],Base_range:["define",{sourceInterval:[986,1041]},null,[],["seq",{sourceInterval:[986,1022]},["app",{sourceInterval:[986,1001]},"oneCharTerminal",[]],["terminal",{sourceInterval:[1002,1006]},".."],["app",{sourceInterval:[1007,1022]},"oneCharTerminal",[]]]],Base_terminal:["define",{sourceInterval:[1048,1106]},null,[],["app",{sourceInterval:[1048,1056]},"terminal",[]]],Base_paren:["define",{sourceInterval:[1113,1168]},null,[],["seq",{sourceInterval:[1113,1124]},["terminal",{sourceInterval:[1113,1116]},"("],["app",{sourceInterval:[1117,1120]},"Alt",[]],["terminal",{sourceInterval:[1121,1124]},")"]]],Base:["define",{sourceInterval:[907,1168]},null,[],["alt",{sourceInterval:[918,1168]},["app",{sourceInterval:[918,963]},"Base_application",[]],["app",{sourceInterval:[986,1022]},"Base_range",[]],["app",{sourceInterval:[1048,1056]},"Base_terminal",[]],["app",{sourceInterval:[1113,1124]},"Base_paren",[]]]],ruleDescr:["define",{sourceInterval:[1172,1231]},"a rule description",[],["seq",{sourceInterval:[1210,1231]},["terminal",{sourceInterval:[1210,1213]},"("],["app",{sourceInterval:[1214,1227]},"ruleDescrText",[]],["terminal",{sourceInterval:[1228,1231]},")"]]],ruleDescrText:["define",{sourceInterval:[1235,1266]},null,[],["star",{sourceInterval:[1255,1266]},["seq",{sourceInterval:[1256,1264]},["not",{sourceInterval:[1256,1260]},["terminal",{sourceInterval:[1257,1260]},")"]],["app",{sourceInterval:[1261,1264]},"any",[]]]]],caseName:["define",{sourceInterval:[1270,1338]},null,[],["seq",{sourceInterval:[1285,1338]},["terminal",{sourceInterval:[1285,1289]},"--"],["star",{sourceInterval:[1290,1304]},["seq",{sourceInterval:[1291,1302]},["not",{sourceInterval:[1291,1296]},["terminal",{sourceInterval:[1292,1296]},"\n"]],["app",{sourceInterval:[1297,1302]},"space",[]]]],["app",{sourceInterval:[1305,1309]},"name",[]],["star",{sourceInterval:[1310,1324]},["seq",{sourceInterval:[1311,1322]},["not",{sourceInterval:[1311,1316]},["terminal",{sourceInterval:[1312,1316]},"\n"]],["app",{sourceInterval:[1317,1322]},"space",[]]]],["alt",{sourceInterval:[1326,1337]},["terminal",{sourceInterval:[1326,1330]},"\n"],["lookahead",{sourceInterval:[1333,1337]},["terminal",{sourceInterval:[1334,1337]},"}"]]]]],name:["define",{sourceInterval:[1342,1382]},"a name",[],["seq",{sourceInterval:[1363,1382]},["app",{sourceInterval:[1363,1372]},"nameFirst",[]],["star",{sourceInterval:[1373,1382]},["app",{sourceInterval:[1373,1381]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[1386,1418]},null,[],["alt",{sourceInterval:[1402,1418]},["terminal",{sourceInterval:[1402,1405]},"_"],["app",{sourceInterval:[1412,1418]},"letter",[]]]],nameRest:["define",{sourceInterval:[1422,1452]},null,[],["alt",{sourceInterval:[1437,1452]},["terminal",{sourceInterval:[1437,1440]},"_"],["app",{sourceInterval:[1447,1452]},"alnum",[]]]],ident:["define",{sourceInterval:[1456,1489]},"an identifier",[],["app",{sourceInterval:[1485,1489]},"name",[]]],terminal:["define",{sourceInterval:[1493,1531]},null,[],["seq",{sourceInterval:[1508,1531]},["terminal",{sourceInterval:[1508,1512]},'"'],["star",{sourceInterval:[1513,1526]},["app",{sourceInterval:[1513,1525]},"terminalChar",[]]],["terminal",{sourceInterval:[1527,1531]},'"']]],oneCharTerminal:["define",{sourceInterval:[1535,1579]},null,[],["seq",{sourceInterval:[1557,1579]},["terminal",{sourceInterval:[1557,1561]},'"'],["app",{sourceInterval:[1562,1574]},"terminalChar",[]],["terminal",{sourceInterval:[1575,1579]},'"']]],terminalChar:["define",{sourceInterval:[1583,1660]},null,[],["alt",{sourceInterval:[1602,1660]},["app",{sourceInterval:[1602,1612]},"escapeChar",[]],["seq",{sourceInterval:[1621,1660]},["not",{sourceInterval:[1621,1626]},["terminal",{sourceInterval:[1622,1626]},"\\"]],["not",{sourceInterval:[1627,1632]},["terminal",{sourceInterval:[1628,1632]},'"']],["not",{sourceInterval:[1633,1638]},["terminal",{sourceInterval:[1634,1638]},"\n"]],["range",{sourceInterval:[1639,1660]},"\0",""]]]],escapeChar_backslash:["define",{sourceInterval:[1703,1758]},null,[],["terminal",{sourceInterval:[1703,1709]},"\\\\"]],escapeChar_doubleQuote:["define",{sourceInterval:[1765,1822]},null,[],["terminal",{sourceInterval:[1765,1771]},'\\"']],escapeChar_singleQuote:["define",{sourceInterval:[1829,1886]},null,[],["terminal",{sourceInterval:[1829,1835]},"\\'"]],escapeChar_backspace:["define",{sourceInterval:[1893,1948]},null,[],["terminal",{sourceInterval:[1893,1898]},"\\b"]],escapeChar_lineFeed:["define",{sourceInterval:[1955,2009]},null,[],["terminal",{sourceInterval:[1955,1960]},"\\n"]],escapeChar_carriageReturn:["define",{sourceInterval:[2016,2076]},null,[],["terminal",{sourceInterval:[2016,2021]},"\\r"]],escapeChar_tab:["define",{sourceInterval:[2083,2132]},null,[],["terminal",{sourceInterval:[2083,2088]},"\\t"]],escapeChar_unicodeCodePoint:["define",{sourceInterval:[2139,2243]},null,[],["seq",{sourceInterval:[2139,2221]},["terminal",{sourceInterval:[2139,2145]},"\\u{"],["app",{sourceInterval:[2146,2154]},"hexDigit",[]],["opt",{sourceInterval:[2155,2164]},["app",{sourceInterval:[2155,2163]},"hexDigit",[]]],["opt",{sourceInterval:[2165,2174]},["app",{sourceInterval:[2165,2173]},"hexDigit",[]]],["opt",{sourceInterval:[2188,2197]},["app",{sourceInterval:[2188,2196]},"hexDigit",[]]],["opt",{sourceInterval:[2198,2207]},["app",{sourceInterval:[2198,2206]},"hexDigit",[]]],["opt",{sourceInterval:[2208,2217]},["app",{sourceInterval:[2208,2216]},"hexDigit",[]]],["terminal",{sourceInterval:[2218,2221]},"}"]]],escapeChar_unicodeEscape:["define",{sourceInterval:[2250,2309]},null,[],["seq",{sourceInterval:[2250,2291]},["terminal",{sourceInterval:[2250,2255]},"\\u"],["app",{sourceInterval:[2256,2264]},"hexDigit",[]],["app",{sourceInterval:[2265,2273]},"hexDigit",[]],["app",{sourceInterval:[2274,2282]},"hexDigit",[]],["app",{sourceInterval:[2283,2291]},"hexDigit",[]]]],escapeChar_hexEscape:["define",{sourceInterval:[2316,2371]},null,[],["seq",{sourceInterval:[2316,2339]},["terminal",{sourceInterval:[2316,2321]},"\\x"],["app",{sourceInterval:[2322,2330]},"hexDigit",[]],["app",{sourceInterval:[2331,2339]},"hexDigit",[]]]],escapeChar:["define",{sourceInterval:[1664,2371]},"an escape sequence",[],["alt",{sourceInterval:[1703,2371]},["app",{sourceInterval:[1703,1709]},"escapeChar_backslash",[]],["app",{sourceInterval:[1765,1771]},"escapeChar_doubleQuote",[]],["app",{sourceInterval:[1829,1835]},"escapeChar_singleQuote",[]],["app",{sourceInterval:[1893,1898]},"escapeChar_backspace",[]],["app",{sourceInterval:[1955,1960]},"escapeChar_lineFeed",[]],["app",{sourceInterval:[2016,2021]},"escapeChar_carriageReturn",[]],["app",{sourceInterval:[2083,2088]},"escapeChar_tab",[]],["app",{sourceInterval:[2139,2221]},"escapeChar_unicodeCodePoint",[]],["app",{sourceInterval:[2250,2291]},"escapeChar_unicodeEscape",[]],["app",{sourceInterval:[2316,2339]},"escapeChar_hexEscape",[]]]],space:["extend",{sourceInterval:[2375,2394]},null,[],["app",{sourceInterval:[2387,2394]},"comment",[]]],comment_singleLine:["define",{sourceInterval:[2412,2458]},null,[],["seq",{sourceInterval:[2412,2443]},["terminal",{sourceInterval:[2412,2416]},"//"],["star",{sourceInterval:[2417,2429]},["seq",{sourceInterval:[2418,2427]},["not",{sourceInterval:[2418,2423]},["terminal",{sourceInterval:[2419,2423]},"\n"]],["app",{sourceInterval:[2424,2427]},"any",[]]]],["lookahead",{sourceInterval:[2430,2443]},["alt",{sourceInterval:[2432,2442]},["terminal",{sourceInterval:[2432,2436]},"\n"],["app",{sourceInterval:[2439,2442]},"end",[]]]]]],comment_multiLine:["define",{sourceInterval:[2465,2501]},null,[],["seq",{sourceInterval:[2465,2487]},["terminal",{sourceInterval:[2465,2469]},"/*"],["star",{sourceInterval:[2470,2482]},["seq",{sourceInterval:[2471,2480]},["not",{sourceInterval:[2471,2476]},["terminal",{sourceInterval:[2472,2476]},"*/"]],["app",{sourceInterval:[2477,2480]},"any",[]]]],["terminal",{sourceInterval:[2483,2487]},"*/"]]],comment:["define",{sourceInterval:[2398,2501]},null,[],["alt",{sourceInterval:[2412,2501]},["app",{sourceInterval:[2412,2443]},"comment_singleLine",[]],["app",{sourceInterval:[2465,2487]},"comment_multiLine",[]]]],tokens:["define",{sourceInterval:[2505,2520]},null,[],["star",{sourceInterval:[2514,2520]},["app",{sourceInterval:[2514,2519]},"token",[]]]],token:["define",{sourceInterval:[2524,2600]},null,[],["alt",{sourceInterval:[2532,2600]},["app",{sourceInterval:[2532,2540]},"caseName",[]],["app",{sourceInterval:[2543,2550]},"comment",[]],["app",{sourceInterval:[2553,2558]},"ident",[]],["app",{sourceInterval:[2561,2569]},"operator",[]],["app",{sourceInterval:[2572,2583]},"punctuation",[]],["app",{sourceInterval:[2586,2594]},"terminal",[]],["app",{sourceInterval:[2597,2600]},"any",[]]]],operator:["define",{sourceInterval:[2604,2669]},null,[],["alt",{sourceInterval:[2615,2669]},["terminal",{sourceInterval:[2615,2619]},"<:"],["terminal",{sourceInterval:[2622,2625]},"="],["terminal",{sourceInterval:[2628,2632]},":="],["terminal",{sourceInterval:[2635,2639]},"+="],["terminal",{sourceInterval:[2642,2645]},"*"],["terminal",{sourceInterval:[2648,2651]},"+"],["terminal",{sourceInterval:[2654,2657]},"?"],["terminal",{sourceInterval:[2660,2663]},"~"],["terminal",{sourceInterval:[2666,2669]},"&"]]],punctuation:["define",{sourceInterval:[2673,2709]},null,[],["alt",{sourceInterval:[2687,2709]},["terminal",{sourceInterval:[2687,2690]},"<"],["terminal",{sourceInterval:[2693,2696]},">"],["terminal",{sourceInterval:[2699,2702]},","],["terminal",{sourceInterval:[2705,2709]},"--"]]]}]);const Kt=Object.create(I.prototype);function Ht(t,e){for(const r in t)if(r===e)return!0;return!1}function Vt(t,e,n){const i=new qt;let s,o,a,u=!1;const c=(n||zt).createSemantics().addOperation("visit",{Grammars:t=>t.children.map((t=>t.visit())),Grammar(t,r,n,o,a){const u=t.visit();s=i.newGrammar(u),r.child(0)&&r.child(0).visit(),o.children.map((t=>t.visit()));const c=s.build();if(c.source=this.source.trimmed(),Ht(e,u))throw function(t,e){return j("Grammar "+t.name+" is already declared in this namespace")}(c);return e[u]=c,c},SuperGrammar(t,r){const n=r.visit();if("null"===n)s.withSuperGrammar(null);else{if(!e||!Ht(e,n))throw function(t,e,r){return j(e?`Grammar ${t} is not declared in namespace '${e}'`:"Undeclared grammar "+t,r)}(n,e,r.source);s.withSuperGrammar(e[n])}},Rule_define(t,e,r,n,i){o=t.visit(),a=e.children.map((t=>t.visit()))[0]||[],s.defaultStartRule||s.ensureSuperGrammar()===Gt.ProtoBuiltInRules||s.withDefaultStartRule(o);const u=i.visit(),c=r.children.map((t=>t.visit()))[0],l=this.source.trimmed();return s.define(o,a,u,c,l)},Rule_override(t,e,r,n){o=t.visit(),a=e.children.map((t=>t.visit()))[0]||[];const i=this.source.trimmed();s.ensureSuperGrammarRuleForOverriding(o,i),u=!0;const c=n.visit();return u=!1,s.override(o,a,c,null,i)},Rule_extend(t,e,r,n){o=t.visit(),a=e.children.map((t=>t.visit()))[0]||[];const i=n.visit(),u=this.source.trimmed();return s.extend(o,a,i,null,u)},RuleBody(t,e){return i.alt(...e.visit()).withSource(this.source)},OverrideRuleBody(t,e){const r=e.visit(),n=r.indexOf(Kt);if(n>=0){const t=r.slice(0,n),e=r.slice(n+1);return e.forEach((t=>{if(t===Kt)throw j("'...' can appear at most once in a rule body",t.source)})),new N(s.superGrammar,o,t,e).withSource(this.source)}return i.alt(...r).withSource(this.source)},Formals:(t,e,r)=>e.visit(),Params:(t,e,r)=>e.visit(),Alt(t){return i.alt(...t.visit()).withSource(this.source)},TopLevelTerm_inline(t,e){const r=o+"_"+e.visit(),n=t.visit(),c=this.source.trimmed(),l=!(s.superGrammar&&s.superGrammar.rules[r]);u&&!l?s.override(r,a,n,null,c):s.define(r,a,n,null,c);const p=a.map((t=>i.app(t)));return i.app(r,p).withSource(n.source)},OverrideTopLevelTerm_superSplice:t=>Kt,Seq(t){return i.seq(...t.children.map((t=>t.visit()))).withSource(this.source)},Iter_star(t,e){return i.star(t.visit()).withSource(this.source)},Iter_plus(t,e){return i.plus(t.visit()).withSource(this.source)},Iter_opt(t,e){return i.opt(t.visit()).withSource(this.source)},Pred_not(t,e){return i.not(e.visit()).withSource(this.source)},Pred_lookahead(t,e){return i.lookahead(e.visit()).withSource(this.source)},Lex_lex(t,e){return i.lex(e.visit()).withSource(this.source)},Base_application(t,e){const r=e.children.map((t=>t.visit()))[0]||[];return i.app(t.visit(),r).withSource(this.source)},Base_range(t,e,r){return i.range(t.visit(),r.visit()).withSource(this.source)},Base_terminal(t){return i.terminal(t.visit()).withSource(this.source)},Base_paren:(t,e,r)=>e.visit(),ruleDescr:(t,e,r)=>e.visit(),ruleDescrText(t){return this.sourceString.trim()},caseName:(t,e,r,n,i)=>r.visit(),name(t,e){return this.sourceString},nameFirst(t){},nameRest(t){},terminal:(t,e,r)=>e.children.map((t=>t.visit())).join(""),oneCharTerminal:(t,e,r)=>e.visit(),escapeChar(t){try{return d(this.sourceString)}catch(e){if(e instanceof RangeError&&e.message.startsWith("Invalid code point "))throw function(t){const e=t._node;r(e&&e.isNonterminal()&&"escapeChar_unicodeCodePoint"===e.ctorName);const n=t.children.slice(1,-1).map((t=>t.source)),i=n[0].coverageWith(...n.slice(1));return j(`U+${i.contents} is not a valid Unicode code point`,i)}(t);throw e}},NonemptyListOf:(t,e,r)=>[t.visit()].concat(r.children.map((t=>t.visit()))),EmptyListOf:()=>[],_terminal(){return this.sourceString}});return c(t).visit()}var Wt=Ut(["grammar",{source:'OperationsAndAttributes {\n\n  AttributeSignature =\n    name\n\n  OperationSignature =\n    name Formals?\n\n  Formals\n    = "(" ListOf<name, ","> ")"\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = "_"\n    | letter\n\n  nameRest\n    = "_"\n    | alnum\n\n}'},"OperationsAndAttributes",null,"AttributeSignature",{AttributeSignature:["define",{sourceInterval:[29,58]},null,[],["app",{sourceInterval:[54,58]},"name",[]]],OperationSignature:["define",{sourceInterval:[62,100]},null,[],["seq",{sourceInterval:[87,100]},["app",{sourceInterval:[87,91]},"name",[]],["opt",{sourceInterval:[92,100]},["app",{sourceInterval:[92,99]},"Formals",[]]]]],Formals:["define",{sourceInterval:[104,143]},null,[],["seq",{sourceInterval:[118,143]},["terminal",{sourceInterval:[118,121]},"("],["app",{sourceInterval:[122,139]},"ListOf",[["app",{sourceInterval:[129,133]},"name",[]],["terminal",{sourceInterval:[135,138]},","]]],["terminal",{sourceInterval:[140,143]},")"]]],name:["define",{sourceInterval:[147,187]},"a name",[],["seq",{sourceInterval:[168,187]},["app",{sourceInterval:[168,177]},"nameFirst",[]],["star",{sourceInterval:[178,187]},["app",{sourceInterval:[178,186]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[191,223]},null,[],["alt",{sourceInterval:[207,223]},["terminal",{sourceInterval:[207,210]},"_"],["app",{sourceInterval:[217,223]},"letter",[]]]],nameRest:["define",{sourceInterval:[227,257]},null,[],["alt",{sourceInterval:[242,257]},["terminal",{sourceInterval:[242,245]},"_"],["app",{sourceInterval:[252,257]},"alnum",[]]]]}]);!function(t){const e={empty(){return this.iteration()},nonEmpty(t,e,r){return this.iteration([t].concat(r.children))}};Pt.BuiltInSemantics=Pt.createSemantics(t,null).addOperation("asIteration",{emptyListOf:e.empty,nonemptyListOf:e.nonEmpty,EmptyListOf:e.empty,NonemptyListOf:e.nonEmpty})}(Gt.BuiltInRules),function(t){Pt.prototypeGrammarSemantics=t.createSemantics().addOperation("parse",{AttributeSignature:t=>({name:t.parse(),formals:[]}),OperationSignature:(t,e)=>({name:t.parse(),formals:e.children.map((t=>t.parse()))[0]||[]}),Formals:(t,e,r)=>e.asIteration().children.map((t=>t.parse())),name(t,e){return this.sourceString}}),Pt.prototypeGrammar=t}(Wt);const Jt="an indented block",Qt="a dedent";class Yt extends rt{constructor(t){super(t.input),this.state=t}_indentationAt(t){return this.state.userData[t]||0}atEnd(){return super.atEnd()&&0===this._indentationAt(this.pos)}next(){if(0===this._indentationAt(this.pos))return super.next();this.examinedLength=Math.max(this.examinedLength,this.pos)}nextCharCode(){return 0!==this._indentationAt(this.pos)?(this.examinedLength=Math.max(this.examinedLength,this.pos),1114112):super.nextCharCode()}nextCodePoint(){return 0!==this._indentationAt(this.pos)?(this.examinedLength=Math.max(this.examinedLength,this.pos),1114112):super.nextCodePoint()}}class Xt extends I{constructor(t=!0){super(),this.isIndent=t}allowsSkippingPrecedingSpace(){return!0}eval(t){const{inputStream:e}=t,r=t.userData;t.doNotMemoize=!0;const n=e.pos,i=this.isIndent?1:-1;return(r[n]||0)*i>0?(t.userData=Object.create(r),t.userData[n]-=i,t.pushBinding(new ft(0),n),!0):(t.processFailure(n,this),!1)}getArity(){return 1}_assertAllApplicationsAreValid(t,e){}_isNullable(t,e){return!1}assertChoicesHaveUniformArity(t){}assertIteratedExprsAreNotNullable(t){}introduceParams(t){return this}substituteParams(t){return this}toString(){return this.isIndent?"indent":"dedent"}toDisplayString(){return this.toString()}toFailure(t){const e=this.isIndent?Jt:Qt;return new St(this,e,"description")}}const te=new k("indent"),ee=new k("dedent"),re=new N($t,"any",[te,ee],[]),ne=(new qt).newGrammar("IndentationSensitive").withSuperGrammar($t).define("indent",[],new Xt(!0),Jt,void 0,!0).define("dedent",[],new Xt(!1),Qt,void 0,!0).extend("any",[],re,"any character",void 0).build();Object.assign(ne,{_matchStateInitializer(t){t.userData=function(t){let e=0;const r=[0],n=()=>r[r.length-1],i={},s=/( *).*(?:$|\r?\n|\r)/g;let o;for(;null!=(o=s.exec(t));){const[t,s]=o;if(0===t.length)break;const a=s.length,u=n(),c=e+a;if(a>u)r.push(a),i[c]=1;else if(a<u){const t=r.length;for(;n()!==a;)r.pop();i[c]=-1*(t-r.length)}e+=t.length}return r.length>1&&(i[e]=1-r.length),i}(t.input),t.inputStream=new Yt(t)},supportsIncrementalParsing:!1}),Gt.initApplicationParser(zt,Vt);function oe(t,e){const r=Object.create(e||{});if("string"!=typeof t){if(!(t=>!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t))(t))throw new TypeError("Expected string as first argument, got "+f(t));t=t.toString()}return function(t,e){const r=zt.match(t,"Grammars");if(r.failed())throw function(t){const e=new Error;return Object.defineProperty(e,"message",{enumerable:!0,get:()=>t.message}),Object.defineProperty(e,"shortMessage",{enumerable:!0,get:()=>"Expected "+t.getExpectedText()}),e.interval=t.getInterval(),e}(r);Vt(r,e)}(t,r),r}t.ExperimentalIndentationSensitive=ne,t._buildGrammar=Vt,t.grammar=function(t,e){const r=oe(t,e),n=Object.keys(r);if(0===n.length)throw new Error("Missing grammar definition");if(n.length>1){const t=r[n[1]].source;throw new Error(X(t.sourceString,t.startIdx)+"Found more than one grammar definition -- use ohm.grammars() instead.")}return r[n[0]]},t.grammars=oe,t.makeRecipe=Ut,t.ohmGrammar=zt,t.pexprs=_t,t.version="17.1.0",Object.defineProperty(t,"__esModule",{value:!0})}));const CSVImport=function(){function createGrammar(sep=","){const grammar=ohm.grammar(String.raw`
G {
    doc = listOf<row,eol> eol?
    row = cols<"${sep}">
    cols<sep> = nonemptyListOf<col<sep>,sep>
    col<sep> = escaped<sep> | nonEscaped<sep>
    nonEscaped<sep> = (~(eol | sep) any)*
    escaped<sep> = dq (ddq | (~dq any))* dq
    eol = "\r"? "\n"
    dq = "\""
    ddq = "\"\""
}
`),semantics=grammar.createSemantics();return semantics.addOperation("eval",{_iter:(...children)=>children.map((c=>c.eval())),_terminal(){return this.sourceString},doc:(rows,_)=>rows.asIteration().children.map((c=>c.eval())),row:cols=>cols.asIteration().children.map((c=>c.eval())),col:x=>x.eval(),nonEscaped(_){return this.sourceString},escaped:(_,mid,__)=>mid.children.map((c=>c.eval())).join(""),ddq:_=>'"'}),[grammar,semantics]}const isWhitespace=c=>/^\s*$/.test(c);return function(raw_csv,table_view){const freq=(str=raw_csv,[...str].reduce(((acc,char)=>(acc[char]=acc[char]?acc[char]+1:1,acc)),{}));var str;const delimiters=[","].concat([";","\t","|","^"].filter((c=>freq[c])));delimiters.sort(((a,b)=>(freq[a]||0)-(freq[b]||0)));let result=null;for(let sep of delimiters){const[grammar,semantics]=createGrammar(sep),m=grammar.match(raw_csv);if(m.succeeded()){let rows=semantics(m).eval();if(result){let col_count=-1;for(let row of rows)if(!(0==row.length||1==row.length&&isWhitespace(row[0])))if(col_count<0)col_count=row.length;else if(col_count!==row.length){col_count=-1;break}col_count>result[0].length&&(result=rows)}else result=rows}}result&&(result.length>1&&isWhitespace(result[result.length-1])&&result.pop(),result.length>=1&&(table_view.reset(),function(rows,table_view){table_view.disableStateChangeNotifications();let max_columns=0;for(let row of rows)max_columns=Math.max(max_columns,row.length);const num_columns=max_columns;if(0==num_columns)return void console.error("No columns in the table");const table=table_view.model;table.resize(rows.length,num_columns);for(let[row_idx,row]of rows.entries()){let column=0;for(let cell of row)table.getCell(row_idx,column,!0).value(cell),column+=1}table_view.enableStateChangeNotifications()}(result,table_view)))}}(),CookieConsent=function(){let consent_callback=null;const Legal={has_law:["AT","BE","BG","HR","CZ","CY","DK","EE","FI","FR","DE","EL","HU","IE","IT","LV","LT","LU","MT","NL","NO","PL","PT","SK","ES","SE","GB","UK","GR","EU","RO","US-CA"],revokable:["HR","CY","DK","EE","FR","DE","LV","LT","NL","NO","PT","ES"],explicit_action:["HR","IT","ES","NO"]},Config={title:"We use cookies ",description:"We use cookies and similar technologies to improve user experience, personalize content and ads,\n                      and analyze usage of our website. Learn more in our ",privacy_policy_href:"privacy-policy",categories:{essential:{label:"Essential",mandatory:!0,checked:!0,description:"Essential cookies are necessary for features which\n                              are essential to your use of our site and services."},analytics:{label:"Analytics",checked:!0,description:"Analytics cookies allow us to analyze your visits and\n                    actions on our websites, and offer you a more relevant\n                    experience."},targeting:{label:"Targeting",checked:!0,description:"Cookies may be set through our site by our advertising partners, including\n                    Google. Those companies may use them to build a profile of your interests and\n                    show you relevant ads on this and other sites on the Internet."},additional:{label:"Additional",checked:!0,description:"These cookies help us to provide an enhanced user experience,\n                              and can be used by third-parties for non-personalized applications."}},explicit_action:!1,expiry_days:365},extract_allowed_categories=categories_map=>{let allowed=[];for(let[category,desc]of Object.entries(categories_map))1==desc.checked&&allowed.push(category);return allowed},get_allowed_categories=()=>extract_allowed_categories(Config.categories),set_allowed_categories=cat_list=>{for(let[category,desc]of Object.entries(Config.categories)){const is_allowed=-1!=cat_list.indexOf(category);desc.checked=is_allowed}},get_cookie=name=>{const parts=(" "+document.cookie).split(" "+name+"=");return parts.length<2?void 0:parts.pop().split(";").shift()},has_cookie=name=>void 0!==get_cookie(name),save_to_cookie=()=>{!function(name,value,expiryDays,domain,path,secure){const exdate=new Date;exdate.setHours(exdate.getHours()+24*("number"!=typeof expiryDays?365:expiryDays)),document.cookie=name+"="+value+";expires="+exdate.toUTCString()+";path="+(path||"/")+(domain?";domain="+domain:"")+(secure?";secure":"")}("tg-5j4w",JSON.stringify(get_allowed_categories()),Config.expiry_days)},fire_consent_callback=()=>{consent_callback&&consent_callback(get_allowed_categories())},process_consent_dialog_result=categories_map=>{set_allowed_categories(extract_allowed_categories(categories_map)),save_to_cookie(),fire_consent_callback()},show_dialog=()=>{CookieConsentDialog.init(Config),CookieConsentDialog.on_consent(process_consent_dialog_result),CookieConsentDialog.show()};return{init:(country,region,consent_callback_fn)=>{consent_callback=consent_callback_fn,Config.explicit_action=((country,region="")=>{const cr=`${country=country.toUpperCase()}-${region=region.toUpperCase()}`;return Legal.explicit_action.includes(country)||Legal.explicit_action.includes(cr)})(country,region),has_cookie("tg-5j4w")?((()=>{const loaded=JSON.parse(get_cookie("tg-5j4w"));set_allowed_categories(loaded)})(),fire_consent_callback()):((country,region="")=>{const cr=`${country=country.toUpperCase()}-${region=region.toUpperCase()}`;return Legal.has_law.includes(country)||Legal.has_law.includes(cr)})(country,region)?show_dialog():(save_to_cookie(),fire_consent_callback())},show_dialog}}(),CookieConsentDialog=function(){const{h,app}=hyperapp;let is_initialized=!1,consent_callback=null,show_handler=null;const clone=obj=>JSON.parse(JSON.stringify(obj)),get_initial_state=({title,description,privacy_policy_href,categories,explicit_action})=>({dialog_shown:!1,is_customize_mode:!1,focused_category_index:0,categories:clone(categories),title,description,privacy_policy_href,explicit_action}),render=state=>{const title=h("h4",{},state.title),head=h("div",{class:"consent-dialog__head"},title),privacy_policy_link=h("a",{href:state.privacy_policy_href},"Privacy Policy"),description=h("p",{},state.description,privacy_policy_link);let middle;const create_btn=({label,is_primary=!0,onclick})=>h("div",{class:"consent-dialog__btn"+(is_primary?" consent-dialog__btn-main":""),onclick},label);let buttons=[];if(state.is_customize_mode){const accept_all_btn=create_btn({label:"Accept all",is_primary:!1,onclick:select_all}),accept_sel_btn=create_btn({label:"Confirm choices",onclick:on_confirm_selected});buttons.push(accept_all_btn,accept_sel_btn),middle=(()=>{const cats=state.categories;let focused_category_desc=null;const items=Object.entries(cats).map((([cat,desc],index)=>{const is_focused=index==state.focused_category_index,is_mandatory=desc.mandatory||!1,is_checked=desc.checked||is_mandatory||!1;is_focused&&(focused_category_desc=desc);const checkbox=h("input",{type:"checkbox",checked:is_checked?"checked":void 0,onfocus:state=>({...state,focused_category_index:index}),onchange:state=>({...state,categories:{...state.categories,[cat]:{...desc,checked:!is_checked||is_mandatory}}})});return h("label",{},checkbox,desc.label)})),left_panel=h("form",{},items),right_panel=h("div",{},focused_category_desc.description);return h("div",{class:"consent-dialog__choices-panel"},left_panel,right_panel)})()}else{const accept_all_btn=create_btn({label:"Accept all",onclick:on_accept_all}),customize_btn=create_btn({label:"Customize",onclick:on_customize});buttons.push(customize_btn,accept_all_btn),middle=h("div",{class:"consent-dialog__middle"},description)}const bottom=h("div",{class:"consent-dialog__bottom"},buttons),body=h("div",{class:"consent-dialog__body"},head,middle,bottom),wrap=h("div",{class:"consent-dialog__wrap"},body);return h("div",{class:"consent-dialog"+(state.explicit_action?" mandatory":" optional"),style:{display:state.dialog_shown?"block":"none"},onclick:dispose_dialog},wrap)},subscribe_to_show=dispatch=>(show_handler=function(){dispatch((function(state){return{...state,dialog_shown:!0,is_customize_mode:!1}}))},function(){}),get_subscriptions=state=>[subscribe_to_show],select_all=state=>{const cats=clone(state.categories);for(let[_,desc]of Object.entries(cats))desc.checked=!0;return{...state,categories:cats}},on_confirm_selected=state=>((state=>{consent_callback&&consent_callback(state.categories)})(state),hide_dialog(state)),on_accept_all=state=>on_confirm_selected(select_all(state)),on_customize=state=>(state=>{const cats=clone(state.categories);for(let[_,desc]of Object.entries(cats))desc.checked=desc.mandatory||!1;return{...state,categories:cats}})({...state,is_customize_mode:!0}),hide_dialog=state=>({...state,dialog_shown:!1}),dispose_dialog=(state,event)=>{const is_outer_click=event.target.classList.contains("consent-dialog");return!state.explicit_action&&is_outer_click?on_confirm_selected(state):state};return{init:config=>{if(!is_initialized){const app_element=document.createElement("div");document.body.appendChild(app_element),app({init:get_initial_state(config),view:render,node:app_element,subscriptions:get_subscriptions}),is_initialized=!0}},on_consent:callback=>{consent_callback=callback},show:()=>{is_initialized?show_handler():console.warn("init() should be called first!")}}}();var wcwidth=function(){"use strict";var combining=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],DEFAULTS={nul:0,control:0};function wcwidth(ucs,opts){return 0===ucs?opts.nul:ucs<32||ucs>=127&&ucs<160?opts.control:function(ucs){var mid,min=0,max=combining.length-1;if(ucs<combining[0][0]||ucs>combining[max][1])return!1;for(;max>=min;)if(mid=Math.floor((min+max)/2),ucs>combining[mid][1])min=mid+1;else{if(!(ucs<combining[mid][0]))return!0;max=mid-1}return!1}(ucs)?0:1+(ucs>=4352&&(ucs<=4447||9001==ucs||9002==ucs||ucs>=11904&&ucs<=42191&&12351!=ucs||ucs>=44032&&ucs<=55203||ucs>=63744&&ucs<=64255||ucs>=65040&&ucs<=65049||ucs>=65072&&ucs<=65135||ucs>=65280&&ucs<=65376||ucs>=65504&&ucs<=65510||ucs>=131072&&ucs<=196605||ucs>=196608&&ucs<=262141))}function wcswidth(str,opts){var h,l,n,s=0;if("string"!=typeof str)return wcwidth(str,opts);for(var i=0;i<str.length;i++){if((h=str.charCodeAt(i))>=55296&&h<=56319&&((l=str.charCodeAt(++i))>=56320&&l<=57343?h=1024*(h-55296)+(l-56320)+65536:i--),(n=wcwidth(h,opts))<0)return-1;s+=n}return s}return function(str){return wcswidth(str,DEFAULTS)}}(),GlobalMessageHub=$.observable({}),GlobalEvents={STOP_EDITING_TABLE:"STOP_EDITING_TABLE"},Keys={TAB:9,ENTER:13,SHIFT:16,ALT:18,ESC:27,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DEL:46,WIN:91,RIGHT_ALT:225};Array.max=function(array){return Math.max.apply(Math,array)},Array.prototype.map||(Array.prototype.map=function(fun){"use strict";if(null==this)throw new TypeError;var t=Object(this),len=t.length>>>0;if("function"!=typeof fun)throw new TypeError;for(var res=new Array(len),thisArg=arguments.length>=2?arguments[1]:void 0,i=0;i<len;i++)i in t&&(res[i]=fun.call(thisArg,t[i],i,t));return res}),Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement,fromIndex){if(null==this)throw new TypeError('"this" is null or not defined');var length=this.length>>>0;for(fromIndex=+fromIndex||0,Math.abs(fromIndex)===1/0&&(fromIndex=0),fromIndex<0&&(fromIndex+=length)<0&&(fromIndex=0);fromIndex<length;fromIndex++)if(this[fromIndex]===searchElement)return fromIndex;return-1}),Array.prototype.diff=function(a){return this.filter((function(i){return a.indexOf(i)<0}))};var htmlEncode=function(){var tagsToReplace={"&":"&amp;","<":"&lt;",">":"&gt;"};function replaceTag(tag){return tagsToReplace[tag]||tag}return function(str){return str.replace(/[&<>]/g,replaceTag)}}(),htmlSubsetEncode=function(){var tagsToReplace={"&":"&amp;","<":"&lt;",">":"&gt;"};function replaceTag(tag){return tagsToReplace[tag]||tag}function is_valid_tag(tag){return tag.match(/(em)|(strong)|(a)|(br)/gi)}function dom_tree_to_str(root,is_root,is_valid_tag_fn){var result=[];if(!root)return result;is_valid_tag_fn||(is_valid_tag_fn=is_valid_tag);var child_count=root.childNodes.length;if(child_count>=1)for(var i=0;i<child_count;++i){var child_res=dom_tree_to_str(root.childNodes[i],!1,is_valid_tag_fn);result=result.concat(child_res)}else result.push(root.textContent.replace(/[&<>]/g,replaceTag));var node_name=root.nodeName;if(!is_root&&"#text"!=node_name){var valid_tag=is_valid_tag_fn(node_name),lt=valid_tag?"<":"&lt;",gt=valid_tag?">":"&gt;",open_tag=lt+node_name+gt;result.splice(0,0,open_tag);var close_tag=node_name.match(/(br)/gi)?"":lt+"/"+node_name+gt;result.push(close_tag)}return result}return function(str,is_valid_tag_fn){var htmlString,div;return dom_tree_to_str((htmlString=str,(div=document.createElement("div")).innerHTML=htmlString.trim(),div),!0,is_valid_tag_fn).join("")}}(),htmlToHtmlSubset=function(){function is_valid_tag(tag){return tag.match(/(em)|(strong)|(a)|(div)|(br)/gi)}return function(str){return str=(str=htmlSubsetEncode(str,is_valid_tag)).replace(/(<div>(?!<br>))/gi,"<br>").replace(/<\/?div>/gi,"")}}(),htmlDecode=function(){var el=$("<div>");return function(value){return value?el.html(value).text():""}}();function textToHTML(str){return String(str).split("\n").map(htmlEncode).join("<br>").replace(/[ ]{2,}/g,(function(spaces){for(var parts=[],i=spaces.length-1;i>=0;--i)parts.push("&nbsp;");return parts.join("")})).replace(/<br>[ ]/g,"<br>&nbsp;")}function textToHTMLSubset(str){var glued=String(str).split("\n").join("<br>");return htmlSubsetEncode(glued)}var preventDefault=function(event){event.preventDefault()},ZeroWidthSpace="",Utils=Utils||{};!function(){"use strict";function repeat(value,times){for(var res=[],i=0;i<times;++i)res.push(value);return res}function join(list,glue){var res="",is_first=!0;glue=glue||"";for(var i=0;i<list.length;++i)is_first?is_first=!1:res+=glue,res+=list[i];return res}function format_attr(attr){if(null==attr)return"";var list=[];for(var prop in attr)if(attr.hasOwnProperty(prop)){var value=attr[prop];null!=value?list.push(prop.toString()+'="'+value.toString()+'"'):list.push(prop.toString())}return list.length>0?" "+list.join(" "):""}window.console||(window.console={}),window.console.log||(window.console.log=function(){});const rgb_to_hex_color_component=c=>{const res=Number(c).toString(16);return 1==res.length?"0"+res:res},RGBColorRegex=/rgb\(([\d\s,.]+)\)/i;function isObject(item){return item&&"object"==typeof item&&!Array.isArray(item)}Utils.join_strings=function(strings,separator,options={}){const prefix=options.prefix||"",suffix=options.suffix||"",max_line_length=options.max_line_length||120,lines_separator=options.lines_separator||"\n";let str=prefix,curr_line_len=str.length;return strings.forEach(((val,index)=>{const sep=index+1<strings.length?separator:"";curr_line_len+val.length+sep.length>max_line_length&&(str+=lines_separator,curr_line_len=Math.max(0,lines_separator.length-1)),str+=val+sep,curr_line_len+=val.length+sep.length})),curr_line_len+suffix.length>max_line_length&&(str+=lines_separator),str+=suffix,str},Utils.range=function(start,end,step){var res=[];if(start=parseInt(start),!isNaN(start))if(null==end&&(end=start,start=0),null==step&&(step=1),step>0)for(;start<end;start+=step)res.push(start);else if(step<0)for(;start>end;start+=step)res.push(start);return res},Utils.repeat=repeat,Utils.join=join,Utils.ljust=function(str,len){return str+join(repeat(" ",Math.max(0,len-str.length)))},Utils.freq_call_filter=function(fun,min_interval){var prev_time=(new Date).getTime();return function(){var curr_time=(new Date).getTime(),delta=curr_time-prev_time;prev_time=curr_time,delta>min_interval&&fun.apply(null,arguments)}},Utils.select_text=function(element){var range,selection,doc=document,text=doc.getElementById(element);doc.body.createTextRange?((range=doc.body.createTextRange()).moveToElementText(text),range.select()):window.getSelection&&(selection=window.getSelection(),(range=doc.createRange()).selectNodeContents(text),selection.removeAllRanges(),selection.addRange(range))},Utils.format_attr=format_attr,Utils.format_tag=function(name,inner,attr){return"<"+name+format_attr(attr)+">"+inner+"</"+name+">"},Utils.is_ctrl_key_combo=function(event,key){return(event.ctrlKey||event.metaKey)&&String.fromCharCode(event.which).toLowerCase()==key.toLowerCase()},Utils.get_compact_color_value=function(color){const match=(""+color).match(RGBColorRegex);if(match){const components=match[1].split(/\s*,\s*/);if(3==components.length){const r=rgb_to_hex_color_component(components[0]),g=rgb_to_hex_color_component(components[1]),b=rgb_to_hex_color_component(components[2]);return r[0]==r[1]&&g[0]==g[1]&&b[0]==b[1]?`#${r[0]}${g[0]}${b[0]}`.toUpperCase():`#${r}${g}${b}`.toUpperCase()}}return color},Utils.normalize_json_string=function(s){return s=(s=s.replace(/\\n/g,"\\n").replace(/\\'/g,"\\'").replace(/\\"/g,'\\"').replace(/\\&/g,"\\&").replace(/\\r/g,"\\r").replace(/\\t/g,"\\t").replace(/\\b/g,"\\b").replace(/\\f/g,"\\f")).replace(/[\u0000-\u0019]+/g,"")},Utils.mergeDeep=function mergeDeep(target,...sources){if(!sources.length)return target;const source=sources.shift();if(isObject(target)&&isObject(source))for(const key in source)isObject(source[key])?(target.hasOwnProperty(key)||(target[key]={}),mergeDeep(target[key],source[key])):Object.assign(target,{[key]:source[key]});return mergeDeep(target,...sources)}}();const PasteHelper=function(){let callback=null,is_initialized=!1,paste_timeout=null,start_scroll_pos=null,entry=null;function afterPasteCleanup(){entry.html("").hide(),window.scrollTo(start_scroll_pos.left,start_scroll_pos.top)}function handlePaste(e,cleanup_fn=null){if(e&&e.clipboardData&&e.clipboardData.types&&e.clipboardData.getData){const types=e.clipboardData.types;if(types instanceof DOMStringList&&types.contains("text/html")||types.indexOf&&-1!==types.indexOf("text/html")){const pastedHtml=e.clipboardData.getData("text/html"),pastedText=e.clipboardData.getData("text/plain");return e.stopPropagation(),e.preventDefault(),processPastedContent(pastedHtml,pastedText),!1}}return waitForPastedData(e.target||e.srcElement,1,cleanup_fn),!0}function waitForPastedData(target_elem,time,cleanup_fn){if(target_elem.childNodes&&target_elem.childNodes.length>0){const pastedData=target_elem.innerHTML,pastedText=target_elem.innerText;cleanup_fn&&cleanup_fn(),paste_timeout=null,processPastedContent(pastedData,pastedText)}else paste_timeout=time<150?setTimeout((function(){waitForPastedData(target_elem,2*time,cleanup_fn)}),time):null}function processPastedContent(pasted_html,pasted_plain){callback&&(callback(pasted_html,pasted_plain),callback=null)}function startEditing(){is_initialized||(entry=$("<div>",{contenteditable:!0}),entry.css({position:"absolute",left:"0px",top:"0px",width:"1px",height:"1x",overflow:"hidden","user-select":"text"}),entry.on("paste",(e=>handlePaste(e.originalEvent,afterPasteCleanup))),entry.appendTo($("body")),is_initialized=!0),start_scroll_pos={left:window.scrollX,top:window.scrollY},entry.css({left:window.scrollX+"px",top:window.scrollY+"px"}),null!=paste_timeout&&(window.clearTimeout(paste_timeout),paste_timeout=null),entry.show(),entry.focus()}return{start:function(callback_fn){callback=callback_fn,startEditing()},handleDirectly:function(paste_event,callback_fn){callback=callback_fn;let paste_target=paste_event.target||paste_event.srcElement;handlePaste(paste_event,(()=>{paste_target.innerHTML=""}))}}}();var TableImport=TableImport||{};!function(){const is_empty_css_value=value=>!value||-1!==(value||"").indexOf("none"),is_transparent_css_color=value=>!value||(value||"").match(/(rgba?\([0\s,]+\))|(transparent)/i),create_css_extractor=(key,empty_value_pred=is_empty_css_value,value_processor=null)=>(element_style,default_style,output_style)=>{const value=element_style[key],is_empty_value=empty_value_pred(value);output_style[key]=is_empty_value?default_style[key]:value_processor?value_processor(value):value},css_extractors=[create_css_extractor("background-color",is_transparent_css_color,Utils.get_compact_color_value),create_css_extractor("color",is_transparent_css_color,Utils.get_compact_color_value),create_css_extractor("font-style"),create_css_extractor("font-weight"),create_css_extractor("text-align"),create_css_extractor("text-decoration"),create_css_extractor("vertical-align")],extract_css=function(element,default_css={}){let style={};const wnd=element.ownerDocument.defaultView;if(wnd&&wnd.getComputedStyle){const comp_style=wnd.getComputedStyle(element);css_extractors.forEach((fn=>fn(comp_style,default_css,style)))}return style},extract_css_top_down=function(parent,default_css={}){let style=extract_css(parent,default_css),child=parent.firstChild;for(;child&&1===child.nodeType;)style=extract_css(child,style),child=child.firstChild;return style};function extractCellsFromString(str,allow_single_space_sep){var cells=[];if(str=str.trim(),/<\w+[^>]*>/gi.test(str))try{str=$(str).text()}catch(err){str=str.replace(/(<([^>]+)>)/gi,"")}if(str.length>0){var re=allow_single_space_sep?/\s{1,}\t*|\t\s*/:/\s{2,}\t*|\t\s*/;cells=str.trim().split(re)}return cells}function linesToRows(lines,allow_single_space_sep){var rows=[];return lines.forEach((function(line){var cells=extractCellsFromString(line,allow_single_space_sep);cells.length>0&&rows.push(cells)})),rows}function getMinMaxRowLength(rows){if(0==rows.length)return{max:0,min:0};var max_row_len=rows[0].length,min_row_len=max_row_len;return rows.forEach((function(row){max_row_len=Math.max(max_row_len,row.length),min_row_len=Math.min(min_row_len,row.length)})),{max:max_row_len,min:min_row_len}}const force_inline_style=function(wnd,elem){if(!wnd.getComputedStyle||!elem.dataset)return;const src=wnd.getComputedStyle(elem,null);let dest={},value="";""!=(value=src.getPropertyValue("background-color"))&&(dest.backgroundColor=Utils.get_compact_color_value(value)),value==src.getPropertyValue("color")!=""&&(dest.color=Utils.get_compact_color_value(value)),value==src.getPropertyValue("font-style")!=""&&(dest.fontStyle=value),value==src.getPropertyValue("font-weight")!=""&&(dest.fontWeight=value),value==src.getPropertyValue("text-align")!=""&&(dest.textAlign=value),value==src.getPropertyValue("text-decoration")!=""&&(dest.textDecoration=value),value==src.getPropertyValue("vertical-align")!=""&&(dest.verticalAlign=value),elem.dataset.computedStyle=JSON.stringify(dest);for(let child of elem.childNodes)1===child.nodeType&&force_inline_style(wnd,child)};function extract_table_from_html_page(page_html,return_table_node=!1){let result=null,frame=document.createElement("iframe");if(frame){frame.src="javascript:undefined;",document.body.appendChild(frame);let paste_doc=frame.contentWindow.document;paste_doc.write(page_html),paste_doc.close();const tables=paste_doc.getElementsByTagName("table");if(tables.length>=1){const table=tables[0];if(result=function(table){const table_style=extract_css(table);let table_rows=$(table).find("tr"),rows=[];return table_rows.each((function(ri,tr){const row_style=extract_css(tr,table_style),cells=$(tr).find("td,th");let row=[];if(cells.each((function(_,td){if(ri>0){const row_above=rows[rows.length-1];for(;row.length<row_above.length&&row_above[row.length].rowspan>1;){const entry=row_above[row.length];row.push({value:"",style:entry.style,colspan:0,rowspan:entry.rowspan-1})}}const cell_style=extract_css_top_down(td,row_style),colspan=parseInt($(td).attr("colspan")||1),rowspan=parseInt($(td).attr("rowspan")||1);let chars=[],per_char_markup=[];Markup.forEachLeafCharInNode(td,((chr,_,markup)=>{chars.push(chr),per_char_markup.push(markup)}));let entry={value:chars.join(""),style:cell_style,per_char_markup,colspan,rowspan};if(row.push(entry),colspan>1){let dummy_entry={value:"",style:cell_style,colspan:0,rowspan};for(let k=1;k<colspan;++k)row.push(dummy_entry)}})),ri>0){const row_above=rows[rows.length-1];for(;row.length<row_above.length&&row_above[row.length].rowspan>1;){const entry=row_above[row.length];row.push({value:"",style:entry.style,colspan:0,rowspan:entry.rowspan-1})}}rows.push(row)})),rows}(table),return_table_node){force_inline_style(frame.contentWindow,table),result=[result,document.adoptNode(table)]}}document.body.removeChild(frame)}return result}const extract_from_page_source=(src_str,return_table_node=!1)=>{const match=src_str.match(/<html[\s\S]*?>[\s\S]*?<\/html>/i);return match?extract_table_from_html_page(match[0],return_table_node):null},extract_from_table_source=(src_str,return_table_node=!1)=>{const match=src_str.match(/<table[\s\S]*?>[\s\S]*?<\/table>/i);if(match){const preamble=src_str.substring(0,match.index),table_src=match[0],style_re=/<style[\s\S]*?>[\s\S]*?<\/style>/i,style_match=preamble.match(style_re);return extract_table_from_html_page(`<!doctype html><html>\n                                <head><meta charset="utf-8"></head>\n                                <body>${style_match?style_match[0]:""}${table_src}</body>\n                              </html>`,return_table_node)}return null},extract_from_just_rows=(src_str,return_table_node=!1)=>{const match=src_str.match(/<tr[\s\S]*?>[\s\S]*<\/tr>/i);if(match){const preamble=src_str.substring(0,match.index),rows_src=match[0],style_re=/<style[\s\S]*?>[\s\S]*?<\/style>/i,style_match=preamble.match(style_re);return extract_table_from_html_page(`<!doctype html><html>\n                                <head><meta charset="utf-8"></head>\n                                <body>${style_match?style_match[0]:""}\n                                <table>${rows_src}</table></body>\n                              </html>`,return_table_node)}return null},split_into_lines=str=>(str||"").split(/\r?\n/);function extractTableFromTableElement(src_as_html,src_as_text,return_table_node=!1){const normalize=src=>split_into_lines(src).join(" "),extractors=[extract_from_page_source,extract_from_table_source,extract_from_just_rows],sources=[src_as_html,src_as_text];for(let j=0;j<sources.length;++j){const src=normalize(sources[j]);for(let i=0;i<extractors.length;++i){const result=(0,extractors[i])(src,return_table_node);if(result)return result}}const parsers=[parseMarkdownToHTML,parseWikiToHTML];for(let i=0;i<parsers.length;++i){const md2html=parsers[i](src_as_text);if(md2html)return extract_from_table_source(md2html,return_table_node)}return null}function parseMarkdownToHTML(src_as_text){const res=ParseTable(src_as_text.trim(),"markdown");if(res){let rowsHtml=[],align=[];res.forEach(((cells,rowIndex)=>{cells.hasOwnProperty("align")&&(align=cells.align)})),res.forEach(((cells,rowIndex)=>{if(!cells.hasOwnProperty("align")){const tag=0==rowIndex?"th":"td",html=cells.map((function(cell,cellIndex){const style=align.length>cellIndex?` style="text-align: ${align[cellIndex]};"`:"";return`<${tag}${style}>${cell.trim()}</${tag}>`})).join("");rowsHtml.push(`<tr>${html}</tr>`)}}));return`<table>${rowsHtml.join("")}</table>`}return null}function parseWikiToHTML(src_as_text){const res=ParseTable(src_as_text.trim(),"wiki"),is_supported_attr=attr=>-1!="colspan|rowspan|style".indexOf(attr),attributes_to_str=attributes=>{if(!attributes)return"";let attr=[];for(let i=0;i<attributes.length;++i){const[key,value]=attributes[i];is_supported_attr(key)&&attr.push(`${key}="${value}"`)}return attr.join(" ")};if(res&&res.rows){let rowsHtml=[];res.rows.forEach(((row,rowIndex)=>{const html=row.cells.map((function(cell,cellIndex){const attr_glued=attributes_to_str(cell.attr),val=cell.val.trim(),tag=cell.is_header?"th":"td";return`<${tag} ${attr_glued}>${val}</${tag}>`})).join(""),row_attr=attributes_to_str(row.attr);rowsHtml.push(`<tr ${row_attr}>${html}</tr>`)}));const rowsGlued=rowsHtml.join("");return`<table ${attributes_to_str(res.tableAttr)}>${rowsGlued}</table>`}return null}TableImport.extractTableFromString=function(src_as_html,src_as_text){return extractTableFromTableElement(src_as_html,src_as_text)||function(src_as_text){const res=ParseTable(src_as_text,"markdown");let rows=null;return res&&(rows=[],res.forEach((el=>{el&&el.hasOwnProperty("align")||rows.push(el)}))),rows}(src_as_text)||function(src_as_html,src_as_text){let lines=[];if(src_as_text)lines=split_into_lines(src_as_text);else{const pasted=$("<div>"+src_as_html+"</div>");pasted.find("div").length>0?pasted.find("div").each((function(i,div){lines.push($(div).text())})):(src_as_html=(src_as_html=(src_as_html=pasted.html()).replace(/<br\/?>/gi,"\n")).replace(/&nbsp;/g," "),lines=split_into_lines(src_as_html))}let rows=linesToRows(lines,!1);if(1==getMinMaxRowLength(rows).max&&rows.length>1){const alt_rows=linesToRows(lines,!0),alt_min_max_len=getMinMaxRowLength(alt_rows);alt_min_max_len.min==alt_min_max_len.max&&alt_min_max_len.min>1&&(rows=alt_rows)}return rows}(src_as_html,src_as_text)},TableImport.extractCellsFromString=extractCellsFromString,TableImport.extractTableFromTableElement=extractTableFromTableElement}();var TableModel=function(){"use strict";function Cell(initial_value){this.value_=initial_value||"",this.colspan_=1,this.rowspan_=1,this.per_char_markup_ids_=[];var len=this.value_.length;this.per_char_markup_ids_.length=len;for(var i=0;i<len;++i)this.per_char_markup_ids_[i]=0;$.observable(this)}function runLengthEncodeArray(array){for(var encoded=[],slice_start=0,len=array.length,i=0;i<len;++i)i+1!=len&&array[i+1]==array[i]||(encoded.push(array[i]),encoded.push(i-slice_start+1),slice_start=i+1);return encoded}function TableModel(){this.rows=[],this.row_count=0,this.col_count=0,$.observable(this)}return Cell.prototype.value=function(){if(arguments.length>=1){var prev=this.value_;this.value_=arguments[0];var len=this.value_.length;if(arguments.length>=2&&arguments[1]){var markup_ids=arguments[1];if(markup_ids.length<len){console.error("Too few markup ids");for(var i=markup_ids.length;i<len;++i)markup_ids.push(markup_ids[0])}this.per_char_markup_ids_=markup_ids.slice()}else{this.per_char_markup_ids_.length=len;for(i=0;i<len;++i)this.per_char_markup_ids_[i]=0}return this.trigger("value_change",this.value_,prev,this.per_char_markup_ids_),prev}return this.value_},Cell.prototype.swap=function(other){const a=[this.value_,this.per_char_markup_ids_],b=[other.value_,other.per_char_markup_ids_];this.value(b[0],b[1]),other.value(a[0],a[1])},Cell.prototype.colspan=function(n){if(arguments.length>0){var prev=this.colspan_;return this.colspan_=arguments[0],this.colspan_!==prev&&this.trigger("colspan_change",this.colspan_,prev),prev}return this.colspan_},Cell.prototype.rowspan=function(n){if(arguments.length>0){var prev=this.rowspan_;return this.rowspan_=arguments[0],this.rowspan_!==prev&&this.trigger("rowspan_change",this.rowspan_,prev),prev}return this.rowspan_},Cell.create=function(value){var obj=new Cell;return obj.value(value),obj},Cell.prototype.isVisible=function(){return this.colspan()>0&&this.rowspan()>0},Cell.prototype.setMarkupToDefault=function(){const markup_ids=this.per_char_markup_ids_;for(let i=0,n=markup_ids.length;i<n;++i)markup_ids[i]=0},Cell.prototype.appendCellContents=function(other){this.value_+=other.value_,this.per_char_markup_ids_.push(...other.per_char_markup_ids_)},Cell.prototype.isEmpty=function(){return""==this.value_.trim()},Cell.prototype.dump=function(){return{value:this.value(),cspan:this.colspan(),rspan:this.rowspan(),markup:runLengthEncodeArray(this.per_char_markup_ids_)}},Cell.prototype.dumpTransposed=function(){return{value:this.value(),cspan:this.rowspan(),rspan:this.colspan(),markup:runLengthEncodeArray(this.per_char_markup_ids_)}},Cell.prototype.load=function(obj,ignore){var markup=void 0;obj.markup&&(markup=function(array){for(var decoded=[],i=0;i+1<array.length;i+=2)for(var value=array[i],times=array[i+1],j=0;j<times;++j)decoded.push(value);return decoded}(obj.markup)),this.value(obj.value,markup),this.colspan(ignore&&ignore.colspan?1:obj.cspan),this.rowspan(ignore&&ignore.rowspan?1:obj.rspan)},TableModel.prototype.dump=function(){var out_rows=[];return this.rows.forEach((function(row,index){var out=row.map((function(cell){return cell.dump()}));out_rows.push(out)})),{rows:out_rows}},TableModel.prototype.dumpTransposed=function(){for(var rows_transposed=[],c=0;c<this.col_count;++c){for(var cells=[],r=0;r<this.row_count;++r)cells.push(this.rows[r][c].dumpTransposed());rows_transposed.push(cells)}return{rows:rows_transposed}},TableModel.prototype.load=function(data,ignore){if(!data||!data.rows)throw"Invalid data format: rows expected";const rows=data.rows,col_count=rows[0].length;this.resize(rows.length,col_count);for(let r=0;r<rows.length;++r){const in_row=rows[r],row=this.rows[r];for(let c=0;c<col_count;++c)row[c].load(in_row[c],ignore)}},TableModel.prototype.insertRow=function(cells_data,index,existing_cells){const len=(cells_data||existing_cells||[]).length;if(0!=this.col_count&&len!=this.col_count)throw new Error("Invalid number of cells in cells_data");if(null==index&&(index=this.row_count),index<this.row_count)for(let i=this.col_count-1;i>=0;--i)this.splitCell(index,i);let cells=existing_cells||[];for(let i=cells.length;i<len;++i)cells.push(new Cell(cells_data[i]));this.rows.splice(index,0,cells),this.row_count+=1,this.col_count=cells.length,this.trigger("row_inserted",index,cells),this.trigger("state_change")},TableModel.prototype.insertColumn=function(cells_data,col_index,existing_cells){var len=(cells_data||existing_cells).length;if(0!=this.row_count&&len!=this.row_count)throw new Error("Invalid number of cells in inserted column");if(null==col_index&&(col_index=this.col_count),col_index<this.col_count){for(var should_split=!1,i=0;i<this.row_count;++i){this.rows[i][col_index].colspan()<0&&(should_split=!0)}if(should_split)for(i=this.row_count-1;i>=0;--i)this.splitCell(i,col_index)}var cells=[],count=0;this.rows.forEach((function(row,index){var cell=existing_cells?existing_cells[index]:new Cell(cells_data[index]);row.splice(col_index,0,cell),cells.push(cell),++count})),this.col_count+=1,this.row_count=count,this.trigger("column_inserted",col_index,cells),this.trigger("state_change")},TableModel.prototype.insertEmptyColumn=function(col_index){var cells_data=this.rows.map((function(){return""}));this.insertColumn(cells_data,col_index)},TableModel.prototype.insertEmptyRow=function(row_index){const cells_data=new Array(this.rows[0].length).fill("");this.insertRow(cells_data,row_index)},TableModel.prototype.removeRow=function(row_index){if(row_index<0||row_index>=this.row_count)throw new Error("Index out of bounds: "+row_index);if(1==this.row_count)return;for(let i=this.col_count-1;i>=0;--i)this.splitCell(row_index,i);const removed_cells=this.rows[row_index];return this.rows.splice(row_index,1),this.row_count-=1,this.trigger("row_removed",row_index,removed_cells),this.trigger("state_change"),removed_cells},TableModel.prototype.removeColumn=function(col_index){if(col_index<0||col_index>=this.col_count)throw new Error("Index out of bounds: "+col_index);if(1==this.col_count)return;const cells=[];for(let i=this.row_count-1;i>=0;--i){this.splitCell(i,col_index);const row=this.rows[i];cells.push(row[col_index]),row.splice(col_index,1)}return this.col_count-=1,cells.reverse(),this.trigger("column_removed",col_index,cells),this.trigger("state_change"),cells},TableModel.prototype.forEachCellInRow=function(row_index,fn){0<=row_index&&row_index<this.row_count&&this.rows[row_index].forEach(fn)},TableModel.prototype.forEachCellInColumn=function(col_index,fn){if(0<=col_index&&col_index<this.col_count){const rows=this.rows;for(let i=0;i<this.row_count;++i)fn(rows[i][col_index],i)}},TableModel.prototype.forEachCellInRange=function(start_row,start_col,end_row,end_col,fn){for(var r=start_row;r<=end_row;++r)for(var row=this.rows[r],c=start_col;c<=end_col;++c)fn(row[c],r,c)},TableModel.prototype.forEachCell=function(fn){this.forEachCellInRange(0,0,this.row_count-1,this.col_count-1,fn)},TableModel.prototype.getVisibleCellPos=function(row,col){var cell=this.getCell(row,col,!0);return cell.rowspan()<0&&(row+=cell.rowspan()),cell.colspan()<0&&(col+=cell.colspan()),{row,col}},TableModel.prototype.getColumn=function(col_index){var cells=[];return this.forEachCellInColumn(col_index,(function(cell){cells.push(cell)})),cells},TableModel.prototype.getCell=function(row_index,col_index,include_hidden){if(row_index<0||row_index>=this.row_count)throw new Error("Row index out of bounds: "+row_index);if(col_index<0||col_index>=this.col_count)throw new Error("Index out of bounds: "+col_index);var cell=this.rows[row_index][col_index];return cell.isVisible()||include_hidden||(cell=this.rows[row_index+Math.min(cell.rowspan(),0)][col_index+Math.min(cell.colspan(),0)]),cell},TableModel.prototype.mergeCells=function(start_row,start_col,end_row,end_col){const colspan=end_col-start_col+1,rowspan=end_row-start_row+1;if(colspan<=1&&rowspan<=1)return;const first_cell=this.rows[start_row][start_col],first_cell_empty=""==first_cell.value_.trim();for(let r=start_row;r<=end_row;++r){for(let c=start_col;c<=end_col;++c)this.splitCell(r,c);const row=this.rows[r];for(let c=start_col;c<=end_col;++c){const cell=row[c];if(c==start_col?cell.colspan(colspan):cell.colspan(start_col-c),r==start_row?cell.rowspan(rowspan):cell.rowspan(start_row-r),first_cell_empty&&cell!==first_cell){if(first_cell.value_.length>0){const sep=c==start_col&&r>=start_row?"\n":" ";first_cell.value_+=sep;const markups=first_cell.per_char_markup_ids_;markups.push(markups[markups.length-1])}first_cell.appendCellContents(cell)}}}first_cell.trigger("value_change",first_cell.value_,"",first_cell.per_char_markup_ids_),this.trigger("state_change")},TableModel.prototype.splitCell=function(row_index,col_index){let cell=this.rows[row_index][col_index];const colspan=cell.colspan(),rowspan=cell.rowspan();if(colspan<0||rowspan<0)colspan<0&&(col_index+=colspan),rowspan<0&&(row_index+=rowspan),this.splitCell(row_index,col_index);else if(colspan>1||rowspan>1){for(let r=row_index;r<row_index+rowspan;++r)for(let c=col_index;c<col_index+colspan;++c)cell=this.rows[r][c],cell.colspan(1),cell.rowspan(1);this.trigger("state_change")}},TableModel.prototype.resize=function(row_count,col_count){if(null==row_count&&(row_count=this.row_count),null==col_count&&(col_count=this.col_count),col_count<=0||row_count<=0)throw new Error("Illegal arguments - row_count: "+row_count+" col_count: "+col_count);var prev_size={row_count:this.row_count,col_count:this.col_count},new_size={row_count,col_count};this.trigger("before_resize",prev_size,new_size);var col_delta=col_count-this.col_count;if(col_delta>0)for(var i=0;i<col_delta;++i)this.insertEmptyColumn();else if(col_delta<0)for(i=0;i<-col_delta;++i)this.removeColumn(this.col_count-1);var row_delta=row_count-this.row_count;if(row_delta>0)for(i=0;i<row_delta;++i)this.insertEmptyRow();else if(row_delta<0)for(i=0;i<-row_delta;++i)this.removeRow(this.row_count-1);this.trigger("after_resize",prev_size,new_size)},TableModel.prototype.toString=function(){return this.rows.map((function(row){return row.map((function(cell){return cell.value()})).join(", ")})).join("\n")},TableModel.prototype.clear=function(){this.rows.forEach((function(row){row.forEach((function(cell){cell.value("")}))})),this.trigger("state_change")},TableModel.prototype.reset=function(){for(var r=0;r<this.row_count;++r)for(var c=0;c<this.col_count;++c)this.splitCell(r,c);this.clear()},TableModel.prototype.removeEmptyRows=function(){const to_remove_indices=[];for(let r=this.row_count-1;r>=0;--r){const cells=this.rows[r];let is_empty=!0;for(let c=0;c<this.col_count;++c)if(!cells[c].isEmpty()){is_empty=!1;break}is_empty&&to_remove_indices.push(r)}const self=this;to_remove_indices.forEach((idx=>self.removeRow(idx)))},TableModel.prototype.setRows=function(rows){var col_count=0;rows.forEach((function(row){col_count=Math.max(col_count,row.length)})),this.resize(1,col_count);var self=this;rows.forEach((function(row){self.insertRow(row)})),this.removeRow(0)},TableModel.prototype.getHeaderRowspan=function(){let header_rowspan=1;return this.forEachCell(((cell,row)=>{cell.isVisible()&&row<header_rowspan&&(header_rowspan=Math.max(header_rowspan,row+cell.rowspan()))})),header_rowspan==this.row_count&&(header_rowspan=-1),header_rowspan},TableModel}(),CellStyle=function(){"use strict";function clone(obj){var copy;if(null==obj||"object"!=typeof obj)return obj;if(obj instanceof Date)return(copy=new Date).setTime(obj.getTime()),copy;if(obj instanceof Array){copy=[];for(var i=0,len=obj.length;i<len;i++)copy[i]=clone(obj[i]);return copy}if(obj instanceof Object){copy={};for(let attr in obj)obj.hasOwnProperty(attr)&&(copy[attr]=clone(obj[attr]));return copy}throw new Error("Unable to copy obj! Its type isn't supported.")}function CellStyle(cell_dom){if(this.cell_dom=cell_dom,this.borders="",this.font_style={},this.text_color="",this.bg_color="",this.padding=clone(CellStyle.Padding),this.border_color="",this.mute=!1,CellStyle.Padding){this.cell_dom.get(0).querySelectorAll(".wrap > div").forEach((div=>{div.style.margin=CellStyle.Padding.top+"px "+CellStyle.Padding.right+"px"}))}$.observable(this)}CellStyle.FontFamilies={"ff-arial-black":'"Arial Black", Gadget, sans-serif !important',"ff-arial":"Arial, Helvetica, sans-serif !important","ff-comic-sans-ms":'"Comic Sans MS", cursive, sans-serif !important',"ff-courier-new":'"Courier New", Courier, monospace !important',"ff-georgia":"Georgia, serif !important","ff-impact":"Impact, Charcoal, sans-serif !important","ff-lucida-console":'"Lucida Console", Monaco, monospace !important',"ff-lucida-sans":'"Lucida Sans Unicode", "Lucida Grande", sans-serif !important',"ff-palatino-linotype":'"Palatino Linotype", "Book Antiqua", Palatino, serif !important',"ff-serif":"serif !important","ff-tahoma":"Tahoma, Geneva, sans-serif !important","ff-times-new-roman":'"Times New Roman", Times, serif !important',"ff-trebuchet-ms":'"Trebuchet MS", Helvetica, sans-serif !important',"ff-verdana":"Verdana, Geneva, sans-serif !important","ff-inherit":"inherit"};var FontStyle_BOLD="bold",FontStyle_ITALIC="italic",FontStyle_UNDERLINE="underline";function domAddClass(dom,className){dom.get(0).classList.add(className)}return CellStyle.Padding={top:10,bottom:10,left:5,right:5},CellStyle.prototype.dump=function(){return{borders:this.borders,font_style:clone(this.font_style),text_color:this.text_color,bg_color:this.bg_color,halign:this.getHorizontalAlign(),valign:this.getVerticalAlign(),padding:clone(this.getPadding()),border_color:this.border_color}},CellStyle.prototype.swap=function(other){const tmp=this.dump();this.load(other.dump()),other.load(tmp)},CellStyle.prototype.toCSS=function(){var style={};return $.extend(style,this.fontStyleToCSS()),$.extend(style,this.colorsToCSS()),$.extend(style,this.textAlignToCSS()),style},CellStyle.prototype.load=function(data,formatting_options){this.mute=!0;const force=!formatting_options,is_enabled=option=>(force||formatting_options.hasOwnProperty(option)||console.error(`Unknown formatting option: ${option}`),force||!0===formatting_options[option]);null!=data.borders&&is_enabled("borders")&&this.setBorders(data.borders);var font_style=data.font_style;if(null!=font_style&&is_enabled("font_style")){for(var name in this.font_style)this.font_style.hasOwnProperty(name)&&this.removeFontStyle(name);for(var name in font_style)font_style.hasOwnProperty(name)&&this.addFontStyle(name,font_style[name])}null!=data.text_color&&is_enabled("text_color")&&this.setTextColor(data.text_color),null!=data.bg_color&&is_enabled("bg_color")&&this.setBgColor(data.bg_color),null!=data.border_color&&is_enabled("border_color")&&this.setBorderColor(data.border_color),null!=data.halign&&this.setHorizontalAlign(data.halign),null!=data.valign&&is_enabled("vertical_alignment")&&this.setVerticalAlign(data.valign);var padding=data.padding;null!=padding&&padding.hasOwnProperty("top")&&padding.hasOwnProperty("right")&&this.setPadding(padding.top,padding.right),this.mute=!1,this.trigger("state_change")},CellStyle.prototype.maybeTrigger=function(what){1!=this.mute&&this.trigger(what)},CellStyle.prototype.setHorizontalAlign=function(value){this.cell_dom.css("text-align",value),this.maybeTrigger("state_change")},CellStyle.HorizontalAlignValues=["left","center","right"],CellStyle.VerticalAlignValues=["top","middle","bottom"],CellStyle.prototype.getHorizontalAlign=function(){var v=this.cell_dom.css("text-align"),index=Math.max(0,CellStyle.HorizontalAlignValues.indexOf(v));return CellStyle.HorizontalAlignValues[index]},CellStyle.prototype.getVerticalAlign=function(){var v=this.cell_dom.css("vertical-align"),index=Math.max(0,CellStyle.VerticalAlignValues.indexOf(v));return CellStyle.VerticalAlignValues[index]},CellStyle.prototype.setVerticalAlign=function(value){-1==CellStyle.VerticalAlignValues.indexOf(value)&&(value="top"),this.cell_dom.css("vertical-align",value);this.cell_dom.get(0).firstElementChild.style.justifyContent={top:null,middle:"center",bottom:"flex-end"}[value],this.maybeTrigger("state_change")},CellStyle.prototype.textAlignToCSS=function(){return{"text-align":this.getHorizontalAlign(),"vertical-align":this.getVerticalAlign()}},CellStyle.prototype.hasTextColor=function(){return this.text_color&&"transparent"!=this.text_color},CellStyle.prototype.setTextColor=function(value){"transparent"==value&&(value=""),this.text_color=value,this.cell_dom.css("color",value),this.maybeTrigger("state_change")},CellStyle.prototype.getTextColor=function(){return this.text_color},CellStyle.prototype.setPadding=function(top,right,bottom,left){var a,b;null==right&&(right=top),null==bottom&&(bottom=top),null==left&&(left=right),this.padding={top,right,bottom,left},a=this.padding,b=CellStyle.Padding,JSON.stringify(a)!==JSON.stringify(b)&&(CellStyle.Padding=this.padding,this.cell_dom.parents("table").find(".wrap > div").css("margin",top+"px "+right+"px"),this.maybeTrigger("state_change"),this.trigger("padding_change",this.padding))},CellStyle.prototype.clearPadding=function(){this.setPadding(10,5,10,5)},CellStyle.prototype.getPadding=function(){return this.padding},CellStyle.prototype.clearTextColor=function(){this.cell_dom.css("color",""),this.text_color="",this.maybeTrigger("state_change")},CellStyle.prototype.setBgColor=function(value){"transparent"==value&&(value=""),this.bg_color=value,this.cell_dom.css("background-color",value),this.maybeTrigger("state_change")},CellStyle.prototype.getBgColor=function(){return this.bg_color},CellStyle.prototype.hasBgColor=function(){return this.bg_color&&"transparent"!=this.bg_color},CellStyle.prototype.clearBgColor=function(){this.cell_dom.css("background-color",""),this.bg_color="",this.maybeTrigger("state_change")},CellStyle.prototype.setBorderColor=function(value){"transparent"==value&&(value=""),this.border_color=value||"inherit",this.cell_dom.css("border-color",value),this.maybeTrigger("state_change")},CellStyle.prototype.getBorderColor=function(){return this.border_color},CellStyle.prototype.hasBorderColor=function(){return this.border_color&&"transparent"!=this.border_color},CellStyle.prototype.clearBorderColor=function(){this.cell_dom.css("border-color",""),this.border_color="",this.maybeTrigger("state_change")},CellStyle.prototype.colorsToCSS=function(){var res={};return this.bg_color&&"transparent"!=this.bg_color&&(res["background-color"]=this.bg_color),this.text_color&&"transparent"!=this.text_color&&(res.color=this.text_color),this.border_color&&"transparent"!=this.border_color&&(res["border-color"]=this.border_color),res},CellStyle.prototype.setBorders=function(which){if(which.length>0&&!which.match(/^[ltrb]+$/))return;const map={l:"border_l",t:"border_t",r:"border_r",b:"border_b"},classList=this.cell_dom.get(0).classList;this.borders.split("").forEach((function(e){classList.remove(map[e])})),this.borders=which,this.borders.split("").forEach((function(e){classList.add(map[e])})),this.maybeTrigger("state_change")},CellStyle.prototype.addBorder=function(which){which=which[0],-1==this.borders.indexOf(which)&&(this.borders+=which,domAddClass(this.cell_dom,"border_"+which)),this.maybeTrigger("state_change")},CellStyle.prototype.removeBorder=function(which){which=which[0],-1!=this.borders.indexOf(which)&&(this.borders=this.borders.replace(which,""),this.cell_dom.removeClass("border_"+which)),this.maybeTrigger("state_change")},CellStyle.prototype.hasBorder=function(which){return-1!=this.borders.indexOf(which[0])},CellStyle.prototype.toggleBorder=function(which){which.length>0&&!which.match(/^[ltrb]+$/)||(-1!=this.borders.indexOf(which)?this.setBorders(this.borders.replace(which,"")):this.setBorders(this.borders+which))},CellStyle.prototype.reset=function(formatting_options){const should_reset=option=>!formatting_options||!1===formatting_options[option];if(should_reset("text_align")&&this.setHorizontalAlign("left"),should_reset("vertical_alignment")&&this.setVerticalAlign("top"),should_reset("borders")&&this.setBorders(""),should_reset("font_style"))for(let style in this.font_style)this.removeFontStyle(style);should_reset("text_color")&&this.clearTextColor(),should_reset("bg_color")&&this.clearBgColor(),this.clearPadding(),should_reset("border_color")&&this.clearBorderColor()},CellStyle.prototype.addFontStyle=function(key,value){if("font-weight"==key&&("bold"==value?(key=FontStyle_BOLD,value=!0):"italic"==value&&(key=FontStyle_ITALIC,value=!0)),key==FontStyle_BOLD)this.cell_dom.css("font-weight","bold");else if(key==FontStyle_ITALIC)this.cell_dom.css("font-style","italic");else if(key==FontStyle_UNDERLINE)this.cell_dom.css("text-decoration","underline");else if("font-family"==key){var prev=this.font_style["font-family"];prev&&this.cell_dom.removeClass(prev),domAddClass(this.cell_dom,value)}else"font-size"==key&&("inherit"==value?this.cell_dom.css("font-size","100%"):this.cell_dom.css("font-size",value));this.font_style[key]=value||!0,this.maybeTrigger("state_change")},CellStyle.prototype.fontStyleToCSS=function(){var res={},fs=this.font_style;return fs.hasOwnProperty(FontStyle_BOLD)&&(res["font-weight"]="bold"),fs.hasOwnProperty(FontStyle_ITALIC)&&(res["font-style"]="italic"),fs.hasOwnProperty(FontStyle_UNDERLINE)&&(res["text-decoration"]="underline"),fs.hasOwnProperty("font-size")&&("inherit"==fs["font-size"]?res["font-size"]="100%":res["font-size"]=fs["font-size"]),fs.hasOwnProperty("font-family")&&(res["font-family"]=CellStyle.FontFamilies[fs["font-family"]]),res},CellStyle.prototype.hasFontStyle=function(style){return this.font_style.hasOwnProperty(style)},CellStyle.prototype.removeFontStyle=function(style){this.hasFontStyle(style)&&(delete this.font_style[style],style==FontStyle_BOLD?this.cell_dom.css("font-weight","normal"):style==FontStyle_ITALIC?this.cell_dom.css("font-style","normal"):style==FontStyle_UNDERLINE&&this.cell_dom.css("text-decoration","none")),this.maybeTrigger("state_change")},CellStyle.prototype.toggleFontStyle=function(style){this.hasFontStyle(style)?this.removeFontStyle(style):this.addFontStyle(style)},CellStyle.prototype.setFromDict=function(style){if(style["font-weight"]){let value=style["font-weight"];if(value.match(/\d/)){value=parseInt(value,10)>400?"bold":"normal"}this.addFontStyle("font-weight",value)}-1!==(style["text-decoration"]||"").indexOf("underline")&&this.addFontStyle(FontStyle_UNDERLINE),style["background-color"]&&this.setBgColor(style["background-color"]),style["text-align"]&&this.setHorizontalAlign(style["text-align"]),style.color&&this.setTextColor(style.color),style["font-style"]===FontStyle_ITALIC&&this.addFontStyle(FontStyle_ITALIC),style["vertical-align"]&&this.setVerticalAlign(style["vertical-align"])},CellStyle}();!function($,window,document,undefined){"use strict";$.fn.borderEvents=function(options){return this.each((function(i,el){var $base=$(el),active=null;1!=$base.data("borderEvents")&&($base.mousemove((function(event){if(!options.deactivated&&options.onBorderOver){var width=$base.outerWidth(),height=$base.outerHeight(),offset=$base.offset(),x=event.pageX-offset.left,y=event.pageY-offset.top,which=null;x<5?which="left":x>width-5?which="right":y<5?which="top":y>height-5&&(which="bottom"),options.onBorderLeave&&active&&which!=active&&options.onBorderLeave(event,active,$base),which&&options.onBorderOver(event,which,$base),active=which}})).mouseleave((function(event){options.onBorderLeave&&active&&options.onBorderLeave(event,active,$base),active=null})).click((function(event){!options.deactivated&&active&&options.onBorderClick&&options.onBorderClick(event,active,$base)})),$base.data("borderEvents",!0))}))}}(jQuery);preventDefault=function(event){event.preventDefault()};var Markup=function($){var instances=[{}],API={};API.ImageCharRepr="#";const encode=function(){const tagsToReplace={"&":"&amp;","<":"&lt;",">":"&gt;"};function replaceTag(tag){return tagsToReplace[tag]||tag}function replaceMultipleSpaces(spaces){return"&nbsp;".repeat(spaces.length)}return function(str){return str.replace(/[&<>]/g,replaceTag).replace(/[ ]{2,}/g,replaceMultipleSpaces)}}();return API.create=function(markup_desc){let instance=$.extend(!0,{},markup_desc),markup_id=-1,empty_pos=-1;for(let i=0,n=instances.length;i<n&&-1==markup_id;++i)null===instances[i]?empty_pos=i:(a=instance,b=instances[i],JSON.stringify(a)==JSON.stringify(b)&&(markup_id=i));var a,b;return-1==markup_id&&(-1==empty_pos?(instances.push(instance),markup_id=instances.length-1):(instances[empty_pos]=instance,markup_id=empty_pos)),markup_id},API.getById=function(id){if(id>=1&&id<instances.length)return instances[id]},API.getByIds=function(ids){return ids.map((function(id){return API.getById(id)}))},API.dump=function(){return{instances}},API.load=function(data){instances=data.instances||[]},API.clear=function(){instances=[{}]},API.clearUnused=function(used_ids){for(var i=1;i<instances.length;++i)used_ids.hasOwnProperty(i)||null===instances[i]||(instances[i]=null)},API.render=function(text,per_char_markup_ids,dest_node,selection_bounds){const rendered=function(text,per_char_markup_ids,selection_bounds){const len=text.length,per_char_markup=Markup.getByIds(per_char_markup_ids),supported_inline_style_props=["backgroundColor","color","fontWeight","fontStyle","textDecoration"];let nodes=[],[selection_start,selection_end]=selection_bounds,range_start_node=null,range_start_offset=0,range_end_node=null,range_end_offset=0;len>per_char_markup.length&&console.error("There are not enough markup instances for the text");let inlines=[],slice_start=0;const createElementWithStyle=(tag,style)=>{const element=document.createElement(tag);return style&&supported_inline_style_props.forEach((prop=>{style.hasOwnProperty(prop)&&(element.style[prop]=style[prop])})),element},appendInline=nd=>{inlines.push(nd)},appendBlock=nd=>{if(inlines.length>0){const block=document.createElement("p");inlines.forEach((child=>block.appendChild(child))),nodes.push(block),inlines=[]}nd&&nodes.push(nd)};for(let i=0;i<len;++i){const markup=per_char_markup[i];if("\n"===text[i]){if(0===inlines.length&&inlines.push(document.createElement("br")),appendBlock(),i+1===len){const span=createElementWithStyle("span");span.appendChild(document.createElement("br")),inlines.push(span),appendBlock()}slice_start=i+1}else if(markup&&markup.hasOwnProperty("img_src")){const img=document.createElement("img");img.src=markup.img_src,img.alt=markup.img_alt||"Image",markup.img_width&&(img.width=markup.img_width,img.style.width=`${markup.img_width}px`,img.style.maxWidth=`${markup.img_width}px`),markup.img_height&&(img.height=markup.img_height,img.style.height=`${markup.img_height}px`,img.style.maxHeight=`${markup.img_height}px`),appendInline(img);const start=i;for(;i+1<len&&per_char_markup_ids[i+1].img_src===markup.img_src;)++i;start<=selection_start&&selection_start<i&&(range_start_node=img,range_start_offset=0),start<=selection_end&&selection_end<=i&&(range_end_node=img,range_end_offset=0),slice_start=i+1}else if(i+1===len||per_char_markup_ids[i+1]!==per_char_markup_ids[i]||"\n"===text[i+1]){const slice_end=i+1,token=text.substring(slice_start,slice_end);let link=null;markup&&markup.link_href&&(link=document.createElement("a"),link.href=markup.link_href,markup.link_open_in_new_tab&&(link.dataset.enableOpenInNewTab=markup.link_open_in_new_tab),link.onclick=preventDefault,link.style.pointerEvents="none");const span=createElementWithStyle("span",markup&&markup.style);span.innerHTML=encode(token),null!==link?(link.appendChild(span),appendInline(link)):appendInline(span),slice_start<=selection_start&&selection_start<slice_end&&(range_start_node=span.childNodes[0],range_start_offset=selection_start-slice_start),slice_start<=selection_end&&selection_end<=slice_end&&(range_end_node=span.childNodes[0],range_end_offset=selection_end-slice_start),slice_start=i+1}}return appendBlock(),{nodes,range_start_node,range_start_offset,range_end_node,range_end_offset}}(text,per_char_markup_ids,selection_bounds=selection_bounds||[-1,-1]);if(function(node,children){if(node.replaceChildren(),children&&children.length>0){const fragment=document.createDocumentFragment();fragment.append(...children),node.appendChild(fragment)}}(dest_node,rendered.nodes),rendered.range_start_node&&rendered.range_end_node&&window.getSelection){const range=document.createRange();range.setStart(rendered.range_start_node,rendered.range_start_offset),range.setEnd(rendered.range_end_node,rendered.range_end_offset);const selection=window.getSelection();selection.removeAllRanges(),selection.addRange(range)}},API.renderToString=function(text,per_char_markup_ids,style_enabled=!0){var tokens=[],len=text.length,per_char_markup=Markup.getByIds(per_char_markup_ids);len>per_char_markup.length&&console.error("There are not enough markup instances for the text");for(var slice_start=0,i=0;i<len;++i){const markup=per_char_markup[i<per_char_markup.length?i:0];if("\n"==text[i])tokens.push("<br>"),slice_start=i+1;else if(text[i]==API.ImageCharRepr&&markup&&markup.hasOwnProperty("img_src")){const src=markup.img_src,alt=markup.img_alt||"",html=`<img src="${src}"${alt?` alt="${alt}"`:""}${markup.img_width?` width="${markup.img_width}"`:""}${markup.img_height?` height="${markup.img_height}"`:""}>`;tokens.push(html)}else if(i+1==len||i+1<per_char_markup_ids.length&&per_char_markup_ids[i+1]!=per_char_markup_ids[i]||"\n"==text[i+1]){var token=text.substring(slice_start,i+1),link="";if(markup&&markup.link_href){const target="true"==markup.link_open_in_new_tab?' target="_blank" rel="noopener noreferrer"':"";link=`<a href="${markup.link_href}"${target}>`}var span="";if(style_enabled&&markup&&markup.style){var prop=[];markup.style.fontWeight&&prop.push("font-weight:"+markup.style.fontWeight),markup.style.fontStyle&&prop.push("font-style:"+markup.style.fontStyle),markup.style.textDecoration&&prop.push("text-decoration:"+markup.style.textDecoration),markup.style.color&&prop.push("color:"+Utils.get_compact_color_value(markup.style.color)),markup.style.backgroundColor&&prop.push("background-color:"+Utils.get_compact_color_value(markup.style.backgroundColor)),prop.length>=1&&(span='<span style="'+prop.join(";")+'">')}span=span.length>=1?span+encode(token)+"</span>":encode(token),link.length>=1?(tokens.push(link),tokens.push(span),tokens.push("</a>")):tokens.push(span),slice_start=i+1}}return tokens.join("")},API.isInlineElement=function(el){if(el.nodeType==Node.TEXT_NODE)return!0;const wnd=el.ownerDocument.defaultView;return(("getComputedStyle"in wnd?wnd.getComputedStyle(el,""):el.currentStyle).display||"").match(/inline/i)},API.forEachLeafCharInNode=function(root,callback,range,supported_style_properties=null){let left_reached=!1,right_reached=!1;null===supported_style_properties&&(supported_style_properties=["fontWeight","fontStyle","textDecoration","color","backgroundColor"]),range&&(range=range.cloneRange()),function visit(node,is_top_level,inherited_markup){if(!node)return;let markup=$.extend(!0,{style:{}},inherited_markup);const node_style=node.style;if(node_style)for(let i=0,n=supported_style_properties.length;i<n;++i){const prop=supported_style_properties[i];prop in node_style&&(markup.style[prop]=node.style[prop])}const node_name=node.nodeName.toLowerCase();"a"==node_name&&(markup.link_href=node.href,markup.link_open_in_new_tab=!node.dataset.hasOwnProperty("enableOpenInNewTab")||(node.dataset.enableOpenInNewTab||!1));const children=node.childNodes||[];if("img"==node_name)markup={img_src:node.src,img_alt:node.alt,img_width:node.width,img_height:node.height},callback(API.ImageCharRepr,!1,markup);else if("br"==node_name&&node.previousSibling&&API.isInlineElement(node.previousSibling))callback("\n",!1,markup);else if(3==node.nodeType){let left_boundary=!1;range&&node.isSameNode(range.startContainer)&&(left_reached=!0,left_boundary=!0);let right_boundary=!1;range&&node.isSameNode(range.endContainer)&&(right_reached=!0,right_boundary=!0);const text=node.textContent,len=text.length;for(let i=0;i<len;++i){let inside_range=left_reached&&!left_boundary||left_boundary&&i>=range.startOffset;inside_range=inside_range&&(!right_reached||right_boundary&&i<range.endOffset);const chr=text[i];chr!=ZeroWidthSpace&&callback(chr,inside_range,markup)}}else{const is_inline=API.isInlineElement(node);!is_top_level&&!is_inline&&node.previousSibling&&API.isInlineElement(node.previousSibling)&&callback("\n",!1,markup);for(let i=0,n=children.length;i<n;++i){range&&node.isSameNode(range.startContainer)&&i>=range.startOffset&&(left_reached=!0),range&&node.isSameNode(range.endContainer)&&i>=range.endOffset&&(right_reached=!0);const is_in_range=left_reached&&!right_reached;visit(children[i],is_in_range,markup)}is_top_level||is_inline||!node.nextElementSibling||API.isInlineElement(node.nextElementSibling)||callback("\n",!1,markup)}}(root,!0,{})},API}(jQuery),SelectionPositionInfo=function(){var range=null,bounding_rect={top:0,left:0,right:0,bottom:0,width:0,height:0},API={setRange:function(new_range){if((range=new_range)&&range.getBoundingClientRect&&0==(bounding_rect=range.getBoundingClientRect()).top&&0==bounding_rect.bottom&&range.startContainer){const r=(range.startContainer.childElementCount>0?range.startContainer.lastChild:range.startContainer).getBoundingClientRect(),line_height=Math.min(20,r.bottom-r.top);bounding_rect={top:r.bottom-line_height,bottom:r.bottom,left:r.right-1,right:r.right,width:1,height:line_height}}},getBoundingClientRect:function(){return bounding_rect},getClientWidth:function(){return bounding_rect.width},getClientHeight:function(){return bounding_rect.height}};return API},InsertLinkDialog=function(){var selection_position=SelectionPositionInfo(),API={},range=null,dlg_element=null,dlg=null,link_text_input=null,link_url_input=null,apply_callback=null,close_callback=null;let open_in_new_tab_checkbox=null;var outsideClickListener=function(event){var elem;dlg_element.contains(event.target)||(elem=dlg_element)&&(elem.offsetWidth||elem.offsetHeight||elem.getClientRects().length)&&API.close()},scrollListener=function(){null!=dlg&&null!=range&&(selection_position.setRange(range),dlg.scheduleUpdate())};function trimWhitespace(str){return str.trim().replace(ZeroWidthSpace,"")}function applyInsertion(){var str,a,link_text=trimWhitespace(link_text_input.value),link_url=link_url_input.value.trim();""!=link_text&&(str=link_url,(a=document.createElement("a")).href=str,a.host&&a.host!=window.location.host||a.href.startsWith("mailto:"))?(link_url_input.setCustomValidity&&link_url_input.setCustomValidity(""),function(link_text,link_url){const link=document.createElement("a");link.href=link_url,link.textContent=link_text,link.pointerEvents="none",link.onclick=preventDefault,link.dataset.enableOpenInNewTab=open_in_new_tab_checkbox.checked,range.deleteContents(),range.insertNode(link),range.collapse(),apply_callback&&apply_callback()}(link_text,link_url),API.close()):link_url_input.setCustomValidity&&link_url_input.setCustomValidity("Invalid link")}const extract_href=function(elem){if("A"==elem.nodeName)return{href:elem.href,open_in_new_tab:"true"==elem.dataset.enableOpenInNewTab};let res=null;for(let child of elem.childNodes)if(1===child.nodeType&&(res=extract_href(child),null!=res))break;return res};return API.show=function(selection_range,apply_callback_,close_callback_){range=selection_range,apply_callback=apply_callback_,close_callback=close_callback_,null!=dlg&&API.close(),null==dlg_element&&(link_text_input=document.getElementById("insert-link-dialog__link-text"),link_url_input=document.getElementById("insert-link-dialog__link-url"),dlg_element=document.getElementById("insert-link-dialog"),open_in_new_tab_checkbox=document.getElementById("insert-link-dialog__open-in-new-tab"),link_url_input.addEventListener("keydown",(function(event){event.which==Keys.ENTER&&(event.preventDefault(),event.stopPropagation(),applyInsertion())})),link_text_input.addEventListener("keydown",(function(event){event.which==Keys.ESC&&(event.preventDefault(),API.close())})),document.getElementById("insert-link-dialog__apply").onclick=function(event){event.preventDefault(),applyInsertion()},document.getElementById("insert-link-dialog__cancel").onclick=function(event){event.preventDefault(),API.close()}),selection_position.setRange(range);const link_text=trimWhitespace(range.toString());link_text_input.value=link_text;let link_url="",open_in_new_tab=!0;if(range.startContainer&&""!=link_text){const link_info=extract_href(range.startContainer);null!=link_info&&(link_url=link_info.href,open_in_new_tab=link_info.open_in_new_tab)}link_url_input.value=link_url,open_in_new_tab_checkbox.checked=open_in_new_tab,dlg_element.style.display="block",dlg=new Popper(selection_position,dlg_element,{placement:"top",positionFixed:!0,modifiers:{offset:{offset:"0,5"}}}),setTimeout((function(){$(link_text_input).focus()}),50),setTimeout((function(){document.addEventListener("click",outsideClickListener)}),500),window.addEventListener("scroll",scrollListener),document.scrollingElement&&document.scrollingElement.addEventListener("scroll",scrollListener)},API.close=function(){dlg&&(window.removeEventListener("scroll",scrollListener),document.scrollingElement&&document.scrollingElement.removeEventListener("scroll",scrollListener),document.removeEventListener("click",outsideClickListener),dlg_element.style.display="none",dlg.destroy(),dlg=null,close_callback&&close_callback()),range=null},API}();const icons_trie={a:{d:{v:{e:{r:{t:{i:{s:{e:["ment",0],i:["ng",0]},z:{i:["ng",0],e:["ment",0]}},"#":0}}},a:["ncing",361]},"#":-1,d:{r:{e:{s:{s:{"-":{b:["ook",-2],c:["ard",-3]}}}}},i:["tion",640]},a:["pt",3],j:["ust",-4],e:["pt",785]},l:{i:{g:{n:{"#":3,"-":{c:["enter",-6],j:["ustify",-7],l:["eft",-8],r:["ight",-9]}}},n:["e",3]},l:{e:{r:{g:{y:["",9],i:["es",-10]}}}},t:["er",584]},i:{r:{"-":["freshener",-5],h:["eaded",260],p:["lane",634]},m:{"#":438}},m:{b:{u:["lance",-11],i:["t",221]},e:["rican-sign-language-interpreting",-12],p:{l:["ify",299],u:{l:{e:{"#":930},"#":930}},o:{u:{l:{e:{"#":930}}}}}},n:{c:{h:{o:{r:{p:["erson",12],"#":-13,m:["an",12]}}}},g:{l:{e:{"-":{d:{o:{u:{b:{l:{e:{"-":{d:["own",-14],l:["eft",-15],r:["ight",-16],u:["p",-17]}}}}},w:["n",-18]}},l:["eft",-19],r:["ight",-20],u:["p",-21]},"#":347}},r:["y",-22]},k:["h",-23],n:{o:{t:{a:{t:{e:{"#":212}}}}},u:["lus",685]},d:["iron",262],u:["ran",362],o:["vulant",631],s:["wer",679],a:["tomy",715]},p:{p:{l:{e:{"-":["alt",-24],s:["auce",873]}},r:["ehend",221],o:["rtion",716]}},r:{c:{h:{i:["ve",-25],w:["ay",-26],"#":25}},r:{o:{w:{"-":{a:{l:{t:{"-":{c:{i:{r:{c:{l:{e:{"-":{d:["own",-27],l:["eft",-28],r:["ight",-29],u:["p",-30]}}}}}}}}}}},c:{i:{r:{c:{l:{e:{"-":{d:["own",-31],l:["eft",-32],r:["ight",-33],u:["p",-34]}}}}}}},d:["own",-35],l:["eft",-36],r:["ight",-37],u:["p",-38]},s:{"-":{a:{l:{t:{"#":-39,"-":{h:["",-40],v:["",-41]}}}}}}}},e:{s:{t:{"#":161}}}},d:{o:{r:["",343],u:["r",343]}},o:["use",343],t:{i:{c:{u:{l:{a:{t:{e:["",485],i:{o:{n:["",485],"#":485}}}}}}}}},u:["gula",688]},s:{s:{i:["stive-listening-systems",-42],a:["y",161],u:["re",161],o:{c:["iate",513],r:["t",759]},e:["t",640]},t:{e:{r:{i:{s:{k:{"#":-43}}}}},a:["tine",43]},c:["ertain",161]},t:{"#":-44,l:["as",-45],o:["m",-46],t:{a:["ck",343],r:{a:{c:{t:{e:["r",529],i:["on",529],o:["r",529]}}}}},a:["raxis",610]},u:{d:["io-description",-47],t:{o:{b:["us",115],m:{o:["bile",133],a:["ton",687]},"#":133}},g:["ury",730]},w:{a:{r:{d:{i:["ng",47],"#":-48}}}},c:{c:{o:{l:["ade",47],u:["nt",449]}},t:{"#":637,i:["notherapy",668]},k:["nowledge",672],e:["",785]},b:{s:{q:["uatulate",85],c:["ond",85]},r:{i:{d:{g:{m:["ent",132],e:{m:["ent",132],"#":241}}}}},b:["reviate",241],o:["de",452]},g:["ree",161],h:["ead",361],f:{f:{e:{c:{t:{i:{o:{n:{a:["teness",442],"#":442}}}}}}}},e:["roplane",634]},s:{e:{t:{"#":3},a:{m:["",69],r:{c:{h:{"#":-709,"-":{d:["ollar",-710],l:["ocation",-711],m:["inus",-712],p:["lus",-713]}}}},l:["",784]},c:{u:{r:{i:["ty",152],e:["",639]}}},e:{"#":161,k:["",708],d:["ling",-714]},p:{a:{r:{a:{t:{e:{"#":259},r:["ix",743]}}}}},x:["less",584],r:{e:["nity",610],v:["er",-715]},n:{d:["",722],s:["ation",785],t:["ence",851]},w:["er",858]},t:{a:{r:{"#":-786,r:["ing",785],"-":{a:["nd-crescent",-787],h:{a:{l:{f:{"#":-788,"-":["alt",-789]}}}},o:{f:{"-":{d:["avid",-790],l:["ife",-791]}}}}},y:{"#":161},c:["k",578],m:["p",-785]},o:{p:{"#":-796,p:{a:{g:{e:{"#":161}}},e:["r",639],l:["e",639]},o:["ver",795],"-":["circle",-797],w:["atch",-798]},n:["e",370],r:{y:["",449],a:{g:{e:{"#":551}}},e:{"#":-799,h:["ouse",798],"-":["alt",-800]},m:["",810]},m:["p",784],c:{k:{"#":798}},o:["l",858]},r:{e:{a:{k:["",60],m:["",-801]},e:{t:{"-":["view",-802],c:["ar",870]}}},i:{p:["e",60],k:{e:{"#":210,t:["hrough",-803]}},n:["g",869]},a:{i:{n:["",341],g:{h:{t:{f:["orward",781],"#":781}}}},p:["",743]},o:{k:["e",743],o:["pwafel",-804]}},i:{f:["fly",85],n:{g:{"#":114,e:["r",241]},k:["er",506]},c:{k:{"#":485,y:["-note",-795]}}},e:{e:{r:{i:["ng",258],"#":438}},r:{n:["",648],e:["otype",784]},l:["lar",785],p:{"-":{b:["ackward",-792],f:["orward",-793]}},t:["hoscope",-794]},u:["mp",784],y:["lemark",866]},p:{e:{c:{k:["",45],t:{e:["r",372],r:["e",372],a:["cles",379]},s:["",379]},w:["",151],e:["ch",496],l:["l-check",-777]},o:{i:{l:{"#":48}},o:["k",372],r:["t",637]},u:{e:["",151],n:["k",442]},r:{o:{c:{k:{e:{t:{"#":208}}}}},e:["ad",606],a:{y:["-can",-781],i:["n",961]}},a:{n:{"#":234,n:["er",961]},t:["e",578],y:["",584],r:["e",703],"#":-775,c:["e-shuttle",-776]},l:{i:{t:["",259],f:["f",485]},o:{d:["ge",779],t:["ch",-780]}},y:["glass",379],i:{r:["it",442],e:["l",637],d:["er",-778],n:{s:["ter",778],n:["er",-779]}}},i:{s:["ter",48],c:["k",151],m:{u:{l:{a:{t:["e",228],c:{r:{u:{m:{"#":475}}}}}}},"-":["card",-737]},l:["ly",260],g:{h:["t",578],n:{a:{l:{i:{s:{e:{"#":730}},z:{e:{"#":730}},n:{g:{"#":730}}},"#":-735},t:["ure",-736]},"#":-731,e:["d",730],b:["oard",730],"-":{i:["n-alt",-732],l:["anguage",-733],o:["ut-alt",-734]}}},t:["emap",-738],e:["ve",759]},h:{u:{n:["",57],t:["tle-van",-730]},e:{e:{r:{"#":84},t:["",634]},k:["el-sign",-721],l:["ve",818]},a:{v:{e:{r:["",182],"#":634}},d:{e:{"#":372}},b:{u:{"#":379}},k:["e",430],r:{e:{"#":-717,"-":{a:{l:{t:{"#":-718,"-":["square",-719]}}},s:["quare",-720]}}},p:{e:{"#":715,s:["",-716]}},f:["t",861]},o:{r:{t:{e:{n:{e:["d",241],"#":241}}}},o:["t",340],w:{"#":677,e:["r",-729]},a:["l",704],e:{"-":["prints",-725],t:["ree",877]},p:{p:{i:{n:{g:{"-":{b:{a:{g:["",-726],s:["ket",-727]}},c:["art",-728]}}}}},"#":798,w:["orn",855]}},i:{n:["er",579],m:["mer",637],t:{"#":648,e:["",648]},e:["ld-alt",-722],p:{"#":-723,p:["ing-fast",-724]}},r:{e:{d:{"#":824}}}},a:{l:{o:["on",60],i:["entian",362],v:{a:["ge",703],e:["",703]}},v:{v:["y",221],e:["",-704]},t:{i:{a:["te",338],s:{f:{y:{"#":338,i:["ng",781]}}}},e:{"#":338,l:{l:{i:{t:{e:{"#":-702,"-":["dish",-703]}}}}}}},c:["k",343],g:["",349],w:{h:["orse",453],b:["uck",453]},m:{a:{r:{a:["",488],i:["um",752]}}},d:{"-":{c:["ry",-700],t:["ear",-701]}},p:["",855]},c:{r:{e:{w:{"#":69,d:["river",-706]},e:{n:{"#":82}}},i:{p:{t:{"#":89}}},o:["ll",-707],a:["p",873]},u:{t:{t:{l:{e:{b:{u:{t:{t:{"#":212}}}}}}}},m:["",873]},o:{p:["e",221],t:["ch",234],u:["r",353],w:["l",363]},a:{r:["per",697],t:["",697]},h:{o:{o:{l:{"#":-705,i:["ng",704],t:["ime",704],h:["ouse",704]}}}},e:["nt",952]},u:{b:{t:{e:["rfuge",82],r:["action",561]},s:{t:{a:{n:{t:{i:{a:{t:["ion",161],l:["",781]}}},c:["e",442]}}},c:{r:{i:{b:["e",730],p:["t",-805]}}}},p:["rogram",658],r:["outine",658],w:["ay",-806]},n:{t:["an",114],b:{u:["rn",114],a:["the",808]},s:["hine",808],l:["ight",808],"#":-809},l:["ly",194],m:{m:{i:["t",237],a:["tion",640]},"#":442},s:["pension",607],r:{r:["ound",685],p:{r:{i:{s:{a:["l",810],e:["",-811]}}}}},p:{e:{r:{s:{t:["ar",785],c:["ript",-810]},i:["or",809]}}},i:{t:{c:{a:{s:{e:{"#":-807,"-":["rolling",-808]}}}}}}},l:{a:{p:{"#":85,d:["ash",85]},s:{h:{"#":-744,e:["d",241]}},n:["t",948]},i:{c:{e:{"#":241}},d:["ers-h",-746]},u:{e:["",241],i:["ce",353]},e:{w:{"#":241},d:{g:["e",744],"#":744},i:["gh",-745]}},m:{a:["ck",85],i:{l:{e:{"#":-747,"-":{b:["eam",-748],w:["ink",-749]}},i:{n:{g:{"#":391}}}}},o:{g:{g:["iness",749],"#":-750},k:{e:["",750],i:{n:{g:{"#":-751,"-":["ban",-752]}}}}},s:["",-753]},w:{o:{t:{"#":87},r:["dplay",637]},e:{e:{p:{"#":108}},r:["ve",241]},a:{r:{m:{"#":194}},g:["",349],y:["er",693],t:["chbook",-812]},i:{n:["g",241],m:{m:{e:["r",-813],i:["ng-pool",-814]}}}},k:{i:{r:{m:["ish",109],t:["",685]},p:["",241],m:["",634],i:{n:{g:{"#":-740,"-":["nordic",-741]}}},"#":739},y:["rocket",688],a:{t:{i:["ng",-739],e:["",738]}},u:{l:{l:{"#":-742,"-":["crossbones",-743]}}}},q:{u:{e:["eze",222],a:{b:["",270],r:{e:{"#":-782,l:["y",781],"-":{f:["ull",-783],r:["oot-alt",-784]}}}},i:["rt",284]}},o:{f:["a",230],r:{c:["erous",528],t:{"#":-760,i:["ng",759],"-":{a:{l:{p:{h:{a:{"-":{d:{o:{w:{n:{"#":-761,"-":["alt",-762]}}}},u:{p:{"#":-763,"-":["alt",-764]}}}}}}},m:{o:{u:{n:{t:{"-":{d:{o:{w:{n:{"#":-765,"-":["alt",-766]}}}},u:{p:{"#":-767,"-":["alt",-768]}}}}}}}}},d:["own",-769],n:{u:{m:{e:{r:{i:{c:{"-":{d:{o:{w:{n:{"#":-770,"-":["alt",-771]}}}},u:{p:{"#":-772,"-":["alt",-773]}}}}}}}}}},u:["p",-774]}}},u:["nd",623],m:["a",715],l:{i:{d:{u:["s",743],"#":781}},a:{r:{"-":["panel",-759],i:{s:["e",808],z:["e",808]}}}},c:{k:{"#":757,s:["",-758]}}},n:{i:["p",232],u:["b",241],o:{g:["",491],w:{b:{o:{a:{r:{d:{i:["ng",-754],"#":753}}}},i:["rd",754]},f:["lake",-755],m:["an",-756],p:{l:{o:{w:["",-757],u:["gh",756]}}}}},e:["ak",579]},d:["-card",-708],y:{n:{a:["gogue",-815],c:{"#":-816,h:{r:{o:{n:{i:{z:["e",815],s:["e",815]}}}}},"-":["alt",-817]}},r:["inge",-818]}},c:{o:{r:{r:{e:{c:["t",3],s:["pond",161]},u:["pt",194]},p:["uscle",45],n:{e:{r:{"#":99}}},o:["nate",237],e:["",442]},n:{f:{o:{r:{m:{"#":3,a:["tion",715]}}},i:{r:["mation",161],g:["uration",715]}},s:{t:{r:{u:{c:{t:{i:["on",111],"#":111}}},i:["ct",222]}},o:["rt",697]},d:{e:["nsation",132],i:{t:{i:{o:{n:{"#":161}}}}}},t:{r:{o:["l",161],a:{c:{t:{"#":222}}},i:["bution",716]},a:{i:{n:{"#":161}},c:["t",513]},o:["ur",715]},c:{i:["erge-bell",-226],l:["uding",834]},n:{e:{c:{t:{i:["on",513],e:["dness",513],"#":513}},x:["ion",513]}},j:["uration",528],v:{e:["nience",682],u:["lse",743]}},c:{k:{e:["r",48],t:["ail",-205],"#":411}},s:["set",48],d:{d:["le",48],i:["fication",205],e:{"#":-206,"-":["branch",-207]},s:["wallop",873]},p:{p:["ice",109],s:["e",109],y:{"#":-229,r:["ight",-230]}},m:{b:["ust",114],p:{u:["ter",118],a:{c:{t:{"-":["disc",-221],"#":222}},s:["s",-222]},r:{e:{h:["end",221],s:{s:{"#":-223,"-":{a:{l:["t",-224],r:["rows-alt",-225]}}}}}},e:["er",291],o:["se",611]},m:{e:{n:{t:{a:{r:{y:{"#":212}}},"#":-213,"-":{a:["lt",-214],d:{o:{l:["lar",-215],t:["s",-216]}},m:["edical",-217],s:["lash",-218]},s:{"#":-219,"-":["dollar",-220]}}}},i:["ssion",258],o:{n:["place",855],d:["e",858]}}},a:{c:{h:{"#":115}}},f:["fee",-208],g:{"#":-209,s:["",-210]},i:{n:{s:["",-211],"#":210},l:["",706]},l:{u:{m:{n:{s:["",-212],"#":211}}},l:["igate",513]},o:{k:{i:{e:{"#":-227,"-":["bite",-228]}},y:["",226]}},u:{c:["h",-231],n:{s:{e:{l:{l:["ing",258],i:["ng",258],"#":258}}}},r:["se",697]},v:["er",234]},h:{i:{l:{d:{"#":-183}},m:["e",71],n:["k",161],t:["",161],p:{"#":161}},a:{r:{a:["banc",115],g:{i:["ng-station",-157],e:{"#":258}},t:{"-":{a:["rea",-158],b:["ar",-159],l:["ine",-160],p:["ie",-161]}},m:["ing",528]},i:{r:{m:["an",153],w:["oman",153],"#":-154,p:["erson",153]}},l:{k:{b:{o:{a:{r:{d:{"#":-155,"-":["teacher",-156]}}}}},"#":379}},s:{e:{"#":262},s:["is",715]},n:{n:{e:{l:{i:{s:["e",438],z:["e",438]}}}}},w:["",639],m:["pion",785]},u:{c:["k",151],r:["ch",-184]},e:{c:{k:{"#":-162,e:["r",161],o:["ut",161],"-":{c:["ircle",-163],d:["ouble",-164],s:["quare",-165]}}},q:{u:{e:{"#":161,r:["",161]}}},e:{s:{e:{"#":-166,f:["lower",165]}}},s:{s:{"#":-167,"-":{b:{i:["shop",-168],o:["ard",-169]},k:{i:["ng",-170],n:["ight",-171]},p:["awn",-172],q:["ueen",-173],r:["ook",-174]}}},a:["t",166],v:{r:{o:{n:{"-":{c:{i:{r:{c:{l:{e:{"-":{d:["own",-175],l:["eft",-176],r:["ight",-177],u:["p",-178]}}}}}}},d:["own",-179],l:["eft",-180],r:["ight",-181],u:["p",-182]}}}}},w:["",639]},o:{c:["olate",207],p:["per",445],r:["e",827]},r:["onicle",449]},e:{n:{s:["or",57],t:{e:{r:{i:["ng",258],"#":304}},r:{e:{"#":304},a:["l",488]}}},r:{t:{i:{f:{i:{c:{a:{t:{e:["",-153],i:["on",152]}}}}}}}},l:["luloid",340],a:["se",795]},a:{k:["e",60],m:{p:{a:{n:["a",71],i:["gn",697]},g:["round",-130],s:["ite",129]},e:{r:{a:{"#":-128,"-":["retro",-129]}}}},u:{t:{e:{r:{i:{z:["e",114],s:["e",114]}}}}},l:{c:["ulator",-119],e:{n:{d:{a:{r:{"#":-120,"-":{a:["lt",-121],c:["heck",-122],d:["ay",-123],m:["inus",-124],p:["lus",-125],t:["imes",-126],w:["eek",-127]}}}}}},l:{"#":623}},n:{d:["y-cane",-131],n:["abis",-132],"#":343,v:{a:{s:{"#":644,s:["",644]}}}},p:{s:{u:{l:{i:{s:["e",132],z:["e",132]},a:["te",132],e:{"#":132,s:["",-133]}}}},"#":237,e:["r",637]},r:{"#":-134,"-":{a:["lt",-135],b:["attery",-136],c:["rash",-137],s:["ide",-138]},a:{v:{a:{n:{"#":-139}}}},e:{t:{"-":{d:["own",-140],l:["eft",-141],r:["ight",-142],s:{q:{u:{a:{r:{e:{"-":{d:["own",-143],l:["eft",-144],r:["ight",-145],u:["p",-146]}}}}}}},u:["p",-147]}}},r:{o:["t",-148],y:["",697]},t:{"-":{a:["rrow-down",-149],p:["lus",-150]}},d:["inal",488]},s:{h:["-register",-151],t:{"#":151,r:["ate",584]},e:["",358],c:["ade",728]},t:{"#":-152,c:["h",795]},d:["",262],v:["alry",453],y:["",488],b:["",828]},y:{c:{l:{e:{"#":75}}},p:["her",205]},r:{a:{m:{"#":87},c:["k",161],w:["",232],b:{b:{y:["",234],e:["d",234]}},n:{k:{"#":379}},p:{"#":648,p:["er",858]}},e:{d:{e:{n:{t:{i:{a:{l:{s:["",152],"#":152}}}}}},i:["t-card",-232]},s:["t",237],e:["p",579],a:["ture",861]},o:{p:{"#":-233,"-":["alt",-234]},s:{s:{b:{r:{e:{e:{d:{i:["ng",234],"#":234}}}}},i:["ng",234],"#":-235,h:["airs",-236]}},w:{i:["ng",236],"#":-237,n:{w:["ork",237],"#":-238}}},i:{s:["scross",234],m:["son",353]},u:["tch",-239]},l:{a:{s:{h:["",109],s:{i:["fy",759],"#":759}}},i:{n:["ic-medical",-188],p:{b:{o:{a:{r:{d:{"#":-189,"-":{c:["heck",-190],l:["ist",-191]}}}}}},"#":232},c:["k",262]},o:{c:{k:{"#":-192}},n:{"#":192,e:["",-193]},s:{e:["d-captioning",-194],u:["re",795]},u:{d:{"#":-195,"-":{d:["ownload-alt",-196],m:{e:["atball",-197],o:{o:{n:{"#":-198,"-":["rain",-199]}}}},r:["ain",-200],s:{h:["owers-heavy",-201],u:{n:{"#":-202,"-":["rain",-203]}}},u:["pload-alt",-204]}}},a:["k",545]}},u:{t:{"#":-242,t:["ing",241]},r:{b:["",161],v:{e:{"#":241}},l:{"#":520,i:["cue",706]},r:["ent",800]},l:{t:{i:{v:{a:{t:{e:{"#":232}}}}}}},b:{e:{"#":-240,s:["",-241]},"#":240},s:["tody",428],d:["",639]},i:{r:{c:{l:{e:{"#":-185,"-":["notch",-186]}},u:{i:["t",184],l:["ate",184],m:["navigate",221]}}},t:["y",-187],p:["her",205],n:["ema",340],v:{i:{l:{i:{s:{e:{"#":704}},z:{e:{"#":704}}}}}}}},m:{a:{i:{n:["stay",12],z:["e",506],l:["-bulk",-531]},s:{t:{e:["rmind",103],h:["ead",349]},q:{u:{e:{r:["ade",545],"#":545}}},k:["",-546],s:["",578]},k:["e",111],r:{i:{j:["uana",131],h:["uana",131]},k:{"#":161,i:["ng",539],e:["r",-540]},r:["ow",442],"#":540,s:{"#":-541,"-":{d:["ouble",-542],s:{t:{r:{o:{k:{e:{"#":-543,"-":{h:["",-544],v:["",-545]}}}}}}}}}},c:["hine",133],t:{c:{h:{"#":161}}},n:{a:["gement",258],u:{s:{"#":428},f:["acture",479]},p:["ower",428],o:{e:{u:{v:{r:{e:{"#":438}},e:["r",438]}}}},e:{u:{v:{e:{r:{"#":438}}}}},l:{i:["ke",531],y:["",531]},f:["ul",531],s:["ion",730]},l:{l:{e:{t:["",411],u:["s",411]}},e:["",-532],a:{r:{k:{y:["",952],e:["y",952]}}}},g:{i:{c:{a:["l",528],"#":-529}},n:["et",-530]},p:{"#":-533,p:["ing",532],"-":{m:{a:{r:{k:{e:{d:{"#":-534,"-":["alt",-535]},r:{"#":-536,"-":["alt",-537]}}}}}},p:["in",-538],s:["igns",-539]}},v:{e:["n",785],i:["n",785]}},o:{l:{e:["cule",45],l:["ycoddle",48],d:{"#":715}},t:{e:["",45],o:{r:{c:{o:["ach",115],a:["r",133],y:["cle",-578]},b:{u:["s",115],i:["ke",577]},t:["ruck",879]}},t:["le",194],i:["on",662]},d:{e:{r:{a:{t:{e:{"#":153}}}}}},w:["n",241],v:{i:["e",340],e:["",697]},b:{i:{l:{e:{"#":-566,"-":["alt",-567]}}},"#":685},n:{e:{y:{"-":{b:{i:{l:{l:{"#":-568,"-":{a:["lt",-569],w:{a:{v:{e:{"#":-570,"-":["alt",-571]}}}}}}}}},c:{h:{e:{c:{k:{"#":-572,"-":["alt",-573]}}}}}}}},u:["ment",-574]},o:{n:{l:["ight",574],s:["hine",574],"#":-575}},r:["tar-pestle",-576],s:["que",-577],u:{n:{t:{a:["in",-579],"#":578}},s:{e:{"#":-580,"-":["pointer",-581]}},l:{d:{"#":715}}}},e:{a:{s:["ure",60],t:["",442],n:["der",952]},n:{t:["ality",103],"#":428,a:["ge",452],o:["rah",-553]},t:{r:{o:{p:["olis",186],"#":805},e:["",851]},h:{a:{m:{p:{h:{e:{t:{a:{m:{i:{n:{e:{"#":379}}}}}}}}}}},"#":379},t:["le",442],e:{o:{r:{o:["id",554],"#":-555}},r:["",851]}},m:{b:["ranophone",275],o:{r:{y:{"#":-552},i:["al",573]}}},e:{t:{"#":338}},s:{h:["",520],s:["",578],a:["",818]},d:{a:{l:{"#":-547,l:{i:{o:{n:{"#":546}}}}}},k:["it",-548],i:["cine",582]},h:{"#":-549,"-":{b:["lank",-550],r:["olling-eyes",-551]}},r:["cury",-554],l:["t",697]},i:{n:{d:["",103],o:["r",182],t:{"#":210},u:{s:{"#":-562,"-":{c:["ircle",-563],s:["quare",-564]}}}},c:{r:{o:{b:["e",110],c:["hip",-556],p:{h:{o:{n:{e:{"#":-557,"-":{a:{l:{t:{"#":-558,"-":["slash",-559]}}},s:["lash",-560]}}}}}},s:["cope",-561]}},k:["le",578]},s:["t",194],d:{d:{l:{e:{"#":304}}}},t:{t:{"#":428,e:["n",-565]}},k:["e",556]},u:{f:["fin",370],t:["ilate",540],c:["kle",578],g:["-hot",-582],s:["ic",-583],l:["tiplication",851]}},l:{i:{n:{c:["hpin",12],g:["",108],k:{"#":-514,u:["p",513]},e:["ar",697]},q:{u:{i:{d:{i:{s:["er",80],z:["er",80]}}}}},g:{h:{t:{h:["eaded",260],b:["ulb",-513]}}},f:{e:["-ring",-512],t:["",952]},a:["ison",513],r:["a-sign",-515],s:{t:{i:["ng",515],"#":-516,"-":{a:["lt",-517],o:["l",-518],u:["l",-519]}}}},y:{n:["chpin",12],r:["ic",496]},a:{u:{r:["els",47],g:{h:{t:["er",500],"#":-501,"-":{b:["eam",-502],s:["quint",-503],w:["ink",-504]}}}},y:{e:{r:{"#":69,"-":["group",-505]}},o:["ver",795]},p:{"#":184,t:{o:{p:{"#":-498,"-":{c:["ode",-499],m:["edical",-500]}}}}},n:{d:["mark",-496],g:["uage",-497]},d:["der",697],m:{"#":697,e:["",781]},v:{i:["sh",728],a:["tory",858],"#":858},t:["her",743],s:{h:["",743],t:["",834]},b:{e:{l:{"#":824}},o:["r",827]},g:{g:{a:["rd",868],e:["r",868]}}},o:{v:{e:{"#":69,r:["",307]}},g:{e:{"#":99}},t:{"#":184},u:{n:["ge",230],r:["",363]},p:["",232],d:["ge",315],w:{e:["r",363],"-":["vision",-527]},c:{a:["tion-arrow",-520],k:{"#":-521,"-":["open",-522]}},n:{g:{"-":{a:{r:{r:{o:{w:{"-":{a:{l:{t:{"-":{d:["own",-523],l:["eft",-524],r:["ight",-525],u:["p",-526]}}}}}}}}}}}}},z:{e:{n:{g:{e:{"#":631}}}}},o:{s:{e:{n:{e:["ss",637],"#":890}}},k:{"#":708,u:["p",708]}}},e:{d:["ger",89],g:{e:{r:{"#":89,d:["emain",528]}}},a:{d:{"#":153,i:["ng",785]},r:["n",161],f:{l:["et",354],"#":-506,a:["ge",505]},n:{i:["ng",515],"#":515}},v:{e:{l:{"#":353,"-":{d:["own-alt",-510],u:["p-alt",-511]}}}},m:["on",-507],s:{s:{"-":{t:{h:{a:{n:{"#":-508,"-":["equal",-509]}}}}}}}},u:{c:["ubrate",299],g:["gage-cart",-528],n:["ation",574]}},b:{a:{c:{k:{b:["one",12],s:{p:{a:{c:{e:{r:["",50],"#":-51}}}}},"#":51,w:{a:{r:{d:{"#":-52,s:["",51]}}}},g:["round",245]},o:["n",-53]},b:{y:{"#":-49,"-":["carriage",-50]},e:["",48]},h:["ai",-54],l:{a:{n:{c:{e:{"-":{s:{c:{a:{l:{e:{"#":-55,"-":{l:["eft",-56],r:["ight",-57]}}}}}}}}}}},k:["",161],l:{"#":283,o:["ck",283],y:["hoo",639]}},n:{"#":-58,n:["ing",57],i:{s:{h:{"#":57}}},d:{"-":["aid",-59],"#":184},g:{"#":69},a:["l",855]},r:{c:["ode",-60],"#":60,s:["",-61],r:{o:["om",60],i:{c:{a:{d:{e:{"#":60}}}}},e:["l",275]},f:["",151]},s:{e:{b:["all-ball",-62],"#":452},k:["etball-ball",-63],h:["",757]},t:{h:{r:{o:{o:{m:{"#":63}}}},"#":-64,e:{"#":63,r:["",812]},t:["ub",63]},t:{e:{r:{y:{"-":{e:["mpty",-65],f:["ull",-66],h:["alf",-67],q:["uarter",-68],t:["hree-quarters",-69]}}}}},r:["achian",362],c:["h",578]},d:["ger",110],u:["lk",161],f:["fle",234],p:{t:{i:{s:{t:{e:["ry",358],r:["y",358]}}}}},g:["",806]},l:{a:{c:{k:{b:{a:["ll",57],o:["ard",154]},g:["uard",262]}},s:["t",343]},o:{c:{k:{a:{d:{e:{"#":60}},g:["e",795]},"#":60}},g:["",-84],t:["ch",779]},e:{n:{d:{e:{r:{"#":-81,"-":["phone",-82]}}}},m:["ish",540],e:["d",697],s:["s",730]},i:["nd",-83],u:{f:["f",84],s:["h",353]}},e:{d:["",-70],e:{r:["",-71],f:["burger",410],p:["er",594]},l:{l:{"#":-72,"-":["slash",-73]},e:["aguer",110]},z:["ier-curve",-74],f:["og",194],c:["loud",194],a:{t:{"#":275},r:["ing",438]},"#":291,t:{"#":637,o:["ken",734]},g:["",652],s:["peak",734]},o:{t:["tom",69],n:{k:{"#":69},e:{"#":-88},g:["",-89]},l:{d:{"#":-85,f:["ace",84]},t:["",-86],l:["ock",283]},m:{b:{a:["rd",86],"#":-87}},o:{k:{"#":-90,"-":{d:["ead",-91],m:["edical",-92],o:["pen",-93],r:["eader",-94]},m:{a:{r:{k:{"#":-95,e:["r",94]}}}},l:["et",354]},b:{"#":278,y:["",278]},m:["",299],s:["t",447]},r:{d:{e:{r:{"-":{a:["ll",-96],n:["one",-97],s:["tyle",-98]},"#":685}}},e:["",855]},w:["ling-ball",-99],x:{"#":-100,w:{o:{o:{d:{"#":99}}}},f:{u:{l:{"#":99}}},"-":["open",-101],e:["s",-102]},z:["o",151],u:["nder",262],s:{o:["m",442],s:["",784]},d:["",715],p:["",757],a:["rd",818]},u:{z:["zer",71],g:["",-111],i:{l:{d:{i:["ng",-112],"#":111}}},l:{l:{h:["orn",-113],s:["eye",-114]},b:["",512]},r:{n:{i:["ng",114],"#":-115},g:["er",410],d:["en",948],t:["hen",948]},s:{b:["ar",115],"#":-116,"-":["alt",-117],i:["ness-time",-118],s:["",491]},f:["f",307],c:["k",453],n:["k",697]},i:{b:["le",-75],k:{e:{"#":75},i:["ng",-77]},c:{y:{c:{l:{e:{"#":-76}}}}},n:["oculars",-78],o:["hazard",-79],r:["thday-cake",-80],t:["e",114],v:["ouac",129],s:["cuit",226],l:{k:["",234],l:["fold",944]},d:["",637]},r:{a:{i:{l:["le",-103],n:{p:["ower",103],"#":-104,i:["ac",103]}},g:{g:["ing",236],"#":236},n:{d:{"#":866,m:["ark",866]}}},e:{a:{d:["-slice",-105],k:{"#":161}}},i:{e:{f:{c:{a:{s:{e:{"#":-106,"-":["medical",-107]}}}}}},d:["le",161],n:["g",637]},o:{a:["dcast-tower",-108],o:["m",-109],w:["se",232],c:["hure",354]},u:{s:{h:{"#":-110,i:["ng",109],w:["ood",109]}}}}},g:{r:{o:{u:{n:["d",12],c:["hy",234]},k:["",221],o:["m",869]},a:{n:["t",47],s:["p",221],z:["e",232],d:["uation-cap",-388]},u:["mpy",234],e:{a:{t:{e:{r:{"-":{t:{h:{a:{n:{"#":-389,"-":["equal",-390]}}}}}}}}}},i:{m:["ace",-391],n:{n:{i:{n:{g:{"#":391}}}},"#":-392,"-":{a:["lt",-393],b:{e:{a:{m:{"#":-394,"-":["sweat",-395]}}}},h:["earts",-396],s:{q:{u:{i:{n:{t:{"#":-397,"-":["tears",-398]}}}}},t:["ars",-399]},t:{e:["ars",-400],o:{n:{g:{u:{e:{"#":-401,"-":{s:["quint",-402],w:["ink",-403]}}}}}}},w:["ink",-404]}},p:{"-":{h:["orizontal",-405],l:{i:{n:{e:{s:{"#":-406,"-":["vertical",-407]}}}}},v:["ertical",-408]},"#":806}}},i:{n:["mill",60],b:["e",161],d:["dy",260],v:{e:{"#":373},i:{n:{g:{"#":373}}}},f:{t:{"#":-374,s:["",-375]}},s:["t",442]},o:{n:{g:["",71],d:["ola",133]},b:["ble",85],s:{s:{i:{p:{"#":212}}}},l:{f:["-ball",-386],e:["m",687]},p:["uram",-387],"#":697},e:{n:{i:{u:{s:{"#":103}}},d:["erless",-372]},r:["m",110],l:{d:{e:["d",241],"#":241}},m:{"#":-371,s:["tone",370]},s:["tural",730],a:{r:{i:["ng",869],"#":869,t:["rain",869]}}},l:{i:["tch",110],o:{w:{"#":114,e:["r",363]},s:{s:{"#":212}},a:["t",236],b:{e:{"#":-381,"-":{a:{f:["rica",-382],m:["ericas",-383],s:["ia",-384]},e:["urope",-385]}}}},a:{s:{s:{"-":{c:["heers",-376],m:{a:{r:{t:{i:{n:{i:{"#":-377,"-":["alt",-378]}}}}}}},w:["hiskey",-379]},"#":379,e:["s",-380],f:["ul",379]}},z:["e",379]},u:["e",606]},a:{n:{j:["a",131],g:["",685]},s:{c:["onade",236],h:{"#":241},b:["ag",287],"-":["pump",-369]},m:{e:["pad",-368],b:{o:{g:["e",506],l:["",637]},l:["ing",637]},i:["ng",637]},v:["el",-370],l:["lery",438],g:["",500]},u:{y:["",151],i:{d:{a:["nce",258],e:{"#":438}},t:["ar",-409]},t:["ter",858]},h:{o:{s:{t:{"#":-373,w:{r:{i:{t:{e:{r:["",372],"#":372}}}}}}}}},y:["re",706]},k:{e:{y:{s:{t:{o:{n:{e:{"#":12}}}}},"#":-489,b:["oard",-490]},e:{p:{"#":281}},r:["nel",442]},n:{o:{w:["",69],c:["koff",192]},i:["ght",453],e:["ll",685]},a:{t:["",151],a:["ba",-488]},h:{a:{t:["",151],n:["da",-491]}},i:{d:["",182],n:{d:{l:["e",343],"#":759}},s:{s:{"#":-492,"-":{b:["eam",-493],w:["ink-heart",-494]}}},w:["i-bird",-495],b:["osh",795]}},r:{a:{g:{i:["ng",21],"#":824},i:{l:{c:["ar",133],"#":869},s:["e",343],n:["bow",-671]},n:{g:{e:{"#":221}},d:["om",-672]},t:{i:{o:{n:{a:{l:{i:{s:["e",241],z:["e",241]}}}}},f:["y",730]}},f:["t",578],d:{i:{o:{t:["herapy",668],a:["ctivity",668]},a:{t:{i:{o:{n:{"#":-669,"-":["alt",-670]}}}}},u:["s",690]}},c:["e",697]},e:{a:{r:{w:{a:{r:{d:{"#":51,s:["",51]}}}}},c:{h:{"#":221}},d:["",677]},l:{e:{g:["ate",60],a:["se",284]},a:["te",513],i:["eve",703]},t:{i:["re",69],c:["h",151],a:["rd",161],e:{n:{t:{i:{v:{e:["ness",551],i:["ty",551]},o:["n",551]}}}},w:["eet",-684]},s:{e:{r:["ve",89],a:["rch",708]},p:{o:{n:{s:["e",679],d:["",679]}}},t:["room",-683],o:["und",685]},c:{o:{r:{d:{"#":89,"-":["vinyl",-674]}},m:["mendation",604],n:["struct",675]},k:["oner",118],r:["eate",637],e:{p:["tion",672],i:["pt",-673]},y:["cle",-675]},g:{o:["rge",151],u:{r:["gitate",151],l:["ate",715]},i:{s:{t:{e:{r:{"#":315,e:["d",-678]}}}}}},m:{a:{r:{k:{"#":212}},k:["e",675]},e:["mbering",551],o:{d:["el",675],v:["e-format",-679]},i:["t",818]},p:{l:{i:["cate",228],e:["te",338],y:{"#":-680,"-":["all",-681]}},r:{e:{s:{e:{n:{t:{"#":532}}}}},o:["cess",674]},o:{s:{i:["tory",573],e:["",610]}},u:["blican",-682]},d:{a:{c:{t:{"#":230}}},u:["ce",241],d:{e:{n:{e:["d",353],"#":353}}},"#":353,o:{"#":-676,"-":["alt",-677]},e:["em",703]},e:["fer",485],u:["se",674],f:["ashion",675],v:["erberate",685]},i:{g:["idly",85],n:{g:{e:["r",192],l:{e:{t:{"#":520}}},"#":-686,i:["ng",685]}},v:["al",291],f:{f:{l:["e",505],"#":505}},b:{b:{o:{n:{"#":-685}}}},c:["k",961]},o:{t:["ary",184],u:{n:{d:{a:["bout",184],"#":184}},t:{i:["ne",658],e:{"#":-690}}},o:{f:["y",184],t:["er",307]},a:{c:["h",184],s:["t",485],d:{"#":-687}},p:{e:{"#":184,w:["ay",870]},h:["y",184]},s:["y",353],v:["ing",565],m:["p",637],l:{e:["play",637],l:{"#":706}},b:["ot",-688],c:["ket",-689],q:["uette",688],e:["ntgen",690]},u:{n:{"#":637,n:["ing",-698]},b:{l:["e-sign",-693],b:["ish",873]},l:{e:{"#":693,r:{"#":-694,"-":{c:["ombined",-695],h:["orizontal",-696],v:["ertical",-697]}}}},p:["ee-sign",-699]},"#":690,s:{s:{"#":-691,"-":["square",-692]}}},w:{i:{l:["d",21],t:{"#":103,c:["hing",528]},r:["etap",110],e:{n:{e:{r:{"#":262,w:{u:{r:{s:{t:{"#":262}}}}}}}}},n:{n:["ow",307],k:["",444],d:{e:["r",488],s:["ock",757],i:["ng",952],"#":-953,o:{w:{"-":{c:["lose",-954],m:{a:["ximize",-955],i:["nimize",-956]},r:["estore",-957]}}}},e:{"-":{b:["ottle",-958],g:{l:{a:{s:{s:{"#":-959,"-":["alt",-960]}}}}}}}},z:{a:{r:{d:{l:["y",528],"#":528}}},"#":785},f:["i",-952]},h:{e:{e:{l:{"#":75,c:["hair",-951]}}},i:{r:["lybird",445],p:["",743],z:{z:["",785],"#":785}},o:{r:{l:{"#":520}},p:["",757]},a:["p",757]},a:{t:{c:["h",161],e:{r:{s:{h:{e:{d:{"#":259}}}},c:["ourse",800],"#":-947}}},y:["",258],r:{m:{n:["ess",442],h:["eartedness",442]},e:["house",-946]},n:{d:{e:{r:{i:["ng",565],e:["r",777],"#":952}}}},d:{"#":578},g:["er",637],i:["ter",714],l:{k:{"#":943,i:["ng",-944]},l:["et",-945]},v:["e-square",-948]},o:{r:{k:{"#":232,f:["orce",428],i:["ng",697]},l:["d",380],d:["s",496]},o:["zy",260],n:{d:["er",662],"-":["sign",-961]}},e:{a:{k:["ened",241],r:{"#":855,y:["",855]},v:["e",952]},e:{n:{i:{e:{"#":262}}},w:["ee",946]},l:["t",743],i:{g:{h:{t:{"#":-949,i:{n:{g:["",948],e:["ss",948]}},"-":["hanging",-950]}}}}},r:{a:{i:["th",372],p:["",952]},i:{t:{e:{"#":611}},n:["g",961],c:["k",961]},e:{a:{k:["",637],t:["he",952]},n:["ch",-962]}}},t:{e:{m:{p:{e:{s:["tuous",21],r:{a:{t:{u:{r:{e:{"-":{h:["igh",-832],l:["ow",-833]}}}}}}}},l:["e",814]}},l:{a:["mon",44],e:{f:["ax",310],p:{h:{o:{n:{e:{"#":623}}}}},c:{a:{s:{t:{i:{n:{g:{"#":886}}}}}}},v:{i:{s:{i:{o:{n:{"#":886}}}}}}},l:["y",886]},a:["se",110],s:{t:{i:{s:["",283],c:["le",283]}}},r:{m:{i:{n:{a:{t:{e:{"#":343}},l:["",-835]},o:["logy",496],u:["s",834]}}}},n:{d:{e:{r:{n:["ess",442],"#":784}},"#":697},g:["e",-834]},e:{m:["",800],t:{h:{"#":-830,"-":["open",-831]}}},x:{t:{"-":{h:["eight",-836],w:["idth",-837]}}}},a:{p:{r:["oom",60],"#":110,i:["ng",826],e:{"#":-827,l:["ine",826]}},n:["",114],b:{"#":161,l:{e:{t:{"#":-821,"-":["alt",-822],s:["",-823]},"#":-819,"-":["tennis",-820]}},e:["rnacle",814],u:{l:{a:{r:{i:{z:["e",818],s:["e",818]}},t:["e",818]}}}},l:{l:["y",161],e:{n:{t:{"#":373}}}},i:{n:["t",194],l:{o:["r",241],"#":262}},g:{"#":-825,s:["",-826]},r:["tar",273],k:{e:{"#":338}},c:["hometer-alt",-824],t:{t:{e:{r:{"#":824}}}},x:{"#":827,i:{c:["ab",828],"#":-829}},s:{k:{"#":827,s:["",-828]}}},u:{b:{"#":63,e:["",805]},r:{k:["ey",86],n:{"#":637},d:["",648]}},o:{l:["l",71],w:["er",211],p:["",237],u:{c:{h:{"#":291}}},a:["d",362],n:{a:["lity",488],e:["",853]},y:["",637],s:["s",743],o:{t:{h:{"#":-863}},l:{b:["ox",-861],"#":861,s:["",-862]}},g:{g:{l:{e:{"-":{o:{f:["f",-857],n:["",-858]}}}}}},i:{l:{e:{t:{t:["e",858],"#":-859,"-":["paper",-860]}}}},r:{a:["h",-864],i:["i-gate",-865]}},h:{u:{n:["derbolt",85],m:{b:{"#":505,s:{"-":{d:["own",-848],u:["p",-849]}},t:["ack",-850]}}},i:{c:["ket",109],n:{n:["ed",241],"#":241}},w:{a:{r:{t:{"#":234,w:["ise",234]}}}},r:{u:["m",275],i:["ve",299],e:{a:{d:{"#":684,b:["are",855]}},s:["h",743]},a:["sh",743],o:["ne",858]},a:["umaturgy",528],o:["rium",837],"#":-838,"-":{l:{a:["rge",-839],i:["st",-840]}},e:{a:["ter-masks",-841],r:{m:{o:{m:{e:{t:{e:{r:{"#":-842,"-":{e:["mpty",-843],f:["ull",-844],h:["alf",-845],q:["uarter",-846],t:["hree-quarters",-847]}}}}}}}}}}},r:{a:{i:{n:{"#":-870},l:{"#":262,e:["r",-869]}},n:{s:{c:["ript",228],v:{e:{r:{s:{a:["l",234],e:["",234]}}}},p:["ort",722],g:{e:{n:{d:{e:{r:{e:["d",871],"#":-872,"-":["alt",-873]}}}}}}}},v:["erse",234],c:{k:{"#":234},e:["",372],t:["or",-866]},s:{h:{"#":-874,"-":{a:["lt",-875],r:{e:{s:{t:{o:{r:{e:{"#":-876,"-":["alt",-877]}}}}}}}}}},m:{p:["",447],c:["ar",870],w:["ay",870],"#":-871},d:["emark",-867],f:["fic-light",-868]},i:{m:{"#":232,m:["ed",241]},u:["mph",236],c:{k:{l:["e",341],"#":528},e:["",444]},f:["le",637],t:["e",855],p:["e",873]},e:{e:{t:["op",237],"#":-878},n:["d",241],a:["sure",370]},o:{p:{e:{"#":475},h:["y",-879]},u:["nce",743],l:["ley",870]},u:{m:["pery",873],c:{k:{"#":-880,"-":{l:["oading",-881],m:{o:{n:["ster",-882],v:["ing",-883]}},p:["ickup",-884]}}}}},i:{c:{k:{"#":161,e:{r:["",442],t:{"#":824,"-":["alt",-851]}}}},d:["dler",182],k:["e",182],m:{e:{"#":191,s:{"#":-852,"-":["circle",-853]},w:["orn",855]}},p:{"#":237},e:["",513],l:["t",515],n:{t:{i:["nnabulation",685],"#":-854,"-":["slash",-855]},c:{t:{u:["re",853],"#":853}},g:["e",853]},r:{e:{d:["",-856],"#":855}}},y:{k:["e",182],m:["pan",275],p:["eface",358]},w:{i:{n:{k:["ling",444],e:["",952]},s:{t:{"#":952}}}},s:["hirt",-885],t:["y",-886],v:["",-887]},f:{u:{r:["ious",21],c:["k",69],s:["sy",234],l:{f:{i:{l:{"#":338,l:["",338]}}}},e:["l",343],n:{n:["el-dollar",-366],d:{a:["mental",488],"#":798},c:{t:{i:{o:{n:{"#":532,a:["l",697]}}}}},"#":637},t:["bol",-367],m:["e",750]},e:{a:{t:{h:{e:{r:{b:{e:["d",48],r:["ained",260]},"#":-312,i:["ng",311],"-":["alt",-313]}}}}},e:{b:["leminded",51],d:["",697]},m:["ale",-314],r:{v:{o:{u:["r",343],r:["",343]},e:["ncy",343],i:["dness",343]}}},o:{r:{b:{i:{d:{d:{a:["nce",57],i:["ng",57]}}}},e:{s:["horten",241],"#":361,t:["oken",730]},r:{a:{d:{e:["r",361],"#":361},r:["d",361]}},w:{a:{r:{d:{"#":-362,s:["",361]}}}},t:["h",361],g:{e:{"#":411}},m:{"#":715}},g:["",194],i:["l",234],c:{u:{s:{"#":258,s:["ing",258],i:["ng",258]}}},l:{d:{e:{r:{"#":-355,"-":{m:["inus",-356],o:["pen",-357],p:["lus",-358]},o:["l",873]}}},i:{o:["",505],a:["ge",505]}},n:{t:{"#":-359,"-":["awesome-logo-full",-360]},d:["ness",442]},u:{n:["t",358],r:["square",781]},o:["tball-ball",-361]},l:{u:{n:["k",86],s:{h:{"#":353,e:["d",-354]}},i:["d",565]},o:{u:["rish",299],c:["k",578],w:{"#":697},g:["",743]},e:{d:["ge",311],s:["h",715]},i:{c:{k:{"#":340}},p:["",505],r:["t",637]},a:{k:{"#":343,e:["",754]},c:["k",343],m:{e:["",343],i:["ng",343]},g:{s:["tone",349],"#":-350,"-":{c:["heckered",-351],u:["sa",-352]}},s:{k:{"#":-353,f:["ul",352]},h:["",444]},t:{"#":634,u:["s",952]}}},a:{i:["l",86],n:{"#":-308,c:{y:{"#":475}}},s:{t:{"-":{b:["ackward",-309],f:["orward",-310]}}},x:["",-311],c:{s:["imile",310],e:{"#":358}},m:["ily",452],g:["",855],t:["igue",855],r:{t:{i:["ng",952],"#":952}}},i:{r:{e:{"#":-344,d:{o:["g",262],r:["ake",273]},"-":{a:["lt",-345],e:["xtinguisher",-346]},p:["lug",639]},i:["ng",343],s:["t-aid",-347]},g:{u:{r:{e:{r:["",118],"#":475}}},h:["ter-jet",-315]},t:["",161],l:{e:{"#":-316,"-":{a:{l:["t",-317],r:["chive",-318],u:["dio",-319]},c:{o:{d:["e",-320],n:["tract",-321]},s:["v",-322]},d:["ownload",-323],e:{x:{c:["el",-324],p:["ort",-325]}},i:{m:{a:["ge",-326],p:["ort",-327]},n:{v:{o:{i:{c:{e:{"#":-328,"-":["dollar",-329]}}}}}}},m:{e:{d:{i:{c:{a:{l:{"#":-330,"-":["alt",-331]}}}}}}},p:{d:["f",-332],o:["werpoint",-333],r:["escription",-334]},s:["ignature",-335],u:["pload",-336],v:["ideo",-337],w:["ord",-338]}},l:{i:["ng",338],"#":-339,"-":["drip",-340]},m:["",-341],t:{r:["ate",341],e:["r",-342]}},n:{g:{e:{r:{p:["rint",-343],m:["ark",342]}}},i:["sh",795],a:["l",834]},s:{h:["",-348],t:["-raised",-349]},d:["dle",637]},r:{y:["",182],a:{m:{e:{"#":230}},c:["tion",259],n:{k:{"#":262,f:{u:{r:{t:{e:{r:{"#":262}}}}}}}}},u:{s:["trate",234],m:["p",262]},o:{n:{t:{w:{a:{r:{d:{s:["",361],"#":361}}}}}},g:["",-363],w:{n:{"#":-364,"-":["open",-365]}},l:["ic",637]}}},p:{a:{r:{t:{i:["cle",45],"#":259,a:["ke",716]},a:{d:{i:{g:{m:{"#":475}}}},c:["hute-box",-602],g:["raph",-603]},k:{"#":603,i:["ng",-604]},c:["el",716]},m:{p:{e:["r",48],h:["let",354]}},c:{k:{a:{g:{e:{"#":99}}},"#":685},i:["fication",610]},s:{t:{u:["re",232],a:["farianism",-606],e:["",-607]},s:{"#":428,e:["l",578],p:["ort",-605]}},t:{e:{"#":237},h:["",689],t:["ern",715]},w:{l:["",262],"#":-610},i:{n:{t:{"#":488,"-":{b:["rush",-596],r:["oller",-597]}}}},l:{m:{"#":546},l:{e:{t:{t:["e",597],"#":-599}},"#":855},e:{t:{t:{e:{"#":-598}}}}},p:{e:{r:{"#":585,"-":["plane",-600],c:["lip",-601]}}},g:["er",-595],u:{s:{e:{"#":-608,"-":["circle",-609]}}},d:{"#":820},n:["",873]},r:{i:{z:{e:{"#":47}},m:{a:{l:["",488],"#":785}},n:{t:["",-658],c:["ipal",785]},v:["y",858],c:["k",861]},e:{s:{e:{n:{t:{"#":47}},r:["ve",703]},i:["dent",153],s:["",222],c:{r:{i:{p:{t:{i:{o:{n:{"#":-655,"-":{b:{o:{t:{t:{l:{e:{"#":-656,"-":["alt",-657]}}}}}}}}}}}}}}}},v:{e:["ntion",60],a:["il",697],i:["ew",868],u:["e",868]},i:["ndication",730],p:["are",869]},o:{h:["ibition",57],s:["cription",57],g:["ress",111],f:["essorship",153],v:["oke",343],t:{o:{t:{y:{p:{e:{"#":475}}}}}},j:{e:{c:{t:{"#":475,"-":["diagram",-660],i:["le",688]}}}},c:{e:{d:{u:{r:{e:{"#":658,s:["",-659]}}}},s:["s",658]}},r:["ogue",818]},u:{n:{e:{"#":232}}},a:{y:{"#":-653,i:["ng-hands",-654]}}},e:{d:{a:{l:{"#":75}}},a:{r:["l",87],k:["",237],c:{e:{n:["ik",270],f:["ulness",610],"#":-611}},l:["",685]},s:{t:{e:["r",110],l:["e",784]}},n:{n:["ant",237],i:["tentiary",611],"#":-612,"-":{a:["lt",-613],f:["ancy",-614],n:["ib",-615],s:["quare",-616]},c:{i:{l:{"-":{a:["lt",-617],r:["uler",-618]}}}}},e:{r:["",291],"#":946},r:{m:["eate",341],c:{o:["late",341],e:{n:{t:{"#":-621,a:{g:{e:{"#":-622}}}}}}},s:{o:{n:{a:{"#":475},"-":["booth",-623]}},i:["st",697]},e:["grine",565],i:["od",795]},c:{k:{"#":578,e:["r",861]}},o:["ple-carry",-619],p:["per-hot",-620],l:["t",800],t:["er",861]},l:{a:{y:{s:["cript",89],p:["en",611],"#":-638,a:["ct",637],"-":["circle",-639]},c:{e:{"#":452,"-":["of-worship",-634]}},t:["e",452],n:{e:{"#":-635,r:["",634],"-":{a:["rrival",-636],d:["eparture",-637]},t:["",701]}}},u:{n:{g:["e",270],k:["",270]},m:{e:["",311],a:["ge",311]},g:["",-640],s:{"#":-641,"-":{c:["ircle",-642],s:["quare",-643]}}},e:["nty",578],y:["",697],o:{u:["ghshare",716],w:["share",716],s:["ive",795]}},s:["yche",103],u:{k:["e",151],r:{g:{e:{"#":151}}},t:{"#":230,z:["",861]},m:["p",442],l:{s:{a:["tion",444],e:["",444]},l:{u:["late",800],"#":961}},s:{s:["yfoot",579],h:["pin",849]},n:["ch",639],b:["lish",657],z:["zle-piece",-661],p:["pet",861]},i:{l:{l:{a:["r",211],s:["",-632],"#":631},e:["",578]},n:{h:["ead",278],"#":349},c:{t:{u:{r:{e:{"#":340}}}},"#":340},t:["h",442],g:{g:["y-bank",-631],e:["onhole",784]},z:["za-slice",-633],d:["dle",946],s:["s",946]},o:{l:{l:{"#":-645,a:["rd",644],"-":["h",-646]},a:["rity",730],e:["",834]},p:["ulist",244],u:{n:{d:{i:["ng",411],"#":411,"-":["sign",-651]}},r:["",800]},i:{n:{t:{"#":438}}},t:{"#":578,t:["y",858]},r:{t:{i:{o:{n:{"#":621}}},r:{a:{i:{t:{"#":-650,u:["re",649]}},y:["al",649]}}}},s:{i:["tive",640],t:{a:["ge",784],p:["one",818]}},d:["cast",-644],o:{"#":-647,"-":["storm",-648],p:["",-649]},w:["er-off",-652],k:["e",868],c:["ketbook",944]},h:{o:{n:{e:{"#":-624,"-":{a:["lt",-625],s:{l:["ash",-626],q:{u:{a:{r:{e:{"#":-627,"-":["alt",-628]}}}}}},v:["olume",-629]}}},t:["o-video",-630]},i:{l:["ia",442],a:{l:{"#":930}}},y:["sique",715]},c:{t:{"#":620}}},h:{o:{n:{o:{r:["",47],u:["r",47]},k:["",151]},l:{d:{"#":89},l:["y-berry",-452]},m:{b:["re",151],e:["",-453]},u:{n:["d",262],s:{e:{"#":452,h:["old",452],"-":["damage",-466]}},r:{g:{l:{a:{s:{s:{"#":-462,"-":{e:["nd",-463],h:["alf",-464],s:["tart",-465]}}}}}}}},t:{d:{o:{g:{"#":-460}}},"-":["tub",-459],e:["l",-461],s:["hot",785]},c:["key-puck",-451],r:{s:{e:{"#":-454,"-":["head",-455]}}},s:{p:{i:{t:{a:{l:{"#":-456,"-":{a:["lt",-457],s:["ymbol",-458]}}}}}},t:["",714]},o:{p:{l:["a",639],"#":685}},i:["st",952]},u:{m:["p",69],n:{t:{"#":697,i:["ng",708]}}},e:{a:{d:{"#":103,e:["r",438],i:["ng",-439],p:{h:{o:{n:{e:{"#":439,s:{"#":-440,"-":["alt",-441]}}}}}},s:{e:["t",-442],t:["one",488]},l:["iner",785]},t:["her",108],p:{"#":115},r:{t:{"#":-443,"-":["broken",-444],b:["eat",-445],s:["ease",610],y:["",781]}}},m:{i:{p:{t:{e:{r:{a:["n",110],o:["n",110]}}}}},p:["",131]},e:{l:{"#":262}},l:["icopter",-446],s:["itate",607]},i:{t:{c:{h:{"#":161}}},n:{d:{r:["ance",161],e:["rance",161]},t:["",952]},g:["hlighter",-447],k:{i:["ng",-448],e:["",447]},p:{p:{o:{p:["otamus",448],"#":-449}}},s:["tory",-450]},a:{l:{t:{"#":161},o:["",685],l:["mark",866]},n:{d:{i:["cap",161],"-":{h:{o:{l:{d:{i:{n:{g:{"#":-414,"-":{h:["eart",-415],u:["sd",-416]}}}}}}}},l:["izard",-417],m:["iddle-finger",-418],p:{a:["per",-419],e:["ace",-420],o:{i:{n:{t:{"-":{d:["own",-421],l:["eft",-422],r:["ight",-423],u:["p",-424]},e:["r",-425]}}}}},r:["ock",-426],s:{c:["issors",-427],p:["ock",-428]}},w:["riting",428],s:{"#":-429,"-":["helping",-430],h:{a:{k:{e:["",-431],i:["ng",430]}}}},"#":428,c:["lasp",430]},u:["kiah",-432]},r:{v:["est",232],d:["-hat",-433]},c:{k:{"#":241,n:["eyed",855]}},u:["nt",372],m:{b:["urger",-411],m:{e:{r:{"#":-412,i:["ng",411]}}},s:["a",-413]},s:["htag",-434],t:{"-":{c:{o:{w:{b:{o:{y:{"#":-435,"-":["side",-436]}}}}}},w:["izard",-437]},f:["ul",578]},b:["itation",452]},y:{b:{r:{i:{d:{i:{s:{a:["tion",234],e:["",234]},z:{e:["",234],a:["tion",234],i:["ng",234]}},"#":234}}}},d:["rargyrum",553],p:["e",639]},"-":["square",-410],d:["d",-438],r:["yvnia",-467]},i:{n:{d:{u:{l:["ge",48],e:{"#":373},s:{t:{r:{i:["ousness",479],y:["",-480]}}}},i:{f:["ferent",243],t:["e",611],c:["ate",734]},e:{n:{t:{i:["on",478],a:["tion",478],u:["re",478],"#":-479}}}},f:{a:["nt",48],l:{a:["te",299],u:["ence",715]},i:{r:["mary",455],n:["ity",-481]},o:{"#":-482,r:["mation",481],"-":["circle",-483]},e:["rior",804]},t:{e:{r:{c:{e:{p:{t:{"#":110}}}},s:["ect",234],b:{r:{e:{e:{d:{"#":234,i:["ng",234]}}}}},n:["al",452],i:["or",452],l:{a:["ce",520],o:["ck",520]},m:{i:{t:["",607],s:["sion",607]}},r:{u:["ption",607],o:{g:{a:{t:{i:{o:["n",662],v:["e",662]},e:["",662]}}}}},v:["iew",662]}}},c:{i:["nerate",114],l:{i:{n:{a:["tion",515],e:["",697]}}}},s:{u:["re",161],c:["ribe",205],t:{r:{u:{c:["tion",258],m:["ent",861]}},a:["nt",444]},o:["late",808]},p:{u:{t:{"#":212}}},v:{e:{s:{t:{"#":373}}}},w:["ardness",442],b:["ox",-478],q:["uiry",662]},v:["ory",87],m:{p:{e:["diment",161],a:["ir",540],l:["ore",652],r:{e:{s:{s:{"#":657,i:["on",784]}}}}},i:["tate",228],a:{g:{e:{"#":-476,s:["",-477]}}}},s:["sue",241],g:{n:["ore",241],l:{u:["",474],o:["o",-475]}},r:{i:["s",349],r:{a:["diation",668],i:["gate",946]}},c:{e:{"#":379,"-":["cream",-469]},i:{c:{l:{e:{"#":469,s:["",-470]}}}},o:{n:{"#":470,s:["",-471]}}},"-":["cursor",-468],k:{o:{n:{"#":470}}},d:{"-":{b:["adge",-472],c:{a:{r:{d:{"#":-473,"-":["alt",-474]}}}}},e:["ntify",488]},t:{a:["lic",-484],i:["nerary",689]},l:["lusion",528]},o:{s:{t:{r:{a:{c:{i:{s:["e",57],z:["e",57]}}}}},"#":87,c:{u:{l:{a:{t:{i:["on",491],e:["",491]}}}}}},m:{n:["ibus",115],"#":-592},v:["ercast",194],b:{n:["ubilate",194],s:{c:["ure",194],e:["ss",372]},j:{e:{c:{t:{"-":{g:["roup",-589],u:["ngroup",-590]}}}}}},r:{b:{i:{t:{"#":221,e:["r",701]}},"#":380},c:["his",283]},p:{t:["ic",304],e:{r:{a:{t:{e:{"#":520},i:{o:["n",658],v:["e",697]}}}}},p:["ugn",662]},c:{u:["lus",304],c:{u:["py",338],l:{u:{s:{i:{v:["e",795],o:["n",795]}}}}}},n:{w:{a:{r:{d:{s:["",361],"#":361}}}}},i:["l-can",-591],t:["ter",-593],u:{t:{d:["ent",-594],w:["ear",855]}}},e:{x:{c:{l:{u:{d:{e:{"#":60}}},a:{m:{a:{t:{i:{o:{n:{"#":-297,"-":{c:["ircle",-298],t:["riangle",-299]}}}}}}},i:["ming",296]}},i:["sion",241],h:["ange-alt",-296]},h:{a:{u:{s:{t:{"#":284}}}},i:{b:{i:{t:{o:["r",728],i:["oner",728]}}}}},p:{e:["l",284],o:{u:["nd",299],s:["it",299]},a:{n:{d:{"#":-300,"-":{a:{l:["t",-301],r:["rows-alt",-302]}}}},t:["iate",299]},l:{o:{r:["e",708],i:{t:{e:{r:{"#":898}}}}}}},t:{e:{n:{d:{"#":299}},r:{n:{a:{l:{"-":{l:{i:{n:{k:{"-":{a:["lt",-303],s:["quare-alt",-304]}}}}}}}}}}}},e:["cute",697]},f:{f:{"#":69,i:{g:{y:{"#":475}}}}},n:{c:{e:["phalon",103],o:{u:{n:{t:{e:{r:{"#":109}}}}}},a:{m:["pment",129],p:["sulate",132]},i:{r:["cle",184],p:["her",205]},r:["ypt",205]},s:["ure",161],v:{e:{l:{o:{p:{e:{"#":-288,"-":{o:{p:{e:{n:{"#":-289,"-":["text",-290]}}}},s:["quare",-291]}}}}}},i:{s:{i:{o:{n:{"#":475}}}},r:["on",685]}},l:["arge",299],k:["indle",343],d:{u:{e:{"#":373},r:["e",697]},o:{w:{"#":373,m:{e:{n:{t:{"#":373}}}}}},"#":795},g:["age",520],q:["uiry",662],t:["repot",798]},d:{i:{f:["ice",111],t:{o:["rial",211],"#":-283}},u:{c:{a:{t:{e:{"#":704}}}}}},s:{t:{a:["blish",111],i:["mator",118]},s:["ence",442],c:["ape",697]},m:{a:["sculated",241],p:{o:{w:{e:{r:{"#":373}}}},h:{a:{s:{i:{s:["e",889],z:["e",889]}}}}},b:{o:{d:["iment",715],s:["s",784]},a:["rk",722]}},g:{g:{"#":-284,s:["",283],b:["eater",445]}},j:["ect",-285],l:{l:{i:{p:{s:{i:{s:{"-":{h:["",-286],v:["",-287]}}}}}}},a:["borate",299],i:["cit",343]},q:{u:{a:{l:{i:{s:["e",291],z:["e",291]},s:["",-292],"#":291},t:["e",291]}}},r:["aser",-293],t:{h:["ernet",-294],e:["rnity",480]},u:{r:["o-sign",-295],p:["hony",582]},c:{p:["honesis",296],h:["o",685],o:{n:{o:{m:{i:{s:["e",703],z:["e",703]}}}}}},y:{e:{b:["all",304],"#":-305,"-":{d:["ropper",-306],s:["lash",-307]},g:["lasses",379]}},v:{o:["ke",343],e:["n",353]},a:{r:{t:["h",380],p:{i:{e:{c:{e:{"#":439}}}},h:{o:{n:{e:{"#":439}}}}},m:["ark",866]}},p:{i:{t:{o:{m:{e:{"#":475}}}}}}},d:{e:{b:{a:["r",60],o:["ne",87]},a:{d:["bolt",85],f:{"#":-244,e:["n",243]},l:{"#":428}},c:{a:["mp",85],e:["ption",528],o:{r:{a:{t:{i:{o:{n:{"#":546}}}}}}}},l:{a:["y",161],e:{t:{i:["on",241],e:["",282]}},i:["ver",703]},t:{e:{r:{r:["ent",161],m:{i:{n:{e:{"#":161}}}}},n:["t",262]}},f:{i:["le",194],e:{c:["t",540],r:["",818]},l:["ower",540]},m:["ocrat",-245],s:{k:["top",-246],c:["ribe",488]},v:{o:["tee",307],e:["lop",869]},o:{x:{y:{e:{p:{h:{e:{d:{r:{i:{n:{e:{"#":379}}}}}}}}}}}},n:{t:{"#":478,i:["tion",829]}},p:{o:{t:{"#":798}}}},o:{o:{r:{b:["ell",71],"-":{c:["losed",-268],o:["pen",-269]}}},g:{"#":-263},l:{l:{a:["r-sign",-264],y:{"#":-265,"-":["flatbed",-266]},"#":264}},n:{a:["te",-267],j:["on",281]},t:["-circle",-270],v:["e",-271],w:["nload",-272],p:{e:{"#":278}},m:["icile",452],u:{b:{l:{e:{"#":475}},t:{f:["ulness",662],"#":662}},g:["hnut",685]}},i:{m:["",82],s:{g:{o:["rge",151],u:["ise",545]},c:{i:{p:{l:{i:{n:{e:{"#":161}}}}}},h:{a:{r:{g:{e:{"#":284}}}}},o:{v:["er",488],n:["tinue",795]}},r:["egard",241],u:["nite",259],s:{e:{v:["er",259],m:["ble",545]}},t:{a:["ff",313],i:["nguish",488]},p:["lace",343],m:["iss",343]},g:{"#":221,i:["tal-tachograph",-258]},a:{d:["em",237],g:{n:{o:{s:{i:{s:["",247],n:["g",247]},e:{s:["",-248],"#":247}}}},o:["nal",743]},p:["hragm",795]},c:{e:{"#":-249,"-":{d:{2:["0",-250],6:["",-251]},f:{i:["ve",-252],o:["ur",-253]},o:["ne",-254],s:["ix",-255],t:{h:["ree",-256],w:["o",-257]}}},k:["",861]},l:{u:["te",241],a:["te",299],i:["gence",479]},e:["",248],r:{e:{c:{t:{i:{o:{n:{s:["",-259],"#":258}}},"#":438}}},t:["",648]},v:{i:["de",-260],e:["",270]},z:["zy",-261],d:["dle",637]},a:{s:["h",85],p:["ple",194],t:["abase",-243],y:["dream",574],l:["ly",637],w:["dler",868]},u:{d:["",86],m:{m:["y",278],b:["bell",-279],p:{s:{t:{e:{r:{"#":-280,"-":["fire",-281]}}}}}},n:["geon",-282],b:["iousness",662]},r:{u:{m:{"#":-276,f:["ish",275],"-":["steelpan",-277],s:["tick-bite",-278]}},e:["ss",232],a:{f:["ting-compass",-273],g:["on",-274],w:{"-":["polygon",-275],"#":697},m:["a",637]},i:{b:["ble",341],f:["t",438]},o:{o:["p",349],g:["ue",757],n:["e",868]}},h:["armachakra",-247],n:["a",-262],w:["elling",452]},j:{a:{z:{z:{"#":69}},l:["opy",115],v:["a",207],c:{k:["et",237],t:["itate",743]},p:["e",500],d:{e:{"#":639}}},i:{t:["ney",115],b:["e",161],f:["fy",444]},e:{w:["el",370],d:["i",-485],s:["t",500]},u:{n:{c:{t:{u:["re",485],i:["on",485]}},k:["",873]}},o:{i:{n:{t:["",-486],"#":485}},u:["rnal-whills",-487],k:["e",500],b:["",827],h:["n",858],y:["ride",861]}},u:{n:{s:["ighted",82],r:{e:["asoning",82],a:["vel",697]},d:{e:{r:{c:["ut",241],p:["ass",805],g:["round",805],t:["aking",827],l:["ine",-890],s:["core",889]}},o:{"#":-891,"-":["alt",-892]}},i:{t:["e",513],v:{e:{r:{s:{a:["l-access",-893],i:["ty",-894]}}}}},t:["ie",890],w:["rap",890],m:["ake",890],l:{i:["nk",-895],o:{c:{k:{"#":-896,"-":["alt",-897]}}}}},p:{c:["huck",151],l:["oad",-898]},m:{b:{e:["r",207],r:{e:{l:{l:{a:{"#":-888,"-":["beach",-889]}}}}}}},s:{e:{r:{"#":-899,"-":{a:{l:{t:{"#":-900,"-":["slash",-901]}},s:["tronaut",-902]},c:{h:["eck",-903],i:["rcle",-904],l:["ock",-905],o:["g",-906]},e:["dit",-907],f:["riends",-908],g:["raduate",-909],i:["njured",-910],l:["ock",-911],m:{d:["",-912],i:["nus",-913]},n:{i:["nja",-914],u:["rse",-915]},p:["lus",-916],s:{e:["cret",-917],h:["ield",-918],l:["ash",-919]},t:{a:["g",-920],i:{e:["",-921],m:["es",-922]}}},s:{"#":-923,"-":["cog",-924]}}}},t:{e:{n:{s:{i:{l:{"-":["spoon",-925],"#":925,s:["",-926]}}}}}},r:["ine",946]},v:{o:{l:{u:{m:{e:{"#":89,"-":{d:["own",-938],m:["ute",-939],o:["ff",-940],u:["p",-941]}}}},l:["eyball-ball",-937]},m:["it",151],i:["cemail",-936],t:["e-yea",-942]},a:{n:["",138],p:["oring",236],r:["iety",759]},e:{r:{i:["fication",161],t:["iginous",260]},e:["r",241],c:["tor-square",-927],n:{u:{s:{"#":-928,"-":{d:["ouble",-929],m:["ars",-930]}}}}},i:{s:{u:{a:{l:{i:{z:{e:{"#":475}},s:{e:{"#":475}}}}}}},r:{i:["le",531],g:["ule",743],t:["uoso",785]},t:["iate",540],d:{e:{o:{t:["ape",826],"#":-933,"-":["slash",-934]}}},a:{l:{"#":-931,s:["",-932]}},h:["ara",-935]},r:["-cardboard",-943]},n:{o:{u:["s",103],t:{i:{c:{e:{"#":212}}},"-":["equal",-587],e:{s:["-medical",-588],c:["ase",944]},h:["ingness",952]},m:{e:["nclature",496],a:["dic",565]},s:["e",952]},e:{s:["tling",182],r:["ve",442],x:["us",513],g:["ative",561],t:["work-wired",-584],u:["ter",-585],w:{s:{p:{a:["per",-586],r:["int",585]}}}},i:{p:["per",182],n:{n:["y",648],c:["ompoop",648]}},a:{m:{e:{"#":247}},t:{i:["onal",452],a:["tor",812]},g:["",639]},u:{t:["",283],b:["",442],m:["ber",515]}},q:{a:["t",151],u:{a:{t:["",151],r:["ter",648]},e:{e:["r",234],r:["y",662],s:{t:{i:{o:{n:{"#":-663,"-":["circle",-664]}}}}}},i:{c:["ksilver",553],d:{"#":639,d:["itch",-665]},t:["",795]},o:{t:{e:{"-":{l:["eft",-666],r:["ight",-667]}}}},r:["an",-668]},r:["code",-662]},y:{o:{u:["ngster",182],k:["e",513]},e:["n-sign",-964],i:["n-yang",-965]},x:["-ray",-963]},InsertIconDialog=function(){const{h,app}=hyperapp,icons_per_row=Math.floor(300.5/60),get_base_words_from_trie=(node,words={},prefix="")=>{for(let key in node)if("#"===key){const id=node[key];id<0&&(words[-(id+1)]=prefix)}else{const child=node[key];Array.isArray(child)?child[1]<0&&(words[-(child[1]+1)]=prefix+key+child[0]):get_base_words_from_trie(node[key],words,prefix+key)}return words},get_word_ids_from_trie=(node,words={})=>{if(Array.isArray(node)){const id=node[1];words[Math.max(id,-(id+1))]=!0}else if(node)for(let key in node)if("#"===key){const id=node[key];words[Math.max(id,-(id+1))]=!0}else{const child=node[key];if(Array.isArray(child)){const id=child[1];words[Math.max(id,-(id+1))]=!0}else get_word_ids_from_trie(child,words)}return words},get_trie_node_by_prefix=(node,prefix)=>{if(""==prefix)return node;if(Array.isArray(node)&&node[0].startsWith(prefix))return node;const head=prefix[0];return node.hasOwnProperty(head)?get_trie_node_by_prefix(node[head],prefix.substring(1)):null},get_all_icons=function(){let all_icons=null;return function(){return null===all_icons&&function(){const id_icon_map=get_base_words_from_trie(icons_trie);all_icons=Object.values(id_icon_map)}(),all_icons}}(),get_initial_state=close_callback=>({top_row_index:0,panel_scroll_top:0,selected_icon_ids:null,search_query:"",selected_icon:null,selected_color:"#000000",close_callback}),on_panel_scroll=(state,event)=>{const scroll_top=event.target.scrollTop;return{...state,top_row_index:Math.floor(scroll_top/60),panel_scroll_top:scroll_top}},on_table_mousedown=(state,event)=>{let node=event.target;for(;"I"!=node.nodeName&&node.childElementCount>0;)node=node.childNodes[0];if("I"!=node.nodeName)return state;const classes=node.classList;let selected_icon=null;for(let i=0;i<classes.length;++i)if(classes[i].startsWith("fa-")){selected_icon=classes[i].substring(3);break}return{...state,selected_icon}},render_icon=(icon_id,style={})=>h("i",{class:`fas fa-${icon_id}`,style}),on_search_input_change=(state,event)=>{const input=event.target.value,node=get_trie_node_by_prefix(icons_trie,input),query_res=get_word_ids_from_trie(node),ids=Object.keys(query_res);return{...state,search_query:input,selected_icon_ids:ids||null}},on_selected_color_change=(state,event)=>({...state,selected_color:event.target.value}),on_insert_btn_clicked=state=>(setTimeout((function(){state.close_callback&&state.close_callback({icon:state.selected_icon,color:state.selected_color})}),10),state),on_close_btn_clicked=state=>(setTimeout((function(){state.close_callback&&state.close_callback(null)}),10),state),render_app=state=>{const visible_rows_count=Math.ceil(350/60),first_icon_index=state.top_row_index*icons_per_row,all_icons=get_all_icons(),icons=null!==state.selected_icon_ids?state.selected_icon_ids.map((id=>all_icons[id])):all_icons,icon_count=icons.length,canvas_height=60*Math.ceil(icon_count/icons_per_row);let rows=[];for(let r=0,i=first_icon_index;r<=visible_rows_count;++r){let row=[];for(let c=0;c<icons_per_row&&i<icons.length;++c,++i)row.push(h("td",{},render_icon(icons[i])));rows.push(h("tr",{},row))}const y_shift=Math.floor(60*state.top_row_index),table=h("table",{class:"icons-table",style:{"margin-top":y_shift+"px"},onmousedown:on_table_mousedown},rows),canvas=h("div",{style:{"box-sizing":"border-box",height:canvas_height+"px",width:"300px",overflow:"hidden"}},table);const panel=h("div",{id:"preview-panel",style:{height:"350px",width:"320px"},onscroll:on_panel_scroll},canvas),search_input=(state=>h("div",{style:{display:"inline-table",padding:"5px"}},h("label",{for:"icon-search-input",style:{display:"table-cell"}},"Search: "),h("input",{type:"text",id:"icon-search-input",placeholder:"Enter search term...",oninput:on_search_input_change,style:{display:"table-cell",margin:0}},state.search_query)))(state),icon_select_panel=h("div",{},search_input,panel);let properties_panel=[];const selected=h("div",{id:"library-image-dialog__selected"},h("div",{},"Selected icon: ",h("div",{style:{margin:"15px auto","text-align":"center"}},state.selected_icon?render_icon(state.selected_icon,{color:state.selected_color,"font-size":"100px"}):h("strong",{},"Please, click on an image to select it"))));properties_panel.push(selected);const color_panel=h("div",{style:{display:"inline-table"}},h("label",{for:"library-image-dialog__selected-color",style:{display:"table-cell"}},"Color: "),h("input",{type:"color",id:"library-image-dialog__selected-color",value:state.selected_color,onchange:on_selected_color_change,style:{display:"table-cell",width:"100px",margin:"0 0 0 5px"}}));properties_panel.push(color_panel),properties_panel.push(h("p",{style:{margin:"15px 0","font-style":"italic",height:"150px","overflow-y":"auto"}},"Icons come from the amazing ",h("a",{href:"https://fontawesome.com/",title:"Font Awesome"},"Font Awesome")," \n               open source project.\n               They are available under Creative Commons license (CC BY 4.0)\n               which means that they can be used on your web projects\n               and sites free of charge, however an \n               ",h("a",{href:"https://creativecommons.org/licenses/by/4.0/",title:"CC BY 4.0 attribution"},"attribution"),"\n               is required.\n               ",h("br"),'\n               Icons are inserted directly into the "src" attribute of the <img>\n               HTML tag. This means that there is no need to upload them\n               separately to your server. However, this method may not work\n               properly with some older browsers.\n               '));const close_btn=h("button",{class:"btn",onclick:on_close_btn_clicked},"Cancel"),insert_btn=h("button",{class:"btn btn-primary",onclick:on_insert_btn_clicked,style:{margin:"0 0 0 5px"}},"Insert");properties_panel.push(h("div",{style:{"margin-top":"auto","text-align":"right"}},close_btn,insert_btn));return h("div",{id:"library-image-dialog"},icon_select_panel,h("div",{style:{display:"flex","flex-direction":"column","align-items":"stretch",margin:"0 0 0 15px","max-width":"240px"}},properties_panel))};return{init:function(dialog_app_element,close_callback){app({init:get_initial_state(close_callback),view:render_app,node:dialog_app_element,subscriptions:null})}}}();let InsertImageDialog=function(){const{h,app,request}=hyperapp;let selection_position=SelectionPositionInfo(),API={},range=null,dlg_element=null,dlg=null,apply_callback=null,close_callback=null,icon_dialog_element=null,scrollListener=function(){null!=dlg&&null!=range&&(selection_position.setRange(range),dlg.scheduleUpdate())};const on_image_src_input=(state,event)=>{const img_url=event.target.value,new_state={...state,img_partial_url:img_url};return str=img_url,(a=document.createElement("a")).href=str,a.host&&a.host!=window.location.host?[new_state,load_image(on_image_loaded,img_url)]:new_state;var str,a},example_image={src:"/static/img/example-photo.jpg",width:400,height:300,aspect_ratio:4/3},set_image_size=(app_state,{width,height,keep_aspect_ratio})=>{const image=app_state.image;if(image){if(width=Math.min(+(width||0),1e4),height=Math.min(+(height||0),1e4),width>=1)return height=image.keep_aspect_ratio?Math.floor(width/image.aspect_ratio):image.height,{...app_state,image:{...app_state.image,width,height}};if(height>=1)return width=image.keep_aspect_ratio?Math.floor(height*image.aspect_ratio):image.width,{...app_state,image:{...app_state.image,width,height}};if(void 0!==keep_aspect_ratio)return set_image_size({...app_state,image:{...app_state.image,keep_aspect_ratio}},{width:image.width})}return app_state},special_hex_encode=function(match){switch(match){case"%20":return" ";case"%3D":return"=";case"%3A":return":";case"%2F":return"/"}return match.toLowerCase()},on_icon_src_load=(state,result)=>{if(!result)return state;const encoded=function(svg_string,fill_color){if("string"!=typeof svg_string)throw new TypeError("Expected a string, but received "+typeof svg_string);65279===svg_string.charCodeAt(0)&&(svg_string=svg_string.slice(1)),fill_color&&(svg_string=svg_string.replace(/<path /g,`<path fill="${fill_color}" `));const body=svg_string.replace(/"/g,"'");return"data:image/svg+xml,"+encodeURIComponent(body).replace(/%[\dA-F]{2}/g,special_hex_encode)}(result,state.icon_color),img_info={src:encoded,width:100,height:100,aspect_ratio:1,keep_aspect_ratio:!0};return on_image_loaded({...state,img_partial_url:encoded},img_info)},insert_icon=(state,{icon,color})=>[{...state,icon_color:color},request({url:`/static/icons/${icon}.svg`,action:on_icon_src_load})],show_insert_icon_dialog=state=>{if(null==icon_dialog_element){let el=document.createElement("div");el.style.position="fixed",el.style.top="0",el.style.left="0",el.style.display="none",icon_dialog_element=el;let on_icon_selected=()=>{};return InsertIconDialog.init(icon_dialog_element,(result=>{null!=icon_dialog_element&&(document.getElementById("image-dialog").removeChild(icon_dialog_element),icon_dialog_element=null),on_icon_selected(result)})),document.getElementById("image-dialog").appendChild(icon_dialog_element),icon_dialog_element.style.display="flex",icon_dialog_element.focus(),[{...state},[(dispatch,props)=>{on_icon_selected=result=>dispatch(props.action,result)},{action:insert_icon}]]}return state},on_alt_text_input=(state,event)=>({...state,alt_text:event.target.value}),close_dialog=state=>(API.close(),state),insert_image_and_close_dialog=state=>{const image=state.image;var src_url,alt_text,width,height,img;return src_url=state.img_partial_url,alt_text=state.alt_text,width=image.width,height=image.height,(img=document.createElement("img")).src=src_url,img.alt=alt_text||"",img.style.display="block",+width>0&&(img.style.maxWidth=img.style.minWidth=width+"px",img.style.width=width+"px",img.width=+width),+height>0&&(img.style.maxHeight=img.style.minHeight=height+"px",img.style.height=height+"px",img.height=+height),range.deleteContents(),range.insertNode(img),range.collapse(),apply_callback&&apply_callback(),close_dialog(state)},render_dialog=state=>{const url_input=h("input",{class:"form-control",id:"image-url",onInput:on_image_src_input,placeholder:"Address of the image, e.g. https://example.com/my-photo.jpg",style:{"min-width":"460px"},type:"url",value:state.img_partial_url}),url_label=h("label",{class:"label-with-input",for:"image-url"},h("span",{},"Image URL"),url_input),url_form=h("div",{class:"image-dialog__row"},url_label),alt_input=h("input",{class:"form-control",id:"image-alt",onInput:on_alt_text_input,placeholder:"Text description of the image",style:{"min-width":"460px"},value:state.alt_text}),alt_label=h("label",{class:"label-with-input",for:"image-alt"},h("span",{},"Alt text"),alt_input),alt_form=h("div",{class:"image-dialog__row"},alt_label),close_btn=h("button",{class:"btn btn-default",onclick:close_dialog},"Cancel"),insert_btn=h("button",{class:"btn btn-primary",disabled:""==state.img_partial_url.trim(),onclick:insert_image_and_close_dialog},"Insert"),buttons_row=h("div",{class:"image-dialog__row",style:{"justify-content":"flex-end"}},close_btn,insert_btn),img_preview=(app_state=>{const image=app_state.image;let img_attr={src:image.src,style:{width:image.width+"px",height:image.height+"px"}};app_state.show_example_image&&(img_attr.title="Photo by Joanna Kosinska on Unsplash");const img=h("img",img_attr),img_preview=h("div",{id:"image-dialog__preview-box"},img),width_input=h("input",{id:"image-width",value:app_state.image.width,type:"number",min:1,onInput:[set_image_size,event=>({width:event.target.value})],style:{"min-width":"70px"}}),height_input=h("input",{id:"image-height",value:app_state.image.height,type:"number",min:1,onInput:[set_image_size,event=>({height:event.target.value})],style:{"min-width":"70px"}}),aspect_ratio_input=h("input",{id:"aspect-ratio",type:"checkbox",style:{"margin-left":0,"margin-right":"5px",width:"auto"},checked:image.keep_aspect_ratio||!1,onchange:[set_image_size,event=>({keep_aspect_ratio:event.target.checked})]}),props_panel=h("div",{id:"image-dialog__props-panel"},h("label",{for:"image-width",class:"label-with-input"},h("span",{},"Width: "),width_input,h("abbr",{title:"Pixels"},"px")),h("label",{for:"image-height",class:"label-with-input"},h("span",{},"Height: "),height_input,h("abbr",{title:"Pixels"},"px")),h("label",{for:"aspect-ratio",style:{display:"flex"}},aspect_ratio_input,"Keep aspect ratio"),h("button",{class:"btn btn-default",onclick:show_insert_icon_dialog,style:{"margin-left":0}},"Icon from library..."));return h("div",{class:"image-dialog__row"},img_preview,props_panel)})(state);return h("div",{id:"image-dialog__body",class:"form-inline"},[img_preview,url_form,alt_form,buttons_row])},get_initial_state=img_node=>{let image=example_image,alt_text="",img_partial_url="";if(img_node){image.src=img_node.src,image.width=img_node.width,image.height=img_node.height;const nh=img_node.naturalHeight,nw=img_node.naturalWidth;image.aspect_ratio=nh?nw/nh:1,alt_text=img_node.alt,img_partial_url=image.src}return{image:{...image,keep_aspect_ratio:!0},show_example_image:!0,img_partial_url,alt_text}},load_image=(()=>{let load_timeout=null;return(action,img_src)=>[(dispatch,props)=>{load_timeout&&(window.clearTimeout(load_timeout),load_timeout=null),load_timeout=window.setTimeout((()=>{let img=new Image;img.onload=()=>{dispatch(props.action,{src:img.src,width:img.width,height:img.height,aspect_ratio:+img.height?+img.width/+img.height:1,keep_aspect_ratio:!0})},img.crossOrigin="anonymous",img.src=props.src}),500)},{action,src:img_src}]})(),on_image_loaded=(app_state,image)=>({...app_state,image,show_example_image:!1,alt_text:""});function init(img_node){const already_initialized=null!=dlg_element;if(already_initialized||(dlg_element=document.getElementById("image-dialog")),!already_initialized||img_node){let body=document.getElementById("image-dialog-body");body.childElementCount>=2&&body.removeChild(body.children[1]);let app_element=document.createElement("div");body.appendChild(app_element),app({init:get_initial_state(img_node),view:render_dialog,node:app_element,subscriptions:null})}((dlg_element,close_callback)=>{let cover=document.createElement("div"),style=cover.style;style.position="fixed",style.left=0,style.right=0,style.top=0,style.bottom=0,style.zIndex=parseInt(dlg_element.style.zIndex)-1,cover.onmousedown=event=>{cover.remove(),close_callback()},dlg_element.insertAdjacentElement("beforebegin",cover)})(dlg_element,close_dialog)}return API.show=function(selection_range,apply_callback_,close_callback_,img_node){API.close(),range=selection_range,apply_callback=apply_callback_,close_callback=close_callback_,selection_position.setRange(range),init(img_node),dlg_element.style.display="block",window.requestAnimationFrame((()=>{dlg=new Popper(selection_position,dlg_element,{placement:"top",positionFixed:!0,modifiers:{offset:{offset:"0,5"}}})})),window.addEventListener("scroll",scrollListener),document.scrollingElement&&document.scrollingElement.addEventListener("scroll",scrollListener)},API.close=function(){dlg&&(window.removeEventListener("scroll",scrollListener),document.scrollingElement&&document.scrollingElement.removeEventListener("scroll",scrollListener),dlg_element.style.display="none",dlg.destroy(),dlg=null,close_callback&&close_callback()),range=null},API}();const TablePreview=function(){let preview_window=null,table_css="";const is_open=function(){return null!=preview_window&&!preview_window.closed};return{is_open,open:function(){if(!is_open()){const screen_width=window.screen.width,screen_height=window.screen.height,props=`width=${Math.min(Math.max(640,screen_width/2),screen_width)},height=${Math.min(Math.max(480,screen_height/2),screen_height)},scrollbars=1`;preview_window=window.open("","Table preview",props)}},set_style:function(style){table_css=style},update:function(table_html){if(!is_open())return;const page_src=`\n            <!doctype html><html>\n            <head>\n            <meta charset="utf-8"><title>Table preview</title>\n            ${`<style type="text/css">${table_css}</style>`}\n            </head>\n            <body>${table_html}</body></html>`;let doc=preview_window.document;doc.open(),doc.write(page_src),doc.close()}}}(),MarkdownMarkupProcessingPlugin=function(){function updateMarkup(start_index,end_index,markup,markups){for(let i=start_index;i<end_index;++i)markups[i]=Utils.mergeDeep(markups[i],markup)}const LinkMarkup={style:{color:"#905"}},TokenToMarkup={text:{style:{}},strong:{style:{fontWeight:"bold"}},em:{style:{fontStyle:"italic"}},codespan:{style:{color:"#905",backgroundColor:"#ddd"}}};function process(tokens,index,parent_raw,markups){let remaining=parent_raw;for(let i=0;i<tokens.length;++i){const token=tokens[i],shift=remaining.indexOf(token.raw),start=index+shift,end=start+token.raw.length;if(TokenToMarkup.hasOwnProperty(token.type))updateMarkup(start,end,TokenToMarkup[token.type],markups);else if("link"==token.type){updateMarkup(start,end,Utils.mergeDeep({},LinkMarkup,{link_href:token.href||"#",link_open_in_new_tab:!0}),markups)}token.tokens&&process(token.tokens,start,token.raw,markups),remaining=remaining.substring(shift+token.raw.length),index+=shift+token.raw.length}}return function(raw_str,per_char_markups){const tokens=marked.lexer(raw_str);for(let i=0;i<per_char_markups.length;++i)per_char_markups[i]={};return process(tokens,0,raw_str,per_char_markups),per_char_markups}}(),TableView=function(){"use strict";let allow_markup_in_cells=!1;const is_ie=function(){let result;return function(){var ua,msie;return null==result&&(result=null!=(ua=window.navigator.userAgent,(msie=ua.indexOf("MSIE "))>0||navigator.userAgent.match(/Trident.*rv\:11\./)?-1!=ua.indexOf(".",msie)?parseInt(ua.substring(msie+5,ua.indexOf(".",msie))):1:null)),result}}();let cell_selection_to_restore=null;function renderToNode(text,per_char_markup_ids,dest_node){Markup.render(text,per_char_markup_ids,dest_node,cell_selection_to_restore),cell_selection_to_restore=null}function CellView(cell){const self=this;self.cell=cell,self.edit_in_progress=!1,self.ignore_model_change=!1,self.event_handlers_initialized=!1;const wrap=document.createElement("div");wrap.className="wrap";const div=document.createElement("div");wrap.appendChild(div);const dom=document.createElement("td");dom.appendChild(wrap),self.entry=$(div),self.dom=$(dom),self.style=new CellStyle(this.dom),$.observable(self),self.entry.on("paste",(function(event){self.onPasteContent(event)})),cell.on("value_change",(function(new_value,_,markup_ids){self.ignore_model_change||renderToNode(new_value,markup_ids,self.entry.get(0)),self.trigger("state_change")})),cell.on("colspan_change",(function(span){span>0&&self.dom.attr("colspan",span),self.show()})),cell.on("rowspan_change",(function(span){span>0&&self.dom.attr("rowspan",span),self.show()})),self.style.on("state_change",(function(){self.trigger("state_change")})),self.render()}CellView.prototype.render=function(){renderToNode(this.cell.value(),this.cell.per_char_markup_ids_,this.entry[0])},CellView.prototype.clearFormatting=function(){this.style.reset(),this.cell.setMarkupToDefault(),this.render()},CellView.read_only=!1,CellView.prototype.swap=function(other){this.cell.swap(other.cell),this.style.swap(other.style)},CellView.prototype.initEventHandlers=function(){const self=this;let update_markup_timeout;self.event_handlers_initialized||(self.entry.blur((function(event){event.stopImmediatePropagation(),event.preventDefault()})).keydown((function(ev){if(27===ev.which){ev.preventDefault();var x=window.scrollX,y=window.scrollY;self.endEditing(),self.dom.parents("table").focus(),deselectText(),is_ie()||window.scrollTo(x,y)}else allow_markup_in_cells&&self.edit_in_progress&&cell_markup_processing_plugin&&!is_ie()&&(update_markup_timeout&&window.clearTimeout(update_markup_timeout),update_markup_timeout=window.setTimeout((function(){self.updateValueAndMarkup()}),20))})).on("mousedown mouseup mousemove click dblclick",(function(ev){self.edit_in_progress&&ev.stopImmediatePropagation()})),self.event_handlers_initialized=!0)},CellView.prototype.areEventHandlersInitialized=function(){return self.event_handlers_initialized},CellView.prototype.editImage=function(img_node){this.entry.addClass("entry-editing").attr("contenteditable",!0).focus(),this.edit_in_progress=!0;let range=selectText(img_node),self=this;InsertImageDialog.show(range,(function(){self.updateValueAndMarkup()}),(function(){setTimeout((function(){self.edit_in_progress?self.endEditing():self.dom.parents("table").focus()}),10)}),img_node)},CellView.prototype.onDblClick=function(event){CellView.read_only||this.edit_in_progress||!event.target||"IMG"!=event.target.nodeName?this.startEditing():(event.preventDefault(),this.editImage(event.target))},CellView.prototype.onPasteContent=function(event){var entry=this.entry,before=entry.text(),start_scroll_pos={left:window.scrollX,top:window.scrollY};setTimeout((function(){window.scrollTo(start_scroll_pos.left,start_scroll_pos.top);var pasted=entry.text(),len=pasted.length,prefix="",suffix="";if(before.length>0)for(var i=0;i<=before.length;++i){prefix=before.substr(0,i),suffix=before.substr(i);var rest=pasted.substr(len-suffix.length);if(0==pasted.indexOf(prefix)&&rest==suffix){pasted=pasted.substr(i,len-before.length);break}prefix="",suffix=""}var clean=prefix+TableImport.extractCellsFromString(pasted)+suffix;entry.html(clean)}),3)},CellView.prototype.show=function(){this.cell.isVisible()?this.dom.css("display","table-cell"):this.dom.css("display","none")},CellView.prototype.dump=function(){return{style:this.style.dump()}},CellView.prototype.load=function(data,formatting_options){data&&this.style.load(data.style,formatting_options)},CellView.prototype.select=function(){return!this.is_selected&&(this.dom.get(0).classList.add("selected"),this.is_selected=!0,!0)},CellView.prototype.unselect=function(){return!!this.is_selected&&(this.edit_in_progress&&this.endEditing(),this.dom.get(0).classList.remove("selected"),this.is_selected=!1,!0)},CellView.prototype.getInnerHTML=function(){let node=this.entry[0];for(;node&&!node.nodeName.match(/td|tr/i);)node=node.parentNode;return node?node.outerHTML:""},CellView.prototype.toggleFontStyle=function(style_property,style_value,default_value){const self=this;function removeStyleProperty(markup){return markup&&markup.hasOwnProperty("style")&&markup.style.hasOwnProperty(style_property)&&delete(markup=$.extend(!0,{},markup)).style[style_property],markup}function updateMarkup(process_markup){let chars=[],markup_ids=[],selection_start=-1,selection_end=-1,char_index=0;Markup.forEachLeafCharInNode(self.entry.get(0),(function(chr,is_selected,markup){chars.push(chr),markup=process_markup(markup,is_selected);const markup_id=Markup.create(markup);markup_ids.push(markup_id),is_selected&&(-1==selection_start?selection_start=selection_end=char_index:selection_end=char_index),++char_index}),range);const text=chars.join("");cell_selection_to_restore=[selection_start,selection_end],self.cell.value(text,markup_ids)}if(this.is_selected)if(this.edit_in_progress&&allow_markup_in_cells&&window.getSelection&&(!window.getSelection||0!=window.getSelection().rangeCount)){default_value=default_value||"";var range=window.getSelection().getRangeAt(0);if(0==range.toString().length){var ancestor=range.endContainer;3==ancestor.nodeType&&(ancestor=ancestor.parentNode);var new_node=document.createElement("span");ancestor.style&&ancestor.style[style_property]==style_value?new_node.style[style_property]=default_value:new_node.style[style_property]=style_value,new_node.textContent=ZeroWidthSpace,range.insertNode(new_node),range.selectNode(new_node),range.collapse()}else updateMarkup((function(markup,inside_range){if(inside_range){const new_markup=Utils.mergeDeep({},markup),has_style_value=markup.style&&markup.style[style_property]==style_value;return new_markup.style[style_property]=has_style_value?"":style_value,new_markup}return markup}))}else"bold"==style_value||"italic"==style_value||"underline"==style_value?(this.style.hasFontStyle(style_value)&&updateMarkup(removeStyleProperty),this.style.toggleFontStyle(style_value)):"color"==style_property?(updateMarkup(removeStyleProperty),this.style.setTextColor(style_value)):"backgroundColor"==style_property&&(updateMarkup(removeStyleProperty),this.style.setBgColor(style_value))},CellView.prototype.insertLink=function(){if(!allow_markup_in_cells)return;if(!this.is_selected)return;if(!window.getSelection)return;var sel=window.getSelection(),range=null;0==sel.rangeCount?((range=document.createRange()).selectNodeContents(this.entry[0]),sel.removeAllRanges(),sel.addRange(range)):range=sel.getRangeAt(0).cloneRange(),0==$(range.startContainer).parents(".wrap").length&&((range=document.createRange()).selectNodeContents(this.entry[0]),range.collapse(),sel.removeAllRanges(),sel.addRange(range));let a_parents=$(range.startContainer).parents("a");if(a_parents.length>0){const a_elem=a_parents[0];range.selectNodeContents(a_elem)}range&&range.startContainer.isSameNode(range.endContainer)&&1==range.startContainer.childNodes.length&&"BR"==range.startContainer.childNodes[0].nodeName&&range.selectNode(range.startContainer);var self=this;InsertLinkDialog.show(range,(function(){self.updateValueAndMarkup()}),(function(){setTimeout((function(){self.edit_in_progress?(self.entry.focus(),selectText(self.entry.get(0),!0)):self.dom.parents("table").focus()}),10)}))},CellView.prototype.insertImage=function(){if(allow_markup_in_cells&&this.is_selected&&window.getSelection){var sel=window.getSelection(),range=null;if(0==sel.rangeCount?(range=document.createRange(),sel.addRange(range),range.selectNodeContents(this.entry.get(0)),range.collapse()):range=sel.getRangeAt(0).cloneRange(),0==range.toString().length){var new_node=document.createElement("span");new_node.textContent=ZeroWidthSpace,range.selectNodeContents(this.entry.get(0)),range.collapse(),range.insertNode(new_node),range.selectNode(new_node)}var self=this;InsertImageDialog.show(range,(function(){self.updateValueAndMarkup()}),(function(){setTimeout((function(){self.edit_in_progress?(self.entry.focus(),selectText(self.entry.get(0),!0)):self.dom.parents("table").focus()}),10)}))}};var selectText=function(el,collapse=!1){const selection=window.getSelection?window.getSelection():null;let range=null;if(selection&&selection.removeAllRanges(),document.body.createTextRange)if(range=document.body.createTextRange(),collapse){range.moveToElementText(el),range.collapse(!1);const n=el.textContent.length;range.moveStart("character",n),range.moveEnd("character",n),range.select()}else range.moveToElementText(el),range.select();else selection&&(range=document.createRange(),"IMG"==el.nodeName?range.selectNode(el):range.selectNodeContents(el),collapse&&range.collapse(),selection.addRange(range));return range};function deselectText(){if(window.getSelection){var sel=window.getSelection();sel.rangeCount>0&&sel.getRangeAt(0).collapse(!0)}}CellView.prototype.remove=function(){this.endEditing(),this.dom.remove()},CellView.prototype.startEditing=function(clear){if(0==CellView.read_only&&!this.edit_in_progress){this.entry.addClass("entry-editing").attr("contenteditable",!0).focus(),clear&&this.entry.text("");const entry=this.entry[0];selectText(entry.lastChild||entry,!0),this.edit_in_progress=!0}};let cell_markup_processing_plugin=null,cell_font_style_toggle_handler=null;function AuxiliaryCell(type,index){this.type=type,this.dom=$("<td>").addClass("aux-cell").addClass("aux-cell-"+type),this.index_view=$("<span>").addClass("index-view").appendTo(this.dom),this.size_handle=null,"column"==type&&(this.size_handle=$("<div>").addClass("size-handle").appendTo(this.dom),this.size_handle.present("SimpleDraggable"),this.draggable=this.size_handle.data("SimpleDraggable")),this.is_draggable="column"==type,"corner"==type&&$("<i>").addClass("icon-unchecked").appendTo(this.index_view),this.is_draggable&&(this.index_view.present("SimpleDraggable"),this.drag_handle=this.index_view.data("SimpleDraggable")),this.index=-1,$.observable(this),this.setIndex(index)}function TableView(table_model,parent_container,opt){opt=opt||{};const self=this;function onChange(){!0===self.notify_about_state_changes&&self.trigger("state_change")}function onKeyDown(event){if(self.isBorderEditEnabled())return;var isCtrlCombo=function(letter,code){return code=code||letter.charCodeAt(0),(event.ctrlKey||event.metaKey)&&event.keyCode==code};const is_shift=event.shiftKey||!1,key_code=event.keyCode;var row,col,event_node=event.target.nodeName,cell_edit_in_progress=function(){var edit_in_progress=!1;isSingleCellSelected()&&self.forEachSelectedCellView((function(view){edit_in_progress|=view.edit_in_progress}));return edit_in_progress}();if(is_shift&&key_code==Keys.TAB)event.preventDefault(),moveSelection(0,-1,!0);else if(event.which==Keys.TAB)event.preventDefault(),moveSelection(0,1,!0);else if(event.which>=Keys.ARROW_LEFT&&event.which<=Keys.ARROW_DOWN){if(0==cell_edit_in_progress){event.preventDefault();var delta_x=0,delta_y=0;event.which==Keys.ARROW_LEFT?delta_x=-1:event.which==Keys.ARROW_RIGHT?delta_x=1:event.which==Keys.ARROW_UP?delta_y=-1:event.which==Keys.ARROW_DOWN&&(delta_y=1),event.shiftKey?function(delta_row,delta_col,ctrlKey){var root=self.selection_root;if(root){var sel=getSelectionBounds(),col=delta_col+(root.col==sel.left?sel.left<=sel.right?sel.right:sel.left:sel.left<=sel.right?sel.left:sel.right);growSelection(delta_row+(root.row==sel.top?sel.top<=sel.bottom?sel.bottom:sel.top:sel.top<=sel.bottom?sel.top:sel.bottom),col,ctrlKey)}}(delta_y,delta_x,event.ctrlKey):moveSelection(delta_y,delta_x)}}else if(event.which==Keys.ENTER){var cell_view=getSelectedCellView();isSingleCellSelected()&&!cell_view.edit_in_progress&&(cell_view.startEditing(),event.preventDefault())}else if(isCtrlCombo("V")){const assisted_paste=is_shift;self.pasteIntoSelectedCells(assisted_paste)}else isCtrlCombo("B")?(self.forEachSelectedCellView((function(view){self.toggleCellFontStyle(view,"fontWeight","bold","normal")})),event.preventDefault()):isCtrlCombo("I")?(self.forEachSelectedCellView((function(view){self.toggleCellFontStyle(view,"fontStyle","italic","normal")})),event.preventDefault()):isCtrlCombo("U")?(self.forEachSelectedCellView((function(view){self.toggleCellFontStyle(view,"textDecoration","underline","none")})),event.preventDefault()):isCtrlCombo("K")?isSingleCellSelected()&&(getSelectedCellView().insertLink(),event.preventDefault()):isCtrlCombo("M")?isSingleCellSelected()&&(getSelectedCellView().insertImage(),event.preventDefault()):isCtrlCombo("A")&&!cell_edit_in_progress?(event.preventDefault(),selectAllCells()):isCtrlCombo(0,Keys.HOME)&&!cell_edit_in_progress?(event.preventDefault(),row=0,col=0,stopEditingSelectedCells(),row<self.model.row_count&&col<self.model.col_count&&(clearSelection(),selectCell(self.model.getCell(row,col),row,col))):event.which==Keys.DEL?self.forEachSelectedCellView((function(view){0==view.edit_in_progress&&view.cell.value("")})):event.which==Keys.RIGHT_ALT?event.preventDefault():"TABLE"==event_node&&(isCtrlCombo("L")?(self.forEachSelectedCellView((function(v){v.style.setHorizontalAlign("left")})),event.preventDefault()):isCtrlCombo("E")?(self.forEachSelectedCellView((function(v){v.style.setHorizontalAlign("center")})),event.preventDefault()):isCtrlCombo("R")?(self.forEachSelectedCellView((function(v){v.style.setHorizontalAlign("right")})),event.preventDefault()):isSingleCellSelected()&&!event.ctrlKey&&event.which!=Keys.ESC&&event.which!=Keys.SHIFT&&event.which!=Keys.ALT&&event.which!=Keys.WIN&&self.forEachSelectedCellView((function(v){v.startEditing(!0)})))}function createCellView(cell_model){const cv=new CellView(cell_model);return cv.on("state_change",onChange),self.trigger("cell_created",cv),cv}function toggleVerticalBorder(which,row,col,max_row=void 0,enabled=!0){null==max_row&&(max_row=self.model.row_count-1);var pos=self.model.getVisibleCellPos(row,col),cell=self.model.getCell(row,col);pos.row==row&&pos.row+cell.rowspan()-1<=max_row&&("right"==which&&pos.col+cell.colspan()-1==col||"left"==which&&pos.col==col)&&(enabled?self.getCellView(pos.row,pos.col).style.addBorder(which):self.getCellView(pos.row,pos.col).style.removeBorder(which))}function toggleRightBorder(row,col,max_row,enabled){toggleVerticalBorder("right",row,col,max_row,enabled)}function toggleLeftBorder(row,col,max_row,enabled){toggleVerticalBorder("left",row,col,max_row,enabled)}function toggleHorizontalBorder(which,row,col=0,max_col=void 0,enabled=!0){null==max_col&&(max_col=self.model.col_count-1);const pos=self.model.getVisibleCellPos(row,col),cell=self.model.getCell(row,col);pos.col==col&&pos.col+cell.colspan()-1<=max_col&&("top"==which&&pos.row==row||"bottom"==which&&pos.row+cell.rowspan()-1==row)&&(enabled?self.getCellView(pos.row,pos.col).style.addBorder(which):self.getCellView(pos.row,pos.col).style.removeBorder(which),col+cell.colspan()-1<max_col&&toggleHorizontalBorder(which,row,col+=cell.colspan(),max_col,enabled))}function toggleTopBorder(row,col,max_col,enabled){toggleHorizontalBorder("top",row,col,max_col,enabled)}function toggleBottomBorder(row,col,max_col,enabled){toggleHorizontalBorder("bottom",row,col,max_col,enabled)}function createAuxiliaryCell(type,index){var cell=null;if("row"==type)null==index&&(index=self.model.row_count),self.aux_cells.forEach((function(acell){acell.onInsertRow(index)})),(cell=new AuxiliaryCell(type,index)).dom.mousedown((function(event){if(!cell.dom.hasClass("aux-cell-selected")||1==event.which){var r=getTdPos(cell.dom).row;selectCells(r,0,r,self.model.col_count-1,event.ctrlKey)}})),self.aux_col_cells.splice(index,0,cell);else if("column"==type){if(null==self.aux_row)return;null==index&&(index=self.aux_row.find("td").length-1),self.aux_cells.forEach((function(acell){acell.onInsertColumn(index)})),(cell=new AuxiliaryCell(type,index)).dom.mousedown((function(event){if(!cell.dom.hasClass("aux-cell-selected")||1==event.which){var c=getTdPos(cell.dom).col;selectCells(0,c,self.model.row_count-1,c,event.ctrlKey)}})),self.aux_row.find("td").eq(index).after(cell.dom),self.aux_row_cells.splice(index,0,cell),self.column_resize_enabled&&cell.draggable.on("drag_start",(function(ev,start_pos){!function(ev,cell,start_pos){self.enableFixedLayout(!0);var cell_pos=cell.dom.offset(),MAX_CELL_WIDTH=1e3,min_width=(self.aux_row_cells.indexOf(cell),20),handle_width=cell.size_handle.width();self.drag_start_pos=start_pos,cell.draggable.setBounds({left:cell_pos.left+min_width-handle_width+1,right:cell_pos.left+MAX_CELL_WIDTH}),null==self.size_indicator&&(self.size_indicator=$("<div>").addClass("size-tip").appendTo($("body")));cell.size_handle.addClass("size-indicator").css({height:self.dom.height()})}(0,cell,start_pos)})).on("drag_end",(function(ev){!function(ev,cell){if(void 0!==self.drag_start_pos){var delta=cell.size_handle.offset().left-self.drag_start_pos.left,col_index=self.aux_row_cells.indexOf(cell),curr_width=self.getColumnWidths(!0)[col_index+1],new_width=Math.max(1,curr_width+delta);self.setSingleColumnWidth(col_index,new_width),cell.size_handle.css({position:"relative",top:0,height:20,left:0}).removeClass("size-indicator"),self.size_indicator.hide()}}(0,cell)})).on("drag_move",(function(ev,pos){!function(ev,cell,pos){var delta=cell.size_handle.offset().left-self.drag_start_pos.left+cell.dom.width();self.size_indicator.text(delta+"px").offset({left:pos.left-self.size_indicator.width()/2,top:pos.top-self.size_indicator.height()-5}).show()}(0,cell,pos)})),cell.drag_handle.can_start_drag=function(){var is_col_draggable=!0;return self.model.forEachCellInColumn(cell.index,(function(cell){1!=cell.colspan()&&(is_col_draggable=!1)})),is_col_draggable},cell.drag_handle.on("drag_start",(function(ev){!function(col_index,aux_cell){self.dragged&&(self.dragged.table.remove(),self.dragged=null);self.hasFixedLayout()&&self.dom.css("table-layout","auto");var clone=function(index){var clone=self.dom.clone();return clone.find("tr:first").remove(),clone.find("tr").each((function(i,tr){$(tr).find("td").not(":eq("+(index+1)+")").remove()})),clone.addClass("table-fragment-ghost"),clone}(col_index),pos_left=aux_cell.dom.position().left;clone.css({top:aux_cell.dom.height()+1+"px",left:pos_left+"px",width:"auto"});var widths=self.getColumnWidths(!0),width=col_index<widths.length?widths[col_index+1]+"px":"auto",width_px=col_index<widths.length?widths[col_index+1]:0;clone.find("td:first").css({width}),parent_container.append(clone),set_column_cells_style(col_index+1,{opacity:.3});for(var spanned=[],i=0;i<self.model.col_count;++i)spanned.push(!0);self.model.forEachCell((function(cell,row,col){cell.colspan()<0&&(spanned[col]=!1)})),self.dragged={column_index:col_index,column_width:width,column_width_px:width_px,table:clone,start_pos_left:pos_left,column_widths:widths,target_index:-1,spanned_columns:spanned}}(cell.index,cell)})).on("drag_move",(function(ev,pos){!function(position){if(self.dragged){var new_pos_left=self.dragged.start_pos_left+position.delta_x;self.dragged.table.css({left:new_pos_left+"px"});for(var x=new_pos_left+self.dragged.column_width_px/2,sizes=self.dragged.column_widths,left=1,target_index=sizes.length-1,i=0;i<sizes.length;++i){var size=sizes[i];if(x<=left+size){target_index=i-1,new_pos_left>=left+size/2&&++target_index;break}left+=size+1}var spanned_columns=self.dragged.spanned_columns;(target_index>=spanned_columns.length||1==spanned_columns[target_index])&&drag_column_set_target(target_index)}}(pos)})).on("drag_end",finish_column_drag)}else"corner"==type&&(cell=new AuxiliaryCell(type)).dom.mousedown(selectAllCells);var col=$(document.createElement("col"));return self.hasFixedLayout()&&(col.width(20),self.dom.width(self.dom.width()+20)),"corner"==type?self.colgroup.append(col):"column"==type&&self.colgroup.find("col").eq(index).after(col),null!=cell?(self.aux_cells.push(cell),cell.dom):null}function removeAuxiliaryCell(type,index){var to_remove=null;if(self.aux_cells.forEach((function(cell){cell.type==type&&cell.index==index&&(to_remove=cell)})),"row"==type?(self.aux_cells.forEach((function(cell){cell.onRemoveRow(index)})),self.aux_col_cells.splice(index,1)):"column"==type&&(self.aux_cells.forEach((function(cell){cell.onRemoveColumn(index)})),self.aux_row.find("td").eq(index+1).remove(),self.aux_row_cells.splice(index,1)),null!=to_remove){const update_width=self.hasFixedLayout();let col_width=0,table_width=update_width?self.dom.width():0;"column"==type?(update_width&&(col_width=self.colgroup.find("col").eq(index+1).width()),self.colgroup.find("col").eq(index+1).remove()):"corner"==type&&(update_width&&(col_width=self.colgroup.find("col").eq(0).width()),self.colgroup.find("col").eq(0).remove());const i=self.aux_cells.indexOf(to_remove);-1!=i&&self.aux_cells.splice(i,1),update_width&&self.dom.css("width",table_width-col_width-1)}}function onInsertRow(row_index,cells){null==self.aux_row&&function(){var tr=$("<tr>");tr.append(createAuxiliaryCell("corner")),self.aux_row=tr;for(var i=1;i<=self.model.col_count;++i)createAuxiliaryCell("column");self.dom.append(tr)}();const new_row=document.createElement("tr"),aux_cell=createAuxiliaryCell("row",row_index),fragment=document.createDocumentFragment();fragment.appendChild(aux_cell.get(0));for(let i=0,n=cells.length;i<n;++i){const cell=cells[i],cv=createCellView(cell);fragment.append(cv.dom.get(0)),cell.view=cv}new_row.appendChild(fragment);const tbody=self.dom.get(0).querySelector("tbody");if(row_index+1===self.model.row_count)tbody.appendChild(new_row);else{tbody.getElementsByTagName("tr")[row_index].insertAdjacentElement("afterend",new_row)}self.selection_bounds=null}function calcScroll(parent_scroll,parent_size,child_offset,child_size){return child_size>parent_size||child_offset<parent_scroll?child_offset:child_offset+child_size>parent_scroll+parent_size?child_offset+child_size-parent_size:parent_scroll}function selectCell(cell,row,col,scroll_to_cell){if(cell.view&&cell.view.select()){if(cell.view.areEventHandlersInitialized()||cell.view.initEventHandlers(),self.selection_bounds=null,self.aux_col_cells[row].dom.get(0).classList.add("aux-cell-selected"),self.aux_row_cells[col].dom.get(0).classList.add("aux-cell-selected"),scroll_to_cell){const panel=self.dom.get(0).parentElement,{top,left}=function(element,parent){let top=0,left=0;do{top+=element.offsetTop,left+=element.offsetLeft;const offset_parent=element.offsetParent;do{element=element.parentElement}while(element!=parent&&element!=offset_parent)}while(element&&element!=parent);return top-=parent.offsetTop,left-=parent.offsetLeft,{top,left}}(cell.view.dom.get(0),panel),cell_height=cell.view.dom.height(),cell_width=cell.view.dom.width(),scroll_x=calcScroll(panel.scrollLeft,panel.clientWidth,left,cell_width),scroll_y=calcScroll(panel.scrollTop,panel.clientHeight,top,cell_height);panel.scrollTo(scroll_x,scroll_y)}self.trigger("cell_selected",cell,row,col)}}function flipCellSelection(cell,row,col){if(cell.view.is_selected){unselectCell(cell,row,col);let any_in_col=!1;self.model.forEachCellInColumn(col,(function(acell){any_in_col||=acell.view.is_selected})),any_in_col||deselectAuxCol(col);let any_in_row=!1;self.model.forEachCellInRow(row,(function(acell){any_in_row||=acell.view.is_selected})),any_in_row||deselectAuxRow(row)}else selectCell(cell,row,col)}function selectCells(start_row,start_col,end_row,end_col,clear_disabled){start_row=Math.max(0,start_row),start_col=Math.max(0,start_col),(null==end_row||end_row<start_row)&&(end_row=start_row),(null==end_col||end_col<start_col)&&(end_col=start_col);var fn=selectCell;if(clear_disabled?fn=flipCellSelection:clearSelection(),self.model.forEachCellInRange(start_row,start_col,end_row,end_col,fn),window.getSelection&&window.getSelection().rangeCount>0){const x=window.scrollX,y=window.scrollY;deselectText(),is_ie()||window.scrollTo(x,y)}self.dom.focus()}function selectAllCells(){selectCells(0,0,self.model.row_count-1,self.model.col_count-1)}function unselectCell(cell,row,col){cell.view.unselect()&&(self.selection_bounds=null,self.trigger("cell_unselected",cell,row,col))}function deselectAuxCol(col){self.aux_row_cells[col].dom.get(0).classList.remove("aux-cell-selected")}function deselectAuxRow(row){self.aux_col_cells[row].dom.get(0).classList.remove("aux-cell-selected")}function clearSelection(){var bounds=getSelectionBounds();if(bounds){for(let col=bounds.left;col<=bounds.right;++col)deselectAuxCol(col);for(let row=bounds.top;row<=bounds.bottom;++row)deselectAuxRow(row);self.model.forEachCellInRange(bounds.top,bounds.left,bounds.bottom,bounds.right,unselectCell),self.selected_cells={}}InsertLinkDialog.close()}function getSelectionBounds(){if(null!=self.selection_bounds)return self.selection_bounds;var left=self.model.col_count,right=-1,top=self.model.row_count,bottom=-1;return self.model.forEachCell((function(cell,row,col){1==cell.view.is_selected&&(col<left&&(left=col),col>right&&(right=col),row<top&&(top=row),row>bottom&&(bottom=row))})),left<=right&&top<=bottom?(self.selection_bounds={left,right,top,bottom},self.selection_bounds):null}function growSelection(dest_row,dest_col,ctrlKey){dest_row=Math.min(self.model.row_count-1,dest_row),dest_col=Math.min(self.model.col_count-1,dest_col);var new_sel={top:Math.max(0,Math.min(dest_row,self.selection_root.row)),bottom:Math.max(dest_row,self.selection_root.row),left:Math.max(0,Math.min(dest_col,self.selection_root.col)),right:Math.max(dest_col,self.selection_root.col)},old=getSelectionBounds();ctrlKey||!old||new_sel.left<=old.left&&new_sel.top<=old.top&&new_sel.right>=old.right&&new_sel.bottom>=old.bottom||clearSelection(),self.model.forEachCellInRange(new_sel.top,new_sel.left,new_sel.bottom,new_sel.right,selectCell)}function isSingleCellSelected(){var bounds=getSelectionBounds();return bounds&&bounds.left==bounds.right&&bounds.top==bounds.bottom}function getSelectedCell(){var cell=null,bounds=getSelectionBounds();return bounds&&self.model.forEachCellInRange(bounds.top,bounds.left,bounds.bottom,bounds.right,(function(c){null==cell&&(cell=c)})),cell}function getSelectedCellView(){var cell=getSelectedCell();return null==cell?null:cell.view}function getNextCell({start_row,start_column,delta_row,delta_column,cell_predicate}){let row=start_row,column=start_column;do{let next_column=column+delta_column,next_row=row+delta_row;next_column<0?(next_column=self.model.col_count-1,next_row-=1):next_column>=self.model.col_count&&(next_column=0,next_row+=1),next_row<0?next_row=self.model.row_count-1:next_row>=self.model.row_count&&(next_row=0);const cell=self.model.getCell(next_row,next_column,!0);if(cell_predicate(cell))return{row:next_row,column:next_column,cell};row=next_row,column=next_column}while(row!=start_row||column!=start_column);return null}function moveSelection(delta_row,delta_column,start_editing_cell){if(function(){var cell=self.model.getCell(0,0);return cell.rowspan()==self.model.row_count&&cell.colspan()==self.model.col_count}())return;start_editing_cell&&stopEditingSelectedCells();const bounds=getSelectionBounds(),{row,column,cell}=getNextCell({start_row:bounds.top,start_column:bounds.left,delta_row,delta_column,cell_predicate:cell=>cell.isVisible()});clearSelection(),selectCell(cell,row,column),setSelectionRoot(row,column),start_editing_cell&&self.forEachSelectedCellView((function(view){view.startEditing()}))}function setSelectionRoot(row,col){self.selection_root={row,col}}function getTdPos(td){for(td=$(td);null!=td&&td.get(0)&&"td"!=td.get(0).nodeName.toLowerCase();)td=td.parent();return{col:td.index()-1,row:$(td.parent()).index()-1}}function stopEditingSelectedCells(){self.forEachSelectedCellView((function(view){view.endEditing()}))}function getElementOrParentByTagName(el,tag){return(el=$(el)).prop("tagName")==tag?el:el.parents(tag)}function onMouseDown(event){self.left_pressed=1==event.which;var td=getElementOrParentByTagName(event.target,"TD");td&&!td.hasClass("aux-cell")&&function(event){if(!self.isBorderEditEnabled()&&1==event.which){var pos=getTdPos(event.target),bounds=getSelectionBounds();isSingleCellSelected()&&bounds.left==pos.col&&bounds.top==pos.row||(selectCells(pos.row,pos.col,pos.row,pos.col,event.ctrlKey),isSingleCellSelected()&&(setSelectionRoot(pos.row,pos.col),self.trigger("single_cell_selected",self.model.getCell(pos.row,pos.col),pos.row,pos.col)))}}(event)}function onMouseMove(event){var td=getElementOrParentByTagName(event.target,"TD");td&&!td.hasClass("aux-cell")&&function(event){if(!self.isBorderEditEnabled()&&self.left_pressed&&!event.ctrlKey){var pos=getTdPos(event.target),changed=!1,prev=self.selection_prev;null==self.selection_root&&(setSelectionRoot(pos.row,pos.col),changed=!0),!prev||prev.row==pos.row&&prev.col==pos.col||(changed=!0),changed&&growSelection(pos.row,pos.col,event.ctrlKey),self.selection_prev=pos}}(event)}function onDblClick(event){var td=getElementOrParentByTagName(event.target,"TD");td&&!td.hasClass("aux-cell")&&getSelectedCellView().onDblClick(event)}function onCopyCutHandler(event){self.ignore_next_copy_event?self.ignore_next_copy_event=!1:$(document.activeElement).hasClass("tableview")?(event.clipboardData.setData("text/html",self.getSelectedCellsAsHTML()),"cut"==event.type&&self.clearSelectedCellsContents(),event.preventDefault()):self.ignore_next_copy_event=!1}function drag_column_set_target(target_index){var restore_border=function(col_idx){set_column_cells_style(col_idx,{"border-right-width":"1px","border-right-color":"inherit"},{"border-right-width":"1px","border-right-color":"transparent"})};if(-1==target_index&&-1!=self.dragged.target_index)restore_border(self.dragged.target_index),self.dragged.target_index=-1;else if(target_index>=0&&target_index!=self.dragged.target_index){if(-1!=self.dragged.target_index&&restore_border(self.dragged.target_index),self.dragged.target_index=target_index,target_index!=self.dragged.column_index&&target_index!=self.dragged.column_index+1)set_column_cells_style(target_index,{"border-right-width":"50px","border-right-style":"solid","border-right-color":target_index>=self.model.col_count?"#ddd":"#f7f7f7"}),self.dragged.column_widths=self.getColumnWidths(!0)}}function finish_column_drag(){if(self.dragged){const from=self.dragged.column_index,to=self.dragged.target_index;set_column_cells_style(from+1,{opacity:1}),drag_column_set_target(-1),self.dragged.table.remove(),self.dragged=null,from!=to&&-1!=to&&self.swapColumns(from,to>from?to-1:to)}}function set_column_cells_style(col_index,style,header_style){col_index>0&&self.forEachCellViewInColumn((function(view,r,c){view.dom.css(style)}),col_index-1),self.dom.find("tr").each((function(idx){0==idx&&header_style?$(this).find("td").eq(col_index).css(header_style):0==col_index&&$(this).find("td").eq(col_index).css(style)}))}this.model=table_model,this.options={},this.style_class=null,this.theme=null,this.dom,this.colgroup,this.left_pressed=!1,this.cell_border_events_options={deactivated:!0,onBorderOver:function(e,which,target){target.addClass("alert_border_"+which[0])},onBorderLeave:function(e,which,target){self.dom.css("cursor","default"),target.removeClass("alert_border_"+which[0])},onBorderClick:function(e,which,target){var pos=getTdPos(target),row=(pos=self.model.getVisibleCellPos(pos.row,pos.col)).row,col=pos.col,cell=self.model.getCell(row,col),enabled=!self.getCellView(row,col).style.hasBorder(which);if("right"==which){var end=row+cell.rowspan()-1;e.shiftKey&&(row=0,end=self.model.row_count-1);for(var r=row;r<=end;++r)toggleRightBorder(r,col+cell.colspan()-1,end,enabled)}else if("left"==which){end=row+cell.rowspan()-1;e.shiftKey&&(row=0,end=self.model.row_count-1);for(r=row;r<=end;++r)toggleLeftBorder(r,col,end,enabled)}else if("top"==which){end=col+cell.colspan()-1;e.shiftKey&&(col=0,end=self.model.col_count-1);for(var c=col;c<=end;++c)toggleTopBorder(row,c,end,enabled)}else if("bottom"==which){end=col+cell.colspan()-1;e.shiftKey&&(col=0,end=self.model.col_count-1);for(c=col;c<=end;++c)toggleBottomBorder(row+cell.rowspan()-1,c,end,enabled)}}},this.aux_row=null,this.aux_cells=[],this.aux_col_cells=[],this.aux_row_cells=[],this.selection_root=null,this.selection_prev=null,this.selection_bounds=null,this.selected_cells={},this.size_indicator=null,this.column_resize_enabled=opt.column_resize_enabled||!1,this.ignore_next_copy_event=!1,this.notify_about_state_changes=!0,self.enableStateChangeNotifications=function(){self.notify_about_state_changes=!0},self.disableStateChangeNotifications=function(){self.notify_about_state_changes=!1},self.notifyAboutStateChange=function(){self.trigger("state_change")},self.toggleVerticalBorder=toggleVerticalBorder,self.toggleHorizontalBorder=toggleHorizontalBorder,this.hasBorder=function(row,col,which,ignore_neighbour){if(row<0||row>=self.model.row_count||col<0||col>=self.model.col_count)return!1;var cell=self.model.getCell(row,col),pos=self.model.getVisibleCellPos(row,col),view=self.getCellView(row,col);if("top"==which&&pos.row==row&&view.style.hasBorder("top"))return!0;if("bottom"==which&&pos.row+cell.rowspan()-1==row&&view.style.hasBorder("bottom"))return!0;if("left"==which&&pos.col==col&&view.style.hasBorder("left"))return!0;if("right"==which&&pos.col+cell.colspan()-1==col&&view.style.hasBorder("right"))return!0;if(!ignore_neighbour){if("left"==which)return self.hasBorder(row,col-1,"right",!0);if("right"==which)return self.hasBorder(row,col+1,"left",!0);if("top"==which)return self.hasBorder(row-1,col,"bottom",!0);if("bottom"==which)return self.hasBorder(row+1,col,"top",!0)}return!1},this.model.on("row_inserted",onInsertRow),this.model.on("column_inserted",(function(column_index,cells){createAuxiliaryCell("column",column_index),self.dom.get(0).querySelectorAll("tr").forEach((function(row,i){if(i>0){const cell=cells[i-1],view=createCellView(cell),td=row.querySelectorAll("td")[column_index];td&&td.insertAdjacentElement("afterend",view.dom.get(0)),cell.view=view}})),self.selection_bounds=null})),this.model.on("row_removed",(function(row_index,cells){self.selection_bounds=null,removeAuxiliaryCell("row",row_index),cells.forEach((function(cell,idx){unselectCell(cell,row_index,idx),cell.view&&cell.view.remove()})),self.dom.find("tr").eq(row_index+1).remove()})),this.model.on("column_removed",(function(col_index,cells){self.selection_bounds=null,cells.forEach((function(cell,idx){unselectCell(cell,idx,col_index),cell.view&&cell.view.remove()})),removeAuxiliaryCell("column",col_index)})),this.getCellView=function(row,col,include_hidden){return self.model.getCell(row,col,include_hidden).view},self.selectCell=selectCell,self.selectCells=selectCells,self.selectAllCells=selectAllCells,self.clearSelection=clearSelection,self.getSelectionBounds=getSelectionBounds,self.forEachSelectedCell=function(fn,include_hidden){self.model.forEachCell((function(cell,row,col){if(1==cell.view.is_selected)if(include_hidden)for(var r=row;r<row+cell.rowspan();++r)for(var c=col;c<col+cell.colspan();++c)fn(self.model.getCell(r,c,!0),r,c);else fn(cell,row,col)}))},self.forSingleSelectedCellView=function(fn){isSingleCellSelected()&&fn(getSelectedCellView())},self.isSingleCellSelected=isSingleCellSelected,self.getSelectedCell=getSelectedCell,self.getSelectedCellView=getSelectedCellView,self.selectFirstMatchingCell=function(cell_predicate){const bounds=getSelectionBounds()||{top:0,left:0};clearSelection();const coords=getNextCell({start_row:bounds.top,start_column:bounds.left,delta_row:0,delta_column:1,cell_predicate});if(coords){const{row,column,cell}=coords;return selectCell(cell,row,column,!0),setSelectionRoot(row,column),coords.cell}return null},self.onCellPaste=function(pasted_html,pasted_plain){const rows=TableImport.extractTableFromString(pasted_html,pasted_plain);if(rows){const sl=getSelectionBounds();self.importTable(rows,sl.top,sl.left,!0)}},self.onCellPasteAssisted=function(_pasted_html,pasted_plain){const sl=getSelectionBounds();PasteAssistant.show(pasted_plain,(rows=>{rows&&self.importTable(rows,sl.top,sl.left,!0)}))},self.swapRows=function(src_row_idx,dst_row_idx){for(let col=self.model.col_count-1;col>=0;--col){self.model.splitCell(src_row_idx,col),self.model.splitCell(dst_row_idx,col);const src=self.getCellView(src_row_idx,col,!0),dst=self.getCellView(dst_row_idx,col,!0);src.swap(dst)}},self.swapColumns=function(src_col_idx,dst_col_idx){for(let row=self.model.row_count-1;row>=0;--row){self.model.splitCell(row,src_col_idx),self.model.splitCell(row,dst_col_idx);const src=self.getCellView(row,src_col_idx,!0),dst=self.getCellView(row,dst_col_idx,!0);src.swap(dst)}},self.moveSelectedRow=function(row_delta){const sel_bounds=getSelectionBounds();if(!sel_bounds)return;const{top,left}=sel_bounds,dest_row=top+row_delta;0<=dest_row&&dest_row<self.model.row_count&&(self.swapRows(top,dest_row),selectCells(dest_row,left,dest_row,left),setSelectionRoot(dest_row,left))},self.moveSelectedColumn=function(col_delta){const sel_bounds=getSelectionBounds();if(!sel_bounds)return;const{top,left}=sel_bounds,dest_col=left+col_delta;0<=dest_col&&dest_col<self.model.col_count&&(self.swapColumns(left,dest_col),selectCells(top,dest_col,top,dest_col),setSelectionRoot(top,dest_col))},self.importTable=function(rows,start_row=0,start_col=0,resize_to_fit=!0,import_style=!0){let model=self.model;if(resize_to_fit){const row_count=rows.length;let col_count=0;rows.forEach((function(r){col_count=Math.max(col_count,r.length)}));const columns_needed=start_col+col_count,rows_needed=start_row+row_count;(rows_needed>model.row_count||columns_needed>model.col_count)&&model.resize(Math.max(model.row_count,rows_needed),Math.max(model.col_count,columns_needed))}const table_rows=model.row_count,table_cols=model.col_count,formatting_options=self.getFormattingOptions();let spanned=[];for(let r=0;r<rows.length;++r){let row=rows[r];for(let c=0;c<row.length;++c)if(r+start_row<table_rows&&c+start_col<table_cols){const entry=row[c],is_plain_entry="string"==typeof entry,cell_value=is_plain_entry?entry:entry.value,cell_style=is_plain_entry?null:entry.style;let cell_view=self.getCellView(r+start_row,c+start_col,!0),cell=cell_view.cell;if(entry.hasOwnProperty("per_char_markup")){const markup_ids=entry.per_char_markup.map(Markup.create);cell.value(cell_value,markup_ids)}else cell.value(cell_value);cell_style&&import_style&&cell_view.style.setFromDict(cell_style),cell_view.style.reset(formatting_options),cell_markup_processing_plugin&&cell_view.updateValueAndMarkup();const rowspan=is_plain_entry?1:entry.rowspan,colspan=is_plain_entry?1:entry.colspan;(colspan>1||rowspan>1)&&Math.min(colspan,rowspan)>0&&spanned.push({top:r+start_row,bottom:r+start_row+rowspan-1,left:c+start_col,right:c+start_col+colspan-1})}}self.isFormattingOptionEnabled("rowspan")&&self.isFormattingOptionEnabled("colspan")&&spanned.forEach((({top,left,right,bottom})=>{self.model.mergeCells(top,left,bottom,right)})),this.selectCells(start_row,start_col)},self.onEditInProgressCellPaste=function(pasted_raw,src_range){var as_html=$('<div style="white-space:pre">'+pasted_raw+"</div>"),chars=[],markup_ids=[];Markup.forEachLeafCharInNode(as_html.get(0),(function(chr,inside_range,markup){chars.push(chr);var markup_id=Markup.create(markup);markup_ids.push(markup_id)}),null,["fontWeight","fontStyle","textDecoration"]);for(var i=0;i<chars.length&&chars[i].match(/\s/g);)++i;for(chars=chars.slice(i),markup_ids=markup_ids.slice(i);chars.length>0&&chars[chars.length-1].match(/\s/g);)chars.pop(),markup_ids.pop();var chars_with_ws=chars,chars_with_ws_markup=[];i=0;for(var j=0,markup_id=0;j<chars_with_ws.length;){if(i<chars.length&&chars[i]==chars_with_ws[j])for(markup_id=markup_ids[i],++i;i<chars.length&&chars[i].match(/\s/g);)++i;chars_with_ws_markup.push(markup_id),++j}var str=chars_with_ws.join(""),new_node=document.createElement("span");renderToNode(str,chars_with_ws_markup,new_node);var sl=getSelectionBounds(),cell=self.model.getCell(sl.top,sl.left,!0);src_range.deleteContents(),src_range.insertNode(new_node);var sel=window.getSelection();sel.removeAllRanges(),sel.addRange(src_range),src_range.collapse(),cell.view.entry.focus()},self.hasFixedLayout=function(){return"fixed"==self.dom.css("table-layout")},self.enableFixedLayout=function(enabled){if(enabled&&!self.hasFixedLayout()){var col_widths=[],sum=0;self.dom.find("tr:first td").each((function(_,el){col_widths.push($(el).width()),sum+=$(el).width()})),sum+=col_widths.length,self.dom.hide(),self.dom.addClass("fixed-size"),self.dom.css({"table-layout":"fixed",width:sum}),self.colgroup.find("col").each((function(i,el){(el=$(el)).css({width:col_widths[i]+1})})),self.dom.show()}else enabled||(self.dom.hide(),self.dom.removeClass("fixed-size"),self.dom.css({"table-layout":"auto",width:"auto"}),self.colgroup.find("col").each((function(i,el){$(el).css({width:"auto"})})),self.dom.show())},self.getColumnWidths=function(include_aux){var widths=[];return self.dom.find("tr:first td").each((function(_,el){widths.push($(el).width())})),1==include_aux?widths:widths.slice(1)},self.setColumnWidth=function(col_index,width){width+=1,self.colgroup.find("col").eq(col_index+1).css({width})},self.setSingleColumnWidth=function(col_index,width){self.dom.css({"table-layout":"fixed"});for(var table_width=self.dom.width(),col_widths=self.getColumnWidths(!0),curr_width=col_widths[col_index+1],i=0;i<col_widths.length;++i)col_widths[i];table_width+=-curr_width+width,self.dom.hide(),self.dom.css({"table-layout":"fixed",width:table_width}),self.setColumnWidth(col_index,width),self.dom.show()},function(){self.dom=$("<table>",{class:"tableview",tabindex:1,cellspacing:3}),self.colgroup=$("<colgroup>").appendTo(self.dom),(parent_container=$(parent_container)||$("body")).append(self.dom),self.model.on("state_change",onChange),$.observable(self),self.dom.mousedown(onMouseDown).mousemove(onMouseMove).mouseup((function(event){self.left_pressed=self.left_pressed&&1!=event.which})).dblclick(onDblClick).on("touchend",onDblClick).mouseleave((function(event){self.left_pressed=!1})).keydown(onKeyDown),GlobalMessageHub.on(GlobalEvents.STOP_EDITING_TABLE,(function(){stopEditingSelectedCells()}));for(var i=0;i<self.model.row_count;++i)onInsertRow(i,self.model.rows[i]);self.model.row_count>0&&self.model.col_count>0&&selectCell(self.model.getCell(0,0),0,0),document.addEventListener("copy",onCopyCutHandler),document.addEventListener("cut",onCopyCutHandler)}()}return CellView.prototype.updateValueAndMarkup=function(){const node=this.entry[0],sel=void 0!==window.getSelection?window.getSelection():null,range=sel&&sel.rangeCount>0?sel.getRangeAt(0):null;const cursor_pos=this.edit_in_progress?function(range){if(range){const selected=range.toString().length,preCaretRange=range.cloneRange();preCaretRange.selectNodeContents(node),preCaretRange.setEnd(range.endContainer,range.endOffset);return selected?preCaretRange.toString().length-selected:preCaretRange.toString().length}return-1}(range):-1,cursor_at_the_end=cursor_pos==(node.textContent||"").length;if(this.edit_in_progress&&!cursor_at_the_end)return;let chars=[],per_char_markups=[];Markup.forEachLeafCharInNode(node,(function(chr,inside_range,markup){chars.push(chr),per_char_markups.push(markup)}),range);const str=chars.join("");cell_markup_processing_plugin&&(per_char_markups=cell_markup_processing_plugin(str,per_char_markups));const markup_ids=per_char_markups.map(Markup.create);this.ignore_model_change=!0,this.cell.value(str,markup_ids),renderToNode(str,markup_ids,node),this.ignore_model_change=!1,this.edit_in_progress&&cursor_at_the_end&&selectText(node.lastChild||node,!0)},CellView.prototype.endEditing=function(){1==this.edit_in_progress&&(deselectText(),this.entry.attr("contenteditable",!1).removeClass("entry-editing"),this.edit_in_progress=!1,this.updateValueAndMarkup())},CellView.prototype.resetMarkupFromValue=function(new_value){let per_char_markups=[];per_char_markups.length=new_value.length,cell_markup_processing_plugin&&(per_char_markups=cell_markup_processing_plugin(new_value,per_char_markups));const markup_ids=per_char_markups.map(Markup.create);this.cell.value(new_value,markup_ids)},AuxiliaryCell.prototype.setIndex=function(index){if(index!=this.index&&"corner"!=this.type){this.index=index;var index_str="row"==this.type?index+1:function(n){for(var id=0==n?"A":"",A_ord="A".charCodeAt(0),alphabet_size="Z".charCodeAt(0)-A_ord+1;n>0;)id=String.fromCharCode(Math.floor(A_ord+n%alphabet_size))+id,n=Math.floor(n/alphabet_size);return id}(index);this.index_view.text(index_str)}},AuxiliaryCell.prototype.onRemoveRow=function(index){"row"==this.type&&this.index>index&&this.setIndex(this.index-1)},AuxiliaryCell.prototype.onInsertRow=function(index){"row"==this.type&&this.index>=index&&this.setIndex(this.index+1)},AuxiliaryCell.prototype.onInsertColumn=function(index){"column"==this.type&&this.index>=index&&this.setIndex(this.index+1)},AuxiliaryCell.prototype.onRemoveColumn=function(index){"column"==this.type&&this.index>index&&this.setIndex(this.index-1)},TableView.prototype.pasteIntoSelectedCells=function(assisted_paste){if(this.getSelectedCellView().edit_in_progress){if(window.getSelection&&window.getSelection().rangeCount>0){var range=window.getSelection().getRangeAt(0).cloneRange(),self=this;PasteHelper.start((function(pasted_html,pasted_plain){$(`<div>${pasted_html}</div>`).get(0).getElementsByTagName("TD").length>1?self.onCellPaste(pasted_html,pasted_plain):self.onEditInProgressCellPaste(pasted_html,range)}))}}else!0===assisted_paste?PasteHelper.start(this.onCellPasteAssisted):PasteHelper.start(this.onCellPaste)},TableView.prototype.isSelectionRectangular=function(){var bounds=this.getSelectionBounds();if(!bounds)return!1;for(var r=bounds.top;r<=bounds.bottom;++r)for(var c=bounds.left;c<=bounds.right;++c)if(!this.model.getCell(r,c).view.is_selected)return!1;return!0},TableView.prototype.mergeSelectedCells=function(){if(this.isSelectionRectangular()){var s=this.getSelectionBounds();this.clearSelection(),this.model.mergeCells(s.top,s.left,s.bottom,s.right),this.selectCell(this.model.getCell(s.top,s.left),s.top,s.left)}},TableView.prototype.splitSelectedCell=function(){if(this.isSelectionRectangular()){var s=this.getSelectionBounds(),cell=this.model.getCell(s.top,s.left),rowspan=cell.rowspan(),colspan=cell.colspan();this.model.splitCell(s.top,s.left),this.selectCells(s.top,s.left,s.top+rowspan-1,s.left+colspan-1),this.dom.parents("table").focus()}},TableView.prototype.forEachCellInColumn=function(index,fn){this.model.forEachCellInColumn(index,(function(cell){fn(cell.view)}))},TableView.prototype.forEachCellInRow=function(index,fn){this.model.forEachCellInRow(index,(function(cell,index){fn(cell.view,index)}))},TableView.prototype.forEachCellInRange=function(start_row,start_col,end_row,end_col,fn){this.model.forEachCellInRange(start_row,start_col,end_row,end_col,(function(cell,row,col){fn(cell.view,row,col)}))},TableView.prototype.forEachCell=function(fn){for(var row_i=0;row_i<this.model.row_count;++row_i)this.model.forEachCellInRow(row_i,(function(cell,col_i){fn(cell.view,row_i,col_i)}))},TableView.prototype.enableBorderEdit=function(enabled){if(enabled){this.dom.css("border-collapse","separate"),this.dom.css("border-spacing",3),this.dom.addClass("border-edit");var opt=this.cell_border_events_options;this.forEachCellView((function(cv){cv.dom.borderEvents(opt)}))}else this.dom.css("border-collapse","collapse"),this.dom.removeClass("border-edit");this.cell_border_events_options.deactivated=!enabled},TableView.prototype.isBorderEditEnabled=function(){return!this.cell_border_events_options.deactivated},TableView.prototype.forEachSelectedCellView=function(fn,selection,include_hidden){this.disableStateChangeNotifications(),this.forEachSelectedCell((function(cell){fn(cell.view)}),include_hidden),this.enableStateChangeNotifications(),this.notifyAboutStateChange()},TableView.prototype.forEachCellViewInRange=function(fn,top,left,bottom,right,include_hidden){include_hidden=include_hidden||!1;for(var visited=[],end_col=Math.min(right+1,this.model.col_count),end_row=Math.min(bottom+1,this.model.row_count),r=top;r<end_row;++r)for(var c=left;c<end_col;++c){var cell=this.model.getCell(r,c,!0),delta_r=0,delta_c=0;0==cell.isVisible()&&0==include_hidden&&(delta_c=Math.min(cell.colspan(),0),delta_r=Math.min(cell.rowspan(),0));var cell_view=this.getCellView(r+delta_r,c+delta_c,include_hidden);-1==visited.indexOf(cell_view)&&(fn(cell_view,r,c),visited.push(cell_view))}},TableView.prototype.forEachCellView=function(fn,include_hidden){this.forEachCellViewInRange(fn,0,0,this.model.row_count-1,this.model.col_count-1,include_hidden)},TableView.prototype.forEachCellViewInColumn=function(fn,col_index,include_hidden){var end_row=this.model.row_count;this.forEachCellViewInRange(fn,0,col_index,end_row,col_index,include_hidden)},TableView.prototype.getSelectedCellsAsString=function(){var rows=[],prev_row=-1,current_row=[];this.forEachSelectedCell((function(cell,row,col){prev_row!=row&&-1!=prev_row&&(rows.push(current_row),current_row=[]),prev_row=row,current_row.push(cell.value())})),rows.push(current_row);for(var rows_str=[],r=0;r<rows.length;++r)rows_str.push(rows[r].join("\t"));return rows_str.join("\n")},TableView.prototype.getSelectedCellsAsHTML=function(){var rows=[],prev_row=-1,current_row=[];this.forEachSelectedCell((function(cell,row,col){prev_row!=row&&-1!=prev_row&&(rows.push(current_row),current_row=[]),prev_row=row,current_row.push(cell.view.getInnerHTML())})),rows.push(current_row);for(var rows_str=[],r=0;r<rows.length;++r)rows_str.push(`<tr>${rows[r].join("")}</tr>`);return`<table>${rows_str.join("")}</table>`},TableView.prototype.clearSelectedCellsContents=function(){this.forEachSelectedCell((function(cell){cell.value("")})),this.trigger("state_change")},TableView.prototype.reset=function(row_count=1,col_count=1){this.disableStateChangeNotifications(),Markup.clear();const table_el=this.dom.get(0);table_el.style.display="none",this.clearSelection(),this.enableFixedLayout(!1),row_count>0&&col_count>0&&this.model.resize(row_count,col_count),this.model.reset(),this.model.forEachCellInRange(0,0,this.model.row_count-1,this.model.col_count-1,(function(c){c.view.style.reset()})),this.selectCells(0,0,0,0),table_el.style.display="",this.options={},this.setTheme(null),this.enableStateChangeNotifications(),this.notifyAboutStateChange(),this.trigger("onload")},TableView.prototype.removeEmptyRows=function(){this.model.removeEmptyRows()},TableView.prototype.clearFormatting=function(){null!==this.getSelectionBounds()&&!this.isSingleCellSelected()?this.forEachSelectedCellView((cell_view=>{cell_view.clearFormatting()})):(this.options={},this.setTheme(null),this.enableFixedLayout(!1),this.model.forEachCellInRange(0,0,this.model.row_count-1,this.model.col_count-1,(c=>{c.view.clearFormatting()})),Markup.clear(),this.trigger("onload"))},TableView.prototype.setStyleClass=function(css_class){null!=this.style_class&&this.dom.removeClass(this.style_class),this.style_class=css_class,css_class&&this.dom.addClass(css_class)},TableView.prototype.setTheme=function(theme){this.theme=theme,theme&&this.isFormattingOptionEnabled("theme")?this.setStyleClass(TableThemes.createTheme(theme)):this.setStyleClass(null),this.trigger("theme_set",theme)},TableView.prototype.removeSelectedColumns=function(){var indices=[];this.forEachSelectedCell((function(cell,row,col){-1==indices.indexOf(col)&&indices.push(col)})),indices.sort((function(a,b){return a-b}));for(var i=indices.length-1;i>=0;--i)this.model.removeColumn(indices[i])},TableView.prototype.removeSelectedRows=function(){var indices=[];this.forEachSelectedCell((function(cell,row,col){-1==indices.indexOf(row)&&indices.push(row)})),indices.sort((function(a,b){return a-b}));for(var i=indices.length-1;i>=0;--i)this.model.removeRow(indices[i])},TableView.prototype.toggleCellFontStyle=function(cell_view,style_property,style_value,style_default){cell_font_style_toggle_handler?cell_font_style_toggle_handler(cell_view,style_property,style_value,style_default):cell_view.toggleFontStyle(style_property,style_value,style_default)},TableView.prototype.get_option=function(key,default_value){return this.options.hasOwnProperty(key)?this.options[key]:default_value},TableView.prototype.set_option=function(key,value){this.options[key]=value,this.trigger("state_change")},TableView.prototype.get_or_set_option=function(key,default_value){return this.options.hasOwnProperty(key)||(this.options[key]=default_value,this.trigger("state_change")),this.options[key]},TableView.prototype.dump=function(){for(var row_count=this.model.row_count,col_count=this.model.col_count,rows_dump=[],r=0;r<row_count;++r){for(var row_dump=[],c=0;c<col_count;++c){var cell_view=this.model.getCell(r,c,!0).view;cell_view&&row_dump.push(cell_view.dump())}rows_dump.push(row_dump)}var used_markup_ids={};this.model.forEachCell((function(cell){for(var ids=cell.per_char_markup_ids_,i=ids.length-1;i>=0;--i)used_markup_ids[ids[i]]=!0})),Markup.clearUnused(used_markup_ids);var res={rows_views:rows_dump,model:this.model.dump(),theme:this.theme,fixed_layout:this.hasFixedLayout(),markup:Markup.dump(),options:this.options};return this.hasFixedLayout()&&(res.col_widths=this.getColumnWidths()),res},TableView.prototype.dumpTransposed=function(){for(var row_count=this.model.row_count,col_count=this.model.col_count,rows_transposed=[],c=0;c<col_count;++c){for(var row_dump=[],r=0;r<row_count;++r){var cell_view=this.model.getCell(r,c,!0).view;cell_view&&row_dump.push(cell_view.dump())}rows_transposed.push(row_dump)}return{rows_views:rows_transposed,model:this.model.dumpTransposed(),theme:this.theme,fixed_layout:this.hasFixedLayout(),markup:Markup.dump(),options:this.options}},TableView.prototype.getFormattingOptions=function(){return this.hasOwnProperty("formatting_options")||(this.formatting_options={bg_color:!0,border_color:!0,borders:!0,colspan:!0,fixed_layout:!0,font_style:!0,rowspan:!0,text_color:!0,theme:!0,vertical_alignment:!0}),this.formatting_options},TableView.prototype.isFormattingOptionEnabled=function(option_name){const options=this.getFormattingOptions();return options.hasOwnProperty(option_name)||console.error(`There is no formatting option named [${option_name}]`),!0===options[option_name]},TableView.prototype.isFormattingOptionDisabled=function(option_name){return!1===this.isFormattingOptionEnabled(option_name)},TableView.prototype.setEnabledFormattingOptions=function(options_list){let supported_options=this.getFormattingOptions();for(let[key,_]of Object.entries(supported_options))supported_options[key]=options_list.includes(key)},TableView.prototype.load=function(data){const formatting=this.getFormattingOptions(),ignore_spanned={colspan:this.isFormattingOptionDisabled("colspan"),rowspan:this.isFormattingOptionDisabled("rowspan")};if(data&&data.model&&data.rows_views){this.disableStateChangeNotifications(),data.markup&&Markup.load(data.markup);var bounds=this.getSelectionBounds();this.model.load(data.model,ignore_spanned);for(var row_count=this.model.row_count,col_count=this.model.col_count,r=0;r<row_count;++r)for(var cells_dump=data.rows_views[r],c=0;c<col_count;++c)this.getCellView(r,c,!0).load(cells_dump[c],formatting);if(data.theme&&this.setTheme(data.theme),1==data.fixed_layout&&$.isArray(data.col_widths)&&this.isFormattingOptionEnabled("fixed_layout")){this.enableFixedLayout(!0);for(var n=Math.min(data.col_widths.length,this.model.col_count),sum=0,i=0;i<n;++i)sum+=data.col_widths[i];sum+=this.dom.find("col:first").width(),this.dom.css({"table-layout":"fixed",width:sum});for(i=0;i<n;++i)this.setColumnWidth(i,data.col_widths[i])}bounds&&bounds.right<this.model.col_count&&bounds.bottom<this.model.row_count?this.selectCells(bounds.top,bounds.left,bounds.bottom,bounds.right):this.selectCells(0,0,0,0),"object"==typeof data.options?this.options=data.options||{}:this.options={},this.enableStateChangeNotifications(),this.notifyAboutStateChange(),this.trigger("onload")}},TableView.prototype.transpose=function(){var transposed_data=this.dumpTransposed();this.load(transposed_data)},TableView.prototype.setReadOnly=function(value){CellView.read_only=value},TableView.enableMarkupInCells=function(enabled){allow_markup_in_cells=enabled},TableView.setMarkupProcessingPlugin=function(plugin){cell_markup_processing_plugin=plugin},TableView.setCellFontStyleToggleHandler=function(fn){cell_font_style_toggle_handler=fn},TableView}();var TTable=function(){"use strict";return function(parent_container){var table=new TableModel;table.insertRow(["Pet","Name"]),table.insertColumn(["Age"]),table.insertRow(["Snake","Jimmy",2]),table.insertRow(["Cow","Molly",11],1);var tv=new TableView(table,parent_container);table.insertRow(["Cat","Jinks",7],2),table.rows[1][1].value="Jolly",table.insertColumn(["Sex","F","M","M"]),table.mergeCells(1,0,1,1),table.splitCell(1,0),table.mergeCells(1,0,2,1),table.mergeCells(0,0,3,1),table.splitCell(0,0),table.mergeCells(0,0,table.row_count-1,table.col_count-1),table.splitCell(0,0),table.insertColumn(["x","x","x","x"]),$('<button class="btn">Add Column</button>').appendTo($(parent_container)).click((function(){table.insertEmptyColumn()})),$('<button class="btn">Add Row</button>').appendTo($(parent_container)).click((function(){table.insertEmptyRow()})),$("<br/>").appendTo($(parent_container)),$("<button>Remove Row</button>").appendTo($(parent_container)).click((function(){var s=tv.selection;s&&s.top==s.bottom&&table.removeRow(s.top)})),$("<button>Remove Column</button>").appendTo($(parent_container)).click((function(){var s=tv.selection;s&&s.left==s.right&&table.removeColumn(s.left)})),$("<button>Merge</button>").appendTo($(parent_container)).click(tv.mergeSelectedCells.bind(tv)),$("<button>Split</button>").appendTo($(parent_container)).click(tv.splitSelectedCell.bind(tv))}}(),TableThemes=function(){"use strict";var BaseTheme={" ":{_active:!0,"border-collapse":"collapse","border-spacing":0},td:{"font-family":"Arial, sans-serif","font-size":"14px",padding:"10px 5px","border-style":"solid","border-width":"0px",overflow:"hidden","word-break":"normal"},th:{"font-family":"Arial, sans-serif","font-size":"14px","font-weight":"normal",padding:"10px 5px","border-style":"solid","border-width":"0px",overflow:"hidden","word-break":"normal"},_row_odd_td:{_active:!1},"_tr:nth-child(odd) td":{_active:!1},"_tr:nth-child(2) td":{_active:!0},_col_even_td:{_active:!1},"_td:nth-child(odd)":{_active:!1},"_tr:hover td":{_active:!1}},BorderThemes={"No borders":{" ":{border:"none"}},"All borders":{td:{"border-width":"1px","border-color":"black"},th:{"border-width":"1px","border-color":"black"}},Horizontal:{td:{"border-top-width":"1px","border-bottom-width":"1px","border-color":"black"},th:{"border-top-width":"1px","border-bottom-width":"1px","border-color":"black"}},Outer:{" ":{"border-width":"1px","border-style":"solid","border-color":"black"}}},AlternateRowsColumns={"No alternate":{},"Alternate rows":{"_tr:nth-child(odd) td":{_active:!0},"_tr:nth-child(2) td":{_active:!0},_row_odd_td:{_active:!0}},"Alternate columns":{_col_even_td:{_active:!0},"_td:nth-child(odd)":{_active:!0},"_tr:nth-child(2) td":{_active:!0}}},ColorThemeTemplate={" ":{"border-color":"$border_color"},td:{"border-color":"$border_color",color:"$td_text_color","background-color":"$td_bg_color"},th:{"border-color":"$border_color",color:"$th_text_color","background-color":"$th_bg_color"},"_tr:nth-child(2) td":{color:"$th_text_color","background-color":"$th_bg_color"},_row_odd_td:{"background-color":"$td_alt_bg_color"},_col_even_td:{"background-color":"$td_alt_bg_color"},"_td:nth-child(odd)":{"background-color":"$td_alt_bg_color"},"_tr:nth-child(odd) td":{"background-color":"$td_alt_bg_color"},"_tr:hover td":{"background-color":"$td_hover_bg_color",color:"$td_hover_text_color"}};function compileColorTheme(desc,template){for(var key in template=template||$.extend(!0,{},ColorThemeTemplate))if(template.hasOwnProperty(key)){var val=template[key];"object"==typeof val?template[key]=compileColorTheme(desc,val):"string"==typeof val&&"$"==val.substr(0,1)&&desc.hasOwnProperty(val.substr(1))&&(template[key]=desc[val.substr(1)])}return template}var ColorThemes={Default:{},Light:compileColorTheme({border_color:"#ccc",td_text_color:"#333",td_bg_color:"#fff",th_text_color:"#333",th_bg_color:"#f0f0f0",td_alt_bg_color:"#f9f9f9",td_hover_bg_color:"#f0f0f0",td_hover_text_color:"#222"}),Orange:compileColorTheme({border_color:"#aaa",td_text_color:"#333",td_bg_color:"#fff",th_text_color:"#fff",th_bg_color:"#f38630",td_alt_bg_color:"#FCFBE3",td_hover_bg_color:"#FFC950",td_hover_text_color:"#222"}),Blue:compileColorTheme({border_color:"#9ABAD9",td_text_color:"#444",td_bg_color:"#EBF5FF",th_text_color:"#fff",th_bg_color:"#409cff",td_alt_bg_color:"#D2E4FC",td_hover_bg_color:"#FFCC00",td_hover_text_color:"#333"}),Violet:compileColorTheme({border_color:"#aabcfe",td_text_color:"#669",td_bg_color:"#e8edff",th_text_color:"#039",th_bg_color:"#b9c9fe",td_alt_bg_color:"#D2E4FC",td_hover_bg_color:"#d0dafd",td_hover_text_color:"#339"}),Green:compileColorTheme({border_color:"#bbb",td_text_color:"#594F4F",td_bg_color:"#E0FFEB",th_text_color:"#493F3F",th_bg_color:"#9DE0AD",td_alt_bg_color:"#C2FFD6",td_hover_bg_color:"#E5FCC2",td_hover_text_color:"#333"}),Solarized:compileColorTheme({border_color:"#93a1a1",td_text_color:"#002b36",td_bg_color:"#fdf6e3",th_text_color:"#fdf6e3",th_bg_color:"#657b83",td_alt_bg_color:"#eee8d5",td_hover_bg_color:"#cb4b16",td_hover_text_color:"fdf6e3"}),Vibrant:compileColorTheme({border_color:"#C44D58",td_text_color:"#002b36",td_bg_color:"#F9CDAD",th_text_color:"#fdf6e3",th_bg_color:"#FE4365",td_alt_bg_color:"#FFA4A0",td_hover_bg_color:"#cb4b16",td_hover_text_color:"fdf6e3"})},HoverThemes={None:{},Highlight:{_hover_theme:{_active:!0}}};function combineThemes(themes_list){for(var res={},i=0;i<themes_list.length;++i)$.extend(!0,res,themes_list[i]);return res}function themeToStr(theme,prefix,ret_array,include_special){(prefix=prefix||"").length>0&&(prefix+=" ");let lines=[];return Object.keys(theme).sort().forEach((key=>{if("_"!=key[0]||theme[key]._active&&include_special){const val=theme[key];if("object"==typeof val){"_"==key[0]&&(key=key.substr(1));const res=themeToStr(val,null,!0),glued=Utils.join_strings(res,"",{lines_separator:"\n  ",max_line_length:120,prefix:`${prefix}${key}{`,suffix:"}"});lines.push(glued)}else"_"!=key[0]&&lines.push(key+":"+val+";")}})),ret_array?lines:lines.join("\n")}var compiled_themes={};return{ColorThemes,BorderThemes,HoverThemes,"Alternate Rows/Columns Themes":AlternateRowsColumns,combineThemes,createTheme:function(selected_themes){var rule,div,theme_id="theme"+Math.abs(function(str){var hash=0;if(0==str.length)return hash;for(var i=0,l=str.length;i<l;i++)hash=(hash<<5)-hash+str.charCodeAt(i),hash|=0;return hash}(JSON.stringify(selected_themes)));if(!compiled_themes.hasOwnProperty(theme_id)){var theme=function(selected_themes){var themes=[BaseTheme];return selected_themes.BorderTheme&&themes.push(BorderThemes[selected_themes.BorderTheme]),selected_themes["Alternate Rows/Columns Theme"]&&themes.push(AlternateRowsColumns[selected_themes["Alternate Rows/Columns Theme"]]),selected_themes.ColorTheme&&themes.push(ColorThemes[selected_themes.ColorTheme]),selected_themes.HoverTheme&&themes.push(HoverThemes[selected_themes.HoverTheme]),combineThemes(themes)}(selected_themes);compiled_themes[theme_id]=theme,rule=themeToStr(theme,"."+theme_id,!1,!0),div=document.createElement("div"),rule=rule.replace(/padding: 10px/,"padding: 0px"),div.innerHTML='&shy;<style type="text/css" media="screen">'+rule+"</style>",document.body.appendChild(div.childNodes[1])}return theme_id},getThemeById:function(id){return compiled_themes[id]},themeToStr}}();!function($,window,document,undefined){function SizeChooser(el,options){this.el=el,this.$el=$(el),this.max_rows=options.max_rows,this.max_cols=options.max_cols,this.max_visible_rows=options.max_visible_rows||15,this.max_visible_cols=options.max_visible_cols||15,this.$table=null,this.hover_range={row:-1,col:-1},this.size={rows:options.rows,cols:options.cols},this.select_size_callback=options.onSetSize,this.$el.data("SizeChooser",this),this.init()}SizeChooser.prototype.init=function(){var $container=$("<div/>",{class:"SizeChooser"}),$table=$("<table/>").appendTo($container),self=this,dropdownParent=self.$el.parents(".dropdown-menu");function disableDropdownHide(){dropdownParent.addClass("display-block")}function enableDropdownHide(){dropdownParent.removeClass("display-block")}function set_size_on_enter(event){13==event.which&&(self.setSize(get_rows_from_input(),get_cols_from_input()),enableDropdownHide())}for(var r=0;r<this.max_visible_rows;++r){for(var tr=$("<tr/>"),c=0;c<this.max_visible_cols;++c){var td=$("<td> </td>");tr.append(td),td.mousemove((function(event){self.onCellMousemove(event)}))}$table.append(tr)}this.$table=$table,this.$el.append($container),this.$size_form=$("<form/>").appendTo($container),this.rows_input=$("<input>").val(this.size.rows).keydown(set_size_on_enter).on("focus",disableDropdownHide).on("blur",enableDropdownHide).appendTo(this.$size_form);var get_rows_from_input=function(){return parseInt(self.rows_input.val())},get_cols_from_input=function(){return parseInt(self.cols_input.val())};this.$size_form.append($("<span> x </span>")),this.cols_input=$("<input>").val(this.size.cols).keydown(set_size_on_enter).on("focus",disableDropdownHide).on("blur",enableDropdownHide).appendTo(this.$size_form),this.setSize(this.size.rows,this.size.cols,!0),$table.mousedown((function(event){self.onMousedown(event)})),$table.mouseleave((function(){self.setSize(self.size.rows,self.size.cols,!0),self.setHoverRange(self.size.rows-1,self.size.cols-1)})),this.rows_cache=null},SizeChooser.prototype.forEachCell=function(fn){if(null==this.rows_cache){var rows_cache=[];this.$table.find("tr").each((function(row_i,row){var row_cache=[];$(row).find("td").each((function(col_i,cell){row_cache.push(cell)})),rows_cache.push(row_cache)})),this.rows_cache=rows_cache}for(var i=0;i<this.rows_cache.length;++i)for(var row=this.rows_cache[i],j=0;j<row.length;++j)fn(row[j],i,j)},SizeChooser.prototype.onCellMousemove=function(event){var pos=function(td){for(td=$(td);"td"!=td.get(0).nodeName.toLowerCase();)td=td.parent();return{col:td.index(),row:$(td.parent()).index()}}(event.target);this.setHoverRange(pos.row,pos.col)},SizeChooser.prototype.onMousedown=function(event){this.hover_range.col>=0&&this.hover_range.row>=0&&this.setSize(this.hover_range.row+1,this.hover_range.col+1)},SizeChooser.prototype.setHoverRange=function(row,col){this.hover_range.row==row&&this.hover_range.col==col||(this.forEachCell((function(cell,row_i,col_i){row_i<=row&&col_i<=col?$(cell).addClass("SizeChooser-hover"):$(cell).removeClass("SizeChooser-hover")})),this.hover_range.row=row,this.hover_range.col=col,this.rows_input.val(row+1),this.cols_input.val(col+1))},SizeChooser.prototype.setSize=function(rows,cols,ignore_callback){rows=rows||this.size.rows,cols=cols||this.size.cols,rows=Math.max(1,Math.min(this.max_rows,rows)),cols=Math.max(1,Math.min(this.max_cols,cols)),this.forEachCell((function(cell,row_i,col_i){row_i<rows&&col_i<cols?$(cell).addClass("SizeChooser-selected"):$(cell).removeClass("SizeChooser-selected")})),this.size.rows=rows,this.size.cols=cols,this.rows_input.val(rows),this.cols_input.val(cols),!ignore_callback&&this.select_size_callback&&this.select_size_callback(rows,cols)},$.fn.SizeChooser=function(options){return this.each((function(){$.data(this,"SizeChooser")||$.data(this,"SizeChooser",new SizeChooser(this,options))}))}}(jQuery,window,document),function($){function CellSpacingPanel(el,options){this.el=$(el),this.onChange=options.onChange,this.init()}CellSpacingPanel.prototype={init:function(){var self=this,container=self.el,dropdownParent=self.el.parents(".dropdown-menu");self.el.on("mouseenter",(function(){dropdownParent.addClass("display-block")})).on("mouseleave",(function(){dropdownParent.removeClass("display-block")})),$("<label>").text("Horizontal spacing").appendTo(container);var input1=$("<input/>",{type:"text","data-slider-min":"0","data-slider-max":"20","data-slider-step":"1","data-slider-value":10}),input2=$("<input/>",{type:"text","data-slider-min":"0","data-slider-max":"20","data-slider-step":"1","data-slider-value":10}),prev_slider1_value=null,prev_slider2_value=null,notify=function(){var slider1_value=input1.slider("getValue"),slider2_value=input2.slider("getValue");slider1_value==prev_slider1_value&&slider2_value==prev_slider2_value||self.onChange(slider1_value,slider2_value),prev_slider1_value=slider1_value,prev_slider2_value=slider2_value};input1.appendTo(container).slider().on("slide",notify),$("<label>").text("Vertical spacing").appendTo(container),input2.appendTo(container).slider().on("slide",notify),self.input1=input1,self.input2=input2},setHorizontalSpacing:function(val){this.input1.slider("setValue",val)},setVerticalSpacing:function(val){this.input2.slider("setValue",val)}},$.fn.CellSpacingPanel=function(options){return this.each((function(){$.data(this,"CellSpacingPanel")||$.data(this,"CellSpacingPanel",new CellSpacingPanel(this,options))}))}}(jQuery);var Main=function(){var rvalidtokens=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;return{init_table_from_json:function(table_view,json_str){var data,requireNonComma,depth,str,table_data=null;try{table_data=jQuery.parseJSON(json_str)}catch(e){try{table_data=jQuery.parseJSON(Utils.normalize_json_string(json_str))}catch(e){try{data=json_str,depth=null,table_data=(str=jQuery.trim(data+""))&&!jQuery.trim(str.replace(rvalidtokens,(function(token,comma,open,close){return requireNonComma&&comma&&(depth=0),0===depth?token:(requireNonComma=open||comma,depth+=!close-!open,"")})))?Function("return "+str)():jQuery.error("Invalid JSON: "+data)}catch(x){}}}if(table_data)if(table_data.rows&&table_data.rows.length>0){table_view.reset();var model=table_view.model,rows=table_data.rows;model.setRows(rows)}else table_data.model&&table_view.load(table_data)}}}();const queryClipboardPermissionAndPaste=async function(callback){if(!navigator||!navigator.permissions)return void console.log("Permissions API not supported");if("denied"!==(await navigator.permissions.query({name:"clipboard-read",allowWithoutGesture:!1})).state)try{const clipboardContents=await navigator.clipboard.read();for(const item of clipboardContents){let as_text=null,as_html=null;if(item.types.includes("text/html")){const blob=await item.getType("text/html");as_html=await blob.text()}if(item.types.includes("text/plain")){const blob=await item.getType("text/plain");as_text=await blob.text()}if(as_text||as_html)return callback(as_text,as_html)}}catch(error){console.error(error.message)}else console.error("Access to the clipboard has been denied")},MainUI=function($,document){"use strict";function MainUI(table_view,options){this.table_view=table_view,this.table=table_view.model,this.options=options||{},this.persistence=new PersistenceHelper(table_view),this.editor_name="",this.observable={},$.observable(this.observable),this.init()}MainUI.prototype.init=function(){this.initFileMenu(),this.initTableMenu(),this.initColumnMenu(),this.initRowMenu(),this.initCellMenu(),this.initToolbar(),this.initResultControlPanel(),this.initUndoRedo(),this.initTableSave(),this.initTableShare(),this.initTableAutosave(),this.initTableCellContextMenu(),this.initColumnWidthDialog(),$(".tableview").focus(),this.persistence.run(),$("pre:first").dblclick((function(){Utils.select_text("result-code")})),this.init_table_context_menus(),$("[rel=tooltip]").attr("data-container","body").tooltip({placement:"top"}),this.initEditorExpander(),this.initTableImport(),this.initCSVImport(),this.initTGNImport()},MainUI.prototype.initTableImport=function(){let paste_target=$("#table_import_paste_target"),paste_dialog=$("#import_pasted_dialog"),style_checkbox=$("#import_pasted_with_style"),is_parsed=!1,parsed_table=null,table_element=null,self=this;paste_dialog.on("hide",(function(){is_parsed=!1,table_element=null,paste_target.html(""),document.getElementById("import_pasted").value="",style_checkbox.parent().hide()}));const apply_computed_style=function(elem){if(!elem.dataset||!elem.dataset.computedStyle)return;const saved_style=JSON.parse(elem.dataset.computedStyle);let style=elem.style;for(const prop in saved_style)style[prop]=saved_style[prop];for(let child of elem.childNodes)1===child.nodeType&&apply_computed_style(child)},revert_computed_style=function(elem){if(!elem.dataset||!elem.dataset.computedStyle)return;const saved_style=JSON.parse(elem.dataset.computedStyle);let style=elem.style;for(const prop in saved_style)style[prop]="unset";for(let child of elem.childNodes)1===child.nodeType&&revert_computed_style(child)};style_checkbox.change((function(){this.checked?apply_computed_style(table_element):revert_computed_style(table_element)}));const processPasted=function(pasted_html,pasted_text){const result=TableImport.extractTableFromTableElement(pasted_html,pasted_text,!0);if(is_parsed=null!=result,is_parsed)parsed_table=result[0],table_element=result[1],revert_computed_style(table_element),paste_target[0].appendChild(table_element),style_checkbox.prop("checked",!1).parent().show();else{let src=paste_target[0];src.innerHTML=pasted_html||pasted_text,document.getElementById("import_pasted").value=src.innerText||src.textContent,parsed_table=null,table_element=null,style_checkbox.parent().hide()}};document.getElementById("import_pasted_form").addEventListener("submit",(function(e){if(is_parsed){e.stopPropagation(),e.preventDefault(),paste_dialog.modal("hide"),style_checkbox.parent().hide();let tv=self.table_view;const import_style=style_checkbox.is(":checked");tv.reset(1,1),tv.importTable(parsed_table,0,0,!0,import_style),parsed_table=null}})),paste_target.on("paste",(function(event){PasteHelper.handleDirectly(event.originalEvent,processPasted)}))},MainUI.prototype.initCSVImport=function(){const self=this;function load_csv(file){const fileReader=new FileReader;fileReader.onload=function(event){var raw_csv;raw_csv=event.target.result,CSVImport(raw_csv,self.table_view)},fileReader.readAsText(file)}document.getElementById("import_csv_dialog").addEventListener("submit",(function(e){e.stopPropagation(),e.preventDefault();const dlg_close_btn=document.getElementById("import_csv_dialog_close");dlg_close_btn&&dlg_close_btn.click();const file_input=document.getElementById("csv-file-input");file_input&&file_input.files&&load_csv(file_input.files[0])}))},MainUI.prototype.initTGNImport=function(){const self=this;function load_tgn(file){const fileReader=new FileReader;fileReader.onload=function(event){!function(src){try{const json=JSON.parse(src);self.table_view.load(json)}catch(error){console.error("Error parsing JSON:",error),alert("The file cannot be loaded. Please make sure it is a valid TGN file.")}}(event.target.result)},fileReader.readAsText(file)}document.getElementById("load_table_dialog").addEventListener("submit",(function(e){e.stopPropagation(),e.preventDefault();const dlg_close_btn=document.getElementById("load_table_dialog_close");dlg_close_btn&&dlg_close_btn.click();const file_input=document.getElementById("load_table_file_input");file_input&&file_input.files&&load_tgn(file_input.files[0])}))},MainUI.prototype.initEditorExpander=function(align){var expander=$("#table_editor_expander");expander.click((function(){expander.hasClass("expanded")?(expander.removeClass("expanded"),$("#edited_table_container").css("max-height","500px")):(expander.addClass("expanded"),$("#edited_table_container").css("max-height","none"))}));var hide_show,timeout,set_expander_visibility=(hide_show=function(){document.getElementById("edited_table_container").scrollHeight>500?expander.show():expander.hide()},timeout=null,function(){null!=timeout&&(window.clearTimeout(timeout),timeout=null),timeout=window.setTimeout(hide_show,100)});this.table_view.on("state_change",set_expander_visibility),set_expander_visibility()},MainUI.prototype.setSelColumnsHAlign=function(align){var tv=this.table_view,sel=tv.getSelectionBounds();if(sel)for(var end=sel.right,i=sel.left;i<=end;++i)tv.forEachCellInColumn(i,(function(cell){cell.style.setHorizontalAlign(align)}))},MainUI.prototype.initFileMenu=function(){var self=this;function show_message_dialog(msg){$("#message_dialog_body").html(msg),$("#message_dialog").modal("show")}function on_table_id_click(event){for(var target=$(event.target);target&&"LI"!=target.get(0).nodeName;)target=target.parent();var id=target.attr("table-id");id&&function(id){var url="/dropbox_table_load/"+id;$("#dropbox_load_table_dialog").modal("hide"),$.ajax({url,type:"GET",data:{},success:function(data,textStatus,jqXHR){var str,table=data.table;table=table.replace(/\r?\n|\r|\u000d|\u000a|\u2028|\u2029/g,"\\n"),str=table,self.table_view.load(jQuery.parseJSON(str))},error:function(jqXHR,textStatus,errorThrown){show_message_dialog("We are sorry, an unexpected error has occurred while loading the table.")}})}(id)}$("#new_table_rows_input,#new_table_columns_input").keydown((function(event){13==event.which&&event.preventDefault()})),$("#create_new_table_btn").click((function(event){event.preventDefault();var rows_input=$("#new_table_rows_input"),rows_count=rows_input.val(),rows_count_ok=/^[0-9]+$/.test(rows_count)&&parseInt(rows_count)>=1&&parseInt(rows_count)<=1e3;rows_count_ok?rows_input.parents(".control-group").removeClass("error"):rows_input.parents(".control-group").addClass("error");var cols_input=$("#new_table_columns_input"),cols_count=cols_input.val(),cols_count_ok=/^[0-9]+$/.test(cols_count)&&parseInt(cols_count)>=1&&parseInt(cols_count)<=20;cols_count_ok?cols_input.parents(".control-group").removeClass("error"):cols_input.parents(".control-group").addClass("error"),rows_count_ok&&cols_count_ok&&($("#new_table_dialog").modal("hide"),self.createNewTable(rows_count,cols_count))})),$("#dropbox_connect").click((function(){var uri="/dropbox-connect"+window.location.pathname;window.location.replace(uri)})),$("#dropbox_disconnect").click((function(){var uri="/dropbox-disconnect"+window.location.pathname;window.location.replace(uri)})),$("#dropbox_table_save").click((function(event){var table_dumped=self.table_view.dump(),form_data={table_to_save:JSON.stringify(table_dumped),table_name:$("#dropbox_table_name").val()},dlg=$("#dropbox_save_table_dialog"),save_btn=dlg.find("button:last"),spinner=save_btn.find("div");function hide_save_dialog(){spinner.removeClass("loading2"),save_btn.find("span").text("Save"),dlg.modal("hide")}spinner.addClass("loading2"),save_btn.find("span").text("Saving..."),$.ajax({url:"/dropbox-table-save",type:"POST",data:form_data,success:function(data,textStatus,jqXHR){hide_save_dialog(),data.success?show_message_dialog("Your table has been saved."):show_message_dialog(data.error)},error:function(jqXHR,textStatus,errorThrown){hide_save_dialog()}})})),$("#dropbox_table_load").click((function(){var loading_indicator=$("<div>",{class:"loading2"});$("#dropbox_tables_list").append(loading_indicator),$("#dropbox_load_table_dialog").modal("show");$.ajax({url:"/dropbox_tables_list",type:"GET",data:{},success:function(data,textStatus,jqXHR){!function(files_list){var dlg=$("#dropbox_load_table_dialog"),get_table_link=function(el){var path=el.path,date=new Date(el.modified);return'<li table-id="'+encodeURIComponent(path)+'"><span>'+path+"</span><span>"+date.toLocaleString()+"</span></li>"},lines=files_list.map(get_table_link),list=$("<ul>").addClass("dropbox_file_list").html(lines.join("")),container=$("#dropbox_tables_list");container.children().remove(),container.append(list),list.click(on_table_id_click),dlg.modal("show")}(data.files_list)},error:function(jqXHR,textStatus,errorThrown){show_message_dialog("Can not load tables list from Dropbox")}})}));const download_as_csv=document.getElementById("download_as_csv");download_as_csv&&download_as_csv.addEventListener("click",(function(ev){console.log("Download as CSV");!function(csv,link){let csvContent="data:text/csv;charset=utf-8,";csvContent+=csv;const encodedUri=encodeURI(csvContent);link.setAttribute("href",encodedUri),link.setAttribute("download","table.csv")}(function(table){const output=[];for(let r=0,n=table.row_count;r<n;r++){const row=[];table.forEachCellInRow(r,(function(cell){const cell_str=cell.isVisible()?cell.value().toString():"";row.push(cell_str)})),output.push(row)}return function(data){if(!Array.isArray(data)||!data.length)throw new Error("Input should be a non-empty array of arrays");function escapeField(field){return(field.includes('"')||field.includes(",")||field.includes("\n"))&&(field=`"${field=field.replace(/"/g,'""')}"`),field}return data.map((row=>{if(!Array.isArray(row))throw new Error("Each row should be an array");return row.map((field=>escapeField(field))).join(",")})).join("\r\n")}(output)}(self.table_view.model),download_as_csv)}))},MainUI.prototype.createNewTable=function(rows,cols){this.table_view.reset(),this.table.resize(rows,cols),this.unredo.clear()},MainUI.prototype.initTableMenu=function(){var tv=this.table_view,table=this.table;$("#table_reset").click((function(){tv.reset(0,0)})),$("#table_clear_formatting").click((function(){tv.clearFormatting()})),$("#table_transpose").click((function(){tv.transpose()})),$("#table_add_all_borders").click((function(event){var fn=function(cell_view){cell_view.style.setBorders("ltrb")};event.ctrlKey?tv.forEachSelectedCellView(fn,null,!0):tv.forEachCellView(fn,!0)})),$("#table_add_vert_borders").click((function(){tv.forEachCell((function(cell_view){cell_view.style.setBorders("lr")}))})),$("#table_add_horizontal_borders").click((function(){tv.forEachCell((function(cell_view){cell_view.style.setBorders("tb")}))})),$("#table_remove_all_borders").click((function(event){var fn=function(cell_view){cell_view.style.setBorders("")};event.ctrlKey?tv.forEachSelectedCellView(fn,null,!0):tv.forEachCellView(fn,!0)}));var loadingIndicator=null;$(".table_size_chooser").SizeChooser({max_cols:20,max_rows:500,cols:table.col_count,rows:table.row_count,onSetSize:function(rows,cols){var el,offset,prevSize=table.col_count*table.row_count,newSize=rows*cols;Math.max(prevSize,newSize)>400?(el=tv.dom,offset=el.offset(),loadingIndicator||(loadingIndicator=$("<div>").attr({class:"loading-indicator"}).appendTo($("body"))),loadingIndicator.css({left:offset.left+"px",top:offset.top+"px"}).show(),window.setTimeout((function(){table.resize(rows,cols),loadingIndicator&&loadingIndicator.hide()}),100)):table.resize(rows,cols)}}),$("#table_resize").mouseover((function(){$(".table_size_chooser").data("SizeChooser").setSize(table.row_count,table.col_count,!0)})),$("#cell-spacing-panel").CellSpacingPanel({onChange:function(horizontal,vertical){tv.forEachCellView((function(c){c.style.setPadding(vertical,horizontal)}))}}),tv.on("onload",(function(){var padding=tv.getCellView(0,0).style.getPadding(),panel=$("#cell-spacing-panel").data("CellSpacingPanel");padding&&panel&&(null!=padding.left&&panel.setHorizontalSpacing(padding.left),null!=padding.top&&panel.setVerticalSpacing(padding.top))}))},MainUI.prototype.initColumnMenu=function(){var tv=this.table_view,table=this.table;$("#col_insert_left").click((function(){var sel=tv.getSelectionBounds();sel&&table.insertEmptyColumn(sel.left)})),$("#col_insert_right").click((function(){var sel=tv.getSelectionBounds();sel&&table.insertEmptyColumn(sel.right+1)})),$("#col_remove").click((function(){tv.removeSelectedColumns()}));var self=this;$("#col_align_left").click((function(){self.setSelColumnsHAlign("left")})),$("#col_align_center").click((function(){self.setSelColumnsHAlign("center")})),$("#col_align_right").click((function(){self.setSelColumnsHAlign("right")})),$("#col_move_left").click((()=>{tv.moveSelectedColumn(-1)})),$("#col_move_right").click((()=>{tv.moveSelectedColumn(1)}))},MainUI.prototype.initRowMenu=function(){var tv=this.table_view,table=this.table;$("#row_insert_below").click((function(){var sel=tv.getSelectionBounds();sel&&table.insertEmptyRow(sel.bottom+1)})),$("#row_insert_above").click((function(){var sel=tv.getSelectionBounds();sel&&table.insertEmptyRow(sel.top)})),$("#row_remove").click((function(){var sl=tv.getSelectionBounds();if(sl)for(var i=sl.bottom,top=sl.top;i>=top;--i)table.removeRow(i)})),$("#row_move_up").click((()=>{tv.moveSelectedRow(-1)})),$("#row_move_down").click((()=>{tv.moveSelectedRow(1)}))},MainUI.prototype.initCellMenu=function(){var tv=this.table_view;$("#cell_merge").click(tv.mergeSelectedCells.bind(tv)),$("#cell_split").click(tv.splitSelectedCell.bind(tv))},MainUI.prototype.setHorizontalAlignment=function(alignment){var tv=this.table_view;return function(event){1==event.which&&(tv.forEachSelectedCellView((function(cell){cell.style.setHorizontalAlign(alignment)})),event.preventDefault())}},MainUI.prototype.setVerticalAlignment=function(alignment){var tv=this.table_view;return function(event){1==event.which&&(tv.forEachSelectedCellView((function(cell){cell.style.setVerticalAlign(alignment)})),event.preventDefault())}},MainUI.prototype.initToolbar=function(){var tv=this.table_view;this.table;$("#table_add_all_borders_btn").click((function(event){var fn=function(cell_view){cell_view.style.setBorders("ltrb")};event.ctrlKey?tv.forEachCellView(fn,!0):tv.forEachSelectedCellView(fn,null,!0)})),$("#table_remove_all_borders_btn").click((function(event){var fn=function(cell_view){cell_view.style.setBorders("")};event.ctrlKey?tv.forEachCellView(fn,!0):tv.forEachSelectedCellView(fn,null,!0)})),$("#table_merge_cells_btn").click(tv.mergeSelectedCells.bind(tv)),$("#table_split_cells_btn").click(tv.splitSelectedCell.bind(tv)),$("#edit_grid_btn").click((function(){tv.isBorderEditEnabled()?(tv.enableBorderEdit(!1),$(this).removeClass("mode-active")):(tv.enableBorderEdit(!0),$(this).addClass("mode-active"))})),$("#left_align_btn").mousedown(this.setHorizontalAlignment("left")),$("#right_align_btn").mousedown(this.setHorizontalAlignment("right")),$("#center_align_btn").mousedown(this.setHorizontalAlignment("center")),$("#vertical_align_top_btn").click((function(){tv.forEachSelectedCellView((function(c){c.style.setVerticalAlign("top")}))})),$("#vertical_align_middle_btn").click((function(){tv.forEachSelectedCellView((function(c){c.style.setVerticalAlign("middle")}))})),$("#vertical_align_bottom_btn").click((function(){tv.forEachSelectedCellView((function(c){c.style.setVerticalAlign("bottom")}))}));var toggle_font_style=function(style_property,style_value,default_value){return function(event){1==event.which&&(tv.forEachSelectedCellView((function(cell){tv.toggleCellFontStyle(cell,style_property,style_value,default_value)})),event.preventDefault())}};$("#table_bold_font_btn").mousedown(toggle_font_style("fontWeight","bold","normal")),$("#table_italic_font_btn").mousedown(toggle_font_style("fontStyle","italic","normal")),$("#table_underline_btn").mousedown(toggle_font_style("textDecoration","underline","none")),$("#insert-link-button").mousedown((function(event){1==event.which&&(tv.forSingleSelectedCellView((function(cell){cell.insertLink()})),event.preventDefault())})),$("#insert-img-button").mousedown((function(event){1==event.which&&(tv.forSingleSelectedCellView((function(cell){cell.insertImage()})),event.preventDefault())}));var Palette=["#ffffff","#ffccc9","#ffce93","#fffc9e","#ffffc7","#9aff99","#96fffb","#ECF4FF","#cbcefb","#efefef","#fd6864","#fe996b","#fffe65","#fcff2f","#67fd9a","#38fff8","rgb(218, 232, 252)","#9698ed","#c0c0c0","#fe0000","#f8a102","#ffcc67","#f8ff00","#34ff34","#68cbd0","#34cdf9","#6665cd","#9b9b9b","#cb0000","#f56b00","#ffcb2f","#ffc702","#32cb00","#00d2cb","#3166ff","#6434fc","#656565","#9a0000","#ce6301","#cd9934","#999903","#009901","#329a9d","#3531ff","#6200c9","#343434","#680100","#963400","#986536","#646809","#036400","#34696d","#00009b","#303498","#000000","#330001","#643403","#663234","#343300","#013300","#003532","#010066","#340096"],fg_color_picker=$("#fg-color-picker");fg_color_picker.spectrum({color:"#000",showInput:!0,className:"color-picker",showInitial:!0,showPalette:!0,showSelectionPalette:!0,maxPaletteSize:10,preferredFormat:"hex",localStorageKey:"tg.spectrum",change:function(color){var color_hex=color.toHexString();tv.forEachSelectedCellView((function(cell){cell.toggleFontStyle("color",color_hex,"")}))},palette:Palette,extraReplacerAttr:{rel:"tooltip",title:"Set text color of selected cells"}});var fst=fg_color_picker.next().find(".sp-dd");fst.after('<div class="side-icon"><i class="icon-font"></i> </div>'),fst.remove();var bg_color_picker=$("#bg-color-picker");bg_color_picker.spectrum({color:"#FFF",showInput:!0,className:"color-picker",showInitial:!0,showPalette:!0,showSelectionPalette:!0,maxPaletteSize:10,preferredFormat:"hex",localStorageKey:"tg.spectrum",change:function(color){var color_hex=color.toHexString();tv.forEachSelectedCellView((function(cell){cell.toggleFontStyle("backgroundColor",color_hex,"")}))},palette:Palette,extraReplacerAttr:{rel:"tooltip",title:"Set background color of selected cells"}});var sec=bg_color_picker.next().find(".sp-dd");sec.after('<div class="side-icon"><i class="icon-tint"></i> </div>'),sec.remove();var border_color_picker=$("#border-color-picker");if(this.options.show_border_color_picker){border_color_picker.spectrum({color:"transparent",showInput:!0,className:"color-picker",showInitial:!0,showPalette:!0,showSelectionPalette:!0,maxPaletteSize:10,preferredFormat:"hex",localStorageKey:"tg.spectrum",change:function(color){var color_hex=color.toHexString();tv.forEachSelectedCellView((function(c){c.style.setBorderColor(color_hex)}))},palette:Palette,extraReplacerAttr:{rel:"tooltip",title:"Set border color of selected cells"}});var third=border_color_picker.next().find(".sp-dd");third.after('<div class="side-icon"><i class="icon-table"></i> </div>'),third.remove()}else border_color_picker.remove();$("#color-clear").click((function(){tv.forEachSelectedCellView((function(cell){cell.style.clearBgColor(),cell.style.clearTextColor(),cell.style.clearBorderColor()}))}));var ignore_style_change=!1;$("#font-family-select").selectpicker(),$("#font-family-select").change((function(){var name=$(this).val();!ignore_style_change&&name.length>0&&tv.forEachSelectedCellView((function(c){c.style.addFontStyle("font-family",name)}))})),tv.on("single_cell_selected",(function(cell){var style=cell.view.style,family=style.font_style["font-family"]||"ff-serif";ignore_style_change=!0,$("#font-family-select").selectpicker("val",family);var bg_color=style.bg_color;bg_color||(bg_color=cell.view.dom.css("background-color")),bg_color&&bg_color_picker.spectrum("set",bg_color);var text_color=style.text_color;text_color||(text_color=cell.view.dom.css("color")),text_color&&fg_color_picker.spectrum("set",text_color);var border_color=style.border_color;border_color||(border_color=cell.view.dom.css("border-color")),border_color_picker.spectrum("set",border_color),ignore_style_change=!1}));for(var fsizes_named=["xx-small","x-small","small","medium","large","x-large","xx-large"],fsizes=[10,11,12,13,14,15,16,18,20,22,24,26,28,32,36],fsize_select=$("#font-size-select"),i=0;i<fsizes.length;++i)fsize_select.append($("<option/>").attr("value",fsizes[i]+"px").addClass("font-size-"+fsizes[i]).text(fsizes[i]+"px"));fsize_select.append($("<option/>").attr("value","inherit").text("Default font size"));for(i=0;i<fsizes_named.length;++i)fsize_select.append($("<option/>").attr("value",fsizes_named[i]).addClass("font-size-"+fsizes_named[i]).text(fsizes_named[i]));fsize_select.selectpicker(),fsize_select.change((function(){if(!ignore_style_change){var name=$(this).val();tv.forEachSelectedCellView((function(c){c.style.addFontStyle("font-size",name)}))}})),tv.on("single_cell_selected",(function(cell){var fsize=cell.view.style.font_style["font-size"]||"inherit";ignore_style_change=!0,fsize_select.selectpicker("val",fsize),ignore_style_change=!1})),this.initThemeSelection()},MainUI.prototype.initThemeSelection=function(){var self=this;self.theme_selector={themes:{},addTheme:function(theme_category,theme_name){this.themes[theme_category+"Theme"]=theme_name,this.trigger("theme_added",theme_category,theme_name)},setTheme:function(theme_map){this.themes=theme_map,this.trigger("theme_set",theme_map)}},$.observable(self.theme_selector),$("#theme-select").click((function(){self.showThemeChooser()}))};MainUI.prototype.showThemeChooser=function(){var self=this,theme_captions={Default:"Transparent background","No borders":"No borders","All borders":"All borders",Horizontal:"Horizontal borders",Outer:"Border around table","No alternate":"No stripes","Alternate rows":"Horizontal stripes","Alternate columns":"Vertical stripes"};if(!this.theme_chooser){var box=$("#theme_dialog"),panels_wrap=$("#theme_dialog__panels"),tabs=box.find(".tabs li"),panels=[];function onTabClick(clicked_index,clicked_tab){for(var i=0;i<panels.length;++i)i==clicked_index?(panels[i].show(),$(tabs[i]).addClass("is-active")):(panels[i].hide(),$(tabs[i]).removeClass("is-active"))}$("#theme_dialog__close_btn").click((function(){self.table_view.setTheme(self.theme_selector.themes),box.hide()})),tabs.each((function(index,tab){$(tab).click((function(){onTabClick(index)}))}));["Color","Border","Alternate Rows/Columns "].forEach((function(theme_type){var theme_key=theme_type+"Theme",panel=$("<div>").addClass("theme_dialog__panel").appendTo(panels_wrap);0==panels.length&&panel.show(),panels.push(panel);var Themes=TableThemes[theme_type+"Themes"];$.each(Themes,(function(key,_){var which={};which[theme_key]=key;var theme_id=TableThemes.createTheme(which),table_wrap=$("<div>").addClass("example-table").appendTo(panel),table=$("<table>        <tr class='hide'><td></td><td></td><td></td><td></td><td></td></tr>        <tr><th style='display:none'></th><th>Company</th><th>Q1</th><th>Q2</th><th>Q3</th></tr>        <tr><td style='display:none'></td><td>Microsoft</td><td>20.3</td><td>30.5</td><td>23.5</td></tr>        <tr><td style='display:none'></td><td>Google</td><td>50.2</td><td>40.63</td><td>45.23</td></tr>        <tr><td style='display:none'></td><td>Apple</td><td>25.4</td><td>30.2</td><td>33.3</td></tr>        </table>").addClass(theme_id).appendTo(table_wrap).click((function(){self.theme_selector.addTheme(theme_type,key)}));self.theme_selector.on("theme_added",(function(th_type,th_name){if(theme_type==th_type)key==th_name?table.addClass("selected"):table.removeClass("selected");else{which[th_type+"Theme"]=th_name;var new_theme_id=TableThemes.createTheme(which);table.removeClass(theme_id).addClass(new_theme_id),theme_id=new_theme_id}})),self.theme_selector.on("theme_set",(function(theme_map){theme_map[theme_key]==key?table.addClass("selected"):table.removeClass("selected"),(which=$.extend({},theme_map))[theme_key]=key;var new_theme_id=TableThemes.createTheme(which);table.removeClass(theme_id).addClass(new_theme_id),theme_id=new_theme_id}));var theme_caption=theme_captions[key]||"&nbsp;";theme_caption&&table_wrap.append($("<p>").html(theme_caption))}))})),this.theme_chooser=box,self.theme_selector.setTheme(self.theme_selector.themes)}var pos=$("#theme-select").offset();this.theme_chooser.css({left:$(".tableview").first().offset().left,top:pos.top+30}).fadeIn()};var api,zero_clipboard_clients,on_copy_callback,workaround_exists,MyClipboard=(zero_clipboard_clients=null,on_copy_callback=null,workaround_exists=!1,(api={}).setOnCopyCallback=function(fn){on_copy_callback=fn},api.init=function(){ZeroClipboard.config({swfPath:"/static/ZeroClipboard.swf"}),(zero_clipboard_clients=new ZeroClipboard($(".with-zero-clipboard")))?zero_clipboard_clients.on("copy",(function(event){null!=on_copy_callback&&on_copy_callback(event)})):zero_clipboard_clients=null,ZeroClipboard.on("error",(function(e){ZeroClipboard.destroy(),$("#copy-to-clipboard").hide(),zero_clipboard_clients=null,function(){if(1==document.queryCommandSupported("copy")){var run_callback=function(event){null!=on_copy_callback&&on_copy_callback(event)};$(".copy-to-clipboard-workaround").on("click",run_callback).css("display","block"),$(".with-zero-clipboard").on("click",run_callback),workaround_exists=!0}}()}))},api.setText=function(text,mime){null!=zero_clipboard_clients?ZeroClipboard.setData(mime||"text/plain",text):workaround_exists&&function(text){var textArea=document.createElement("textarea");textArea.style.position="fixed",textArea.style.top=0,textArea.style.left=0,textArea.style.width="2em",textArea.style.height="2em",textArea.style.padding=0,textArea.style.border="none",textArea.style.outline="none",textArea.style.boxShadow="none",textArea.style.background="transparent",textArea.value=text,document.body.appendChild(textArea),textArea.select();try{document.execCommand("copy")}catch(err){console.log("Oops, unable to copy")}document.body.removeChild(textArea)}(text)},api);function init_find_replace(table_view){let matching_cell=null;const on_find=function(search_string,use_regex){if(!search_string)return;const regex=use_regex?new RegExp(search_string):null;return matching_cell=table_view.selectFirstMatchingCell((cell=>{return str=cell.value(),use_regex?regex.test(str):-1!==str.indexOf(search_string);var str})),matching_cell},on_replace=function(search_string,replace_string,use_regex){if(!search_string||!matching_cell)return;const cell_text=matching_cell.value();if(use_regex){const result=cell_text.replace(new RegExp(search_string),replace_string);matching_cell.value(result)}else if(-1!=cell_text.indexOf(search_string)){const result=cell_text.split(search_string).join(replace_string);matching_cell.value(result)}return on_find(search_string,use_regex)},on_replace_all=function(search_string,replace_string,use_regex){const first_cell=on_find(search_string,use_regex);let curr_cell=first_cell;do{curr_cell=on_replace(search_string,replace_string,use_regex)}while(curr_cell&&curr_cell!=first_cell)};$("#edit_find_replace").click((function(){SearchReplaceDialog.show({on_find,on_replace,on_replace_all})}))}return MainUI.prototype.initResultControlPanel=function(){var self=this;MyClipboard.init(),MyClipboard.setOnCopyCallback((function(event){var target=$(event.target),el=target.closest("[data-action-id]"),id=$(el).data("action-id");if(id||target.hasClass("copy-to-clipboard-workaround")||target.hasClass("with-zero-clipboard")){var text="";if("cell_contents_cut"==id)text=self.table_view.getSelectedCellsAsHTML(),self.table_view.clearSelectedCellsContents(),MyClipboard.setText(text,"text/html");else if("cell_contents_copy"==id)text=self.table_view.getSelectedCellsAsHTML(),MyClipboard.setText(text,"text/html");else{text=$("#result-code").text(),-1!=navigator.appVersion.indexOf("Win")&&(text=text.replace(/\n/g,"\r\n")),MyClipboard.setText(text)}text&&(self.table_view.ignore_next_copy_event=!0)}}))},MainUI.prototype.initUndoRedo=function(){var tv=this.table_view,unredo=new UnReDo(tv);this.unredo=unredo,unredo.addChange();$(document).keydown((function(e){e.ctrlKey&&90==e.which&&"DIV"!=e.target.nodeName?unredo.undo():e.ctrlKey&&89==e.which&&"DIV"!=e.target.nodeName&&unredo.redo()})),$("#edit_undo").click((function(){unredo.undo()})),$("#edit_redo").click((function(){unredo.redo()}))},MainUI.prototype.initTableSave=function(){var self=this;$("#table-name").keydown((function(event){13==event.which&&event.preventDefault()})),$("#table-save-link").click((function(){var table_data=JSON.stringify(self.table_view.dump());$("#table-save-data").val(table_data);var form_data=$("#table-save-form").serialize();return $.fileDownload("/table-save",{dialogOptions:{modal:!1},httpMethod:"POST",data:form_data,successCallback:function(){$("#save_table_dialog").modal("hide")}}),!1}))},MainUI.prototype.initTableAutosave=function(){function check(){$("#edit_autosave i").removeClass("icon-check-minus").addClass("icon-check")}function uncheck(){$("#edit_autosave i").removeClass("icon-check").addClass("icon-check-minus")}const self=this,val=docCookies.getItem("tg-autosave");let enabled=null===val||"1"===val;if(enabled?check():uncheck(),$("#edit_autosave").click((function(){enabled?(enabled=!1,docCookies.setItem("tg-autosave","0",1/0),DB("tg-table").put(""),self.persistence.disable(),uncheck()):(enabled=!0,docCookies.setItem("tg-autosave","1",1/0),self.persistence.enable(),check())})),init_find_replace(this.table_view),NumberFormatMenu.init((function(formatter){self.table_view.forEachSelectedCell((cell=>{const prev=cell.value(),is_latex="LaTeX"==self.get_editor_name(),space_separator_symbol=is_latex?"\\,":" ",result=(is_latex?prev.replaceAll(/(\d)\\,(\d)/g,"$1$2"):prev).split(/(\s+)/g).map((tok=>tok.match(/\s+/)?tok:formatter(tok,space_separator_symbol))).join("");prev!=result&&cell.value(result)}))})),enabled){var saved=PersistenceHelper.load();null!=saved&&this.table_view.load(saved)}},MainUI.prototype.initTableCellContextMenu=function(){var table=this.table_view.dom;table.get(0).oncontextmenu=function(){return!1},table.contextmenu({target:"#table-cell-menu"})},MainUI.prototype.init_table_context_menus=function(){var self=this,tv=self.table_view,table=self.table_view.model;function bind_col_menu(){$.each($(".aux-cell-column"),(function(idx,el){$(el).contextmenu({target:"#table-aux-col-menu"})}))}const bind_row_menu=function(){let pending_timeout_id=0;function _bind_menu(){$.each($(".aux-cell-row"),(function(idx,el){$(el).contextmenu({target:"#table-aux-row-menu"})}))}return function(){pending_timeout_id&&window.clearTimeout(pending_timeout_id),pending_timeout_id=window.setTimeout(_bind_menu,30)}}();$("#table-aux-col-menu").present("SimpleMenu",{menu_item_id_attr:"data-menu-item-id"});var menu=$("#table-aux-col-menu").data("SimpleMenu");menu&&($('*[data-menu-item-id="add_to_the_left"]').click((function(){var sel=tv.getSelectionBounds();sel&&table.insertEmptyColumn(sel.left)})),$('*[data-menu-item-id="add_to_the_right"]').click((function(){var sel=tv.getSelectionBounds();sel&&table.insertEmptyColumn(sel.right+1)})),$('*[data-menu-item-id="remove_column"]').click((function(){tv.removeSelectedColumns()})),$('*[data-menu-item-id="set_column_width"]').click((function(){self.show_column_width_dialog()})),bind_col_menu()),$("#table-aux-row-menu").present("SimpleMenu",{menu_item_id_attr:"data-menu-item-id"}),(menu=$("#table-aux-row-menu").data("SimpleMenu"))&&($('*[data-menu-item-id="add_row_above"]').click((function(){var sel=tv.getSelectionBounds();sel&&table.insertEmptyRow(sel.top)})),$('*[data-menu-item-id="add_row_below"]').click((function(){var sel=tv.getSelectionBounds();sel&&table.insertEmptyRow(sel.bottom+1)})),$('*[data-menu-item-id="remove_row"]').click((function(){tv.removeSelectedRows()})),bind_row_menu()),table.on("row_inserted",bind_row_menu),table.on("column_inserted",bind_col_menu),$('*[data-menu-item-id="cell_align_left"]').click(this.setHorizontalAlignment("left")),$("#context-menu-cell-paste").click((()=>{queryClipboardPermissionAndPaste(((pasted_text,pasted_html)=>{tv.onCellPaste(pasted_html,pasted_text)}))})),$("#context-menu-cell-paste-special").click((()=>{queryClipboardPermissionAndPaste(((pasted_text,pasted_html)=>{tv.onCellPasteAssisted(pasted_html,pasted_text)}))})),$('*[data-menu-item-id="cell_align_left"]').click(this.setHorizontalAlignment("left")),$('*[data-menu-item-id="cell_align_center"]').click(this.setHorizontalAlignment("center")),$('*[data-menu-item-id="cell_align_right"]').click(this.setHorizontalAlignment("right")),tv.isFormattingOptionDisabled("vertical_alignment")?($('*[data-menu-item-id="cell_align_top"]').hide(),$('*[data-menu-item-id="cell_align_middle"]').hide(),$('*[data-menu-item-id="cell_align_bottom"]').hide()):($('*[data-menu-item-id="cell_align_top"]').click(this.setVerticalAlignment("top")),$('*[data-menu-item-id="cell_align_middle"]').click(this.setVerticalAlignment("middle")),$('*[data-menu-item-id="cell_align_bottom"]').click(this.setVerticalAlignment("bottom")))},MainUI.prototype.initColumnWidthDialog=function(){var self=this,dlg=$("#column_width_dialog"),width_input=$('input[type="number"]',dlg);function submit(){!function(width){for(var table_view=self.table_view,selection_bounds=table_view.getSelectionBounds(),i=selection_bounds.left;i<=selection_bounds.right;++i)table_view.setSingleColumnWidth(i,width)}(parseInt(width_input.val())),dlg.modal("hide")}$('input[type="number"]',dlg).keydown((function(event){13==event.which&&(event.preventDefault(),submit())})),$('input[type="submit"]',dlg).click((function(event){event.preventDefault(),submit()}))},MainUI.prototype.show_column_width_dialog=function(){var dlg=$("#column_width_dialog");if(null!=this.table_view.getSelectedCell()){var selection_bounds=this.table_view.getSelectionBounds(),width=this.table_view.getColumnWidths()[selection_bounds.left];$('input[type="number"]',dlg).val(width),dlg.modal("show")}},MainUI.prototype.table_caption=function(){var noop=function(){},api={on_caption_change:noop,on_label_change:noop,default_label:"tab:my-table",default_caption:""},is_initialized=!1,mute_events=!1,panel=$('<div id="table-caption-panel">');$("<label>").attr({for:"table-caption"}).text("Table caption").appendTo(panel);var caption_input=$("<textarea>").attr({id:"table-caption",name:"table-caption",rows:2,placeholder:"Enter table caption here",value:api.default_caption}).appendTo(panel);$("<label>").attr({for:"table-label"}).text("Label").appendTo(panel);var label_input=$("<input>").attr({id:"table-label",name:"table-label",value:api.default_label}).appendTo(panel),hint=$("<span>").attr({class:"muted"}).appendTo(panel),update_hint=function(label){""!=label?hint.text(" Use \\ref{"+label+"} to refer to your table in LaTeX"):hint.text("")};update_hint(label_input.val()),caption_input.on("change",(function(){mute_events||api.on_caption_change(caption_input.val())})),label_input.on("change",(function(){api.set_label(label_input.val());var value=label_input.val();update_hint(value),mute_events||api.on_label_change(value)}));return api.set_label=function(value){value=function(value){for(var chars=(value||"").split(""),filtered=[],i=0;i<chars.length;++i){var c=chars[i];null!=c.match(/[a-zA-Z0-9_: -]/)&&filtered.push(c)}return filtered.join("")}(value)||api.default_label,mute_events=!0,label_input.val(value),mute_events=!1},api.set_caption=function(value){mute_events=!0,caption_input.val(value),mute_events=!1},api.show=function(){is_initialized||($("#table_editor_expander").after(panel),is_initialized=!0),panel.show()},api.hide=function(){is_initialized&&panel.hide()},api}(),MainUI.prototype.initTableShare=function(){var tv=this.table_view;function show_share_error(msg){$("#table-share-link-btn").hide(),$("#share-table-error").text(msg).show()}function get_share_link(str){if(str.length<=2e3){$("#table-share-data").val(str);var form_data=$("#table-share-form").serialize();$.ajax({url:"/table-share",type:"POST",data:form_data,success:function(data,textStatus,jqXHR){$("#table-share-link-btn").removeClass("btn-warning").addClass("btn-primary").hide(),data.success&&data.short_url?($("#share-table-link").attr("href",data.short_url).text(data.short_url),$("#share-table-result").show()):show_share_error(data.error)},error:function(jqXHR,textStatus,errorThrown){}})}else show_share_error("We are sorry but only small tables can be shared")}$("#share-table-btn").click((function(){$("#share-table-error").hide(),$("#share-table-result").hide(),$("#table-share-link-btn").removeClass("btn-warning").addClass("btn-primary").text("Get link to your table").show(),$("#share_table_dialog").modal("show")})),$("#table-share-link-btn").click((function(){$(this).removeClass("btn-info").addClass("btn-warning").text("Please wait...");var data=tv.dump();CompressUtils.compress_str_64(JSON.stringify(data),get_share_link)})),$("#share-table-link").click((function(){var url;url=$(this).attr("href"),window.open(url,"_blank").focus()}))},MainUI.prototype.set_editor_name=function(name){this.editor_name=name},MainUI.prototype.get_editor_name=function(){return this.editor_name},MainUI.prototype.show_result_code=function(code){$("#result-code").text(code);code.length<32768&&Prism.highlightElement($("#result-code")[0])},MainUI}(jQuery,document);function DB(key){var store=window.localStorage||{};return{get:function(){return JSON.parse(store[key]||"{}")},put:function(data){store[key]=JSON.stringify(data)}}}function store_checkbox_state(checkbox,key){let storage=DB(key);const initial_state=storage.get();!0!==initial_state&&!1!==initial_state||checkbox.prop("checked",initial_state),checkbox.change((function(){var is_checked=checkbox.is(":checked");storage.put(is_checked)}))}var UnReDo=function(){function UnReDo(table_view){var self=this;this.curr_state=null,this.undo_list=[],this.redo_list=[],this.table_view=table_view,this.ignore_next_change=!1,this.size_limit=10;var change_timeout=null;table_view.on("state_change",(()=>{change_timeout&&clearTimeout(change_timeout),change_timeout=setTimeout((()=>{self.ignore_next_change||self.addChange(),self.ignore_next_change=!1}),600)}))}return UnReDo.prototype.addChange=function(){const dumped=this.table_view.dump();if(null==this.curr_state)this.curr_state=dumped;else{if(this.undo_list.length>=1&&JSON.stringify(this.undo_list[this.undo_list.length-1])===JSON.stringify(dumped))return;this.undo_list.length==this.size_limit&&this.undo_list.splice(0,1),this.undo_list.push(this.curr_state),this.curr_state=dumped,this.redo_list.splice(0,this.redo_list.length)}},UnReDo.prototype.undo=function(){0!=this.undo_list.length&&(this.redo_list.push(this.curr_state),this.curr_state=this.undo_list.pop(),this.ignore_next_change=!0,this.table_view.load(this.curr_state))},UnReDo.prototype.redo=function(){0!=this.redo_list.length&&(this.undo_list.push(this.curr_state),this.curr_state=this.redo_list.pop(),this.ignore_next_change=!0,this.table_view.load(this.curr_state))},UnReDo.prototype.clear=function(){this.undo_list.length=0,this.redo_list.length=0,this.curr_state=null},UnReDo}(),PersistenceHelper=function(){function PersistenceHelper(table_view){this.table_view=table_view,this.timeout=null,this.storage=DB("tg-table"),this.enabled=!0}return PersistenceHelper.prototype.run=function(){null!=this.timeout&&window.clearInterval(this.timeout),this.save();var self=this;this.timeout=setInterval((function(){self.enabled&&self.save()}),4e3)},PersistenceHelper.prototype.save=function(){var dump=this.table_view.dump();this.storage.put(dump)},PersistenceHelper.load=function(){return DB("tg-table").get()},PersistenceHelper.prototype.disable=function(){this.enabled=!1},PersistenceHelper.prototype.enable=function(){this.enabled=!0},PersistenceHelper}();const SearchReplaceDialog=function(){const{h,app}=hyperapp;let is_initialized=!1,show_handler=null,find_callback=null,replace_callback=null,replace_all_callback=null;const state_set=(state,key,value)=>({...state,[key]:value}),css_subclass=(state,subclass)=>`${state.css_class}__${subclass}`,hide_dialog=state=>state_set(state,"dialog_shown",!1),ondragstart=(state,ev)=>0!==ev.button?state:((state,substate)=>({...state,...substate}))(state,{drag_start_mouse_pos:{left:ev.screenX,top:ev.screenY},drag_start_dialog_pos:{...state.dialog_pos},drag_enabled:!0}),ondragmove=(state,ev)=>{if(!state.drag_enabled)return state;const delta_x=ev.screenX-state.drag_start_mouse_pos.left,delta_y=ev.screenY-state.drag_start_mouse_pos.top;return state_set(state,"dialog_pos",{left:state.drag_start_dialog_pos.left+delta_x,top:state.drag_start_dialog_pos.top+delta_y})},ondragover=state=>state_set(state,"drag_enabled",!1),render_button=(label,action)=>h("div",{class:"btn btn-default",onclick:action},label),get_search_string=state=>state.search_string,set_search_string=(state,search_string)=>({...state,search_string}),get_replace_string=state=>state.replace_string,on_find_action=state=>(find_callback&&find_callback(get_search_string(state),state.use_regex),state),on_replace_action=state=>(replace_callback&&replace_callback(get_search_string(state),get_replace_string(state),state.use_regex),state),on_replace_all_action=state=>(replace_all_callback&&replace_all_callback(get_search_string(state),get_replace_string(state),state.use_regex),state),render_input=(label,input_attr={})=>h("label",{},[h("span",{},label),h("input",input_attr)]),render_checkbox=(label,input_attr={})=>h("label",{},[h("input",{type:"checkbox",...input_attr}),h("span",{style:{width:"auto",margin:"0 5px"}},label)]),on_search_input_change=(state,ev)=>set_search_string(state,ev.target.value),on_replace_input_change=(state,ev)=>((state,replace_string)=>({...state,replace_string}))(state,ev.target.value),on_use_regex_change=(state,ev)=>({...state,use_regex:ev.target.checked}),render=state=>{const middle=[h("div",{class:css_subclass(state,"row")},render_input("Search for",{onkeydown:(state,ev)=>(state=set_search_string(state,ev.target.value),13==ev.keyCode&&(on_find_action(state),ev.preventDefault()),state),onchange:on_search_input_change})),h("div",{class:css_subclass(state,"row")},render_input("Replace with",{onchange:on_replace_input_change})),h("div",{class:css_subclass(state,"row")},render_checkbox(["Use regular expressions",h("a",{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions",rel:"nofollow",target:"_blank"}," (guide)")],{onchange:on_use_regex_change}))],bottom=(state=>h("div",{class:css_subclass(state,"row"),style:{"justify-content":"flex-end"}},[render_button("Find",on_find_action),render_button("Replace",on_replace_action),render_button("Replace all",on_replace_all_action),render_button("Close",hide_dialog)]))(state);return((state,...elements)=>{const title=h("h4",{},state.title),head=h("div",{class:css_subclass(state,"head"),onmousedown:ondragstart},title),body=h("div",{class:css_subclass(state,"body")},[head,...elements]),wrap=h("div",{class:css_subclass(state,"wrap"),style:{left:state.dialog_pos.left+"px",top:state.dialog_pos.top+"px"}},body);return h("div",{class:state.css_class,style:{display:state.dialog_shown?"block":"none"},onmousemove:ondragmove,onmouseup:ondragover},wrap)})(state,middle,bottom)},subscribe_to_show=dispatch=>(show_handler=function(){dispatch((state=>state_set(state,"dialog_shown",!0)))},function(){}),get_subscriptions=()=>[subscribe_to_show],init=()=>{if(!is_initialized){const app_element=document.createElement("div");document.body.appendChild(app_element),app({init:{dialog_shown:!1,title:"Find and replace",css_class:"fr-dialog",dialog_pos:{left:500,top:200},drag_enabled:!1,search_string:"",replace_string:"",use_regex:!1},view:render,node:app_element,subscriptions:get_subscriptions}),is_initialized=!0}};return{show:({on_find,on_replace,on_replace_all})=>{find_callback=on_find,replace_callback=on_replace,replace_all_callback=on_replace_all,init(),show_handler()}}}(),PasteAssistant=function(){const{h,app}=hyperapp;let is_initialized=!1,show_handler=null,paste_callback=null,pasted_text="";const Separator_Space=1,Separator_Comma=2,Separator_Semicolon=3,Separator_Tab=4,Separator_Custom=5,get_line_char_idx=(line_idx,char_idx)=>line_idx+"."+char_idx;const update_split=state=>{const{raw_input,separator,custom_separator_str,line_picks,merge_consecutive_sep}=state,separator_regex=((separator,custom_separator_str,merge_consecutive_sep=!0)=>{if(separator===Separator_Space)return merge_consecutive_sep?/([ \v\u00A0\u2028\u2029]+)/g:/([ \v\u00A0\u2028\u2029])/g;if(separator==Separator_Comma)return merge_consecutive_sep?/(,+)/g:/(,)/g;if(separator==Separator_Semicolon)return merge_consecutive_sep?/(;+)/g:/(;)/g;if(separator===Separator_Custom){if(!custom_separator_str)return/(?!.*)/g;const s=custom_separator_str.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return new RegExp(merge_consecutive_sep?`([${s}]+)`:`([${s}])`)}return merge_consecutive_sep?/(\t+)/g:/(\t)/g})(separator,custom_separator_str,merge_consecutive_sep);let lines=(text=>{const lines=[];return text.split(/\n+/g).forEach((ln=>{(ln=ln.trim())&&lines.push(ln)})),lines})(raw_input);for(let ln_i=0;ln_i<lines.length;++ln_i){let line=lines[ln_i];line&&(separator_regex.test(line[0])&&(line=""+line),separator_regex.test(line[line.length-1])&&(line+=""),lines[ln_i]=line)}if(!merge_consecutive_sep)for(let ln_i=0;ln_i<lines.length;++ln_i){const tokens=lines[ln_i].split(separator_regex);let new_tokens=[],prev_is_sep=!1,next_is_sep=tokens.length>0&&separator_regex.test(tokens[0]);for(let tok_i=0;tok_i<tokens.length;++tok_i){const token=tokens[tok_i],is_sep=next_is_sep;next_is_sep=tok_i+1<tokens.length&&separator_regex.test(tokens[tok_i+1]),prev_is_sep&&0==token.length&&next_is_sep&&new_tokens.push(""),new_tokens.push(token),prev_is_sep=is_sep}lines[ln_i]=new_tokens.join("")}0==line_picks.size&&(line_picks.add(get_line_char_idx(-1,-1)),lines.forEach(((ln,ln_index)=>{let char_idx=0;ln.split(separator_regex).forEach((token=>{if(separator_regex.test(token))for(let i=0;i<token.length;++i,++char_idx)line_picks.add(get_line_char_idx(ln_index,char_idx));else char_idx+=token.length}))})));const table_cells=[];let col_count=0;lines.forEach(((ln,ln_index)=>{const line_cells=[];let token="";for(let i=0;i<ln.length;++i){const id=get_line_char_idx(ln_index,i);line_picks.has(id)?token&&(line_cells.push([token,i-token.length]),token=""):token+=ln[i]}token&&line_cells.push([token,ln.length-token.length]),table_cells.push(line_cells),col_count=Math.max(col_count,line_cells.length)}));for(let r=0;r<table_cells.length;++r){const line_cells=table_cells[r];if(0==line_cells.length)table_cells.splice(r,1),--r;else{const starts_at=line_cells[line_cells.length-1][1]+1;for(;line_cells.length<col_count;)line_cells.push(["",starts_at])}}return{...state,lines,table_cells}},render_preview=state=>{const{active_char_id,table_cells}=state;let active_row_idx=-1,active_cell_idx=-1,active_cell_count=1;if(active_char_id){let[row_idx,char_idx]=active_char_id.split(".");if(row_idx=parseInt(row_idx),char_idx=parseInt(char_idx),0<=row_idx&&row_idx<table_cells.length){active_row_idx=row_idx;let prev_cell_ends_at=Math.pow(10,6);table_cells[row_idx].forEach(((cell,cell_idx)=>{const[contents,starts_at_idx]=cell,ends_at_idx=starts_at_idx+contents.length-1;starts_at_idx<=char_idx&&char_idx<=ends_at_idx?active_cell_idx=cell_idx:prev_cell_ends_at<char_idx&&char_idx<starts_at_idx&&-1===active_cell_idx&&(active_cell_idx=cell_idx-1,active_cell_count=2),prev_cell_ends_at=ends_at_idx}))}}const trows=[];table_cells.forEach(((row_cells,row_index)=>{const tds=[];for(let i=0;i<row_cells.length;++i){const klass=row_index===active_row_idx&&active_cell_idx<=i&&i<active_cell_idx+active_cell_count?"sel":void 0;tds.push(h("td",{class:klass},row_cells[i][0]))}trows.push(h("tr",{},tds))}));const table=h("table",{},trows),preview=h("div",{class:"paste-preview"},table),label=h("p",{},"Table preview:");return h("div",{class:"table-preview"},[label,preview])},render_columns_picker=state=>{const lines=state.lines,line_edits=[],get_char_id_from_event=ev=>{if("SPAN"!=ev.target.nodeName)return null;let node=ev.target;for(;node&&"DIV"!=node.nodeName&&!("lnIdx"in node.dataset);)node=node.parentNode;if(!node||!("lnIdx"in node.dataset))return null;const line_idx=node.dataset.lnIdx,char_idx=Array.prototype.indexOf.call(node.children,ev.target);return get_line_char_idx(line_idx,char_idx)};lines.forEach(((ln,ln_index)=>{const boxes=[];for(let i=0;i<ln.length;++i){const ch=ln[i];let klass;const char_id=get_line_char_idx(ln_index,i);state.line_picks.has(char_id)&&(klass="sel"),boxes.push(h("span",{class:klass},ch))}const line_wrapper=h("div",{"data-ln-idx":ln_index},boxes);line_edits.push(line_wrapper)}));const label=h("p",{},"Click on the characters below to split or merge cells:"),picker=h("div",{class:"columns_picker",onmousedown:(st,ev)=>{const char_id=get_char_id_from_event(ev);return null===char_id?st:(st.line_picks.has(char_id)?st.line_picks.delete(char_id):st.line_picks.add(char_id),update_split(st))},onmouseover:(st,ev)=>{const active_char_id=get_char_id_from_event(ev);return null===active_char_id||active_char_id===st.active_char_id?st:{...st,active_char_id}}},line_edits);return h("div",{},[label,picker])},render_separator_panel=state=>{const elems=[],set_custom_separator=(st,ev)=>(st.custom_separator_str=ev.target.value||"",st.line_picks.clear(),update_split(st)),btn=(label,value)=>{return h("button",{onclick:(separator=value,st=>separator===st.separator?st:(st.separator=separator,st.line_picks.clear(),update_split(st))),class:state.separator===value?"checked":void 0},label);var separator};var btns;if(elems.push(h("div",{},"Separate cells by ")),elems.push((btns=[btn("Space",Separator_Space),btn("Tab",Separator_Tab),btn("Comma",Separator_Comma),btn("Semicolon",Separator_Semicolon),btn("Custom",Separator_Custom)],h("div",{class:"btn-group"},btns))),state.separator===Separator_Custom){const custom_sep_input=h("input",{placeholder:"Enter separators...",value:state.custom_separator_str,oninput:set_custom_separator,disabled:state.separator!==Separator_Custom||void 0,style:{maxWidth:"120px"}});elems.push(custom_sep_input)}const merge_con_sep_checkbox=h("input",{type:"checkbox",id:"merge_consecutive_sep",checked:!0===state.merge_consecutive_sep||void 0,style:{margin:"0 5px 0 10px"},onchange:(st,ev)=>(st.merge_consecutive_sep=ev.target.checked,st.line_picks.clear(),update_split(st))}),merge_con_sep_label=h("label",{for:"merge_consecutive_sep"},"Merge consecutive separators");return elems.push(merge_con_sep_checkbox,merge_con_sep_label),h("div",{class:"separator-panel"},elems)},get_initial_state=pasted_plain_text=>{const state={dialog_shown:!1,title:"Paste Special",css_class:"paste-dialog",dialog_pos:{left:500,top:200},drag_enabled:!1,use_regex:!1,raw_input:pasted_plain_text,separator:Separator_Space,custom_separator_str:"",line_picks:new Set,merge_consecutive_sep:!0};return update_split(state)},state_set=(state,key,value)=>({...state,[key]:value}),css_subclass=(state,subclass)=>`${state.css_class}__${subclass}`,hide_dialog=state=>state_set(state,"dialog_shown",!1),ondragstart=(state,ev)=>0!==ev.button?state:((state,substate)=>({...state,...substate}))(state,{drag_start_mouse_pos:{left:ev.screenX,top:ev.screenY},drag_start_dialog_pos:{...state.dialog_pos},drag_enabled:!0}),ondragmove=(state,ev)=>{if(!state.drag_enabled)return state;const delta_x=ev.screenX-state.drag_start_mouse_pos.left,delta_y=ev.screenY-state.drag_start_mouse_pos.top;return state_set(state,"dialog_pos",{left:state.drag_start_dialog_pos.left+delta_x,top:state.drag_start_dialog_pos.top+delta_y})},ondragover=state=>state_set(state,"drag_enabled",!1),render_button=(label,action,klass="btn-default")=>h("div",{class:`btn ${klass}`,onclick:action},label),on_accept_action=state=>(paste_callback&&paste_callback((state=>state.table_cells.map((row_cells=>row_cells.map((cell=>{const cell_text=cell[0];return""===cell_text?"":cell_text})))))(state)),hide_dialog(state)),render=state=>{const middle=(state=>{const elems=[render_separator_panel(state),render_columns_picker(state),render_preview(state)];return h("div",{class:"main-section"},elems)})(state),bottom=(state=>h("div",{class:css_subclass(state,"row"),style:{"justify-content":"flex-end"}},[render_button("Cancel",hide_dialog),render_button("OK",on_accept_action,"btn-primary")]))(state);return((state,...elements)=>{const title=h("h3",{},state.title),close_btn=h("button",{type:"button",class:"close",dataDismiss:"modal",ariaHidden:"true",onclick:hide_dialog},""),head=h("div",{class:css_subclass(state,"head"),onmousedown:ondragstart},[close_btn,title]),body=h("div",{class:css_subclass(state,"body")},[head,...elements]),wrap=h("div",{class:css_subclass(state,"wrap"),style:{left:state.dialog_pos.left+"px",top:state.dialog_pos.top+"px"}},body);return h("div",{class:state.css_class,style:{display:state.dialog_shown?"block":"none"},onmousemove:ondragmove,onmouseup:ondragover},wrap)})(state,middle,bottom)},subscribe_to_show=dispatch=>(show_handler=function(){dispatch((state=>{const left=Math.max(0,(document.documentElement.clientWidth-800)/2);return state.dialog_pos.left=left,(state=state_set(state,"dialog_shown",!0)).raw_input=pasted_text,state.line_picks.clear(),update_split(state)}))},function(){}),get_subscriptions=()=>[subscribe_to_show],init=()=>{if(!is_initialized){const app_element=document.createElement("div");document.body.appendChild(app_element),app({init:get_initial_state("?"),view:render,node:app_element,subscriptions:get_subscriptions}),is_initialized=!0}};return{show:(pasted_plain_text,on_paste_callback)=>{paste_callback=on_paste_callback,pasted_text=pasted_plain_text,console.log(`pasted_text: [${pasted_text}]`),init(),show_handler()}}}(),NumberFormatMenu=function(){const{h,app}=hyperapp;let is_initialized=!1,format_callback=null;const Formats_IntlNumberFormat=1,Formats_Scientific=2,NumberWithDotAsDecimalSeparator=/^[+-]?((\d+|\d{1,3}?(,\d\d\d)*|\d{1,3}?(\s\d\d\d)*)([.]\d*)?([eE][+-]?\d+)?|[.]\d+([eE][+-]?\d+)?)$/,NumberWithCommaAsDecimalSeparator=/^[+-]?((\d+|\d{1,3}?([.]\d\d\d)*|\d{1,3}?(\s\d\d\d)*)(,\d*)?([eE][+-]?\d+)?|,\d+([eE][+-]?\d+)?)$/,format_number=(number,format_options,space_separator_symbol=" ")=>{if("string"==typeof number||number instanceof String){const parsed=(str=((str=number)||"").trim(),NumberWithDotAsDecimalSeparator.test(str)?(str=str.replaceAll(/[\s,]/g,""),parseFloat(str)):NumberWithCommaAsDecimalSeparator.test(str)?(str=(str=str.replaceAll(/[\s.]/g,"")).replace(/[,]/g,"."),parseFloat(str)):NaN);if(isNaN(parsed))return number;number=parsed}var str;const type=format_options.type;let result=""+number;if(type==Formats_IntlNumberFormat){const{fraction_digits,thousands_separator}=format_options,options={useGrouping:0!=thousands_separator.length,minimumFractionDigits:fraction_digits,maximumFractionDigits:fraction_digits};let locale="en-US";"."==thousands_separator&&(locale="de");result=new Intl.NumberFormat(locale,options).format(number)," "==thousands_separator&&(result=result.split(",").join(space_separator_symbol))}else if(type==Formats_Scientific){const d=format_options.fraction_digits;result=number.toExponential(-1==d?void 0:d)}return result},render_button=(label,attr)=>h("div",{class:"menu-item-btn",...attr},label),get_action=(id,delta)=>function(state,ev){return ev.stopPropagation(),{...state,formats:state.formats.map((format=>(format.id==id&&(format.fraction_digits=Math.max(format.min_fraction_digits,Math.min(format.fraction_digits+delta,format.max_fraction_digits))),format)))}},render_number_format_menu_item=format_options=>{const label=""+format_number(10000.123456789,format_options),label_elem=h("a",{tabindex:-1,style:{flex:1,fontWeight:"bold",fontFamily:"monospace"}},label),id=format_options.id,inc_action=get_action(id,1),dec_action=get_action(id,-1);return h("li",{class:"menu-item-with-btns",onclick:state=>{if(format_callback){format_callback(((num,...args)=>format_number(num,format_options,...args)))}return state},title:format_options.description},[label_elem,render_button("-",{onclick:dec_action,title:"Decrease decimal places"}),h("em",{},""+format_options.fraction_digits),render_button("+",{onclick:inc_action,title:"Increase decimal places"})])},render=state=>{const menu_items=state.formats.map(render_number_format_menu_item);return h("ul",{},menu_items)},get_subscriptions=()=>[];return{init:format_callback_=>{if(format_callback=format_callback_,!is_initialized){const app_element=document.getElementById("number-format-menu");app({init:{formats:[{id:1,type:Formats_IntlNumberFormat,fraction_digits:2,min_fraction_digits:0,max_fraction_digits:20,thousands_separator:"",description:"Default - dot as decimal separator"},{id:2,type:Formats_IntlNumberFormat,fraction_digits:2,min_fraction_digits:0,max_fraction_digits:20,thousands_separator:",",description:"With comma as thousands separator"},{id:3,type:Formats_IntlNumberFormat,fraction_digits:2,min_fraction_digits:0,max_fraction_digits:20,thousands_separator:" ",description:"With space as thousands separator"},{id:4,type:Formats_IntlNumberFormat,fraction_digits:2,min_fraction_digits:0,max_fraction_digits:20,thousands_separator:".",description:"With dot as thousands and comma as decimal separators"},{id:5,type:Formats_Scientific,fraction_digits:6,min_fraction_digits:-1,max_fraction_digits:20,description:"Exponential notation"}]},view:render,node:app_element,subscriptions:get_subscriptions}),is_initialized=!0}}}}();var HTMLExportOptions={CENTERING:"Center table horizontally",ENABLE_SORT:"Enable table sorting",MAKE_RESPONSIVE:"Make table responsive",MAKE_FIRST_ROW_A_HEADER:"First row is a table header",STICKY_HEADER:"Keep header visible when scrolling the table"},HTMLExport=function(){"use strict";var ThemeCSSClass="tg";function hashCode(str){var hash=0;if(0==str.length)return hash;for(var i=0,l=str.length;i<l;i++)hash=(hash<<5)-hash+str.charCodeAt(i),hash|=0;return hash}function hashToId(hash){for(var val=(hash=Math.abs(hash))%Math.pow(36,4),res="",i=0;i<4;++i)res+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[val%36],val=Math.floor(val/36);return res=res.split("").reverse().join("")}function CSSMapToStr(style,no_braces){let res=[];for(let key in style)if(style.hasOwnProperty(key)&&"_"!=String(key).substr(0,1)){const value=style[key];Array.isArray(value)?value.forEach((function(item){res.push(key+":"+item)})):res.push(key+":"+value)}return res.sort(),no_braces?res.join(";"):Utils.join_strings(res,";",{lines_separator:"\n  ",max_line_length:120,prefix:"{",suffix:"}"})}function clone(obj){if(null==obj||"object"!=typeof obj)return obj;if(obj instanceof Date)return(copy=new Date).setTime(obj.getTime()),copy;if(obj instanceof Array){for(var copy=[],i=0,len=obj.length;i<len;i++)copy[i]=clone(obj[i]);return copy}if(obj instanceof Object){copy={};for(var attr in obj)obj.hasOwnProperty(attr)&&(copy[attr]=clone(obj[attr]));return copy}throw new Error("Unable to copy obj! Its type isn't supported.")}function hasOption(options,option_id){return-1!=options.indexOf(option_id)}function concatStrings(strings,glue="",n=998){let result=[],currentLine="";for(let i=0;i<strings.length;i++)currentLine.length+strings[i].length<=n?currentLine+=(currentLine.length>0?glue:"")+strings[i]:(currentLine&&result.push(currentLine),currentLine=strings[i]);return currentLine.length>0&&result.push(currentLine),result.join("\n")}function repeat(value,times){for(var out=[],i=0;i<times;++i)out.push(value);return out}function cellToHTML(cell,is_header,attr,use_css=!0){null==attr&&(attr={}),cell.colspan()>1&&(attr.colspan=cell.colspan()),cell.rowspan()>1&&(attr.rowspan=cell.rowspan());var inner="";try{inner=Markup.renderToString(cell.value(),cell.per_char_markup_ids_,use_css)}catch(_){inner=textToHTML(cell.value().toString())}var tag_type=is_header?"th":"td";return Utils.format_tag(tag_type,inner,attr)}return function(table_view,skip_css,inline_css,line_glue,extra_options){inline_css=inline_css||!1,null==line_glue&&(line_glue="\n");const model=table_view.model,shift_size=""==line_glue?0:2;let style_class=table_view.style_class||"";const use_css=!skip_css&&style_class&&-1==style_class.indexOf("zerocss");let common_css={},unique_styles={},unique_hash_to_id={},theme=style_class?clone(TableThemes.getThemeById(style_class)):null;const top_left_cell_style=table_view.getCellView(0,0).style;if(theme&&top_left_cell_style){const padding=top_left_cell_style.getPadding();null!=padding.top&&(theme.td.padding=padding.top+"px "+padding.left+"px",theme.th.padding=padding.top+"px "+padding.left+"px")}const sticky_header_enabled=hasOption(extra_options,HTMLExportOptions.STICKY_HEADER),first_row_is_header=hasOption(extra_options,HTMLExportOptions.MAKE_FIRST_ROW_A_HEADER)||sticky_header_enabled,header_rowspan=model.getHeaderRowspan();let rows_html=[];for(var i=0;i<model.row_count;++i){var shift=repeat(" ",2*shift_size).join(""),row_cells=[];model.forEachCellInRow(i,(function(cell,col_index){if(cell.isVisible()){const is_header_cell=i<header_rowspan&&first_row_is_header;var style={};i%2==1&&theme&&theme.hasOwnProperty("_row_odd_td")&&theme._row_odd_td._active?style=TableThemes.combineThemes([style,theme._row_odd_td]):i>0&&col_index%2==1&&theme&&theme.hasOwnProperty("_col_even_td")&&theme._col_even_td._active&&(style=TableThemes.combineThemes([style,theme._col_even_td])),style=TableThemes.combineThemes([style,cell.view.style.toCSS()]),is_header_cell&&sticky_header_enabled&&(style.position=["sticky","-webkit-sticky"],style.top="-1px",style["will-change"]="transform");const hash=String(hashCode(JSON.stringify(style)));unique_styles.hasOwnProperty(hash)||(unique_styles[hash]=style,unique_hash_to_id[hash]="tg-"+hashToId(hash));var cell_attr={};if(use_css&&!inline_css&&(cell_attr.class=unique_hash_to_id[hash]),use_css&&inline_css){var cell_type=is_header_cell?"th":"td",cell_style=TableThemes.combineThemes([theme[cell_type],style]);cell_attr.style=CSSMapToStr(cell_style,!0)}var cell_str=cellToHTML(cell,is_header_cell,cell_attr,use_css);row_cells.push(shift+cell_str)}})),shift=repeat(" ",shift_size).join("");rows_html.push(concatStrings([].concat([shift+"<tr>"],row_cells,[shift+"</tr>"]),line_glue))}const has_thead=first_row_is_header&&rows_html.length>0,[_,first_row_max_span]=function(table_model,row_index){let min_span=table_model.row_count,max_span=1;return table_model.forEachCellInRow(row_index,(cell=>{min_span=Math.min(min_span,cell.rowspan()),max_span=Math.max(max_span,cell.rowspan())})),[min_span,max_span]}(model,0),header_first_row=has_thead?0:-1,header_last_row=has_thead?first_row_max_span-1:-1;if(has_thead&&(rows_html[header_first_row]=concatStrings(["<thead>",rows_html[header_first_row]],line_glue),rows_html[header_last_row]=concatStrings([rows_html[header_last_row],"</thead>"])),rows_html.length>header_last_row+1){const body_first_row=header_last_row+1;rows_html[body_first_row]=concatStrings(["<tbody>",rows_html[body_first_row]],line_glue);const body_last_row=rows_html.length-1;rows_html[body_last_row]=concatStrings([rows_html[body_last_row],"</tbody>"],line_glue)}var centering_enabled=hasOption(extra_options,HTMLExportOptions.CENTERING),responsiveness_enabled=hasOption(extra_options,HTMLExportOptions.MAKE_RESPONSIVE),table_sorting_enabled=hasOption(extra_options,HTMLExportOptions.ENABLE_SORT);theme&&centering_enabled&&(theme[" "].margin="0px auto");var css="",body=concatStrings(rows_html,line_glue),parts=[""],table_attr={};if(table_sorting_enabled&&(table_attr.id="tg-"+function(len){for(var text="",possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<len;i++)text+=possible.charAt(Math.floor(62*Math.random()));return text}(5)),use_css){if(inline_css)table_attr.style=CSSMapToStr(theme[" "],!0),table_attr.class="tg";else{var key;for(key in unique_styles)if(unique_styles.hasOwnProperty(key)){var str=CSSMapToStr(unique_styles[key]);"{}"!=str&&(common_css["."+ThemeCSSClass+" ."+unique_hash_to_id[key]]=str)}table_attr.class=ThemeCSSClass;var t=style_class.split("-");style_class=t[t.length-1],css=function(theme,common_css){let result="\n";theme&&(result+=TableThemes.themeToStr(theme,"."+ThemeCSSClass)+"\n");for(let key in common_css)common_css.hasOwnProperty(key)&&(result+=key+common_css[key]+"\n");return result}(theme,common_css)}table_sorting_enabled&&(css+=function(force_single_line=!0){if(!force_single_line)return".tg-sort-header::-moz-selection{background:0 0}\n.tg-sort-header::selection{background:0 0}.tg-sort-header{cursor:pointer}\n.tg-sort-header:after{content:'';float:right;margin-top:7px;border-width:0 5px 5px;border-style:solid;\n  border-color:#404040 transparent;visibility:hidden}\n.tg-sort-header:hover:after{visibility:visible}\n.tg-sort-asc:after,.tg-sort-asc:hover:after,.tg-sort-desc:after{visibility:visible;opacity:.4}\n.tg-sort-desc:after{border-bottom:none;border-width:5px 5px 0}";return".tg-sort-header::-moz-selection{background:0 0}.tg-sort-header::selection{background:0 0}.tg-sort-header{cursor:pointer}.tg-sort-header:after{content:'';float:right;margin-top:7px;border-width:0 5px 5px;border-style:solid;border-color:#404040 transparent;visibility:hidden}.tg-sort-header:hover:after{visibility:visible}.tg-sort-asc:after,.tg-sort-asc:hover:after,.tg-sort-desc:after{visibility:visible;opacity:.4}.tg-sort-desc:after{border-bottom:none;border-width:5px 5px 0}"}(inline_css)),responsiveness_enabled&&(css+=function(centering_enabled){return"@media screen and (max-width: 767px) {.tg {width: auto !important;}.tg col {width: auto !important;}.tg-wrap {overflow-x: auto;-webkit-overflow-scrolling: touch;"+(centering_enabled?"margin: auto 0px;":"")+"}}"}(centering_enabled)),""!=css&&(css=Utils.format_tag("style",css,{type:"text/css"}))}if(table_view.hasFixedLayout()){var widths=table_view.getColumnWidths(),cols=[],total_width=0;for(i=0;i<widths.length;++i)widths[i]+=1,cols.push('<col style="width: '+widths[i]+'px">'),total_width+=widths[i];parts.push("<colgroup>"),parts.push(concatStrings(cols,line_glue)),parts.push("</colgroup>"),table_attr.style+=";table-layout: fixed; width: "+total_width.toFixed(0)+"px"}parts.push(body),parts.push("");var table_html=Utils.format_tag("table",concatStrings(parts,line_glue),table_attr);return responsiveness_enabled&&(table_html=Utils.format_tag("div",table_html,{class:"tg-wrap"})),parts=[],css&&parts.push(css),parts.push(table_html),table_sorting_enabled&&parts.push((table_attr.id,'<script charset="utf-8">var TGSort=window.TGSort||function(n){"use strict";function r(n){return n?n.length:0}function t(n,t,e,o=0){for(e=r(n);o<e;++o)t(n[o],o)}function e(n){return n.split("").reverse().join("")}function o(n){var e=n[0];return t(n,function(n){for(;!n.startsWith(e);)e=e.substring(0,r(e)-1)}),r(e)}function u(n,r,e=[]){return t(n,function(n){r(n)&&e.push(n)}),e}var a=parseFloat;function i(n,r){return function(t){var e="";return t.replace(n,function(n,t,o){return e=t.replace(r,"")+"."+(o||"").substring(1)}),a(e)}}var s=i(/^(?:\\s*)([+-]?(?:\\d+)(?:,\\d{3})*)(\\.\\d*)?$/g,/,/g),c=i(/^(?:\\s*)([+-]?(?:\\d+)(?:\\.\\d{3})*)(,\\d*)?$/g,/\\./g);function f(n){var t=a(n);return!isNaN(t)&&r(""+t)+1>=r(n)?t:NaN}function d(n){var e=[],o=n;return t([f,s,c],function(u){var a=[],i=[];t(n,function(n,r){r=u(n),a.push(r),r||i.push(n)}),r(i)<r(o)&&(o=i,e=a)}),r(u(o,function(n){return n==o[0]}))==r(o)?e:[]}function v(n){if("TABLE"==n.nodeName){for(var a=function(r){var e,o,u=[],a=[];return function n(r,e){e(r),t(r.childNodes,function(r){n(r,e)})}(n,function(n){"TR"==(o=n.nodeName)?(e=[],u.push(e),a.push(n)):"TD"!=o&&"TH"!=o||e.push(n)}),[u,a]}(),i=a[0],s=a[1],c=r(i),f=c>1&&r(i[0])<r(i[1])?1:0,v=f+1,p=i[f],h=r(p),l=[],g=[],N=[],m=v;m<c;++m){for(var T=0;T<h;++T){r(g)<h&&g.push([]);var C=i[m][T],L=C.textContent||C.innerText||"";g[T].push(L.trim())}N.push(m-v)}t(p,function(n,t){l[t]=0;var a=n.classList;a.add("tg-sort-header"),n.addEventListener("click",function(){var n=l[t];!function(){for(var n=0;n<h;++n){var r=p[n].classList;r.remove("tg-sort-asc"),r.remove("tg-sort-desc"),l[n]=0}}(),(n=1==n?-1:+!n)&&a.add(n>0?"tg-sort-asc":"tg-sort-desc"),l[t]=n;var i,f=g[t],m=function(r,t){return n*f[r].localeCompare(f[t])||n*(r-t)},T=function(n){var t=d(n);if(!r(t)){var u=o(n),a=o(n.map(e));t=d(n.map(function(n){return n.substring(u,r(n)-a)}))}return t}(f);(r(T)||r(T=r(u(i=f.map(Date.parse),isNaN))?[]:i))&&(m=function(r,t){var e=T[r],o=T[t],u=isNaN(e),a=isNaN(o);return u&&a?0:u?-n:a?n:e>o?n:e<o?-n:n*(r-t)});var C,L=N.slice();L.sort(m);for(var E=v;E<c;++E)(C=s[E].parentNode).removeChild(s[E]);for(E=v;E<c;++E)C.appendChild(s[v+L[E-v]])})})}}n.addEventListener("DOMContentLoaded",function(){for(var t=n.getElementsByClassName("tg"),e=0;e<r(t);++e)try{v(t[e])}catch(n){}})}(document)<\/script>')),concatStrings(parts,line_glue)}}();const LaTeXExportOptions={CAPTION_ABOVE:"Caption above",CAPTION_BELOW:"Caption below",CENTERING:"Center table horizontally",SCALE_TABLE:"Scale table to text width",SCALE_TABLE_COLUMN:"Scale table to column width",LANDSCAPE_MODE:"Rotate table (landscape mode)",SPLIT_LONG_TABLE:"Split table in multiple pages",LONG_TABLE_REPEAT_HEADER:"Repeat header (top rows) on every page",LONG_TABLE_CONTINUED_HEADER:"Add table continuation header"},LaTeXExport=function(){function assert(condition,message){if(!condition)throw message||"Assertion failed"}function get_caption_and_label(table_view,escape_special){let caption=table_view.get_option("table_caption");const label=table_view.get_option("table_label");return escape_special&&(caption=escapeSpecialTeXSymbols(caption)),["\\caption{"+caption+"}","\\label{"+label+"}"]}function get_caption_and_label_for_longtable(table_view,escape_special){var caption_label=get_caption_and_label(table_view,escape_special);return caption_label[1]+="\\\\",caption_label}function countOccurrence(val,counters){for(var found=!1,i=0;i<counters.length&&!found;++i)counters[i].val==val&&(counters[i].count+=1,found=!0);found||counters.push({val,count:1})}function VLinesProcessor(table_view){this.table_view=table_view,this.table=table_view.model;const table=this.table,vlines=repeat((function(){return repeat(0,table.col_count+1)}),table.row_count);for(let r=0;r<table.row_count;++r)for(let c=0;c<table.col_count;++c){const cell=table.getCell(r,c,!0);if(cell.isVisible()){const style=table_view.getCellView(r,c,!0).style,has_left_border=style.hasBorder("left"),has_right_border=style.hasBorder("right");for(let ri=0;ri<cell.rowspan();++ri){const row=r+ri;vlines[row][c]|=has_left_border,vlines[row][c+cell.colspan()]|=has_right_border}}}for(let r=0;r<table.row_count;++r)for(let c=1;c<table.col_count;++c)vlines[r][c-1]>0&&vlines[r][c]>0&&(vlines[r][c]=2);const continuous_vlines=[];for(let c=0;c<=table.col_count;++c){let continuous=!0;for(let r=0;r<table.row_count;++r)continuous&=vlines[r][c]>0;continuous_vlines.push(continuous)}this.vlines=vlines,this.continuous_vlines=continuous_vlines}function ColorProcessor(table_view){this.table_view=table_view,this.table=table_view.model,this.colors_used=!1;var table=this.table,bg_colors=[],fg_colors=repeat((function(){return repeat(null,table.col_count)}),table.row_count);this.fg_colors=fg_colors;for(var r=0;r<table.row_count;++r){for(var row_colors=[],c=0;c<table.col_count;++c){var style=table_view.getCellView(r,c,!1).style;style.hasBgColor()?(row_colors.push(style.getBgColor()),this.colors_used=!0):row_colors.push(null),style.hasTextColor()&&(fg_colors[r][c]=style.getTextColor(),this.colors_used=!0)}bg_colors.push(row_colors)}var column_colors=[];for(c=0;c<table.col_count;++c){var occurrences=[];for(r=0;r<table.row_count;++r)countOccurrence(bg_colors[r][c],occurrences);for(var dominant=null,hasNullColor=!1,i=0;i<occurrences.length;++i){var entry=occurrences[i];(null==dominant||entry.count>dominant.count)&&(dominant=entry),null==entry.val&&(hasNullColor=!0)}column_colors.push(null),!hasNullColor&&null!=dominant&&dominant.count>=table.row_count/2&&(column_colors[c]=dominant.val)}this.column_colors=column_colors;for(row_colors=[],r=0;r<table.row_count;++r){for(occurrences=[],c=0;c<table.col_count;++c)countOccurrence(bg_colors[r][c],occurrences);for(dominant=null,hasNullColor=!1,i=0;i<occurrences.length;++i){entry=occurrences[i];(null==dominant||entry.count>dominant.count)&&(dominant=entry),null==entry.val&&(hasNullColor=!0)}row_colors.push(null),!hasNullColor&&null!=dominant&&dominant.count>=table.col_count/2&&(row_colors[r]=dominant.val)}this.row_colors=row_colors;var column_diff=0,row_diff=0;for(r=0;r<table.row_count;++r)for(c=0;c<table.col_count;++c){var cell=this.table.getCell(r,c),is_spanned=cell.rowspan()>1||cell.colspan()>1;(null==this.column_colors[c]||is_spanned||bg_colors[r][c]!=this.column_colors[c])&&++column_diff,(null==this.row_colors[r]||is_spanned||bg_colors[r][c]!=this.row_colors[r])&&++row_diff}if(row_diff<column_diff)for(c=0;c<table.col_count;++c)this.column_colors[c]=null;else for(r=0;r<table.row_count;++r)this.row_colors[r]=null}VLinesProcessor.prototype={cellNeedsLeftBorder:function(row,col,uses_multicol){return 1==this.vlines[row][col]&&0==col&&(0==this.continuous_vlines[col]||uses_multicol)},cellNeedsRightBorder:function(row,col,colspan=1,is_multicolumn=!1){return 0!=this.vlines[row][col+colspan]&&(0==this.continuous_vlines[col+colspan]||is_multicolumn)},getColumnsVLines:function(){return this.continuous_vlines.map((function(has_vline){return 1==has_vline?"|":""}))}},ColorProcessor.prototype={addCellColorCode:function(source,cell_row,cell_col,force_color){var cell=this.table.getCell(cell_row,cell_col);if(cell.isVisible()){var text_color=this.fg_colors[cell_row][cell_col];text_color&&(source="{\\color"+this.genLaTeXColor(text_color)+" "+source+"}");var is_spanned=cell.rowspan()>1||cell.colspan()>1,style=this.table_view.getCellView(cell_row,cell_col,!0).style,bg_color=style.hasBgColor()?style.getBgColor():null,column_color=this.column_colors[cell_col],row_color=this.row_colors[cell_row];return bg_color&&!((bg_color==column_color||bg_color==row_color)&&!is_spanned)?source="\\cellcolor"+this.genLaTeXColor(bg_color)+source:force_color&&(bg_color||column_color)&&(source="\\cellcolor"+this.genLaTeXColor(bg_color||column_color)+source),source}},RGBColorRegex:/rgba?\(([\d\s,]+)\)/i,genLaTeXColor:function(color){assert(color);const rgbToHexColorComponent=c=>{const res=Number(c).toString(16);return 1==res.length?"0"+res:res};let match=null;if("#"==(color=String(color)).substr(0,1)){const rgb=color.substr(1).toUpperCase();color=3==rgb.length?rgb[0]+rgb[0]+rgb[1]+rgb[1]+rgb[2]+rgb[2]:rgb}else if(null!=(match=color.match(this.RGBColorRegex))){const components=match[1].split(/\s*,\s*/);components.length>=3&&(color=rgbToHexColorComponent(components[0])+rgbToHexColorComponent(components[1])+rgbToHexColorComponent(components[2]))}return"[HTML]{"+color.toUpperCase()+"}"},addColumnColor:function(source,col_index){assert(col_index>=0&&col_index<this.table.col_count);var result=source,color=this.column_colors[col_index];return color&&(result="\n>{\\columncolor"+this.genLaTeXColor(color)+"}"+source+" "),result},addRowColor:function(source,row_index){assert(row_index>=0&&row_index<this.table.row_count);var result=source,color=this.row_colors[row_index];return color&&(result="\\rowcolor"+this.genLaTeXColor(color)+" "+source),result},areColorsUsed:function(){return this.colors_used}};var color_processor=null,vlines_processor=null;function getColumnHorizontalAlign(table_view,col_index){var count_map={left:0,center:0,right:0};return table_view.forEachCellInColumn(col_index,(function(cell_view){cell_view.cell.isVisible()&&(count_map[cell_view.style.getHorizontalAlign()]+=Math.max(0,cell_view.cell.rowspan()))})),["left","center","right"].sort((function(a,b){return-(count_map[a]-count_map[b])}))[0]}function processCell(cell,table_view,row,col,cols_horiz_align,escape_special){if(cell.colspan()<0)return null;var final_rowspan=cell.rowspan(),use_multirow=final_rowspan>1,render_contents=!0;if(1!=cell.rowspan())if(render_contents=!1,color_processor.areColorsUsed())cell.rowspan()>1?use_multirow=!1:((parent_cell=table_view.model.getCell(row,col)).rowspan()==1-cell.rowspan()&&(render_contents=!0,use_multirow=!0,final_rowspan=-parent_cell.rowspan()),row+=cell.rowspan(),cell=parent_cell);else if(cell.rowspan()>1)render_contents=!0;else{var parent_cell=table_view.model.getCell(row,col);row+=cell.rowspan(),cell=parent_cell}var align=table_view.getCellView(row,col,!0).style.getHorizontalAlign(),result="";if(render_contents){result=(result=cell.isVisible()?cell.value().toString():"").trim(),escape_special&&(result=escapeSpecialTeXSymbols(result));var is_multiline_text=-1!=result.indexOf("\n");is_multiline_text&&(result=function(str,align){var lines=str.split(/\n/g);return align=align?align[0]:"c","\\begin{tabular}[c]{@{}"+align+"@{}}"+lines.join("\\\\ ")+"\\end{tabular}"}(result,align)),result=function(source,style,is_multiline_text){var style_switches=[];return style.hasFontStyle("bold")&&(source="\\textbf{"+source+"}"),style.hasFontStyle("italic")&&(source="\\textit{"+source+"}"),!is_multiline_text&&style.hasFontStyle("underline")&&style_switches.push("\\ul"),style_switches.length>=1&&(source="{"+style_switches.join(" ")+" "+source+"}"),source}(result,table_view.getCellView(row,col).style,is_multiline_text)}var use_multicolumn=function(table_view,row,col,cols_horiz_align){var table=table_view.model;if(row<0||row>=table.row_count||col<0||col>=table.col_count)return!1;var cell=table.getCell(row,col,!0),style=table_view.getCellView(row,col).style,align=style.getHorizontalAlign();return cell.colspan()>1||vlines_processor.cellNeedsLeftBorder(row,col,!1)||vlines_processor.cellNeedsRightBorder(row,col)||align!=cols_horiz_align[col]}(table_view,row,col,cols_horiz_align),force_color=use_multicolumn;if((result=color_processor.addCellColorCode(result,row,col,force_color)).match(/^\s+$/)&&(result="~"),use_multirow&&(result="\\multirow{"+final_rowspan+"}{*}{"+result+"}"),use_multicolumn){align=align[0];const colspan=Math.max(1,cell.colspan());vlines_processor.cellNeedsLeftBorder(row,col,!0)&&(align="|"+align),vlines_processor.cellNeedsRightBorder(row,col,colspan,!0)&&(align+="|"),result="\\multicolumn{"+colspan+"}{"+align+"}{"+result+"}"}else cell.rowspan()<0&&(result="");return result}function escapeSpecialTeXSymbols(str){var re_math_dollar=/(?:(^|[^\\]))((?:\$[^\$]*?[^\\]\$)|(?:\$\$))/g,re_math_round_bracket=/(?:(^|[^\\]))(\\[(].*?[^\\]\\[)])/g,parts=(str||"").split(/(?:(^|[^\\]))((?:\$[^\$]*?[^\\]\$)|(?:\$\$)|(?:\\[(].*?[^\\]\\[)]))/g);return $.map(parts,(function(part){if(part.length>0&&(null!==part.match(re_math_dollar)||null!==part.match(re_math_round_bracket)))return part;var r=part;return r=r.replace(/(\\?[&%_#\{\}\$\[\]<>\^~]|\\(?!,))(\s|$)?/g,(function(match,p,space_or_end){var tail=space_or_end;return void 0===tail&&(tail="{}",space_or_end=""),"&"==p||"%"==p||"_"==p||"#"==p||"{"==p||"}"==p||"$"==p?"\\"+p+space_or_end:"["==p||"]"==p?"{"+p+"}"+space_or_end:"\\"==p?"\\textbackslash"+tail:"\\\\"==p?"\\textbackslash{}\\textbackslash"+tail:"<"==p?"\\textless"+tail:"\\<"==p?"\\textbackslash{}\\textless"+tail:">"==p?"\\textgreater"+tail:"\\>"==p?"\\textbackslash{}\\textgreater"+tail:"~"==p?"$\\sim$":"\\~"==p?"\\textbackslash{}$\\sim$":"^"==p?"\\textasciicircum"+tail:"\\^"==p?"\\textbackslash{}\\textasciicircum"+tail:p+space_or_end}))})).join("")}function repeat(value,times){var out=[];if("function"==typeof value)for(var i=0;i<times;++i)out.push(value());else for(i=0;i<times;++i)out.push(value);return out}function getMultiColCellWidth(cell,col_index,col_widths){for(var w=col_widths[col_index],j=1;j<cell.colspan();++j)w+=col_widths[col_index+j];return w}var SEP_WIDTH=3;function calcColumnsWidth(table_model,rows_str,ignored_rows){let col_widths=repeat(0,table_model.col_count),per_row_col_widths=[];ignored_rows=ignored_rows||[];for(let r=0;r<table_model.row_count;++r){let row_cells_width=repeat(0,table_model.col_count);if(per_row_col_widths.push(row_cells_width),-1!=ignored_rows.indexOf(r))continue;let row_strings=rows_str[r],cell_index=0;table_model.forEachCellInRow(r,(function(cell,c){const span=cell.colspan();1==span&&(row_cells_width[c]=row_strings[cell_index].length),span>=1&&++cell_index}));for(let j=0;j<row_cells_width.length;++j)col_widths[j]=Math.max(col_widths[j],row_cells_width[j])}for(let r=0;r<table_model.row_count;++r){if(-1!=ignored_rows.indexOf(r))continue;let cell_index=0;table_model.forEachCellInRow(r,(function(cell,c){const span=cell.colspan();if(span>1){var cell_str=rows_str[r][cell_index];[col_widths,per_row_col_widths[r]].forEach((function(widths){var delta=cell_str.length-getMultiColCellWidth(cell,c,widths);if((delta-=(span-1)*SEP_WIDTH)>0)for(var div=Math.floor(delta/span),rem=delta%span,i=0;i<span;++i)widths[c+i]+=div,rem>0&&(widths[c+i]+=1,rem-=1)}))}span>=1&&cell_index++}))}return{col_widths,per_row_col_widths}}const genArithmeticProgression=(beg,end)=>{let result=[];for(let i=beg;i<end;++i)result.push(i);return result},calcSum=seq=>seq.reduce(((partial_sum,a)=>partial_sum+a),0);const appendSpacesToLength=(str,len)=>str+" ".repeat(Math.max(0,len-str.length));function getHorizontalLinesDesc(lines,use_booktabs,index,row_count){if(-1==lines.indexOf(!1))return use_booktabs?0==index?" \\toprule":index==row_count?" \\bottomrule":" \\midrule":" \\hline";for(var result="",start=0,in_line=!1,rule=use_booktabs?"\\cmidrule":"\\cline",trim_rule="",i=0;i<lines.length;++i)!in_line&&lines[i]?(start=i,in_line=!0,use_booktabs&&start>0&&(trim_rule+="l")):in_line&&!lines[i]&&(use_booktabs&&i<lines.length&&(trim_rule="("+(trim_rule+="r")+")"),result+=" "+rule+trim_rule+"{"+(start+1)+"-"+i+"}",in_line=!1,trim_rule="");return in_line&&(use_booktabs&&(trim_rule="("+trim_rule+")"),result+=" "+rule+trim_rule+"{"+(start+1)+"-"+lines.length+"} "),result}return function(table_view,use_booktabs,escape_special,compress_whitespace,compress_and_align,extra_options){const has_export_option=option_id=>-1!=extra_options.indexOf(option_id);use_booktabs=use_booktabs||!1,escape_special=escape_special||!1,compress_whitespace=compress_whitespace||!1,extra_options=extra_options||[],compress_and_align=compress_and_align||!1;var rows=[],model=table_view.model,hlines=[],non_empty_hlines_count=0,bottom_lines_last=[],cols_horiz_align=function(table_view){for(var aligns=[],i=0,n=table_view.model.col_count;i<n;++i)aligns.push(getColumnHorizontalAlign(table_view,i));return aligns}(table_view);color_processor=new ColorProcessor(table_view),vlines_processor=new VLinesProcessor(table_view);for(var i=0;i<model.row_count;++i){var row=[],bottom_lines=[],is_last_row=i==model.row_count-1;model.forEachCellInRow(i,(function(cell,col_index){var res=processCell(cell,table_view,i,col_index,cols_horiz_align,escape_special);null!=res&&row.push(res),bottom_lines.push(table_view.hasBorder(i,col_index,"top")),is_last_row&&bottom_lines_last.push(table_view.hasBorder(i,col_index,"bottom"))})),rows.push(row);var hline=getHorizontalLinesDesc(bottom_lines,use_booktabs,i,model.row_count);hlines.push(hline),hline.length>0&&++non_empty_hlines_count,is_last_row&&(hline=getHorizontalLinesDesc(bottom_lines_last,use_booktabs,i+1,model.row_count),hlines.push(hline))}var columns_align=function(table_view,cols_horiz_align,color_processor){var spec=[],vlines=vlines_processor.getColumnsVLines();return cols_horiz_align.forEach((function(align,i){spec.push(vlines[i]),spec.push(color_processor.addColumnColor(align[0],i))})),spec.push(vlines[vlines.length-1]),spec.join("")}(0,cols_horiz_align,color_processor),tex_rows=[];has_export_option(LaTeXExportOptions.LANDSCAPE_MODE)&&tex_rows.push("\\begin{landscape}");const is_horizontally_centered=has_export_option(LaTeXExportOptions.CENTERING),is_long_table=has_export_option(LaTeXExportOptions.SPLIT_LONG_TABLE),scale_table=!is_long_table&&(has_export_option(LaTeXExportOptions.SCALE_TABLE)||has_export_option(LaTeXExportOptions.SCALE_TABLE_COLUMN)),is_caption_below=has_export_option(LaTeXExportOptions.CAPTION_BELOW),is_caption_above=has_export_option(LaTeXExportOptions.CAPTION_ABOVE),is_repeat_header=is_long_table&&has_export_option(LaTeXExportOptions.LONG_TABLE_REPEAT_HEADER),is_continuation_header=is_long_table&&has_export_option(LaTeXExportOptions.LONG_TABLE_CONTINUED_HEADER);if(is_long_table||(tex_rows.push("\\begin{table}[]"),is_horizontally_centered&&tex_rows.push("\\centering"),is_caption_above&&(tex_rows=tex_rows.concat(get_caption_and_label(table_view,escape_special)))),use_booktabs&&(columns_align="@{}"+columns_align+"@{}"),scale_table){const scale_cmd=has_export_option(LaTeXExportOptions.SCALE_TABLE_COLUMN)?"\\columnwidth":"\\textwidth";tex_rows.push(`\\resizebox{${scale_cmd}}{!}{%`)}if(is_long_table){var long_table_begin="\\begin{longtable}";is_horizontally_centered&&(long_table_begin+="[c]"),long_table_begin+="{"+columns_align+"}",tex_rows.push(long_table_begin),is_caption_above&&(tex_rows=tex_rows.concat(get_caption_and_label_for_longtable(table_view,escape_special)))}else tex_rows.push("\\begin{tabular}{"+columns_align+"}");var table_body_rows=[],table_header_rows=[],table_header_rowspan=function(table_view){let rowspan=1;return table_view.forEachCellInRow(0,(function(cell,col_index){var cell_view=table_view.getCellView(0,col_index,!0);rowspan=Math.max(rowspan,cell_view.cell.rowspan())})),Math.min(3,rowspan)}(table_view);if(hlines[0].length>0&&table_header_rows.push($.trim(hlines[0])),(!compress_whitespace||compress_and_align)&&(rows=function(rows_str,table_model,use_smart_sizing){let getCellWidth=null;if(use_smart_sizing){const{per_row_col_widths}=calcColumnsWidth(table_model,rows_str),{narrow_rows,wide_rows}=function(per_row_col_widths){const row_count=per_row_col_widths.length;if(row_count<4)return{narrow_rows:genArithmeticProgression(0,row_count),wide_rows:[]};const row_widths=per_row_col_widths.map(calcSum);if(Math.max(...row_widths)<80)return{narrow_rows:genArithmeticProgression(0,row_count),wide_rows:[]};let widths_sorted=row_widths.slice(0);widths_sorted.sort(((a,b)=>a-b));const max_width=widths_sorted[row_count-1];let pivot_index=row_count-1,pivot_cost=row_count*max_width*max_width;for(let i=row_count-2;i>=0;--i){const w=widths_sorted[i],cost=(i+1)*w*w+(row_count-(i+1))*max_width*max_width;if(!(cost<pivot_cost))break;pivot_index=i,pivot_cost=cost}const pivot_row_width=widths_sorted[pivot_index];let narrow_rows=[],wide_rows=[];for(let i=0;i<row_widths.length;++i)row_widths[i]<=pivot_row_width?narrow_rows.push(i):wide_rows.push(i);return{narrow_rows,wide_rows}}(per_row_col_widths),narrow_col_widths=calcColumnsWidth(table_model,rows_str,wide_rows).col_widths,wide_col_widths=calcColumnsWidth(table_model,rows_str,narrow_rows).col_widths;getCellWidth=(row,col,cell)=>getMultiColCellWidth(cell,col,-1!==wide_rows.indexOf(row)?wide_col_widths:narrow_col_widths)+Math.max(0,cell.colspan()-1)*SEP_WIDTH}else{const{col_widths}=calcColumnsWidth(table_model,rows_str);getCellWidth=(_,col,cell)=>getMultiColCellWidth(cell,col,col_widths)+Math.max(0,cell.colspan()-1)*SEP_WIDTH}return rows_str.map(((row_str,row_index)=>{let cell_index=0,out_row=[];return table_model.forEachCellInRow(row_index,((cell,col_index)=>{if(cell.colspan()>=1){const width=getCellWidth(row_index,col_index,cell);out_row.push(appendSpacesToLength(row_str[cell_index],width)),++cell_index}})),out_row}))}(rows,model,compress_and_align)),rows.forEach((function(row,row_index){let target=row_index<table_header_rowspan?table_header_rows:table_body_rows;let t=((cells_str,split_above_width)=>{split_above_width|=0;const glued=cells_str.join(" & ");return split_above_width&&glued.length>split_above_width?cells_str.map(((str,i)=>{const trimmed=str.trim();return 0==i?trimmed:"  "+trimmed})).join(" &\n"):glued})(row,compress_and_align?170:0);(row_index+1<model.row_count||0!=$.trim(hlines[row_index+1]).length)&&(t+=" \\\\");let rc=color_processor.addRowColor("",row_index);rc.length>0&&target.push(rc),t+=hlines[row_index+1],target.push(t)})),is_long_table){tex_rows=tex_rows.concat(table_header_rows),is_continuation_header?(tex_rows.push("\\endfirsthead"),tex_rows.push("%"),tex_rows.push("\\multicolumn{"+model.col_count+"}{c}%"),tex_rows.push("{{\\bfseries Table \\thetable\\ continued from previous page}} \\\\"),is_repeat_header&&(tex_rows=tex_rows.concat(table_header_rows))):is_repeat_header||(tex_rows.push("\\endfirsthead"),tex_rows.push("%")),tex_rows.push("\\endhead"),tex_rows.push("%");var bottom_rule=getHorizontalLinesDesc(bottom_lines_last,use_booktabs,model.row_count,model.row_count);!(2*non_empty_hlines_count>model.row_count)&&bottom_rule.length>0&&(tex_rows.push(bottom_rule.trim()),tex_rows.push("\\endfoot"),tex_rows.push("%"),tex_rows.push("\\endlastfoot"),tex_rows.push("%")),tex_rows=tex_rows.concat(table_body_rows),is_caption_below&&(tex_rows=tex_rows.concat(get_caption_and_label_for_longtable(table_view,escape_special))),tex_rows.push("\\end{longtable}")}else(tex_rows=(tex_rows=tex_rows.concat(table_header_rows)).concat(table_body_rows)).push("\\end{tabular}"),scale_table&&(tex_rows[tex_rows.length-1]+="%",tex_rows.push("}")),is_caption_below&&(tex_rows=tex_rows.concat(get_caption_and_label(table_view,escape_special))),tex_rows.push("\\end{table}");has_export_option(LaTeXExportOptions.LANDSCAPE_MODE)&&tex_rows.push("\\end{landscape}");var result=tex_rows.join("\n"),required_packages=[];if(use_booktabs&&required_packages.push("% \\usepackage{booktabs}"),-1!=result.search("\\multirow")&&required_packages.push("% \\usepackage{multirow}"),scale_table&&required_packages.push("% \\usepackage{graphicx}"),color_processor.areColorsUsed()&&(required_packages.push("% \\usepackage[table,xcdraw]{xcolor}"),required_packages.push("% Beamer presentation requires \\usepackage{colortbl} instead of \\usepackage[table,xcdraw]{xcolor}")),-1!=result.search("\\ul ")&&(required_packages.push("% \\usepackage[normalem]{ulem}"),required_packages.push("% \\useunder{\\uline}{\\ul}{}")),has_export_option(LaTeXExportOptions.LANDSCAPE_MODE)&&required_packages.push("% \\usepackage{lscape}"),is_long_table&&(required_packages.push("% \\usepackage{longtable}"),required_packages.push("% Note: It may be necessary to compile the document several times to get a multi-page table to line up properly")),required_packages.length>0){result="% Please add the following required packages to your document preamble:\n"+required_packages.join("\n")+"\n"+result}return is_long_table&&use_booktabs&&(result=result.replace(/\\\\ \\(midrule|cmidrule|bottomrule|toprule)/g,"\\\\* \\$1")),result}}(),TextExport=function(){"use strict";const BorderSymbols={ASCII:{EMPTY:" ",TOP_LEFT:"+",TOP_MIDDLE:"+",TOP_RIGHT:"+",MIDDLE:"+",MIDDLE_RIGHT:"+",MIDDLE_LEFT:"+",HORIZONTAL:"-",HORIZONTAL_HEADER:"-",VERTICAL:"|",BOTTOM_LEFT:"+",BOTTOM_MIDDLE:"+",BOTTOM_RIGHT:"+"},REST:{EMPTY:" ",TOP_LEFT:"+",TOP_MIDDLE:"+",TOP_RIGHT:"+",MIDDLE:"+",MIDDLE_RIGHT:"+",MIDDLE_LEFT:"+",HORIZONTAL:"-",HORIZONTAL_HEADER:"=",VERTICAL:"|",BOTTOM_LEFT:"+",BOTTOM_MIDDLE:"+",BOTTOM_RIGHT:"+"},Unicode:{EMPTY:" ",TOP_LEFT:"",TOP_MIDDLE:"",TOP_RIGHT:"",MIDDLE:"",MIDDLE_RIGHT:"",MIDDLE_LEFT:"",HORIZONTAL:"",HORIZONTAL_HEADER:"",VERTICAL:"",BOTTOM_LEFT:"",BOTTOM_MIDDLE:"",BOTTOM_RIGHT:""}};const combineCornerSymbols=(conv=null,cs=null,function(corner_symbols,old_symbol,new_symbol){return cs!==corner_symbols&&function(corner_symbols){(conv={})[(cs=corner_symbols).TOP_RIGHT]={},conv[cs.TOP_RIGHT][cs.TOP_LEFT]=cs.TOP_MIDDLE,conv[cs.BOTTOM_LEFT]={},conv[cs.BOTTOM_LEFT][cs.TOP_LEFT]=cs.MIDDLE_LEFT,conv[cs.BOTTOM_LEFT][cs.BOTTOM_RIGHT]=cs.BOTTOM_MIDDLE,conv[cs.BOTTOM_LEFT][cs.VERTICAL]=cs.MIDDLE_LEFT,conv[cs.BOTTOM_RIGHT]={},conv[cs.BOTTOM_RIGHT][cs.TOP_RIGHT]=cs.MIDDLE_RIGHT,conv[cs.BOTTOM_RIGHT][cs.BOTTOM_LEFT]=cs.BOTTOM_MIDDLE,conv[cs.BOTTOM_RIGHT][cs.VERTICAL]=cs.MIDDLE_RIGHT,conv[cs.BOTTOM_MIDDLE]={},conv[cs.BOTTOM_MIDDLE][cs.TOP_LEFT]=cs.MIDDLE,conv[cs.BOTTOM_MIDDLE][cs.TOP_RIGHT]=cs.MIDDLE,conv[cs.MIDDLE_RIGHT]={},conv[cs.MIDDLE_RIGHT][cs.TOP_LEFT]=cs.MIDDLE,conv[cs.VERTICAL]={},conv[cs.VERTICAL][cs.TOP_LEFT]=cs.MIDDLE_RIGHT,conv[cs.VERTICAL][cs.BOTTOM_LEFT]=cs.MIDDLE_LEFT,conv[cs.VERTICAL][cs.BOTTOM_RIGHT]=cs.MIDDLE_RIGHT}(corner_symbols),old_symbol==corner_symbols.EMPTY?new_symbol:conv.hasOwnProperty(old_symbol)&&conv[old_symbol][new_symbol]||old_symbol});var conv,cs;function getMulticolCellWidth(cell,col_index,col_widths){for(var w=col_widths[col_index],j=1;j<cell.colspan();++j)w+=col_widths[col_index+j];return w+=cell.colspan()-1}function rowToLines(table,row_index,col_widths,row_heights,border_symbols,corner_symbols,table_header_rowspan){const line_count=row_heights[row_index]+1,lines=[];for(let i=0;i<line_count;++i){const row=repeat("",col_widths.length);lines.push(row)}return table.forEachCellInRow(row_index,(function(cell,cell_index){let put_separator_line=!1;const row_span=cell.rowspan(),col_span=cell.colspan();if(cell.isVisible())put_separator_line=1==row_span,getCellLines(cell).forEach((function(part,j){j>=line_count||(lines[j][cell_index]=part)}));else if(col_span>0&&row_span<0){const top_cell=table.getCell(row_index,cell_index),cell_lines=getCellLines(top_cell);let shift=0;for(let j=0;j<-row_span;++j)shift+=row_heights[row_index-(j+1)]+1;const end=Math.min(cell_lines.length,shift+line_count);for(let j=shift;j<end;++j){const part=cell_lines[j];lines[j-shift][cell_index]=part}top_cell.rowspan()==1-row_span&&(put_separator_line=!0)}if(put_separator_line){const horizontal_border_symbol=row_index+Math.max(row_span,1)==table_header_rowspan?border_symbols.HORIZONTAL_HEADER:border_symbols.HORIZONTAL;let sep="";for(let j=0;j<col_span;++j){if(j>0){let symbol=corner_symbols[row_index+1][cell_index+j];" "==symbol&&(symbol=horizontal_border_symbol),sep+=symbol}sep+=repeat(horizontal_border_symbol,col_widths[cell_index+j]).join("")}lines[line_count-1][cell_index]=sep}})),lines}function getCellLines(cell){var str=cell.value().toString();str=str.replace(/&nbsp;/gi," ").replace(/\n$/,"");var lines=[];return str.split("\n").forEach((function(line){lines.push(" "+line+" ")})),lines}function getCellLineCount(cell){return getCellLines(cell).length}function getCellWidth(cell){var w=0;return getCellLines(cell).forEach((function(line){w=Math.max(w,wcwidth(line))})),w}function repeat(value,times){for(var out=[],i=0;i<times;++i)out.push(value);return out}function alignText(text,width,align){var str,len,w;return"left"==align?(len=width,(w=wcwidth(str=text))<len&&(str+=repeat(" ",len-w).join("")),text=str):"right"==align?text=function(str,len){var w=wcwidth(str);return w<len&&(str=repeat(" ",len-w).join("")+str),str}(text,width):"center"==align&&(text=function(str,len){var diff=len-wcwidth(str);if(diff>0){var left=Math.floor(diff/2)+diff%2,right=Math.floor(diff/2);str=repeat(" ",left).join("")+str+repeat(" ",right).join("")}return str}(text,width)),text}return function(table_view,options){var model=table_view.model,col_widths=function(model){for(var col_widths=repeat(0,model.col_count),r=0;r<model.row_count;++r)model.forEachCellInRow(r,(function(cell,c){if(1==cell.colspan()){var w=getCellWidth(cell);col_widths[c]=Math.max(col_widths[c],w)}}));for(r=0;r<model.row_count;++r)model.forEachCellInRow(r,(function(cell,c){if(!(cell.colspan()<=1)){var delta=getCellWidth(cell)-getMulticolCellWidth(cell,c,col_widths);if(delta>0)for(var div=Math.floor(delta/cell.colspan()),rem=delta%cell.colspan(),i=0;i<cell.colspan();++i)col_widths[c+i]+=div,rem>0&&(col_widths[c+i]+=1,rem-=1)}}));return col_widths}(model),row_heights=function(table){for(var heights=[],r=0;r<table.row_count;++r){var h=0;table.forEachCellInRow(r,(function(cell){1==cell.rowspan()&&(h=Math.max(h,getCellLineCount(cell)))})),heights.push(h)}for(r=0;r<table.row_count;++r)table.forEachCellInRow(r,(function(cell){if(!(cell.rowspan()<=1)){for(var h=getCellLineCount(cell),sum=0,i=0;i<cell.rowspan();++i)sum+=heights[r+i];var delta=h-(sum+=cell.rowspan()-1);if(delta>0){var div=Math.floor(delta/cell.rowspan()),rem=delta%cell.rowspan();for(i=0;i<cell.rowspan();++i)heights[r+i]+=div,rem>0&&(heights[r+i]+=1,rem-=1)}}}));return heights}(model),final_lines=[];const use_unicode_border_symbols=options.use_unicode_border_symbols||!1,border_symbols=options.use_rest_syntax||!1?BorderSymbols.REST:use_unicode_border_symbols?BorderSymbols.Unicode:BorderSymbols.ASCII;var corner_symbols=function(model,table_view,border_symbols){for(var bs=border_symbols,symbols=[],r=0;r<model.row_count+1;++r)symbols.push(repeat(bs.EMPTY,model.col_count+1));for(r=0;r<model.row_count;++r)for(var c=0;c<model.col_count;++c){var cell=model.getCell(r,c,!0),row_span=cell.rowspan(),col_span=cell.colspan();if(!(col_span<1||row_span<1)){for(var i=1;i<row_span;++i)symbols[r+i][c]=combineCornerSymbols(border_symbols,symbols[r+i][c],bs.VERTICAL),symbols[r+i][c+col_span]=combineCornerSymbols(border_symbols,symbols[r+i][c+col_span],bs.VERTICAL);symbols[r][c]=combineCornerSymbols(border_symbols,symbols[r][c],bs.TOP_LEFT),symbols[r][c+col_span]=combineCornerSymbols(border_symbols,symbols[r][c+col_span],bs.TOP_RIGHT),symbols[r+row_span][c]=combineCornerSymbols(border_symbols,symbols[r+row_span][c],bs.BOTTOM_LEFT),symbols[r+row_span][c+col_span]=combineCornerSymbols(border_symbols,symbols[r+row_span][c+col_span],bs.BOTTOM_RIGHT)}}return symbols}(model,0,border_symbols);const top_border_parts=[];model.forEachCellInRow(0,(function(cell,i){if(!(cell.colspan()<1)){var w=getMulticolCellWidth(cell,i,col_widths);top_border_parts.push(repeat(border_symbols.HORIZONTAL,w).join(""))}}));const header_rowspan=model.getHeaderRowspan(),top_border=border_symbols.TOP_LEFT+top_border_parts.join(border_symbols.TOP_MIDDLE)+border_symbols.TOP_RIGHT;final_lines.push(top_border);for(var rows_lines=[],r=0;r<model.row_count;++r){const lines=rowToLines(model,r,col_widths,row_heights,border_symbols,corner_symbols,header_rowspan);rows_lines.push(lines)}for(function(model,table_view,rows_lines){for(var r=0;r<model.row_count;++r)for(var c=0;c<model.col_count;++c){var cell=model.getCell(r,c,!0),row_span=cell.rowspan();if(!(cell.colspan()<1||row_span<1)){var vertical_align=table_view.getCellView(r,c).style.getVerticalAlign();if("top"!=vertical_align){for(var lines=[],i=0;i<row_span;++i)for(var cell_lines=rows_lines[r+i],j=0;j<cell_lines.length;++j)lines.push(cell_lines[j][c]);for(var lengths_sum=lines.length-1,tail=lines.pop();lines.length>0&&""==lines[lines.length-1];)lines.pop();for(;lines.length>0&&""==lines[0];)lines.shift();if("bottom"==vertical_align)(lines=repeat("",lengths_sum-lines.length).concat(lines)).push(tail);else if("middle"==vertical_align){var to_fill=lengths_sum-lines.length,fill_above=Math.floor(to_fill/2),fill_below=Math.ceil(to_fill/2),prefix=repeat("",fill_above),suffix=repeat("",fill_below);(lines=prefix.concat(lines).concat(suffix)).push(tail)}i=0;for(var k=0;i<row_span;++i)for(cell_lines=rows_lines[r+i],j=0;j<cell_lines.length&&k<lines.length;++j,++k)cell_lines[j][c]=lines[k]}}}}(model,table_view,rows_lines),r=0;r<model.row_count;++r){var lines=rows_lines[r];lines.forEach((function(line,line_index){var tokens=[];line.forEach((function(token,i){var cell=model.getCell(r,i,!0);if(!(cell.colspan()<1)){var width=getMulticolCellWidth(cell,i,col_widths),style=table_view.getCellView(r,i).style;tokens.push(alignText(token,width,style.getHorizontalAlign()))}})),tokens.push();var is_border_line=line_index>=lines.length-1,cells_sep=is_border_line?border_symbols.MIDDLE:border_symbols.VERTICAL,glued_line="";if(is_border_line){for(var c=0;c<model.col_count;){var cell=model.getCell(r,c,!0);glued_line+=corner_symbols[r+1][c]+tokens.shift(),c+=cell.colspan()}glued_line+=corner_symbols[r+1][model.col_count]}else glued_line=border_symbols.VERTICAL+tokens.join(cells_sep)+border_symbols.VERTICAL;final_lines.push(glued_line)}))}return final_lines.join("\n")}}();var MarkdownExport=function(){"use strict";function getCellValueAsString(cell){return cell.value().toString().replace(/&nbsp;/gi," ").replace(/\n$/,"").replace(/^\|/,"\\|").replace(/([^\\])(?=\|)/g,"$&\\")}function newlinesAsSpaceDecorator(fn){return function(arg){return fn(arg).replace(/\n/g," ")}}var cellToString=newlinesAsSpaceDecorator(getCellValueAsString);function getCellLines(cell){return cellToString(cell).split("\n").map((function(line){return" "+line+" "}))}function getMulticolCellWidth(cell,col_index,col_widths){let w=col_widths[col_index];for(let j=1;j<cell.colspan();++j)w+=col_widths[col_index+j];return w+=cell.colspan()-1,w}function rowToLines(table,row_index,col_widths,row_heights){var line_count=row_heights[row_index];0==row_index&&++line_count;for(var lines=[],i=0;i<line_count;++i){var row=repeat("",col_widths.length);lines.push(row)}return table.forEachCellInRow(row_index,(function(cell,i){var put_separator=0==row_index;if(cell.isVisible())getCellLines(cell).forEach((function(part,j){j>=line_count||(lines[j][i]=part)}));else if(cell.colspan()>0&&cell.rowspan()<0){for(var cell_lines=getCellLines(table.getCell(row_index,i)),shift=0,j=0;j<-cell.rowspan();++j)shift+=row_heights[row_index-(j+1)]+1;var end=Math.min(cell_lines.length,shift+line_count);for(j=shift;j<end;++j){var part=cell_lines[j];lines[j-shift][i]=part}}if(put_separator){var sep_len=0;for(j=0;j<cell.colspan();++j)sep_len+=col_widths[i+j];sep_len+=cell.colspan()-1;var sep=repeat("-",sep_len=Math.max(3,sep_len)).join("");lines[line_count-1][i]=sep}})),lines}function getCellLineCount(cell){return getCellLines(cell).length}function getCellWidth(cell){var w=0;return getCellLines(cell).forEach((function(line){w=Math.max(w,wcwidth(line))})),w}function repeat(value,times){for(var out=[],i=0;i<times;++i)out.push(value);return out}function alignText(text,width,align,add_markdown_syntax,compact_mode){var str,len,w;return"left"==align?(len=width,(w=wcwidth(str=text))<len&&(str+=repeat(" ",len-w).join("")),text=str):"right"==align?text=function(str,len){var w=wcwidth(str);return w<len&&(str=repeat(" ",len-w).join("")+str),str}(text,width):"center"==align&&(text=function(str,len){var diff=len-wcwidth(str);if(diff>0){var left=Math.floor(diff/2)+diff%2,right=Math.floor(diff/2);str=repeat(" ",left).join("")+str+repeat(" ",right).join("")}return str}(text,width)),1==add_markdown_syntax&&(text="right"==align?compact_mode?"---:":text.substring(0,text.length-1)+":":"center"==align?compact_mode?":---:":":"+text.substring(1,text.length-1)+":":compact_mode?"---":text),text}return function(table_view,use_elastictabs,compact_mode,newlines_as_br){var fn;cellToString=newlines_as_br?(fn=getCellValueAsString,function(arg){return fn(arg).replace(/\n/g,"<br>")}):newlinesAsSpaceDecorator(getCellValueAsString);const model=table_view.model,col_widths=function(model){for(var col_widths=repeat(0,model.col_count),r=0;r<model.row_count;++r)model.forEachCellInRow(r,(function(cell,c){if(1==cell.colspan()){var w=getCellWidth(cell);col_widths[c]=Math.max(col_widths[c],w)}}));for(r=0;r<model.row_count;++r)model.forEachCellInRow(r,(function(cell,c){if(!(cell.colspan()<=1)){var delta=getCellWidth(cell)-getMulticolCellWidth(cell,c,col_widths);if(delta>0)for(var div=Math.floor(delta/cell.colspan()),rem=delta%cell.colspan(),i=0;i<cell.colspan();++i)col_widths[c+i]+=div,rem>0&&(col_widths[c+i]+=1,rem-=1)}}));for(var i=0;i<col_widths.length;++i)col_widths[i]=Math.max(col_widths[i],3);return col_widths}(model),row_heights=function(table){for(var heights=[],r=0;r<table.row_count;++r){var h=0;table.forEachCellInRow(r,(function(cell){cell.rowspan()>1||(h=Math.max(h,getCellLineCount(cell)))})),heights.push(h)}for(r=0;r<table.row_count;++r)table.forEachCellInRow(r,(function(cell){if(!(cell.rowspan()<=1)){for(var h=getCellLineCount(cell),sum=0,i=0;i<cell.rowspan();++i)sum+=heights[r+i];var delta=h-(sum+=cell.rowspan()-1);if(delta>0){var div=Math.floor(delta/cell.rowspan()),rem=delta%cell.rowspan();for(i=0;i<cell.rowspan();++i)heights[r+i]+=div,rem>0&&(heights[r+i]+=1,rem-=1)}}}));return heights}(model),final_lines=[];for(let r=0;r<model.row_count;++r){rowToLines(model,r,col_widths,row_heights).forEach((function(line,line_index){const tokens=[],is_align_row=0==r&&1==line_index;line.forEach((function(token,i){const cell=model.getCell(r,i,!0);if(cell.colspan()<1)return;let width=getMulticolCellWidth(cell,i,col_widths);1==compact_mode&&(width=getCellValueAsString(cell).length+1);const style=table_view.getCellView(r,i).style;tokens.push(alignText(token,width,style.getHorizontalAlign(),is_align_row,compact_mode))})),tokens.push("");const glue=use_elastictabs?"\t|":"|";final_lines.push("|"+tokens.join(glue))}))}return final_lines.join("\n")}}();const MediaWikiExport=function(){const DefaultCellStyle={"font-style":"normal","font-weight":"normal","text-align":"left"};function extractCommonPart(dictionaries,default_attr){if(!dictionaries||0==dictionaries.length)return{};let per_key_freq_map={},most_freq={},common=Object.assign({},default_attr);Object.assign(common,dictionaries[0]);for(let i=0;i<dictionaries.length;++i){const dict=dictionaries[i];for(let key in default_attr)dict.hasOwnProperty(key)||(dict[key]=default_attr[key]);for(let key in common)dict.hasOwnProperty(key)||delete common[key];for(let key in dict)if(dict.hasOwnProperty(key)){const value=dict[key];if(per_key_freq_map.hasOwnProperty(key)){let freq=per_key_freq_map[key];freq.hasOwnProperty(value)?freq[value]+=1:freq[value]=1,freq[value]>freq[most_freq[key]]&&(most_freq[key]=value)}else per_key_freq_map[key]={[value]:1},most_freq[key]=value}}for(let key in common){const most_freq_value=most_freq[key];for(let i=0;i<dictionaries.length;++i){let dict=dictionaries[i];dict[key]==most_freq_value&&delete dict[key]}common[key]=most_freq_value}return common}function styleToStr(style_attributes){let parts=[];for(let key in style_attributes)parts.push(`${key}:${style_attributes[key]};`);if(parts.length>0){return`style="${parts.join(" ")}"`}return""}return function(table_view){return function(rows){let row_shared_styles=[],row_per_cell_styles=[];rows.forEach(((row,row_index)=>{let cell_styles=[];row.forEach(((cell,col_index)=>{cell_styles.push(function(cell){const cell_style=cell.view.style;let result={};const text_align=cell_style.getHorizontalAlign();"left"!=text_align&&(result["text-align"]=text_align);const vertical_align=cell_style.getVerticalAlign();"top"!=vertical_align&&(result["vertical-align"]=vertical_align);return[cell_style.fontStyleToCSS(),cell_style.colorsToCSS()].forEach((style=>{for(let key in style)if(style.hasOwnProperty(key)){const value=style[key].replace(/"/g,"'");result[key]=value}})),result}(cell))}));const row_style=extractCommonPart(cell_styles,DefaultCellStyle);row_shared_styles.push(row_style),row_per_cell_styles.push(cell_styles)}));const table_attr=['class="wikitable"'];let table_style=extractCommonPart(row_shared_styles,DefaultCellStyle);for(let key in DefaultCellStyle)table_style.hasOwnProperty(key)&&table_style[key]==DefaultCellStyle[key]&&delete table_style[key];if(table_style){const table_style_str=styleToStr(table_style);table_attr.push(table_style_str)}let rows_str=[];rows.forEach((function(row,idx){const row_style_str=styleToStr(row_shared_styles[idx]),row_sep=row_style_str?`|- ${row_style_str}`:"|-";rows_str.push(row_sep),rows_str.push(function(cells,row_index,cell_styles,single_line=!1){let lines=[];const cell_start=0==row_index?"! ":"| ";cells.forEach((function(cell,idx){cell.isVisible()&&lines.push(cell_start+function(cell,style_attr){let str=cell.value().toString();str=str.replace(/&nbsp;/g," "),str=str.replace(/\r\n|\r|\n/g,"<br />"),str=str.trim(str);let attr=[];cell.rowspan()>1&&attr.push('rowspan="'+cell.rowspan()+'"');cell.colspan()>1&&attr.push('colspan="'+cell.colspan()+'"');const style_str=styleToStr(style_attr);style_str&&attr.push(style_str);let attr_str="";attr.length>0&&(attr_str=attr.join(" ")+" | ");return attr_str+str}(cell,cell_styles[idx]))}));const sep=single_line?" || ":"\n";return lines.join(sep)}(row,idx,row_per_cell_styles[idx]))}));const table_body_str=rows_str?rows_str.join("\n"):"";return`{| ${table_attr.join(" ")}\n${table_body_str}\n|}`}(table_view.model.rows)}}();var init_latex_tables_ui=function($){"use strict";var ui,CaptionOptions=[LaTeXExportOptions.CAPTION_ABOVE,LaTeXExportOptions.CAPTION_BELOW],table_view=null,extra_options=[],get_main_ui=function(){return ui},is_caption_enabled=function(){return haystack=extra_options,CaptionOptions.some((function(v){return haystack.indexOf(v)>=0}));var haystack};function update_output(){GlobalMessageHub.trigger(GlobalEvents.STOP_EDITING_TABLE);var style=$("#latex_table_style").val(),output=LaTeXExport(table_view,"booktabs"==style,$("#escape-special-tex-symbols").is(":checked"),$("#compress-tex-whitespace").is(":checked"),$("#compress-and-align-tex-whitespace").is(":checked"),extra_options),ui=get_main_ui();ui&&ui.show_result_code(output)}function toggle_caption_ui(){ui&&(is_caption_enabled()?(ui.table_caption.set_caption(table_view.get_option("table_caption")),ui.table_caption.set_label(table_view.get_option("table_label")),ui.table_caption.show()):(table_view.set_option("table_caption",ui.table_caption.default_caption),table_view.set_option("table_label",ui.table_caption.default_label),ui.table_caption.hide()))}function init(parent_container,json_table,loaded_table){var table=new TableModel;table.insertRow([""]),table.resize(4,5),(table_view=new TableView(table,parent_container)).setEnabledFormattingOptions(["bg_color","borders","colspan","font_style","rowspan","text_color"]),function(table_view){$("#escape-special-tex-symbols").change(update_output),store_checkbox_state($("#escape-special-tex-symbols"),"tg-latex-escape-special-tex-symbols");let compress_tex_whitespace=$("#compress-tex-whitespace");compress_tex_whitespace.change(update_output),store_checkbox_state(compress_tex_whitespace,"tg-latex-compress-tex-whitespace");let compress_and_align_tex_whitespace=$("#compress-and-align-tex-whitespace");compress_and_align_tex_whitespace.change(update_output),store_checkbox_state(compress_and_align_tex_whitespace,"tg-latex-compress-and-align-tex-whitespace"),$('<button class="btn"><i class="icon-cogs"></i> Generate</button>').appendTo($("#generate_table_panel")).click(update_output),$("#latex_table_style").selectpicker(),$("#latex_table_style").change((function(){"booktabs"===$(this).val()&&(table_view.forEachCellInRow(0,(function(cell_view){cell_view.style.setBorders("tb")})),table_view.forEachCellInRow(table_view.model.row_count-1,(function(cell_view){cell_view.style.setBorders("b")}))),update_output()})),$("#show_example_btn").click((function(){!function(table_view){table_view.reset();var model=table_view.model,rows=[["Item","",""],["Animal","Description","Price ($)"],["Gnat","per gram","13.65"],["","each","0.01"],["Gnu","stuffed","92.50"],["Emu","stuffed","33.33"],["Armadillo","frozen","8.99"]];model.setRows(rows),model.mergeCells(0,0,0,1),table_view.forEachCellViewInRange((function(cv){cv.style.setHorizontalAlign("right")}),0,2,6,2),table_view.getCellView(0,0).style.setHorizontalAlign("center"),table_view.clearSelection(),table_view.forEachCellInRow(0,(function(cell_view){cell_view.style.setBorders("t")})),table_view.forEachCellInRange(1,0,1,1,(function(cell_view){cell_view.style.setBorders("t")})),table_view.forEachCellInRow(2,(function(cell_view){cell_view.style.setBorders("t")})),table_view.forEachCellInRow(6,(function(cell_view){cell_view.style.setBorders("b")}))}(table_view),update_output()}));var ignore_change=!1,long_table_options=$("#multi-page-table-options"),long_table_options_visible=!0,extra_options_select=$("#extra-options"),extra_options_storage=DB("tg-latex-extra-options");extra_options_select.selectpicker().change((function(){if(ignore_change)return!1;const selected=$(this).val()||[],diff=selected.diff(extra_options);extra_options=selected;const changed_option=diff.length>0?diff[0]:null;let refresh_required=!1;if(-1!==CaptionOptions.indexOf(changed_option)){const exclusive=selected.diff(CaptionOptions);exclusive.push(changed_option),ignore_change=!0,$(this).selectpicker("val",exclusive),ignore_change=!1,refresh_required=!0,extra_options=exclusive}extra_options_storage.put(extra_options);-1!==selected.indexOf(LaTeXExportOptions.SPLIT_LONG_TABLE)?(long_table_options_visible||(extra_options_select.append(long_table_options),long_table_options_visible=!0),changed_option==LaTeXExportOptions.SPLIT_LONG_TABLE&&(refresh_required=!0)):(long_table_options.detach(),refresh_required=!0,long_table_options_visible=!1),toggle_caption_ui(),refresh_required&&$(this).selectpicker("refresh"),update_output()}));var loaded_options=extra_options_storage.get();$("#extra-options").selectpicker("val",loaded_options),$("#extra-options").selectpicker("refresh")}(table_view),(ui=new MainUI(table_view)).set_editor_name("LaTeX"),table_view.on("onload",(function(){ui.table_caption.set_caption(table_view.get_or_set_option("table_caption",ui.table_caption.default_caption)),ui.table_caption.set_label(table_view.get_or_set_option("table_label",ui.table_caption.default_label))})),ui.table_caption.on_caption_change=function(new_caption){table_view.set_option("table_caption",new_caption)},ui.table_caption.on_label_change=function(new_label){table_view.set_option("table_label",new_label)},toggle_caption_ui(),json_table&&Main.init_table_from_json(table_view,json_table),loaded_table&&(loaded_table=Utils.normalize_json_string(loaded_table),table_view.load(jQuery.parseJSON(loaded_table))),update_output(),document.getElementById("import_latex_confirm").onclick=import_latex}function import_latex(ev){ev.stopPropagation(),ev.preventDefault();const value=document.getElementById("import_latex_pasted").value;document.getElementById("import_latex_dlg_close").click(),LaTeXImport(value,table_view)}return function(json_table,loaded_table){init("#edited_table_container",json_table,loaded_table)}}($),html_tables_ui=function($){"use strict";function init(parent_container,json_table,loaded_table){var table=new TableModel;table.insertRow([""]);var tv=new TableView(table,parent_container,{column_resize_enabled:!0});tv.setEnabledFormattingOptions(["bg_color","border_color","borders","colspan","fixed_layout","font_style","rowspan","text_color","theme","vertical_alignment"]);var main_ui=new MainUI(tv,{show_border_color_picker:!0}),extra_options=[];function update_output(){GlobalMessageHub.trigger(GlobalEvents.STOP_EDITING_TABLE);const table_src=(compact_enabled=compact_mode.is(":checked"),HTMLExport(tv,nocss.is(":checked"),compact_enabled,compact_enabled?"":"\n",extra_options));var compact_enabled;main_ui.show_result_code(table_src),TablePreview.update(table_src)}tv.on("theme_set",(function(theme){null==theme?tv.setTheme({ColorTheme:"Default",BorderTheme:"All borders"}):main_ui.theme_selector.setTheme(theme)})),tv.theme||tv.setTheme({ColorTheme:"Default",BorderTheme:"All borders"}),$('<button class="btn"><i class="icon-cogs"></i> Generate</button>').appendTo($("#generate_table_panel")).click(update_output);var gen_opt_box=$("<div/>",{class:"tab-gen-opt-box"}).appendTo($("#generate_table_panel")),nocss=$('<input type="checkbox">');nocss.change(update_output),store_checkbox_state(nocss,"tg-html-do-not-generate-css"),$("<label/>",{class:"checkbox tab-gen-option"}).text("Do not generate CSS").append(nocss).appendTo(gen_opt_box);var compact_mode=$('<input type="checkbox">');store_checkbox_state(compact_mode,"tg-html-compact-mode"),$("<label/>",{class:"checkbox tab-gen-option"}).text("Minify output").attr("title","Useful for embedding tables into e-mails - puts styles inline & joins code into a single line").append(compact_mode).appendTo(gen_opt_box),compact_mode.change(update_output),$("#show_example_btn").click((function(){!function(table_view){table_view.reset(),table_view.setTheme({ColorTheme:"Violet",BorderTheme:"All borders","Alternate Rows/Columns Theme":"Alternate rows"});var model=table_view.model,rows=[["Results","","","","",""],["No","Competition","John","Adam","Robert","Paul"],["1","Swimming","1:30","2:05","1:15","1:41"],["2","Running","15:30","14:10","15:45","16:00"],["3","Shooting","70%","55%","90%","88%"]];model.setRows(rows),model.mergeCells(0,0,0,5),table_view.forEachCellViewInRange((function(cv){cv.style.setHorizontalAlign("right")}),2,2,4,5),table_view.getCellView(0,0).style.setHorizontalAlign("center")}(tv),update_output()})),json_table&&Main.init_table_from_json(tv,json_table),loaded_table&&(loaded_table=Utils.normalize_json_string(loaded_table),tv.load(jQuery.parseJSON(loaded_table))),$("#preview-table-btn").click((function(){TablePreview.open(),update_output()}));var extra_options_storage=DB("tg-html-extra-options");$("#extra-options").selectpicker().change((function(){var selected=$(this).val()||[];extra_options=selected,extra_options_storage.put(extra_options),update_output()}));var default_options=[HTMLExportOptions.MAKE_FIRST_ROW_A_HEADER],loaded_options=extra_options_storage.get(),initial_options=loaded_options.length>0?loaded_options:default_options;$("#extra-options").selectpicker("val",initial_options),$("#extra-options").selectpicker("refresh"),update_output()}return function(json_table,loaded_table){TableView.enableMarkupInCells(!0),init("#edited_table_container",json_table,loaded_table)}}(jQuery);const markdown_tables_ui=function($){function toggle_font_style(cell_view,style_property,style_value,style_default){const old_value=cell_view.cell.value();if(0==old_value.length)return;const bold_re=/^((?:\*\*)|(?:__))[\s\S]*?(\1$)/gm,emph_re=/^((?:\*)|(?:_))[\s\S]*?(\1$)/gm;let new_value=old_value,changed=!0,is_bold=!1,is_emph=!1,bold_chr="*",emph_chr="_";for(;changed;){for(changed=!1;bold_re.test(new_value);)bold_chr=new_value[0],new_value=new_value.substr(2,new_value.length-4),is_bold=!0,changed=!0;for(;emph_re.test(new_value);)emph_chr=new_value[0],new_value=new_value.substr(1,new_value.length-2),is_emph=!0,changed=!0}"bold"==style_value?is_bold=!is_bold:"italic"==style_value&&(is_emph=!is_emph),is_emph&&is_bold&&emph_chr===bold_chr&&(emph_chr="_",bold_chr="*"),is_emph&&(new_value=`${emph_chr}${new_value}${emph_chr}`),is_bold&&(new_value=`${bold_chr}${bold_chr}${new_value}${bold_chr}${bold_chr}`),new_value!==old_value&&cell_view.resetMarkupFromValue(new_value)}return function(json_table,loaded_table){!function(parent_container,json_table,loaded_table){TableView.enableMarkupInCells(!0),TableView.setMarkupProcessingPlugin(MarkdownMarkupProcessingPlugin),TableView.setCellFontStyleToggleHandler(toggle_font_style);var table=new TableModel;table.insertRow([""]);var tv=new TableView(table,parent_container);tv.dom.addClass("markdown-table"),tv.setEnabledFormattingOptions([]),tv.on("cell_created",(function(cv){cv.style.setBorders("lrtb")})),table.resize(5,5),table.removeRow(0);var main_ui=new MainUI(tv);$('<button class="btn"><i class="icon-cogs"></i> Generate</button>').appendTo($("#generate_table_panel")).click(generate);var gen_opt_box=$("<div/>",{class:"tab-gen-opt-box"}).appendTo($("#generate_table_panel")),use_elastic_tabs=$('<input type="checkbox">');$("<label/>",{class:"checkbox tab-gen-option"}).text("Put tabs between columns").attr("title","Useful when your external editor supports elastic tabstops").append(use_elastic_tabs).appendTo(gen_opt_box).change(generate),store_checkbox_state(use_elastic_tabs,"tg-markdown-put-tabs-between-columns");var compact_mode=$('<input type="checkbox">');$("<label/>",{class:"checkbox tab-gen-option"}).text("Compact mode").attr("title","Do not add extra spaces to align the cells").append(compact_mode).appendTo(gen_opt_box).change(generate),store_checkbox_state(compact_mode,"tg-markdown-compact-mode");var newlines_as_br=$('<input type="checkbox">');function generate(){GlobalMessageHub.trigger(GlobalEvents.STOP_EDITING_TABLE);const output=MarkdownExport(tv,use_elastic_tabs.is(":checked"),compact_mode.is(":checked"),newlines_as_br.is(":checked"));main_ui.show_result_code(output),TablePreview.is_open()&&TablePreview.update(marked(output))}$("<label/>",{class:"checkbox tab-gen-option"}).text("Line breaks as <br>").attr("title","Allows for a multiline string in a cell").append(newlines_as_br).appendTo(gen_opt_box).change(generate),store_checkbox_state(newlines_as_br,"tg-markdown-newlines-as-br"),$("#preview-table-btn").click((function(){TablePreview.set_style("\n            body {\n                font-family: -apple-system,Helvetica,Arial,sans-serif;\n                font-size: 16px;\n                line-height: 1.5;\n                word-wrap: break-word;\n                background: #F9F9F9;\n            }\n            a {\n                color: #0366d6;\n                text-decoration: none;\n            }\n            table { border-collapse: collapse;\n                    border-spacing: 0; }\n            td, th { border: 1px lightgray solid; \n                     padding: 6px 13px;}\n            code:not([class]) {\n                background-color: rgba(27,31,35,0.05);\n                border-radius: 3px;\n                font-size: 90%;\n                margin: 0;\n                padding: 0.2em 0.4em;\n            }\n            "),TablePreview.open(),generate()})),$("#show_example_btn").click((function(){!function(table_view){table_view.reset();var rows=[["Tables","Are","Cool"],["col 1 is","left-aligned","$1600"],["col 2 is","centered","$12"],["col 3 is","right-aligned","$1"]];table_view.model.setRows(rows),table_view.forEachCellViewInRange((function(cv){cv.style.setHorizontalAlign("center")}),0,1,3,1),table_view.forEachCellViewInRange((function(cv){cv.style.setHorizontalAlign("right")}),0,2,3,2)}(tv),generate()})),json_table&&Main.init_table_from_json(tv,json_table),loaded_table&&(loaded_table=Utils.normalize_json_string(loaded_table),tv.load(jQuery.parseJSON(loaded_table))),generate()}("#edited_table_container",json_table,loaded_table)}}(jQuery);setTimeout((function(){!function(){const btn_wrap=document.getElementById("social-buttons__facebook");if(!btn_wrap)return;const url="href"in btn_wrap.dataset==1?btn_wrap.dataset.href:window.location.href.replace(window.location.hash,"");let frame=document.createElement("iframe");frame.src="https://www.facebook.com/plugins/like.php?href="+url+"&width=100&layout=button_count&action=like&size=small&share=false&height=21&appId",frame.style.border="none",frame.style.overflow="hidden",frame.width=100,frame.height=21,frame.scrolling="no",frame.frameBorder=0,frame.allowTransparency=!0,frame.allow="encrypted-media",btn_wrap.appendChild(frame)}()}),750);const LaTeXImport=function(){function handleListOf(child){return child.toAST(this.args.mapping)}function handleEmptyListOf(){return[]}function handleNonemptyListOf(first,sep,rest){return[first.toAST(this.args.mapping)].concat(rest.toAST(this.args.mapping))}const defaultMapping={listOf:handleListOf,ListOf:handleListOf,emptyListOf:handleEmptyListOf,EmptyListOf:handleEmptyListOf,nonemptyListOf:handleNonemptyListOf,NonemptyListOf:handleNonemptyListOf},defaultOperation={_terminal(){return this.sourceString},_nonterminal(...children){const{ctorName}=this._node,{mapping}=this.args;if(!Object.prototype.hasOwnProperty.call(mapping,ctorName)){if(this.isLexical())return this.sourceString;const realChildren=children.filter((child=>!child.isTerminal()));if(1===realChildren.length)return realChildren[0].toAST(mapping)}if("number"==typeof mapping[ctorName])return children[mapping[ctorName]].toAST(mapping);const propMap=mapping[ctorName]||children,node={type:ctorName};for(const prop in propMap){const mappedProp=mapping[ctorName]&&mapping[ctorName][prop];"number"==typeof mappedProp?node[prop]=children[mappedProp].toAST(mapping):"string"==typeof mappedProp||"boolean"==typeof mappedProp||null===mappedProp?node[prop]=mappedProp:"object"==typeof mappedProp&&mappedProp instanceof Number?node[prop]=Number(mappedProp):"function"==typeof mappedProp?node[prop]=mappedProp.call(this,children):void 0===mappedProp&&(children[prop]&&!children[prop].isTerminal()?node[prop]=children[prop].toAST(mapping):delete node[prop])}return node},_iter(...children){return this._node.isOptional()?0===this.numChildren?null:children[0].toAST(this.args.mapping):children.map((c=>c.toAST(this.args.mapping)))}};const grammar=ohm.grammar(String.raw`
G {
    doc = piece | justRows

    piece = (space | escSpecial | (~env any))* (tabular | env | command) (~tabular any)* end

    nonSpecial = escSpecial | (~special any)

    justRows = tabularBody tabularEnd

    special = "#" | "$" | "%" | "^" | "&" | "_" | "{" | "}" | "~" | "\\"

    escSpecial = "\\" special

    command = "\\" cmdBody

    cmdBody = cmdName cmdArg* -- withArgs
            | (~letter any)

    cmdName = letter+ "*"?

    cmdArg = bracketExp<"{","}">
           | bracketExp<"[","]">
           | bracketExp<"(",")">

    escBracket = "\\]" | "\\[" | "\\{" | "\\}" | "{]}" | "{[}"

    bracketExp<l,r> = l (escBracket | cmdArg | escSpecial | tabular | command | (~r any))* r

    tabular = tabularBegin cmdArg+ tabularBody tabularEnd

    tabularBegin = "\\begin{tabular}" | "\\begin{tabularx}" | "\\begin{longtable}"
    
    tabularEnd = "\\end{tabular}" | "\\end{tabularx}" | "\\end{longtable}" | end

    tabularBody = nonemptyListOf<row, eol>

    cline = "\\cline{" (~"}" any)+ "}"

    cmidrule = "\\cmidrule" cmdArg+

    spacer = "\\noalign" cmdArg*

    extraVSpace = "[" (~"]" any)+ "]"

    rule = "\\bottomrule" | "\\toprule" | "\\midrule" 
         | "\\hline" | "\\topline" | "\\bottomline" | "\\midline" 
         | "\\addlinespace"
         | cline | cmidrule 
         | spacer | extraVSpace

    rules = space* listOf<rule, space*>

    row = rules nonemptyListOf<cell, "&">

    cell = space* ("\\&" | tabular | env | bracketExp<"{","}"> | (~(tabularEnd | eol) command) | (~(tabularEnd | eol | "&") any))*

    eol = "\\\\" | "\\\\*"

    env = envBegin envBody envEnd

    envBegin = "\\begin{" letter+ "*"? "}" cmdArg*

    envEnd = "\\end{" letter+ "*"? "}"

    envBody = (escSpecial | tabular | env | (~envEnd (command | any)))+
}
`);function findFirstChild(node,type,name=void 0){if(!node)return null;if(node.type===type&&(void 0===name||node.name===name))return node;if(node.contents){const children=Array.isArray(node.contents)?node.contents:[node.contents];for(let child of children){const result=findFirstChild(child,type,name);if(result)return result}}return null}function nodeContentsAsText(node,outProps=null){if(!node)return"";if("string"==typeof node)return node;const{contents}=node;if(!contents)return"";const children=Array.isArray(contents)?contents:[contents];let non_empty_children=0;for(let child of children)"string"==typeof child&&isWhitespace(child)||++non_empty_children;non_empty_children>1&&(outProps=null);let result=[];for(let child of children)if("string"==typeof child)result.push(child.replace(/(\s*)\n(\s*)/g,((match,p1,p2)=>p1||p2?"":" ")));else if("cmdBody_withArgs"==child.type){const args=child.contents;if("multicolumn"==child.name){if(result.push(nodeContentsAsText(args[args.length-1].contents,outProps)),args.length>=3&&args[1].contents){const colspec=args[1].contents.contents;for(let[i,ch]of colspec.entries())"|"==ch?outProps[0==i?"borderLeft":"borderRight"]=!0:"l"==ch?outProps.alignLeft=!0:"r"==ch?outProps.alignRight=!0:"c"==ch&&(outProps.alignCenter=!0)}}else if("multirow"==child.name)result.push(nodeContentsAsText(args[args.length-1].contents,outProps));else{let node_as_text=nodeContentsAsText(child,outProps);if("textbf"==child.name&&null!==outProps)outProps.textbf=!0,node_as_text=nodeContentsAsText(args[0].contents,outProps);else if("textit"==child.name&&null!==outProps)node_as_text=nodeContentsAsText(args[0].contents,outProps),outProps.textit=!0;else{node_as_text=`\\${child.name}`+node_as_text}result.push(node_as_text)}}else if("bracketExp"==child.type)if(null!==outProps){let fragments=[],props=outProps;for(let el of child.contents)if("command"==el.type&&"cmdBody"==el.contents.type&&["ul","bf","it"].includes(el.contents.contents.name)){const{name}=el.contents.contents;"ul"==name?props.underline=!0:"it"==name?props.textit=!0:"bf"==name&&(props.textbf=!0)}else if("string"==typeof el){let str=nodeContentsAsText(el);fragments.push(str),isWhitespace(str)||(props={})}else fragments.push(nodeContentsAsText(el,props));result.push(fragments.join(""))}else{const contents=child.contents?child.contents.map((c=>nodeContentsAsText(c,outProps))).join(""):"";result.push(`${child.left}${contents}${child.right}`)}else if("tabularBody"==child.type){const lines=child.contents.map(nodeContentsAsText);result.push(lines.join("\n"))}else"command"==child.type&&"cmdBody"==child.contents.type&&"string"==typeof child.contents.contents?result.push("\\"+nodeContentsAsText(child.contents)):result.push(nodeContentsAsText(child,outProps));return function(input){return input.replace(/[ \t\r]+/g," ")}(result.join(""))}function extractIntegers(str){const matches=str.match(/\d+/g);return matches?matches.map(Number):[]}function getCellSpan(cell){let colspan=1,rowspan=1;const multicol=findFirstChild(cell,"cmdBody_withArgs","multicolumn");if(multicol){const vals=extractIntegers(nodeContentsAsText(multicol.contents[0]));colspan=vals?vals[0]:colspan}const multirow=findFirstChild(cell,"cmdBody_withArgs","multirow");if(multirow){const vals=extractIntegers(nodeContentsAsText(multirow.contents[0]));rowspan=vals?vals[0]:rowspan}return[rowspan,colspan]}function rowsToTableView(rows,table_view,tabArgs=void 0){let max_columns=0;for(let row of rows){let num_columns=0;for(let cell of row.contents||[]){const[rowspan,colspan]=getCellSpan(cell);num_columns+=colspan}max_columns=Math.max(max_columns,num_columns)}const num_columns=max_columns;if(0==num_columns)return void console.error("No columns in the table");const table=table_view.model;if(table.resize(rows.length,num_columns),Array.isArray(tabArgs)&&tabArgs.length>=1){const spec=function(spec){const parseBraces=function(stack){if(!stack)return"";const left=stack.pop(),right={"{":"}","(":")","[":"]"}[left];let tok=left;for(;stack;){const ch=stack.pop();if("([{".includes(ch))stack.push(ch),tok+=parseBraces(stack);else if(tok+=ch,ch==right)break}return tok},chars=spec.split("").filter((c=>!isWhitespace(c))).reverse(),tokens=[];for(;chars.length>0;){const ch=chars.pop();if("p"==ch||"@"==ch)tokens.push(ch),tokens.push(parseBraces(chars));else if("*"==ch){const num=extractIntegers(parseBraces(chars)),form=parseBraces(chars);if(num&&form.length>=3){const inner=form.substring(1,form.length-1).split("");inner.reverse();for(let i=0;i<num;++i)chars.push(...inner)}}else"([{".includes(ch)?(chars.push(ch),tokens.push(parseBraces(chars))):tokens.push(ch)}return tokens}(nodeContentsAsText(tabArgs[tabArgs.length-1].contents)),row_count=table_view.model.row_count;let col_idx=0;for(let[i,ch]of spec.entries())if("lrc".includes(ch)&&col_idx<num_columns){const align={l:"left",r:"right",c:"center"}[ch];table_view.forEachCellViewInColumn((cell=>{cell.style.setHorizontalAlign(align)}),col_idx),++col_idx}else if("|"==ch[0])for(let r=0;r<row_count;++r)col_idx<num_columns&&table_view.toggleVerticalBorder("left",r,col_idx),col_idx>0&&table_view.toggleVerticalBorder("right",r,col_idx-1);else"@!><{".includes(ch[0])||++col_idx}for(let[row_idx,row]of rows.entries()){let column=0;for(let cell of row.contents||[]){const model_cell=table.getCell(row_idx,column,!0),props={},cell_text=nodeContentsAsText(cell,props).trim();model_cell.value(cell_text);const[rowspan,colspan]=getCellSpan(cell);(colspan>1||rowspan>1)&&model_cell.rowspan()>=1&&table.mergeCells(row_idx,column,row_idx+rowspan-1,column+colspan-1);const cell_style=table_view.getCellView(row_idx,column).style;props.textbf&&cell_style.toggleFontStyle("bold"),props.textit&&cell_style.toggleFontStyle("italic"),props.underline&&cell_style.toggleFontStyle("underline"),props.alignCenter?cell_style.setHorizontalAlign("center"):props.alignLeft?cell_style.setHorizontalAlign("left"):props.alignRight&&cell_style.setHorizontalAlign("right"),props.borderLeft&&cell_style.addBorder("left"),props.borderRight&&cell_style.addBorder("right"),column+=colspan}processHlines(row.rules,row_idx,table_view)}rows.length>1&&isWhitespace(nodeContentsAsText(rows[rows.length-1]))&&table_view.model.removeRow(rows.length-1)}const isWhitespace=c=>/^\s*$/.test(c);function processHlines(rules,row_idx,table_view){const fullLineRules=["\\bottomrule","\\toprule","\\midrule","\\hline","\\topline","\\bottomline","\\midline"],is_last_row=row_idx+1==table_view.model.row_count,border_type=is_last_row?"bottom":"top",target_row_idx=is_last_row&&row_idx>0?row_idx-1:row_idx;for(let rule of rules.contents)if(fullLineRules.includes(rule))table_view.toggleHorizontalBorder(border_type,target_row_idx);else if(rule.includes("\\cline")||rule.includes("\\cmidline")||rule.includes("\\cmidrule")){const span=extractIntegers(rule);2==span.length?table_view.toggleHorizontalBorder(border_type,target_row_idx,span[0]-1,span[1]-1):console.error("Unsupported form of cline")}}return function(latex_code,table_view){table_view.reset();const text=latex_code.replace(/(^|[^\\])%.*$/gm,"$1");const m=grammar.match(text);if(m.succeeded()){const ast=function(res,mapping){if("function"!=typeof res.failed||res.failed())throw new Error("toAST() expects a succesful MatchResult as first parameter");mapping=Object.assign({},defaultMapping,mapping);const operation=Object.assign({},defaultOperation);for(const termName in mapping)"function"==typeof mapping[termName]&&(operation[termName]=mapping[termName],delete mapping[termName]);return res._cst.grammar.createSemantics().addOperation("toAST(mapping)",operation)(res).toAST(mapping)}(m,{doc:{contents:0},piece:{contents:1},env:{contents:1},envBody:{contents:0},tabularBody:{contents:0},tabular:{begin:0,args:1,contents:2},tabularBegin:{tag:0},row:{rules:0,contents:1},rules:{contents:1},cell:{contents:1},command:{contents:1},cmdBody:{contents:0},cmdBody_withArgs:{name:0,contents:1},cmdArg:{contents:0},bracketExp:{left:0,contents:1,right:2},justRows:{contents:0}});if(ast&&"doc"==ast.type&&"justRows"==ast.contents.type)rowsToTableView(ast.contents.contents.contents,table_view);else{const tabular=findFirstChild(ast,"tabular");tabular?function(root,table_view){root.contents&&root.contents.contents?rowsToTableView(root.contents.contents,table_view,root.args):console.error(`No rows in the table ${root}`)}(tabular,table_view):console.error("Cannot find tabular")}}else console.error("Parsing failed")}}();